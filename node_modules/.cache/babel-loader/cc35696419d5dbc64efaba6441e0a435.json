{"remainingRequest":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js!C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xxm\\work\\jd\\fore\\src\\views\\buttons\\CatOpinionListModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xxm\\work\\jd\\fore\\src\\views\\buttons\\CatOpinionListModal.vue","mtime":1576655828026},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js","mtime":1570779245522},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js","mtime":1570779225726}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { httpAction } from '@/api/manage';\nimport { getAction } from '@/api/manage';\nexport default {\n  name: \"UpdatePaperTitle\",\n  data: function data() {\n    var _this = this;\n\n    return {\n      title: \"操作\",\n      visible: false,\n      model: {},\n      dataSource: [],\n      index: [],\n      length: [],\n      columns: [{\n        title: '部门',\n        width: 100,\n        align: \"center\",\n        dataIndex: 'sdeptName',\n        customRender: function customRender(value, row, index) {\n          index = row.iid;\n          var obj = {\n            children: value,\n            attrs: {}\n          };\n          var merge = [];\n\n          for (var i = 0; i < _this.index.length; i += _this.length[i]) {\n            merge.push(_this.index[i]);\n          }\n\n          for (var _i = 0; _i < merge.length; _i++) {\n            if (index === merge[_i]) {\n              obj.attrs.rowSpan = _this.length[merge[_i]];\n            }\n\n            for (var j = 1; j < _this.length[merge[_i]]; j++) {\n              if (index === _this.index[merge[_i] + _this.length[merge[_i]] - j]) {\n                obj.attrs.rowSpan = 0;\n              }\n            }\n          }\n\n          return obj;\n        }\n      }, {\n        title: '姓名',\n        align: \"center\",\n        width: 130,\n        dataIndex: 'sname'\n      }, {\n        title: '意见',\n        align: \"center\",\n        width: 150,\n        dataIndex: 'sopinion'\n      }],\n      labelCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 5\n        }\n      },\n      wrapperCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 16\n        }\n      },\n      confirmLoading: false,\n      form: this.$form.createForm(this),\n      validatorRules: {},\n      url: {\n        opinion: \"/oaBus/oaBusdataOpinion/getOpinionList\"\n      }\n    };\n  },\n  created: function created() {},\n  methods: {\n    show: function show(record) {\n      console.log(record);\n      this.visible = true;\n      this.getOpinionList(record);\n    },\n    getOpinionList: function getOpinionList(record) {\n      var _this2 = this;\n\n      var url = this.url.opinion;\n      getAction(url, {\n        table: record.opinionTable,\n        iBusdataId: record.i_id,\n        sTaskdefKey: record.sTaskdefKey\n      }).then(function (res) {\n        _this2.dataSource = res.result;\n        var map = {};\n        var collation = _this2.dataSource; //type\n\n        for (var i in collation) {\n          var optionType = collation[i]; //type-data\n\n          for (var oaIndex in optionType.oa) {\n            var key = optionType.name + '-' + optionType.oa[oaIndex].sdeptName;\n\n            if (map[key] == undefined) {\n              map[key] = [];\n              map[key].push(optionType.oa[oaIndex]);\n            } else {\n              map[key].push(optionType.oa[oaIndex]);\n            }\n          }\n        } // console.log('-------->>>>',JSON.stringify(map))\n\n\n        var opinionData = JSON.parse(JSON.stringify(map));\n\n        for (var _i2 = 0; _i2 < _this2.dataSource.length; _i2++) {\n          for (var j = 0; j < _this2.dataSource[_i2].oa.length; j++) {\n            _this2.index.push(_this2.dataSource[_i2].oa[j].iid);\n\n            _this2.length.push(opinionData[_this2.dataSource[_i2].oa[j].opinionName + '-' + _this2.dataSource[_i2].oa[j].sdeptName].length);\n          }\n        }\n      });\n    },\n    close: function close() {\n      this.$emit('close');\n      this.visible = false;\n    },\n    handleOk: function handleOk() {\n      var that = this;\n      that.close();\n    },\n    handleCancel: function handleCancel() {\n      this.close();\n    }\n  }\n};",{"version":3,"sources":["CatOpinionListModal.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <a-modal\r\n    :title=\"title\"\r\n    :width=\"1000\"\r\n    :visible=\"visible\"\r\n    @ok=\"handleOk\"\r\n    :confirmLoading=\"confirmLoading\"\r\n    @cancel=\"handleCancel\"\r\n    cancelText=\"关闭\">\r\n    <div v-for=\"(item,index) in dataSource\">\r\n      <p class=\"title\"><span>{{item.name}}</span></p>\r\n      <a-table ref=\"table\"\r\n               size=\"middle\"\r\n               bordered\r\n               :columns=\"columns\"\r\n               :dataSource=\"item.oa\"\r\n               :pagination=\"false\"\r\n      >\r\n      </a-table>\r\n    </div>\r\n  </a-modal>\r\n</template>\r\n\r\n<script>\r\n  import {httpAction} from '@/api/manage'\r\n  import {getAction} from '@/api/manage'\r\n\r\n  export default {\r\n    name: \"UpdatePaperTitle\",\r\n    data() {\r\n      return {\r\n        title: \"操作\",\r\n        visible: false,\r\n        model: {},\r\n        dataSource: [],\r\n        index: [],\r\n        length: [],\r\n        columns: [\r\n          {\r\n            title: '部门',\r\n            width: 100,\r\n            align: \"center\",\r\n            dataIndex: 'sdeptName',\r\n            customRender: (value, row, index) => {\r\n              index = row.iid\r\n              const obj = {\r\n                children: value,\r\n                attrs: {}\r\n              };\r\n              let merge = [];\r\n              for (let i = 0; i < this.index.length; i += this.length[i]) {\r\n                merge.push(this.index[i]);\r\n              }\r\n              for (let i = 0; i < merge.length; i++) {\r\n                if (index === merge[i]) {\r\n                  obj.attrs.rowSpan = this.length[merge[i]];\r\n                }\r\n\r\n                for (let j = 1; j < this.length[merge[i]]; j++) {\r\n                  if (index === this.index[merge[i] + this.length[merge[i]] - j]) {\r\n                    obj.attrs.rowSpan = 0;\r\n                  }\r\n                }\r\n              }\r\n              return obj\r\n            }\r\n          },\r\n          {\r\n            title: '姓名',\r\n            align: \"center\",\r\n            width: 130,\r\n            dataIndex: 'sname'\r\n          },\r\n          {\r\n            title: '意见',\r\n            align: \"center\",\r\n            width: 150,\r\n            dataIndex: 'sopinion',\r\n          }\r\n        ],\r\n        labelCol: {\r\n          xs: {span: 24},\r\n          sm: {span: 5},\r\n        },\r\n        wrapperCol: {\r\n          xs: {span: 24},\r\n          sm: {span: 16},\r\n        },\r\n        confirmLoading: false,\r\n        form: this.$form.createForm(this),\r\n        validatorRules: {},\r\n        url: {\r\n          opinion: \"/oaBus/oaBusdataOpinion/getOpinionList\"\r\n        },\r\n      }\r\n    },\r\n    created() {\r\n\r\n    },\r\n    methods: {\r\n      show(record) {\r\n        console.log(record)\r\n        this.visible = true;\r\n        this.getOpinionList(record);\r\n      },\r\n      getOpinionList(record) {\r\n        let url = this.url.opinion;\r\n        getAction(url, {table:record.opinionTable, iBusdataId:record.i_id, sTaskdefKey:record.sTaskdefKey}).then((res) => {\r\n          this.dataSource = res.result;\r\n\r\n          var map = {}\r\n          let collation = this.dataSource\r\n          //type\r\n          for (let i in collation) {\r\n            let optionType = collation[i]\r\n            //type-data\r\n            for (let oaIndex in optionType.oa) {\r\n              let key = optionType.name + '-' + optionType.oa[oaIndex].sdeptName\r\n              if (map[key] == undefined) {\r\n                map[key] = []\r\n                map[key].push(optionType.oa[oaIndex])\r\n              } else {\r\n                map[key].push(optionType.oa[oaIndex])\r\n              }\r\n            }\r\n          }\r\n          // console.log('-------->>>>',JSON.stringify(map))\r\n          let opinionData = JSON.parse(JSON.stringify(map));\r\n          for (let i = 0; i < this.dataSource.length; i++) {\r\n            for (let j = 0; j < this.dataSource[i].oa.length; j++) {\r\n              this.index.push(this.dataSource[i].oa[j].iid);\r\n              this.length.push(opinionData[this.dataSource[i].oa[j].opinionName + '-' + this.dataSource[i].oa[j].sdeptName].length);\r\n            }\r\n\r\n          }\r\n        })\r\n      },\r\n      close() {\r\n        this.$emit('close');\r\n        this.visible = false;\r\n      },\r\n      handleOk() {\r\n        const that = this;\r\n        that.close();\r\n      },\r\n      handleCancel() {\r\n        this.close()\r\n      },\r\n\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n  .title {\r\n    width: 100%;\r\n    height: 40px;\r\n    background: #2eabff;\r\n    color: #ffffff;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: flex-start;\r\n    /*letter-spacing: 20px;*/\r\n    margin-top: 10px;\r\n\r\n    span {\r\n      margin-left: 20px;\r\n    }\r\n  }\r\n\r\n</style>"],"sourceRoot":"src/views/buttons"}]}
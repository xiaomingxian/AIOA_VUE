{"remainingRequest":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js!C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xxm\\work\\jd\\fore\\src\\views\\oaTeamwork\\modules\\CollaborativePreviewModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xxm\\work\\jd\\fore\\src\\views\\oaTeamwork\\modules\\CollaborativePreviewModal.vue","mtime":1579417279505},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js","mtime":1570779245522},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js","mtime":1570779225726}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { httpAction, getAction, postAction } from '@/api/manage';\nimport pick from 'lodash.pick';\nimport moment from \"moment\";\nexport default {\n  name: \"CollaborativePreviewModal\",\n  data: function data() {\n    return {\n      title: \"操作\",\n      visible: false,\n      modelList: [],\n      selectList: [],\n      busModelId: '',\n      listqq: [],\n      modelId: '',\n      findMax: '',\n      tableName: [],\n      total: '',\n      functionId: '',\n      num: '',\n      model: {\n        iteamworkId: '',\n        steamworkName: '',\n        iversion: ''\n      },\n      labelCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 5\n        }\n      },\n      wrapperCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 16\n        }\n      },\n      confirmLoading: false,\n      form: this.$form.createForm(this),\n      validatorRules: {\n        iId: {\n          rules: [{\n            required: true,\n            message: '请输入主键id!'\n          }]\n        }\n      },\n      url: {\n        add: \"/oateamwork/oaTeamworkSet/add\",\n        Setlist: \"/oaTea/oaTeamworkInst/querylist\",\n        edit: \"/oateamwork/oaTeamworkSet/edit\",\n        queryListL: \"/oateamwork/oaTeamworkSet/list\",\n        findMax: \"/oateamwork/oaTeamworkSet/findMax\",\n        selectTaskType: '/oaBus/newTask/findModelPermit1',\n        selectTaskDetail: '/oaBus/newTask/findFunctionPermit'\n      }\n    };\n  },\n  created: function created() {},\n  methods: {\n    openXieTong: function openXieTong(e, d, i) {\n      if (this.IntsList[i] == undefined) {\n        this.$message.warning(\"没有业务数据\");\n      } else if (this.listqq[i].tableName != null && this.IntsList[i].busDataId != undefined) {\n        window.open(window.location.origin + '/mytask/taskList/Test-detailFile?tableName=' + this.listqq[i].tableName + '&busdataId=' + this.IntsList[i].busDataId + '&navisshow=false');\n      }\n    },\n    open: function open(e) {\n      var _this = this;\n\n      this.visible = true;\n      this.model.iteamworkId = e.iid;\n      this.model.steamworkName = e.steamworkName;\n      this.model.iversion = e.iversion; //查询实例表里面的东西，为了确定走到那个步骤\n\n      getAction(this.url.Setlist, {\n        iVersion: e.iversion\n      }).then(function (res) {\n        _this.total = res.result.length;\n        _this.IntsList = res.result;\n      }); //查出该所有的协同办公\n\n      getAction(this.url.queryListL, {\n        iTeamworkId: e.iteamworkId\n      }).then(function (res) {\n        _this.listqq = res.result.records;\n      });\n    },\n    close: function close() {\n      this.$emit('close');\n      this.visible = false;\n    },\n    handleOk: function handleOk() {\n      var _this2 = this;\n\n      var that = this;\n\n      if (this.$refs.indexStep.value < this.num) {\n        this.$message.warning(this.findMax);\n        return;\n      } // 触发表单验证\n\n\n      this.form.validateFields(function (err, values) {\n        if (!err) {\n          that.confirmLoading = true;\n          console.log(_this2.isadd);\n          var httpurl = '';\n          var method = '';\n\n          if (_this2.isadd) {\n            httpurl += _this2.url.add;\n            method = 'post';\n          } else {\n            httpurl += _this2.url.edit;\n            method = 'put';\n          }\n\n          var formData = Object.assign(_this2.model, values); //时间格式化\n\n          /*formData.dCreateTime = formData.dCreateTime?formData.dCreateTime.format('YYYY-MM-DD HH:mm:ss'):null;\n          formData.dUpdateTime = formData.dUpdateTime?formData.dUpdateTime.format('YYYY-MM-DD HH:mm:ss'):null;\n          */\n\n          console.log(formData);\n          httpAction(httpurl, formData, method).then(function (res) {\n            if (res.success) {\n              that.$message.success(res.message); //告诉父级组件我已关闭  关闭后刷新父级列表\n\n              that.$emit('submit', true);\n            } else {\n              that.$message.warning(res.message);\n            }\n          }).finally(function () {\n            that.confirmLoading = false;\n            that.close();\n          });\n        }\n      });\n    },\n    handleCancel: function handleCancel() {\n      this.close();\n    }\n  }\n};",{"version":3,"sources":["CollaborativePreviewModal.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <a-modal\r\n    :title=\"title\"\r\n    :width=\"500\"\r\n    :visible=\"visible\"\r\n    :confirmLoading=\"confirmLoading\"\r\n    @ok=\"handleOk\"\r\n    @cancel=\"handleCancel\"\r\n    cancelText=\"关闭\">\r\n    \r\n    <a-spin :spinning=\"confirmLoading\">\r\n   <!--  <div style=\"margin-bottom: 10px; \"><img  style=\"height: 15px; width: 20px\" src=\"../../../assets/矢量智能对象@2x.png\" alt=\"\"> <span style=\"margin-left: 10px\">协同办公</span>\r\n     </div>-->\r\n     <!-- <span style=\"margin-bottom: 10px; \">协同办公</span>-->\r\n      <br>\r\n      <!--<div class=\"boxLists\">-->\r\n        <!--<div class=\"itemBox\" v-for=\"(item,index) in listqq\" >-->\r\n\r\n          <!--<div  :key=\"index\"  style=\"width: 130px; height: 100px;border: 1px solid ;background-color: #b4d7ff\">-->\r\n            <!--{{item.iid}}-->\r\n          <!--</div>-->\r\n          <!--<img   style=\"height: 20px; width: 50px\" src=\"../../../assets/箭头@2x.png\" alt=\"\"/>-->\r\n\r\n        <!--</div>-->\r\n      <!--</div> direction=\"vertical\"-->\r\n      <a-steps  direction=\"vertical\"  :current=\"total\"  style=\"margin-left: 50px\">\r\n        <a-step class=\"step\" v-for=\"(item,index) in listqq\" @dblclick=\"openXieTong(item.tableName,item.busDataId,index)\"  :title=\"item.busFunctionName\" :description=\"item.dCreateTime\"></a-step>\r\n      </a-steps>\r\n\r\n    </a-spin>\r\n  </a-modal>\r\n</template>\r\n\r\n<script>\r\n  import { httpAction,getAction,postAction } from '@/api/manage'\r\n  import pick from 'lodash.pick'\r\n  import moment from \"moment\"\r\n\r\n  export default {\r\n    name: \"CollaborativePreviewModal\",\r\n    data () {\r\n      return {\r\n        title:\"操作\",\r\n        visible: false,\r\n        modelList: [],\r\n        selectList: [],\r\n        busModelId:'',\r\n        listqq:[],\r\n        modelId:'',\r\n        findMax:'',\r\n        tableName:[],\r\n        total:'',\r\n        functionId:'',\r\n        num:'',\r\n        model: {\r\n          iteamworkId:'',\r\n          steamworkName:'',\r\n          iversion:'',\r\n        },\r\n        labelCol: {\r\n          xs: { span: 24 },\r\n          sm: { span: 5 },\r\n        },\r\n        wrapperCol: {\r\n          xs: { span: 24 },\r\n          sm: { span: 16 },\r\n        },\r\n\r\n        confirmLoading: false,\r\n        form: this.$form.createForm(this),\r\n        validatorRules:{\r\n        iId:{rules: [{ required: true, message: '请输入主键id!' }]},\r\n        },\r\n        url: {\r\n          add: \"/oateamwork/oaTeamworkSet/add\",\r\n          Setlist: \"/oaTea/oaTeamworkInst/querylist\",\r\n          edit: \"/oateamwork/oaTeamworkSet/edit\",\r\n          queryListL:\"/oateamwork/oaTeamworkSet/list\",\r\n          findMax: \"/oateamwork/oaTeamworkSet/findMax\",\r\n          selectTaskType: '/oaBus/newTask/findModelPermit1',\r\n          selectTaskDetail: '/oaBus/newTask/findFunctionPermit',\r\n\r\n        },\r\n\r\n      }\r\n    },\r\n    created() {\r\n    },\r\n    methods: {\r\n      openXieTong(e,d,i){\r\n\r\n         if(this.IntsList[i] == undefined){\r\n           this.$message.warning(\"没有业务数据\");\r\n\r\n         }\r\n         else if(this.listqq[i].tableName != null &&  this.IntsList[i].busDataId != undefined){\r\n           window.open(window.location.origin+'/mytask/taskList/Test-detailFile?tableName='+this.listqq[i].tableName+'&busdataId='+this.IntsList[i].busDataId+'&navisshow=false')\r\n         }\r\n      },\r\n      open(e){\r\n        this.visible = true;\r\n        this.model.iteamworkId = e.iid\r\n        this.model.steamworkName = e.steamworkName\r\n        this.model.iversion = e.iversion;\r\n        //查询实例表里面的东西，为了确定走到那个步骤\r\n        getAction(this.url.Setlist, {iVersion: e.iversion}).then((res) => {\r\n          this.total  = res.result.length\r\n          this.IntsList =  res.result\r\n\r\n        })\r\n        //查出该所有的协同办公\r\n        getAction(this.url.queryListL, {iTeamworkId: e.iteamworkId}).then((res) => {\r\n          this.listqq = res.result.records;\r\n\r\n        })\r\n      },\r\n      close () {\r\n        this.$emit('close');\r\n        this.visible = false;\r\n      },\r\n      handleOk () {\r\n        const that = this;\r\n        if(this.$refs.indexStep.value<this.num){\r\n          this.$message.warning(this.findMax);\r\n          return ;\r\n        }\r\n        // 触发表单验证\r\n        this.form.validateFields((err, values) => {\r\n          if (!err) {\r\n            that.confirmLoading = true;\r\n            console.log(this.isadd)\r\n            let httpurl = '';\r\n            let method = '';\r\n            if (this.isadd) {\r\n              httpurl+=this.url.add;\r\n              method = 'post';\r\n            }else{\r\n              httpurl+=this.url.edit;\r\n               method = 'put';\r\n            }\r\n            let formData = Object.assign(this.model, values);\r\n            //时间格式化\r\n            /*formData.dCreateTime = formData.dCreateTime?formData.dCreateTime.format('YYYY-MM-DD HH:mm:ss'):null;\r\n            formData.dUpdateTime = formData.dUpdateTime?formData.dUpdateTime.format('YYYY-MM-DD HH:mm:ss'):null;\r\n            */\r\n\r\n    console.log(formData)\r\n    httpAction(httpurl,formData,method).then((res)=>{\r\n      if(res.success){\r\n        that.$message.success(res.message);\r\n        //告诉父级组件我已关闭  关闭后刷新父级列表\r\n        that.$emit('submit',true);\r\n      }else{\r\n        that.$message.warning(res.message);\r\n      }\r\n    }).finally(() => {\r\n      that.confirmLoading = false;\r\n      that.close();\r\n    })\r\n\r\n\r\n\r\n  }\r\n})\r\n},\r\nhandleCancel () {\r\nthis.close()\r\n},\r\n\r\n\r\n}\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.boxLists{\r\n  /*background: red;*/\r\n  display: flex;\r\n  align-items: center;\r\n  flex-wrap:wrap;\r\n  /*flex-direction: row-reverse;*/\r\n  .itemBox{\r\n    display: flex;\r\n    align-items: center;\r\n    margin-top: 20px;\r\n  }\r\n}\r\n\r\n  .step:hover{\r\n    cursor: pointer;\r\n  }\r\n</style>"],"sourceRoot":"src/views/oaTeamwork/modules"}]}
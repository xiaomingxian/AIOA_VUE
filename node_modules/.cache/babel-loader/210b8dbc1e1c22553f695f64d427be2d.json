{"remainingRequest":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js!C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xxm\\work\\jd\\fore\\src\\views\\modules\\monitor\\TomcatInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xxm\\work\\jd\\fore\\src\\views\\modules\\monitor\\TomcatInfo.vue","mtime":1577687869359},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js","mtime":1570779245522},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js","mtime":1570779225726}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.string.iterator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport moment from 'moment';\nimport { getAction } from '@/api/manage';\nmoment.locale('zh-cn');\nexport default {\n  data: function data() {\n    return {\n      time: '',\n      loading: true,\n      tableLoading: true,\n      columns: [{\n        title: '参数',\n        width: '30%',\n        dataIndex: 'param',\n        align: 'center',\n        scopedSlots: {\n          customRender: 'param'\n        }\n      }, {\n        title: '描述',\n        width: '40%',\n        dataIndex: 'text',\n        align: 'center',\n        scopedSlots: {\n          customRender: 'text'\n        }\n      }, {\n        title: '当前值',\n        width: '30%',\n        dataIndex: 'value',\n        align: 'center',\n        scopedSlots: {\n          customRender: 'value'\n        }\n      }],\n      dataSource: [],\n      // 列表通过 textInfo 渲染出颜色、描述和单位\n      textInfo: {\n        'tomcat.sessions.created': {\n          color: 'green',\n          text: 'tomcat 已创建 session 数',\n          unit: '个'\n        },\n        'tomcat.sessions.expired': {\n          color: 'green',\n          text: 'tomcat 已过期 session 数',\n          unit: '个'\n        },\n        'tomcat.sessions.active.current': {\n          color: 'green',\n          text: 'tomcat 当前活跃 session 数',\n          unit: '个'\n        },\n        'tomcat.sessions.active.max': {\n          color: 'green',\n          text: 'tomcat 活跃 session 数峰值',\n          unit: '个'\n        },\n        'tomcat.sessions.rejected': {\n          color: 'green',\n          text: '超过session 最大配置后，拒绝的 session 个数',\n          unit: '个'\n        },\n        'tomcat.global.sent': {\n          color: 'purple',\n          text: '发送的字节数',\n          unit: 'bytes'\n        },\n        'tomcat.global.request.max': {\n          color: 'purple',\n          text: 'request 请求最长耗时',\n          unit: '秒'\n        },\n        'tomcat.global.request.count': {\n          color: 'purple',\n          text: '全局 request 请求次数',\n          unit: '次'\n        },\n        'tomcat.global.request.totalTime': {\n          color: 'purple',\n          text: '全局 request 请求总耗时',\n          unit: '秒'\n        },\n        'tomcat.servlet.request.max': {\n          color: 'cyan',\n          text: 'servlet 请求最长耗时',\n          unit: '秒'\n        },\n        'tomcat.servlet.request.count': {\n          color: 'cyan',\n          text: 'servlet 总请求次数',\n          unit: '次'\n        },\n        'tomcat.servlet.request.totalTime': {\n          color: 'cyan',\n          text: 'servlet 请求总耗时',\n          unit: '秒'\n        },\n        'tomcat.threads.current': {\n          color: 'pink',\n          text: 'tomcat 当前线程数（包括守护线程）',\n          unit: '个'\n        },\n        'tomcat.threads.config.max': {\n          color: 'pink',\n          text: 'tomcat 配置的线程最大数',\n          unit: '个'\n        }\n      },\n      // 当一条记录中需要取出多条数据的时候需要配置该字段\n      moreInfo: {\n        'tomcat.global.request': ['.count', '.totalTime'],\n        'tomcat.servlet.request': ['.count', '.totalTime']\n      }\n    };\n  },\n  mounted: function mounted() {\n    this.loadTomcatInfo();\n  },\n  methods: {\n    handleClickUpdate: function handleClickUpdate() {\n      this.loadTomcatInfo();\n    },\n    loadTomcatInfo: function loadTomcatInfo() {\n      var _this = this;\n\n      this.tableLoading = true;\n      this.time = moment().format('YYYY年MM月DD日 HH时mm分ss秒');\n      Promise.all([getAction('actuator/metrics/tomcat.sessions.created'), getAction('actuator/metrics/tomcat.sessions.expired'), getAction('actuator/metrics/tomcat.sessions.active.current'), getAction('actuator/metrics/tomcat.sessions.active.max'), getAction('actuator/metrics/tomcat.sessions.rejected'), getAction('actuator/metrics/tomcat.global.sent'), getAction('actuator/metrics/tomcat.global.request.max'), getAction('actuator/metrics/tomcat.global.request'), // 2.1.3.RELEASE 无此API\n      //getAction('actuator/metrics/tomcat.servlet.request'),\n      // getAction('actuator/metrics/tomcat.servlet.request.max'),\n      getAction('actuator/metrics/tomcat.threads.current'), getAction('actuator/metrics/tomcat.threads.config.max')]).then(function (res) {\n        var tomcatInfo = [];\n        res.forEach(function (value, id) {\n          var more = _this.moreInfo[value.name];\n\n          if (!(more instanceof Array)) {\n            more = [''];\n          }\n\n          more.forEach(function (item, idx) {\n            var param = value.name + item;\n            tomcatInfo.push({\n              id: param + id,\n              param: param,\n              text: 'false value',\n              value: value.measurements[idx].value\n            });\n          });\n        });\n        _this.dataSource = tomcatInfo;\n      }).catch(function (e) {\n        console.error(e);\n\n        _this.$message.error('获取Tomcat信息失败');\n      }).finally(function () {\n        _this.loading = false;\n        _this.tableLoading = false;\n      });\n    }\n  }\n};",{"version":3,"sources":["TomcatInfo.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <a-skeleton active :loading=\"loading\" :paragraph=\"{rows: 17}\">\r\n    <a-card :bordered=\"false\">\r\n\r\n      <a-alert type=\"info\" :showIcon=\"true\">\r\n        <div slot=\"message\">\r\n          上次更新时间：{{ this.time }}\r\n          <a-divider type=\"vertical\"/>\r\n          <a @click=\"handleClickUpdate\">立即更新</a>\r\n        </div>\r\n      </a-alert>\r\n\r\n      <a-table\r\n        rowKey=\"id\"\r\n        size=\"middle\"\r\n        :columns=\"columns\"\r\n        :dataSource=\"dataSource\"\r\n        :pagination=\"false\"\r\n        :loading=\"tableLoading\"\r\n        style=\"margin-top: 20px;\"\r\n        :rowClassName=\"(record,index) => {\r\n              let className  = 'light-row';\r\n              if (index % 2 === 1) className = 'dark-row';\r\n              return className;\r\n          }\"\r\n      >\r\n\r\n        <template slot=\"param\" slot-scope=\"text, record\">\r\n          <a-tag :color=\"textInfo[record.param].color\">{{ text }}</a-tag>\r\n        </template>\r\n\r\n        <template slot=\"text\" slot-scope=\"text, record\">\r\n          {{ textInfo[record.param].text }}\r\n        </template>\r\n\r\n        <template slot=\"value\" slot-scope=\"text, record\">\r\n          {{ text }} {{ textInfo[record.param].unit }}\r\n        </template>\r\n\r\n      </a-table>\r\n\r\n    </a-card>\r\n  </a-skeleton>\r\n</template>\r\n<script>\r\n  import moment from 'moment'\r\n  import { getAction } from '@/api/manage'\r\n\r\n  moment.locale('zh-cn')\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        time: '',\r\n        loading: true,\r\n        tableLoading: true,\r\n        columns: [{\r\n          title: '参数',\r\n          width: '30%',\r\n          dataIndex: 'param',\r\n          align: 'center',\r\n          scopedSlots: { customRender: 'param' }\r\n        }, {\r\n          title: '描述',\r\n          width: '40%',\r\n          dataIndex: 'text',\r\n          align: 'center',\r\n          scopedSlots: { customRender: 'text' }\r\n        }, {\r\n          title: '当前值',\r\n          width: '30%',\r\n          dataIndex: 'value',\r\n          align: 'center',\r\n          scopedSlots: { customRender: 'value' }\r\n        }],\r\n        dataSource: [],\r\n        // 列表通过 textInfo 渲染出颜色、描述和单位\r\n        textInfo: {\r\n          'tomcat.sessions.created': { color: 'green', text: 'tomcat 已创建 session 数', unit: '个' },\r\n          'tomcat.sessions.expired': { color: 'green', text: 'tomcat 已过期 session 数', unit: '个' },\r\n          'tomcat.sessions.active.current': { color: 'green', text: 'tomcat 当前活跃 session 数', unit: '个' },\r\n          'tomcat.sessions.active.max': { color: 'green', text: 'tomcat 活跃 session 数峰值', unit: '个' },\r\n          'tomcat.sessions.rejected': { color: 'green', text: '超过session 最大配置后，拒绝的 session 个数', unit: '个' },\r\n\r\n          'tomcat.global.sent': { color: 'purple', text: '发送的字节数', unit: 'bytes' },\r\n          'tomcat.global.request.max': { color: 'purple', text: 'request 请求最长耗时', unit: '秒' },\r\n          'tomcat.global.request.count': { color: 'purple', text: '全局 request 请求次数', unit: '次' },\r\n          'tomcat.global.request.totalTime': { color: 'purple', text: '全局 request 请求总耗时', unit: '秒' },\r\n\r\n          'tomcat.servlet.request.max': { color: 'cyan', text: 'servlet 请求最长耗时', unit: '秒' },\r\n          'tomcat.servlet.request.count': { color: 'cyan', text: 'servlet 总请求次数', unit: '次' },\r\n          'tomcat.servlet.request.totalTime': { color: 'cyan', text: 'servlet 请求总耗时', unit: '秒' },\r\n\r\n          'tomcat.threads.current': { color: 'pink', text: 'tomcat 当前线程数（包括守护线程）', unit: '个' },\r\n          'tomcat.threads.config.max': { color: 'pink', text: 'tomcat 配置的线程最大数', unit: '个' }\r\n        },\r\n        // 当一条记录中需要取出多条数据的时候需要配置该字段\r\n        moreInfo: {\r\n          'tomcat.global.request': ['.count', '.totalTime'],\r\n          'tomcat.servlet.request': ['.count', '.totalTime']\r\n        }\r\n      }\r\n    },\r\n    mounted() {\r\n      this.loadTomcatInfo()\r\n    },\r\n    methods: {\r\n\r\n      handleClickUpdate() {\r\n        this.loadTomcatInfo()\r\n      },\r\n\r\n      loadTomcatInfo() {\r\n        this.tableLoading = true\r\n        this.time = moment().format('YYYY年MM月DD日 HH时mm分ss秒')\r\n        Promise.all([\r\n          getAction('actuator/metrics/tomcat.sessions.created'),\r\n          getAction('actuator/metrics/tomcat.sessions.expired'),\r\n          getAction('actuator/metrics/tomcat.sessions.active.current'),\r\n          getAction('actuator/metrics/tomcat.sessions.active.max'),\r\n          getAction('actuator/metrics/tomcat.sessions.rejected'),\r\n          getAction('actuator/metrics/tomcat.global.sent'),\r\n          getAction('actuator/metrics/tomcat.global.request.max'),\r\n          getAction('actuator/metrics/tomcat.global.request'),\r\n          // 2.1.3.RELEASE 无此API\r\n          //getAction('actuator/metrics/tomcat.servlet.request'),\r\n          // getAction('actuator/metrics/tomcat.servlet.request.max'),\r\n          getAction('actuator/metrics/tomcat.threads.current'),\r\n          getAction('actuator/metrics/tomcat.threads.config.max')\r\n        ]).then((res) => {\r\n          let tomcatInfo = []\r\n          res.forEach((value, id) => {\r\n            let more = this.moreInfo[value.name]\r\n            if (!(more instanceof Array)) {\r\n              more = ['']\r\n            }\r\n            more.forEach((item, idx) => {\r\n              let param = value.name + item\r\n              tomcatInfo.push({\r\n                id: param + id, param,\r\n                text: 'false value',\r\n                value: value.measurements[idx].value\r\n              })\r\n            })\r\n          })\r\n          this.dataSource = tomcatInfo\r\n        }).catch((e) => {\r\n          console.error(e)\r\n          this.$message.error('获取Tomcat信息失败')\r\n        }).finally(() => {\r\n          this.loading = false\r\n          this.tableLoading = false\r\n        })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style></style>\r\n"],"sourceRoot":"src/views/modules/monitor"}]}
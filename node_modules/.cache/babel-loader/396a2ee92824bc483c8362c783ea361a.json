{"remainingRequest":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js!C:\\xxm\\work\\jd\\fore\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\xxm\\work\\jd\\fore\\src\\views\\buttons\\btn-js\\taskBtn.js","dependencies":[{"path":"C:\\xxm\\work\\jd\\fore\\src\\views\\buttons\\btn-js\\taskBtn.js","mtime":1579680908875},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js","mtime":1570779245522},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":1570780125155}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\n\n/**\r\n * 新增修改完成调用 modalFormOk方法 编辑弹框组件ref定义为modalForm\r\n * 高级查询按钮调用 superQuery方法  高级查询组件ref定义为superQueryModal\r\n * data中url定义 list为查询列表  delete为删除单条记录  deleteBatch为批量删除\r\n */\nimport { filterObj } from '@/utils/util';\nimport { deleteAction, downFile, getAction, postAction } from '@/api/manage';\nimport { ACCESS_TOKEN } from \"@/store/mutation-types\";\nimport { JeecgListMixin } from '@/mixins/JeecgListMixin';\nimport { ntkoBrowser } from \"./ntkobackground.min.js\";\nexport var taskBth = {\n  //接收父组件传值\n  props: ['backData', 'busFunction', 'taskMsg', 'opts', 'backDataOpt'],\n  inject: ['reload'],\n  data: function data() {\n    return {\n      //按钮展示\n      btn: [],\n      defindBtns: [],\n      //按钮组二\n      currentBtn: '',\n      currentUserMessage: '',\n      dictData: {\n        dictUnitId: '',\n        //数据字典-中支id\n        dictFunctionId: '',\n        //数据字典-业务id\n        modelId: '',\n        //根据字典值查询获取\n        table: '',\n        //根据字典值查询获取\n        unitName: \"\",\n        //上报中支名称\n        unitId: ''\n      },\n      flag: false,\n      //填写环节控制\n      isSaveFlag: false,\n      //是否填写\n      usersData: [],\n      //传阅收文管理员角色用户\n      visibleModel: false,\n      //提示框\n      ntko: {},\n      fileName: '',\n      nextConfirm: false,\n      havaOtherProc: false,\n      haveEnd: false,\n      //是否已办结\n      otherProc: {\n        busData: {},\n        taskMsg: {}\n      },\n      url: {\n        delete: '/oaBus/dynamic/delete',\n        //删除数据\n        insert: '/oaBus/dynamic/insert',\n        //动态插入数据\n        queryById: '/oaBus/dynamic/queryById',\n        //查询数据\n        newPublicFileSend: '/oaouttransdata/oaOutTransData/newPublicFileSend',\n        //新公文传输\n        recordFileSend: '/oaouttransdata/oaOutTransData/recordFileSend',\n        //档案系统接口\n        //TODO(仅标识) *********************************************    WorkFlow   START   ******************************\n        start: '/wf/task/start',\n        //开启流程\n        insertDataAndStartPro: '/oaBus/newTask/insertDataAndStartPro',\n        //保存业务同时开启流程\n        nextUsers: '/oaBus/taskInAct/nextUserQuery',\n        endProUrl: '/wf/task/endProcess',\n        showBackAct: '/wf/task/showBackAct',\n        //展示回退/跳转 节点\n        currentUserMsg: '/sys/user/getUserSectionInfoByToken',\n        currentUserQuery: '/oaBus/taskInAct/currentUserQuery',\n        //查询form信息\n        doTask: '/oaBus/taskInAct/doTask',\n        doTaskMore: '/oaBus/taskInAct/doTaskMore',\n        taskWithDepartSave: '/oaBus/taskInAct/taskWithDepartSave',\n        downloadFiles: '/oaBus/oaFile/downloadZipFile',\n        queryAllHaveDone: '/wf/task/queryAllHaveDone',\n        //可撤回节点\n        reCallTask: 'wf/task/reCallTask',\n        //撤回到上一步\n        departFinish: 'wf/task/departFinish',\n        lastVersionProc: 'wf/process/lastVersionProc',\n        addUserOrDepart: 'oaBus/taskInAct/addUsersQuery',\n        doAddUsers: '/oaBus/taskInAct/doAddUsers',\n        //TODO(仅标识) *********************************************    WorkFlow   END   ********************************\n        // downloadFiles: '/oaBus/oaFile/downloadZipFile',\n        sendMeetingInform: '/oaBus/meetingInform/sendMeetingInform',\n        //发送通知\n        commitPer: '/oaBus/oaBusdata/commitPer',\n        //发布按钮\n        updateBusdata: '/oaBus/dynamic/update',\n        //动态修改数据\n        updateData: '/oaBus/dynamic/updateData',\n        //普通修改数据\n        busDataAndColums: 'oaBus/oaBusdata/queryBusdataById',\n        //查询业务详情\n        isUpdateOpinion: '/oaBus/dynamic/updateOpinion',\n        getDictByKey: '/sys/dict/getDictByKeyObj',\n        //数据字典值获取\n        queryByFunctionId: '/oaBus/dynamic/queryModelByFunctionId',\n        //根据functionid查询模块信息\n        upSendFile: '/oaBus/dynamic/upSendFile' //上报\n\n      },\n      butArrLists: null,\n      // 按钮组列表\n      iisDefend: false //默认按钮可点击\n\n    };\n  },\n  created: function created() {\n    //监听页签切换   切换至当前页时刷新底部按钮接口\n    var _this = this;\n\n    document.addEventListener('visibilitychange', function () {\n      // alert(document.hidden)\n      // document.title = document.hidden?'拜拜11111':' 回来啦2222'\n      if (document.hidden) {\n        _this.showBtn(_this.butArrLists);\n      }\n    });\n  },\n  methods: {\n    //将起草底稿按钮改为编辑底稿\n\n    /*alertBtnStaus(flagValue,dealBtn){\r\n      alert(flagValue) ;\r\n      let k = -1 ;\r\n      console.log(flagValue)\r\n      for(let i = 0 ; i < this.btn.length ; i ++){\r\n        if(this.btn[i].smethod == flagValue){\r\n          console.log(this.btn[i])\r\n          k = i ;\r\n          break ;\r\n          //alert(k)\r\n        }\r\n      }\r\n      if(k >=0){\r\n        //如果dealBtn为空的话，不插入数据，如果不为空的话，就可以将数据插入到起草底稿的位置\r\n        if(dealBtn == undefined || JSON.stringify(dealBtn) == '{}'){\r\n          this.btn.splice(k,1)\r\n        }else{\r\n          this.btn.splice(k,1,dealBtn)\r\n        }\r\n      }\r\n      //this.btnObj[flagValue] = false ;\r\n    },\r\n    */\n    //TODO(仅标识)**********************************************  BASE START   ******************************************\n    //方法路由\n    method_router: function method_router(item, index) {\n      // console.log(item);\n      // console.log( this.$refs.isDefendBtn[index]);\n      // console.log( this.$refs.isNotDefendBtn[index]);\n      // // console.log( this.$refs.btn[index]);\n      this.currentBtn = item;\n\n      if (this.$refs.isDefendBtn[index]) {\n        if (!item.iisDefend && item.sbtnName == this.$refs.isDefendBtn[index].$el.innerText) {\n          this.$refs.isDefendBtn[index].$el.setAttribute('disabled', true);\n        }\n      }\n\n      if (this.$refs.isNotDefendBtn) {\n        if (this.$refs.isNotDefendBtn[index]) {\n          if (!item.iisDefend && item.sbtnName == this.$refs.isNotDefendBtn[index].$el.innerText) {\n            this.$refs.isNotDefendBtn[index].$el.setAttribute('disabled', true);\n            this.$refs.isNotDefendBtn[index].$el.style.opacity = '.6';\n          }\n        }\n      }\n\n      this[item.smethod]();\n    },\n    doPost: function doPost(url, data) {\n      var _this2 = this;\n\n      postAction(url, data).then(function (res) {\n        if (res.success) {\n          _this2.$message.success(res.message);\n        } else {\n          _this2.$message.error(res.message);\n        }\n      });\n    },\n    doGet: function doGet(url, data) {\n      var _this3 = this;\n\n      getAction(url, data).then(function (res) {\n        if (res.success) {\n          _this3.$message.success(res.message);\n        } else {\n          _this3.$message.error(res.message);\n        }\n      });\n    },\n    //关注件--是否重要\n    important: function important() {\n      this.$emit('iIsImportantObj');\n    },\n    //销假\n    destoryDay: function destoryDay() {\n      // //console.log(\"-----------------------\")\n      this.$emit('destoryObj');\n    },\n    //保存按钮\n    saveBusData: function saveBusData() {\n      var _this4 = this;\n\n      //console.log(\"业务数据====》\", this.backData);\n      //console.log(\"业务配置====》\", this.busFunction);\n      //校验是否有发布范围、流程\n      if (this.busFunction.iisLimits == 0 && this.busFunction.iisProc == 0) {\n        var queryParam = {};\n        queryParam.i_bus_function_id = this.busFunction.iid;\n        queryParam.table = this.backData.table + '_permit';\n        queryParam.i_busdata_id = this.backData.i_id;\n        postAction(this.url.queryById, queryParam).then(function (res) {\n          if (res.success && res.result == null) {\n            queryParam.s_userunit_id = _this4.backData.s_create_unitid;\n            postAction(_this4.url.insert, queryParam).then(function (res) {});\n          }\n        });\n      }\n\n      this.$emit('savaObj');\n    },\n    //删除按钮\n    deleteBusData: function deleteBusData() {\n      var _this5 = this;\n\n      var param = {};\n      param.table = this.backData.table;\n      param.i_id = this.backData.i_id; // console.log(JSON.stringify(this.taskMsg))\n\n      if (this.taskMsg.processInstanceId != undefined) {\n        param.processInstanceId = this.taskMsg.processInstanceId;\n      }\n\n      postAction(\"/oaBus/dynamic/deleteBusdata\", param).then(function (res) {\n        if (res.success) {\n          _this5.$message.success(res.message);\n\n          setTimeout(function () {\n            this.close();\n          }, 500);\n        } else {\n          _this5.$message.error(res.message);\n        }\n      });\n    },\n    //关闭按钮\n    close: function close() {\n      // this.$router.go(-1);\n      // this.$emit(\"close\")\n      window.close();\n    },\n    //展示按钮\n    showBtn: function showBtn(btn) {\n      var _this6 = this;\n\n      //console.log(btn);\n      this.butArrLists = btn;\n      this.btn = btn.isNotDefend;\n      this.defindBtns = btn.isDefend;\n      getAction(this.url.currentUserMsg).then(function (res) {\n        if (res.success) {\n          _this6.currentUserMessage = res.result;\n        } else {\n          _this6.$message.error(res.message);\n        }\n      });\n    },\n    cancel: function cancel() {//console.log('==>>>>>>取消>>>>>>', JSON.stringify(this.backData))\n    },\n    reload2: function reload2() {\n      this.reload();\n    },\n    //按钮校验\n    checkBtnBeforeNext: function checkBtnBeforeNext(value) {\n      switch (value) {\n        //判断是否已经起草底稿\n        case \"qiCao\":\n          if (this.backData.i_is_draft != 1) {\n            this.$message.error(\"请先起草底稿！！！\");\n            return false;\n            break;\n          }\n\n        //判断是否已经正文排版\n\n        case 'zwPaiBan':\n          if (undefined && this.backData.i_is_typeset != 1) {\n            this.$message.error(\"请先进行正文排版！！！\");\n            return false;\n            break;\n          }\n\n        case 'saveBanWen':\n          if (this.backData.i_is_approve != 1) {\n            this.$message.error(\"请先保存办文单！！！\");\n            return false;\n            break;\n          }\n\n        default:\n          return true;\n      }\n    },\n    //TODO(仅标识)**********************************************   BASE  END   ******************************************\n    //TODO(仅标识)***************************************************** 工作流相关 START *********************************\n    //追加办理人\n    addUserOrDepart: function addUserOrDepart() {\n      var _this7 = this;\n\n      //查询下n个节点 找出其中可追加的\n      if (this.taskMsg.hiTaskId == undefined || this.taskMsg.hiTaskId == null) {\n        this.$message.error('非已办任务不可追加');\n        return;\n      }\n\n      var hiTaskId = this.taskMsg.hiTaskId;\n      getAction(this.url.addUserOrDepart + '?taskId=' + hiTaskId).then(function (res) {\n        if (res.success) {\n          // this.$refs.addUsersModal\n          _this7.$refs.addUsersModal.showNextUsers(res.result);\n        } else {\n          _this7.$message.error(res.message);\n        }\n      });\n    },\n    //下一任务查询(节点)\n    nextTaskQuery: function nextTaskQuery() {\n      if (this.nextConfirm) {\n        this.$message.error('该环节任务已经办理请勿重复点击');\n        return;\n      } // //校验意见\n      // if (this.flag) {    //如果要填写意见的话，就进行校验\n      //   if (!this.isSaveFlag) {  //如果没有填写\n      //     this.$message.error(\"下一任务前必须填写意见！！！\");\n      //     return;\n      //   }\n      // }\n      // // 按钮校验\n      // if (this.btn != undefined && this.btn.length > 0) {\n      //   console.log(JSON.stringify(this.btn))\n      //   for (let i = 0; i < this.btn.length; i++) {\n      //     //查看是否要校验按钮\n      //     if (this.btn[i].iisCheckbus == 1) {\n      //       let checkFlagBtn = this.checkBtnBeforeNext(this.btn[i].smethod);\n      //       if (!checkFlagBtn) {\n      //         return;\n      //         break;\n      //       }\n      //     }\n      //   }\n      // }\n      // //this.$emit('checkData')\n      // this.$emit(\"nextCheckDataFun\")\n      // //获取store changeCheckDataFlag\n      // if (this.$store.state.checkDataFlag) {\n      //   this.nextRealQuery()\n      // }\n\n\n      this.nextRealQuery();\n    },\n    nextRealQuery: function nextRealQuery() {\n      var _this8 = this;\n\n      if (this.taskMsg.id == undefined && this.taskMsg.hiTaskId != undefined) {\n        this.$message.error('已办环节没有下一任务');\n        return;\n      } //根据当前节点查到下几个节点再去表里查具体信息\n\n\n      getAction(this.url.nextUsers, {\n        procDefkey: this.backData.s_cur_proc_name,\n        drafterId: this.backData.s_create_by,\n        taskId: this.taskMsg.id,\n        taskDefinitionKey: this.taskMsg.taskDefinitionKey\n      }).then(function (res) {\n        //展示数据\n        if (res.success) {\n          _this8.$refs.nextUsers.showNextUsers(res.result);\n        } else {\n          _this8.$message.error(res.message);\n        }\n      });\n    },\n    //按钮-共享\n    shareFile: function shareFile() {\n      var _this9 = this;\n\n      postAction('oaBus/dynamic/shareFile', this.backData).then(function (res) {\n        if (res.success && res.result == true) {\n          _this9.$message.success(\"共享完成\");\n        } else {\n          _this9.$message.error(\"请检查相关配置是否完善\");\n        }\n      });\n    },\n    //按钮-内部传阅\n    insideReading: function insideReading() {\n      var _this10 = this;\n\n      //数据字典获取functionID\n      getAction(this.url.getDictByKey, {\n        dictKey: 'btn_insideSend'\n      }).then(function (res) {\n        if (res.success && res.result[0].value != undefined) {\n          _this10.dictData.dictUnitId = res.result[0].text; //中支id\n\n          _this10.dictData.dictFunctionId = res.result[0].value; //functionid\n          //根据functionid查询模块信息\n\n          getAction(_this10.url.queryByFunctionId, {\n            functionId: _this10.dictData.dictFunctionId\n          }).then(function (res) {\n            if (res.success) {\n              _this10.dictData.table = res.result.s_busdata_table;\n              _this10.dictData.modelId = res.result.i_id; //查询业务模板是否传阅\n\n              var isRead = {};\n              isRead.table = _this10.dictData.table;\n              isRead.i_bigint1 = _this10.backData.i_id; //传阅数据id\n\n              isRead.i_bigint2 = _this10.backData.i_bus_model_id; //传阅业务模块id\n\n              isRead.i_bigint3 = _this10.backData.i_bus_function_id; //传阅业务id\n\n              isRead.i_is_display = 0; //isRead.i_is_display = 0   // 状态 1临时 0已传阅\n              //校验该文件是否已经传阅\n\n              postAction(_this10.url.queryById, isRead).then(function (res) {\n                if (res.success) {\n                  if (res.result != null) {\n                    _this10.$message.error(\"该文件已传阅！\");\n\n                    return;\n                  }\n\n                  _this10.havaOtherProc = true; //新建\n\n                  var param = {};\n                  param.modelId = _this10.dictData.modelId;\n                  param.functionId = _this10.dictData.dictFunctionId; //数据字典取值\n                  //初始化数据\n\n                  _this10.otherProc.busData = {};\n                  postAction(\"/oaBus/oaBusdata/queryNewTaskMsg\", param).then(function (res) {\n                    if (res.success) {\n                      var insideParam = {};\n                      _this10.otherProc.busData.i_id = res.result.busdataId;\n                      _this10.otherProc.busData.table = res.result.tableName;\n                      _this10.otherProc.busData.s_title = _this10.backData.s_title; //标题\n\n                      _this10.otherProc.busData.s_file_num = _this10.backData.s_file_num; //文件字号\n\n                      _this10.otherProc.busData.d_sealdate = _this10.backData.d_sealdate; //封发日期\n\n                      _this10.otherProc.busData.s_main_dept_names = _this10.backData.s_main_dept_names; //主送部门\n\n                      _this10.otherProc.busData.s_varchar5 = _this10.backData.s_create_name; //拟稿时间\n\n                      _this10.otherProc.busData.s_varchar6 = _this10.backData.s_create_dept; //\n\n                      _this10.otherProc.busData.s_main_unit_names = _this10.backData.s_main_unit_names; //主送单位\n\n                      _this10.otherProc.busData.s_signer = _this10.backData.s_signer; //签发人\n\n                      _this10.otherProc.busData.s_varchar1 = _this10.backData.table; //业务数据表\n\n                      _this10.otherProc.busData.s_varchar7 = '内部传阅'; //传阅类别\n\n                      _this10.otherProc.busData.i_safetylevel = _this10.backData.i_safetylevel; //密级\n\n                      _this10.otherProc.busData.i_urgency = _this10.backData.i_urgency; //缓急\n\n                      _this10.otherProc.busData.i_bigint1 = _this10.backData.i_id; //传阅业务数据id\n\n                      _this10.otherProc.busData.i_bigint2 = _this10.backData.i_bus_model_id; //传阅业务模块id\n\n                      _this10.otherProc.busData.i_bigint3 = _this10.backData.i_bus_function_id; //传阅业务id\n                      // this.otherProc.busData.s_create_by = this.backData.s_create_by\n                      // this.otherProc.busData.s_create_dept = this.backData.s_create_dept\n                      // this.otherProc.busData.s_create_deptid = this.backData.s_create_deptid\n                      // this.otherProc.busData.i_create_day = this.backData.i_create_day\n                      // this.otherProc.busData.i_create_month = this.backData.i_create_month\n                      // this.otherProc.busData.i_create_year = this.backData.i_create_year\n\n                      getAction('/oaBus/oaBusdata/getModelSname', {\n                        id: _this10.otherProc.busData.i_bigint3\n                      }).then(function (res) {\n                        if (res.success && res.result != null) {\n                          _this10.otherProc.busData.s_varchar11 = res.result.mName;\n                          _this10.otherProc.busData.s_varchar12 = res.result.fName; // alert(JSON.stringify(this.otherProc.busData))\n                          //传阅业务业务id\n\n                          var _param = {\n                            tableName: res.result.tableName,\n                            busdataId: res.result.busdataId\n                          };\n                          postAction(_this10.url.updateData, _this10.otherProc.busData).then(function (res) {\n                            if (res.success) {\n                              //查询页面数据详情\n                              postAction(_this10.url.busDataAndColums, {\n                                tableName: _this10.otherProc.busData.table,\n                                busdataId: _this10.otherProc.busData.i_id\n                              }).then(function (res) {\n                                if (res.success) {\n                                  //复制发文附件\n                                  var fileParam = {};\n                                  fileParam.sTable = _this10.backData.table; //发文业务表\n\n                                  fileParam.iTableId = _this10.backData.i_id; //发文业务数据id\n\n                                  fileParam.sFileType = '4,6'; //附件类型\n\n                                  fileParam.receiveTable = res.result.oaBusdata.table;\n                                  fileParam.receiveId = res.result.oaBusdata.i_id;\n                                  postAction('/oaBus/oaFile/copyFile', fileParam).then(function (res) {\n                                    if (res.success) {// this.$message.success(res.message);\n                                    } else {\n                                      _this10.$message.error(\"文件备份失败\");\n                                    }\n                                  });\n                                  _this10.otherProc.busData = res.result.oaBusdata;\n                                  _this10.otherProc.busData['iprocSetId'] = res.result.proSetId;\n                                  _this10.otherProc.busData['key'] = res.result.taskDefKey;\n                                  _this10.otherProc.busData.act_show = res.result.actShow; //下一任务\n\n                                  getAction(_this10.url.nextUsers, {\n                                    procDefkey: res.result.oaBusdata.s_cur_proc_name,\n                                    // this.backData.s_cur_proc_name,\n                                    drafterId: res.result.oaBusdata.s_create_by\n                                  }).then(function (res) {\n                                    //展示数据\n                                    if (res.success) {\n                                      _this10.$refs.nextUsers.showNextUsers(res.result);\n                                    } else {\n                                      _this10.$message.error(res.message);\n                                    }\n                                  });\n                                } else {\n                                  _this10.$message.error(\"详情数据格式错误\");\n\n                                  return;\n                                }\n                              });\n                            } else {\n                              _this10.$message.error(\"更新数据错误\");\n\n                              return;\n                            }\n                          });\n                        } else {\n                          _this10.$message.error(\"业务配置错误\");\n\n                          return;\n                        }\n                      });\n                    } else {\n                      _this10.$message.error(\"初始化数据错误\");\n\n                      return;\n                    }\n                  });\n                } else {\n                  _this10.$message.error(\"数据错误\");\n\n                  return;\n                }\n              });\n            } else {\n              _this10.$message.error('请检查对应模块配置是否正确');\n\n              return;\n            }\n          });\n        } else {\n          _this10.$message.error('请配置内部传阅数据字典值');\n\n          return;\n        }\n      });\n    },\n    //按钮-省会-->地市(收文流程)\n    provinceToCityReceviceSend: function provinceToCityReceviceSend() {\n      this.$refs.selectCityModel.title = \"选择地市\";\n      this.$refs.selectCityModel.show(this.backData, 1);\n    },\n    //按钮-省会-->地市(传阅不带流程)\n    provinceToCityInsideSend: function provinceToCityInsideSend() {\n      this.$refs.selectCityModel.title = \"选择地市\";\n      this.$refs.selectCityModel.show(this.backData, 2);\n    },\n    //按钮-上报\n    upSendFile: function upSendFile() {\n      var _this11 = this;\n\n      postAction(this.url.upSendFile, this.backData).then(function (res) {\n        if (res.success && res.result[\"unitTables\"].length != 0) {\n          _this11.dictData.table = res.result[\"unitTables\"][0].btable;\n          _this11.dictData.dictFunctionId = res.result[\"unitTables\"][0].functionId;\n          _this11.dictData.modelId = res.result[\"unitTables\"][0].modelId;\n          _this11.dictData.unitName = res.result[\"unitTables\"][0].unitName;\n          _this11.dictData.dictUnitId = res.result[\"unitTables\"][0].unitId;\n          _this11.usersData = res.result[_this11.dictData.dictUnitId];\n          _this11.visibleModel = true;\n        } else {\n          _this11.$message.error(\"请检查相关配置是否完善！\");\n        }\n      });\n    },\n    //确认上报\n    upSendConfirm: function upSendConfirm() {\n      var _this12 = this;\n\n      this.busData = this.backData;\n      var param = {};\n      param.table = this.dictData.table;\n      param.modelId = this.dictData.modelId;\n      param.functionId = this.dictData.dictFunctionId;\n      var unitId = this.dictData.dictUnitId;\n      var flag = false; //新建任务\n\n      postAction(\"/oaBus/oaBusdata/queryNewTaskMsg\", param).then(function (res) {\n        if (res.success) {\n          var receiveData = {};\n          receiveData.s_title = _this12.busData.s_title; //标题\n\n          receiveData.d_sealdate = _this12.busData.d_sealdate; //成文日期  d_sealdate\n\n          receiveData.s_receive_num = _this12.busData.s_file_num; //来文字号 s_file_num\n          // receiveData.s_varchar5 = this.busData.s_unit_name//来文机关 s_unit_name\n\n          receiveData.i_urgency = _this12.busData.i_urgency; //缓急 i_urgency\n\n          receiveData.i_safetylevel = _this12.busData.i_safetylevel; //密级 i_safetylevel\n\n          receiveData.i_bigint1 = _this12.busData.i_bigint1; //印发份数\n\n          receiveData.i_bigint2 = _this12.busData.i_bigint2; //正文页数\n\n          receiveData.table = res.result.tableName;\n          receiveData.i_id = res.result.busdataId;\n          receiveData.s_create_by = \"\";\n\n          for (var j = 0; j < _this12.usersData.length; j++) {\n            receiveData.s_create_by += _this12.usersData[j].userId + \",\"; //创建人\n          } //更新数据\n\n\n          postAction(_this12.url.updateData, receiveData).then(function (res) {\n            if (res.success) {\n              //开启流程\n              postAction(_this12.url.updateBusdata, {\n                updateBusdata: res.result\n              }).then(function (res) {\n                if (res.success) {\n                  var users = [];\n                  users = _this12.usersData;\n                  postAction('/oaBus/dynamic/insertPermit', {\n                    list: users,\n                    functionId: param.functionId,\n                    iBusdataId: receiveData.i_id,\n                    table: receiveData.table\n                  }).then(function (res) {\n                    if (res.success) {\n                      //复制发文附件\n                      var fileParam = {};\n                      fileParam.sTable = _this12.busData.table; //发文业务表\n\n                      fileParam.iTableId = _this12.busData.i_id; //发文业务数据id\n\n                      fileParam.sFileType = 4; //附件类型\n\n                      fileParam.receiveTable = receiveData.table;\n                      fileParam.receiveId = receiveData.i_id;\n                      postAction('/oaBus/oaFile/copyFile', fileParam).then(function (res) {\n                        if (res.success) {\n                          flag = true;\n\n                          _this12.$message.success(\"上报成功！\");\n                        } else {\n                          _this12.$message.error(\"附件复制失败！\");\n                        }\n                      });\n                    } else {\n                      _this12.$message.error(\"用户权限写入失败！\");\n                    }\n                  });\n                } else {\n                  _this12.$message.error(\"开启流程失败！\");\n                }\n              });\n            } else {\n              _this12.$message.error(\"业务数据更新失败！\");\n            }\n          });\n        } else {\n          _this12.$message.error(\"新建任务失败！\");\n        }\n      });\n      this.closeModal();\n    },\n    //按钮-传阅下发\n    downSendFile: function downSendFile() {\n      this.$refs.selectUnitModel.title = \"选择下发县行\";\n      this.$refs.selectUnitModel.show(this.backData); //数据字典配置 类型 上报  1 中支 id value (functionid)\n      // 下发---》 县行 key (id) value (functionid)\n      // 内部传阅  1 中支id value (functionid)\n    },\n    //按钮校验\n    checkData: function checkData() {\n      var buttonList = this.btn.isDefend; //获取上面的按钮\n\n      var buttonList2 = this.btn.isNotDefend; //获取下面的按钮\n\n      for (var i = 0; i < buttonList.length; i++) {\n        //判断是不是选择了校验\n        if (buttonList[i].iisCheckbus != undefined && buttonList[i].iisCheckbus != '') {\n          if (buttonList[i].sbtnName == '下一任务') {\n            for (var _i = 0; _i < buttonList2.length; _i++) {\n              if (buttonList2[_i].smethod != undefined && buttonList2[_i].smethod != '' && buttonList2[_i].smethod == 'qiCao') {}\n            }\n          }\n        }\n      }\n    },\n    setBackDataNew: function setBackDataNew(BackDataNew) {\n      this.backData = BackDataNew;\n    },\n    //最新环节和密级\n    lastedUrgency: function lastedUrgency() {\n      //数据缓急拿到最新\n      var i_urgency = localStorage.getItem('缓急:' + this.backData.table + this.backData.i_id);\n      this.backData.i_urgency = i_urgency == null ? 4 : i_urgency;\n      var i_safetylevel = localStorage.getItem('密级:' + this.backData.table + this.backData.i_id);\n      this.backData.i_urgency = i_urgency == null ? 4 : i_urgency;\n      this.backData.i_safetylevel = i_safetylevel == null ? 1 : i_safetylevel; //清除缓存中的记录\n\n      localStorage.removeItem('缓急:' + this.backData.table + this.backData.i_id);\n      localStorage.removeItem('密级:' + this.backData.table + this.backData.i_id);\n    },\n    //选择下一办理人的同时办理任务\n    confirmNextUsers: function confirmNextUsers(ids, activity, endTime, depts) {\n      var _this13 = this;\n\n      //传后台的参数\n      var data = {};\n      var taskId = this.taskMsg.id;\n\n      if (this.havaOtherProc) {\n        var taskId = undefined;\n      }\n\n      data['taskId'] = taskId; //业务数据权限表（流转过程中逐步维护该表数据、收回删除人员权限）\n\n      data['assignee'] = ids;\n      data['functionId'] = this.backData.i_bus_function_id;\n      data['busDataId'] = this.backData.i_id; //下一节点为 结束节点不需要拼接 下一办理用户\n\n      data['isDept'] = false;\n\n      if (ids.length > 0) {\n        //连线信息--决定走向\n        var vars = activity.actMsg.conditionContext;\n\n        if (vars == undefined) {\n          vars = {};\n        } //进行任务办理\n\n\n        if (endTime != '') {\n          //有时间限制\n          vars.endTime = endTime;\n        } //组装办理人信息\n        //是否是设计上的多实例\n\n\n        if (activity.actMsg.allowMulti) {\n          //数据库配置是否允许多实例\n          vars[activity.actMsg.multiAssignee] = ids;\n          vars[activity.actMsg.loopSize] = ids.length;\n        } else {\n          vars[activity.actMsg.assignee] = ids[0];\n        } //流程所需变量\n\n\n        data['vars'] = vars;\n      } //记录部门相关信息\n\n\n      var deptMsg = {}; //如果是部门 记录部门信息\n\n      if (activity.oaProcActinst != undefined && activity.oaProcActinst.userOrRole == 'dept') {\n        //记录部门信息\n        deptMsg['tskId'] = this.taskMsg.id;\n        deptMsg['taskDefKey'] = activity.actMsg.id;\n        deptMsg['deptMsg'] = depts;\n        var mainDept = '';\n\n        for (var i in activity.departSelect) {\n          if (i.indexOf(\"主办\") >= 0) {\n            mainDept = activity.departSelect[i][0].departName;\n          }\n        }\n\n        deptMsg['mainDept'] = mainDept;\n        data['taskWithDepts'] = deptMsg;\n        data['isDept'] = true;\n      }\n\n      this.backData.page_ref = this.taskMsg.pageRef; //业务数据\n\n      this.$emit(\"getbackDataNew\", this.backData.page_ref);\n      this.lastedUrgency();\n\n      if (this.havaOtherProc) {\n        data['busData'] = this.otherProc.busData; // data['busData']['justStart'] = true\n      } else {\n        data['busData'] = this.backData;\n      }\n\n      data['taskDefKey'] = activity.actMsg.id; //参数构造完毕***********************\n\n      postAction(this.url.doTask, data).then(function (res) {\n        if (res.success) {\n          _this13.$message.success(res.message);\n\n          _this13.havaOtherProc = false;\n          _this13.nextConfirm = true; // this.saveBusData()\n\n          setTimeout(function () {\n            this.close();\n          }, 500); // this.reload()\n        } else {\n          _this13.$message.error(res.message);\n        }\n      });\n    },\n    //并行/包容网关的确定\n    confirmNextUsersMore: function confirmNextUsersMore(actMsg, endTime) {\n      var _this14 = this;\n\n      var datas = [];\n\n      for (var key in actMsg) {\n        var type = actMsg[key];\n\n        if (Object.keys(type).length > 0) {\n          this.constructData(type, endTime, datas);\n        }\n      }\n\n      var taskInfoVoList = {\n        list: datas //请求后台\n\n      };\n      postAction(this.url.doTaskMore, taskInfoVoList).then(function (res) {\n        if (res.success) {\n          _this14.$message.success(res.message);\n\n          _this14.havaOtherProc = false;\n          _this14.nextConfirm = true;\n          setTimeout(function () {\n            this.close();\n          }, 500);\n        } else {\n          _this14.$message.error(res.message);\n        }\n      });\n    },\n    //追加用户\n    confirmAddUserSingle: function confirmAddUserSingle(ids, activity, endTime, depts) {\n      //传后台的参数\n      var data = {};\n      var taskId = this.taskMsg.id;\n\n      if (this.havaOtherProc) {\n        var taskId = undefined;\n      }\n\n      data['taskId'] = taskId; //业务数据权限表（流转过程中逐步维护该表数据、收回删除人员权限）\n\n      data['assignee'] = ids;\n      data['functionId'] = this.backData.i_bus_function_id;\n      data['busDataId'] = this.backData.i_id; //下一节点为 结束节点不需要拼接 下一办理用户\n\n      data['isDept'] = false;\n\n      if (ids.length > 0) {\n        //连线信息--决定走向\n        var vars = activity.actMsg.conditionContext;\n\n        if (vars == undefined) {\n          vars = {};\n        } //进行任务办理\n\n\n        if (endTime != '') {\n          //有时间限制\n          vars.endTime = endTime;\n        } //组装办理人信息\n        //是否是设计上的多实例\n\n\n        if (activity.actMsg.allowMulti) {\n          //数据库配置是否允许多实例\n          vars[activity.actMsg.multiAssignee] = ids;\n          vars[activity.actMsg.loopSize] = ids.length;\n        } else {\n          vars[activity.actMsg.assignee] = ids[0];\n        } //流程所需变量\n\n\n        data['vars'] = vars;\n      } //记录部门相关信息\n\n\n      var deptMsg = {}; //如果是部门 记录部门信息\n\n      if (activity.oaProcActinst != undefined && activity.oaProcActinst.userOrRole == 'dept') {\n        //记录部门信息\n        deptMsg['tskId'] = this.taskMsg.id;\n        deptMsg['taskDefKey'] = activity.actMsg.id;\n        deptMsg['deptMsg'] = depts;\n        var mainDept = '';\n\n        for (var i in activity.departSelect) {\n          if (i.indexOf(\"主办\") >= 0) {\n            mainDept = activity.departSelect[i][0].departName;\n          }\n        }\n\n        deptMsg['mainDept'] = mainDept;\n        data['taskWithDepts'] = deptMsg;\n        data['isDept'] = true;\n      }\n\n      this.backData.page_ref = this.taskMsg.pageRef; //业务数据\n\n      this.$emit(\"getbackDataNew\", this.backData.page_ref);\n      this.lastedUrgency();\n\n      if (this.havaOtherProc) {\n        data['busData'] = this.otherProc.busData; // data['busData']['justStart'] = true\n      } else {\n        data['busData'] = this.backData;\n      }\n\n      data['taskDefKey'] = activity.actMsg.id;\n      console.log('---->>>>>', JSON.stringify(data)); //参数构造完毕***********************\n      // postAction(this.url.doTask, data).then(res => {\n      //   if (res.success) {\n      //     this.$message.success(res.message)\n      //     this.havaOtherProc = false\n      //     this.nextConfirm = true\n      //     // this.saveBusData()\n      //     setTimeout(function () {\n      //       this.close()\n      //     }, 500)\n      //     // this.reload()\n      //   } else {\n      //     this.$message.error(res.message)\n      //   }\n      // })\n    },\n    //并行/包容追加\n    confirmAddUsers: function confirmAddUsers(actMsg, endTime) {\n      var _this15 = this;\n\n      var datas = [];\n\n      for (var key in actMsg) {\n        var type = actMsg[key];\n\n        if (Object.keys(type).length > 0) {\n          this.constructData(type, endTime, datas);\n        }\n      }\n\n      var taskInfoVoList = {\n        list: datas\n      };\n      console.log('=========>>>>>', JSON.stringify(taskInfoVoList)); //请求后台\n\n      postAction(this.url.doAddUsers, taskInfoVoList).then(function (res) {\n        if (res.success) {\n          _this15.$message.success(res.message);\n\n          _this15.havaOtherProc = false;\n          _this15.nextConfirm = true;\n          setTimeout(function () {\n            this.close();\n          }, 500);\n        } else {\n          _this15.$message.error(res.message);\n        }\n      });\n    },\n    constructData: function constructData(type, endTime, datas) {\n      //传后台的参数\n      var taskId = this.taskMsg.id;\n\n      if (this.havaOtherProc) {\n        taskId = undefined;\n      }\n\n      for (var k in type) {\n        var data = {};\n        data['taskId'] = taskId;\n        var v = type[k]; // console.log('---------------->>>>>', k, JSON.stringify(v))\n\n        var activity = v.activity;\n        var isDept = activity.oaProcActinst.userOrRole == 'dept';\n        data['isDept'] = isDept;\n        var ids = [];\n\n        if (isDept) {\n          //构造用户id集合\n          for (var kk in v.departUsersId) {\n            var inids = v.departUsersId[kk];\n\n            if (inids.length > 0) {\n              ids.push(inids);\n            }\n          } //记录部门相关信息\n\n\n          var deptMsg = {}; //记录部门信息\n\n          deptMsg['tskId'] = taskId;\n          deptMsg['taskDefKey'] = activity.actMsg.id;\n          var mainDept = '';\n\n          for (var i in v.departSelect) {\n            if (i.indexOf(\"主办\") >= 0 && v.departSelect[i].length > 0) {\n              mainDept = v.departSelect[i][0].departName;\n              break;\n            }\n          }\n\n          deptMsg['mainDept'] = mainDept; //记录主办部门信息\n\n          deptMsg['deptMsg'] = v.departUsersId;\n          data['taskWithDepts'] = deptMsg;\n          data['isDept'] = true;\n        } else {\n          ids = v.selectedRowKeys;\n        }\n\n        data['assignee'] = ids;\n        data['functionId'] = this.backData.i_bus_function_id;\n        data['busDataId'] = this.backData.i_id; //下一节点为 结束节点不需要拼接 下一办理用户\n        // if (ids.length > 0) {\n        //连线信息--决定走向\n\n        var vars = activity.actMsg.conditionContext;\n\n        if (vars == undefined) {\n          vars = {};\n        } //进行任务办理\n\n\n        if (endTime != undefined && endTime != '') {\n          //有时间限制\n          vars.endTime = endTime;\n        } //组装办理人信息\n        //是否是设计上的多实例\n\n\n        if (activity.actMsg.allowMulti) {\n          //数据库配置是否允许多实例\n          vars[activity.actMsg.multiAssignee] = ids;\n          vars[activity.actMsg.loopSize] = ids.length;\n        } else {\n          vars[activity.actMsg.assignee] = ids[0];\n        } //流程所需变量\n\n\n        data['vars'] = vars; // }\n\n        this.backData.page_ref = this.taskMsg.pageRef; //业务数据\n\n        this.$emit(\"getbackDataNew\", this.backData.page_ref);\n        this.lastedUrgency(); //业务数据\n\n        if (this.havaOtherProc) {\n          data['busData'] = this.otherProc.busData;\n        } else {\n          data['busData'] = this.backData;\n        }\n\n        data['taskDefKey'] = activity.actMsg.id;\n        datas.push(data);\n      }\n    },\n    //仅保存数据\n    justSave: function justSave() {\n      var _this16 = this;\n\n      postAction(this.url.insert, this.backData).then(function (res) {\n        if (res.success) {\n          _this16.backData.id = res.result.id;\n\n          _this16.$message.success(res.message);\n        } else {\n          _this16.$message.error(res.message);\n        }\n      });\n    },\n    //开启流程\n    start: function start() {\n      //加入 任务描述\n      this.doPost(this.url.start, this.backData);\n    },\n    //保存数据并开启流程\n    saveAndStartPro: function saveAndStartPro() {\n      //加入任务描述\n      this.doPost(this.url.insertDataAndStartPro, this.backData);\n    },\n    //强制办结\n    forceEndPro: function forceEndPro() {\n      var res = window.confirm(\"是否强制办结\");\n\n      if (res) {\n        this.doGet(this.url.endProUrl, {\n          processId: this.taskMsg.processInstanceId\n        }); //关闭页面刷新父组件\n        // this.$emit('close');\n        // this.visible = false;\n\n        this.reload();\n      }\n    },\n    //展示回退节点\n    showBack: function showBack() {\n      this.showPoint('back');\n    },\n    //展示跳转节点\n    showJump: function showJump() {\n      this.showPoint('all');\n    },\n    showPoint: function showPoint(type) {\n      var _this17 = this;\n\n      var text = type == 'all' ? '跳转' : '回退';\n      getAction(this.url.showBackAct, {\n        processDefinitionId: this.taskMsg.processDefinitionId,\n        type: type,\n        processInstanceId: this.taskMsg.processInstanceId,\n        taskDefinitionKey: this.taskMsg.taskDefinitionKey\n      }).then(function (res) {\n        if (res.success) {\n          if (res.result.length <= 0) {\n            _this17.$message.error('没有可' + text + '节点');\n\n            return;\n          }\n\n          _this17.$refs.backModal.dataSource = res.result;\n          _this17.$refs.backModal.taskMsg = _this17.taskMsg;\n          _this17.$refs.backModal.title = text;\n\n          _this17.$refs.backModal.show();\n        } else {\n          _this17.$message.error(res.message);\n        }\n      });\n    },\n    //撤回---判断发出任务是否已读\n    reCall: function reCall() {\n      var _this18 = this;\n\n      var params = this.$route;\n      var router = this.$router; //展示自己已办的所有节点\n\n      var taskId = this.taskMsg.hiTaskId;\n      if (taskId == undefined) taskId = this.taskMsg.id;\n      getAction(this.url.reCallTask + '?taskId=' + taskId).then(function (res) {\n        if (res.success) {\n          _this18.$message.success(res.message);\n\n          setTimeout(function () {\n            if (params.query.status != undefined) params.query.status = 'todo';\n            if (params.query.task != undefined) params.query.task = JSON.stringify(res.result);\n            var parm = [];\n\n            for (var k in params.query) {\n              var v = k + '=' + params.query[k];\n\n              if (k == 'task') {\n                v = k + '=' + JSON.stringify(params.query[k]);\n              }\n\n              parm.push(v);\n            }\n\n            var parms = parm.join('&');\n            router.push({\n              path: params.path + '?' + parms\n            });\n          }, 500);\n        } else {\n          _this18.$message.error(res.message);\n        }\n      });\n    },\n    //部门完成\n    deptFinish: function deptFinish() {\n      //拿到当前taskId\n      var res = window.confirm(\"是否部门完成\");\n\n      if (res) {\n        // let param={taskId: this.taskMsg.id}\n        this.doPost(this.url.departFinish + \"?taskId=\" + this.taskMsg.id); //关闭页面刷新父组件\n        // this.$emit('close');\n        // this.visible = false;\n\n        this.reload();\n      }\n    },\n    showPic: function showPic() {\n      var _this19 = this;\n\n      var key = this.backData.s_cur_proc_name;\n\n      if (key == undefined || key == null || key.length == 0) {\n        this.$message.error('此条业务没有流程,请检查按钮配置');\n        return;\n      }\n\n      if (this.taskMsg.processInstanceId == null) {\n        getAction(this.url.lastVersionProc + '?key=' + key).then(function (res) {\n          if (res.success) {\n            _this19.$refs.picModalNoTask.show(res.result.id);\n\n            _this19.$refs.picModalNoTask.title = res.result.name;\n          } else {\n            _this19.$message.error(res.message);\n          }\n        });\n      } else {\n        this.$refs.picModal.show(this.taskMsg);\n      }\n    },\n\n    /**\r\n     * 流程办结\r\n     */\n    endProc: function endProc() {\n      var _this20 = this;\n\n      getAction(this.url.nextUsers, {\n        procDefkey: this.backData.s_cur_proc_name,\n        drafterId: this.backData.s_create_by,\n        taskId: this.taskMsg.id\n      }).then(function (res) {\n        //展示数据\n        if (res.success) {\n          if (res.result.length == 1) {\n            _this20.confirmNextUsers([], res.result[0], null, null);\n\n            _this20.reload();\n          } else {\n            _this20.$message.error('当前节点不可办结');\n          } // this.$refs.nextUsers.showNextUsers(res.result)\n          //TODO********************************* 档案系统接口  ************************************\n\n\n          getAction(_this20.url.recordFileSend, {\n            stable: _this20.backData.table,\n            tableid: _this20.backData.i_id\n          }).then(function (res) {\n            if (res.success) {\n              _this20.$message.success(res.message);\n            } else {\n              _this20.$message.error(res.message);\n            }\n          });\n        } else {\n          _this20.$message.error(res.message);\n        }\n      });\n    },\n    //TODO(仅标识)*****************************************************  工作流相关 END  *********************************\n    //TODO(仅标识)***************************************************** 意见相关 *****************************************\n    writeOpinion: function writeOpinion() {\n      for (var index in this.opts) {\n        //判断意见环节是否匹配\n        // let td = this.backData.s_cur_task_name.split(\"-\")[0]\n        var td = this.taskMsg.taskDefinitionKey;\n\n        if (this.opts[index].taskDefKeys.indexOf(td) >= 0) {\n          //属性赋值\n          this.backDataOpt.i_id = this.backDataOpt.i_id == '' ? this.opts[index].optId : this.backDataOpt.i_id;\n          this.backDataOpt.i_order = this.opts[index]['orderId'];\n          this.backDataOpt.i_opinion_set_id = this.opts[index]['optionSetId'];\n          this.backDataOpt.s_opinion_type = this.opts[index]['type']; //意见类型\n\n          break;\n        }\n      }\n\n      this.backDataOpt.i_bus_function_id = this.backData.i_bus_function_id;\n      this.backDataOpt.i_busdata_id = this.backData.i_id;\n      this.backDataOpt.s_task_id = this.backDataOpt.s_task_id;\n      this.backDataOpt.s_task_name = this.taskMsg.name; // this.backDataOpt.s_taskdef_key = this.backData.s_cur_task_name.split(\"-\")[0]\n\n      this.backDataOpt.s_taskdef_key = this.taskMsg.taskDefinitionKey;\n      this.backDataOpt.i_user_id = this.currentUserMessage.sysUserId;\n      this.backDataOpt.s_name = this.currentUserMessage.sysUserName;\n      this.backDataOpt.table = this.backData.table + \"_opinion\"; // console.log(JSON.stringify(this.taskMsg))\n      // console.log(JSON.stringify(this.backDataOpt))\n\n      this.$refs.opinionForm.suggest(this.backDataOpt);\n      this.$refs.opinionForm.title = \"填写意见\";\n      this.$refs.opinionForm.disableSubmit = false;\n    },\n    //填写意见\n    saveOption: function saveOption(optionContext) {\n      var _this21 = this;\n\n      this.backDataOpt.s_opinion = optionContext;\n      this.backDataOpt.i_bus_function_id = this.backData.i_bus_function_id;\n      this.backDataOpt.i_busdata_id = this.backData.i_id;\n      this.backDataOpt.d_sign = this.dateFormat(new Date());\n      this.backDataOpt.s_task_id = this.backDataOpt.s_task_id;\n      this.backDataOpt.s_task_name = this.taskMsg.name;\n      this.backDataOpt.s_overt = '0'; //是否公开\n\n      this.backDataOpt.s_tpye = '1'; //\n\n      this.backDataOpt.s_taskdef_key = this.taskMsg.taskDefinitionKey;\n      this.backDataOpt.i_user_id = this.currentUserMessage.sysUserId;\n      this.backDataOpt.s_name = this.currentUserMessage.sysUserName;\n      this.backDataOpt.s_dept_id = this.currentUserMessage.deptId;\n      this.backDataOpt.s_dept_name = this.currentUserMessage.sysDeptName;\n      this.backDataOpt.table = this.backData.table + \"_opinion\"; // console.log('---->意见数据',this.opts)\n      // console.log('---->环节',JSON.stringify(this.taskMsg))\n\n      for (var index in this.opts) {\n        //判断意见环节是否匹配\n        var td = this.taskMsg.taskDefinitionKey;\n\n        if (this.opts[index].taskDefKeys.indexOf(td) >= 0) {\n          //属性赋值\n          this.backDataOpt.i_id = this.backDataOpt.i_id == '' ? this.opts[index].optId : this.backDataOpt.i_id;\n          this.backDataOpt.i_order = this.opts[index]['orderId'];\n          this.backDataOpt.i_opinion_set_id = this.opts[index]['optionSetId'];\n          this.backDataOpt.s_opinion_type = this.opts[index]['type']; //意见类型\n\n          this.flag = true;\n          break;\n        }\n      }\n\n      if (!this.flag) {\n        this.$message.error(\"请配置对应的环节！\");\n        return;\n      } //根据taskId判断是否更新意见\n\n\n      postAction(this.url.isUpdateOpinion, this.backDataOpt).then(function (res) {\n        if (res.success) {\n          _this21.isSaveFlag = true;\n\n          _this21.$message.success(\"填写意见成功！\");\n\n          setTimeout(function () {\n            _this21.reload();\n          }, 800);\n          _this21.backDataOpt.i_id = res.result.i_id;\n        } else {\n          _this21.$message.error(\"填写意见失败！\");\n        }\n      });\n    },\n    //发送会议通知\n    sendMeetingInform: function sendMeetingInform() {\n      this.$emit('submit', this.backData);\n    },\n    showReadCase: function showReadCase() {\n      var tableName = this.backData.table;\n      var busFunctionId = this.backData.i_bus_function_id;\n      var busDataId = this.backData.i_id;\n      this.$refs.showreadmodal.showHead(tableName, busFunctionId, busDataId);\n      this.$refs.showreadmodal.title = \"已读情况\";\n      this.$refs.showreadmodal.disableSubmit = false;\n    },\n    //TODO(仅标识)***************************************************** 控件相关 *****************************************\n    //起草底稿\n    qiCao: function qiCao() {\n      this.openFile(1, this.fileName);\n    },\n    //正文排版\n    zwPaiBan: function zwPaiBan() {\n      if (parseInt(this.backData.s_varchar20) == 0) {\n        this.$message.error(\"请您先登记文号\");\n      } else {\n        this.openFile(2, this.fileName);\n      }\n    },\n    //查看底稿\n    showDiGao: function showDiGao() {\n      this.openFile(3, this.fileName);\n    },\n    //编辑底稿\n    editDiGao: function editDiGao() {\n      this.openFile(4, this.fileName);\n    },\n    //查看正文\n    showZw: function showZw() {\n      this.openFile(5, this.fileName);\n    },\n    //校核正文\n    checkZw: function checkZw() {\n      this.openFile(6, this.fileName);\n    },\n    //盖章(查看正文)\n    sealFile: function sealFile() {\n      this.openFile(5, this.fileName);\n    },\n    //保存办文单\n    saveBanWen: function saveBanWen() {\n      this.openFile(7, this.fileName);\n    },\n    //打印办文单\n    printBanWen: function printBanWen() {\n      this.openFile(8, this.fileName);\n    },\n    //打印公文\n    printPublicFile: function printPublicFile() {\n      this.openFile(6, this.fileName);\n    },\n    //打开附件\n    showFujianFile: function showFujianFile() {\n      this.openFile(9, fileName);\n    },\n    //打开附件\n    showFujianFile2: function showFujianFile2(cmd, fileName) {\n      this.openFile(9, fileName);\n    },\n    //对比拟稿\n    compareFile: function compareFile() {\n      var URL = 'http://localhost:4000/mytask/taskList/Test-detailFile?tableName=' + this.backData.table + '&busdataId=' + this.backData.i_id;\n      window.open(URL);\n    },\n    openFile: function openFile(cmd, fileName) {\n      var ntkoed = ntkoBrowser.ExtensionInstalled();\n\n      if (ntkoed) {\n        //console.log('--------------------->>>>>>!!!!!',JSON.stringify(\"&taskId=\" +this.taskMsg.id))\n        //console.log('--------------------->>>>>>!!!!!', JSON.stringify(this.currentBtn.iid))\n        //console.log('--------------------->>>>>>!!!!!',JSON.stringify(this.currentUserMessage))\n        //console.log('--------------------->>>>>>!!!!!', JSON.stringify(this.backData.s_varchar20))\n        console.log('--------------------->>>>>>!!!!!', JSON.stringify(this.backData)); //console.log('--------------------->>>>>>!!!!!', JSON.stringify(this.opts));\n\n        ntkoBrowser.openWindow(window.location.origin + \"/ntko/editindex.html?cmd=\" + cmd + \"&stable=\" + this.backData.table + \"&tableid=\" + this.backData.i_id + \"&sbtnid=\" + this.currentBtn.iid + \"&userName=\" + this.currentUserMessage.sysUserName + \"&docNumId=\" + parseInt(this.backData.s_varchar20) + \"&fileName=\" + fileName);\n      } else {\n        window.open(window.location.origin + \"/ntko/exeindex.html\");\n      }\n\n      window.ntkoCloseEvent = function () {\n        this.$message.error(\"跨浏览器插件应用程序窗口已关闭\");\n      };\n    },\n    //新公文传输\n    //TODO *************************  新公文传输接口 *************************\n    newPublicFileSend: function newPublicFileSend() {\n      var _this22 = this;\n\n      // console.log('=======================>>>>',this.backData.table)\n      // console.log('=======================>>>>',this.backData.i_id)\n      getAction(this.url.newPublicFileSend, {\n        stable: this.backData.table,\n        tableid: this.backData.i_id\n      }).then(function (res) {\n        if (res.success) {\n          _this22.$message.success(res.message);\n        } else {\n          _this22.$message.error(res.message);\n        }\n      });\n    },\n    //弹框-登记文号\n    djDocNum: function djDocNum() {\n      this.$refs.docNumForm.dengji(this.backData);\n      this.$refs.docNumForm.title = \"登记文号\";\n      this.$refs.docNumForm.disableSubmit = false;\n    },\n    //保存登记文号\n    saveDocNum: function saveDocNum(data) {\n      var _this23 = this;\n\n      var param = {\n        table: this.backData.table,\n        i_id: this.backData.i_id,\n        s_file_num: data.docnum,\n        //文件字号\n        s_varchar20: data.id //文号id\n\n      };\n      postAction(this.url.updateBusdata, {\n        'updateBusdata': param\n      }).then(function (res) {\n        if (res.success) {\n          _this23.reload(); //页面刷新\n\n\n          _this23.$emit(\"saveDocNum\", data);\n\n          _this23.$message.success(res.message);\n        } else {\n          _this23.$message.error(res.message);\n        }\n      });\n    },\n    //弹框-引入公文链接\n    yrOfficeDoc: function yrOfficeDoc() {\n      this.$refs.officeForm.yinru();\n      this.$refs.officeForm.title = \"引入公文链接\";\n      this.$refs.officeForm.disableSubmit = false;\n    },\n    //保存公文链接\n    gongwenData: function gongwenData(data) {\n      this.$emit(\"saveGongwenData\", data);\n    },\n    updatePaperTitle: function updatePaperTitle() {\n      this.$refs.titleForm.paperTitle(this.backData);\n      this.$refs.titleForm.title = \"修改文头\";\n      this.$refs.titleForm.disableSubmit = false;\n    },\n    updateMiddleParameter: function updateMiddleParameter(middleParameter) {\n      this.backData.s_middle_parameter = middleParameter; // //console.log('---wentou--',this.backData.s_middle_parameter)\n    },\n    //保存封发日期\n    delTime: function delTime() {\n      var _this24 = this;\n\n      var d_datetime1 = this.dateFormat(new Date());\n      var param = {\n        table: this.backData.table,\n        'i_id': this.backData.i_id,\n        'd_sealdate': d_datetime1\n      };\n      postAction(this.url.updateData, param).then(function (res) {\n        if (res.success) {\n          // this.$emit(\"saveDelTime\", d_datetime1)\n          _this24.$message.success(res.message);\n\n          _this24.reload();\n        } else {\n          _this24.$message.error(res.message);\n        }\n      });\n    },\n    //按钮-发布\n    publishInform: function publishInform() {\n      var _this25 = this;\n\n      //校验是否发布\n      var checkParam = {};\n      checkParam.table = this.backData.table;\n      checkParam.i_id = this.backData.i_id;\n      postAction(this.url.queryById, checkParam).then(function (res) {\n        if (res.success && res.result.i_is_publish == 0) {\n          _this25.$emit(\"publishInform\");\n        } else {\n          _this25.$message.error(\"该公告已发布！\");\n        }\n      });\n    },\n    //按钮-取消发布\n    unpublish: function unpublish() {\n      this.$emit(\"unpublishBtn\");\n    },\n    piliang: function piliang() {\n      this.$refs.watchForm.piliang();\n      this.$refs.watchForm.title = \"批量审阅\";\n      this.$refs.watchForm.disableSubmit = false;\n    },\n    //弹窗-引入附件\n    banwenModal: function banwenModal() {\n      this.$refs.banwenForm.show(this.backData);\n      this.$refs.banwenForm.title = \"引入附件\";\n      this.$refs.banwenForm.disableSubmit = false;\n    },\n    //弹窗-引入办文依据\n    bwyjModal: function bwyjModal() {\n      this.$refs.banwenYiJuForm.show(this.backData);\n      this.$refs.banwenYiJuForm.title = \"引入办文依据\";\n      this.$refs.banwenYiJuForm.disableSubmit = false;\n    },\n    //下载所有附件\n    downAllFiles: function downAllFiles() {\n      this.$emit(\"downFiles\");\n    },\n    //协同办公\n    callaboration: function callaboration() {\n      // 子组件获取 父组件的tableid 和 什么id  （标题上）\n      this.$emit('callaboration');\n    },\n    opinionModal: function opinionModal() {\n      this.backData['sTaskdefKey'] = this.taskMsg.taskDefinitionKey;\n      this.backData[\"opinionTable\"] = this.backDataOpt.table;\n      this.$refs.opinionlistForm.show(this.backData);\n      this.$refs.opinionlistForm.title = \"查看意见\";\n      this.$refs.opinionlistForm.disableSubmit = false;\n    },\n    //日期格式化\n    dateFormat: function dateFormat(date) {\n      var date1 = new Date(date);\n      var Y = date1.getFullYear();\n      var M = date1.getMonth() + 1;\n      var D = date1.getDate();\n      var newTime = Y + '-' + (M < 10 ? \"0\" + M : M) + \"-\" + (D < 10 ? \"0\" + D : D) + \" \" + date1.toTimeString().substr(0, 8);\n      return newTime;\n    }\n  },\n  //页面刷新\n  shuaX: function shuaX(value) {\n    //传入当前按钮的value值\n    var that = this;\n    var isrleod = false;\n    that.btn.map(function (item, index) {\n      //判断是否需要刷新\n      if (item.sbtnValue == value && item.iisRefresh == 1) {\n        isrleod = true;\n      }\n    });\n    that.defindBtns.map(function (item, index) {\n      if (item.sbtnValue == value && item.iisRefresh == 1) {\n        isrleod = true;\n      }\n    });\n\n    if (isrleod == true) {\n      // this.reload();\n      // window.location.replace(window.location.href);\n      that.showBtn(that.butArrLists);\n    }\n  }\n};",{"version":3,"sources":["C:\\xxm\\work\\jd\\fore\\src\\views\\buttons\\btn-js\\taskBtn.js"],"names":["filterObj","deleteAction","downFile","getAction","postAction","ACCESS_TOKEN","JeecgListMixin","ntkoBrowser","taskBth","props","inject","data","btn","defindBtns","currentBtn","currentUserMessage","dictData","dictUnitId","dictFunctionId","modelId","table","unitName","unitId","flag","isSaveFlag","usersData","visibleModel","ntko","fileName","nextConfirm","havaOtherProc","haveEnd","otherProc","busData","taskMsg","url","delete","insert","queryById","newPublicFileSend","recordFileSend","start","insertDataAndStartPro","nextUsers","endProUrl","showBackAct","currentUserMsg","currentUserQuery","doTask","doTaskMore","taskWithDepartSave","downloadFiles","queryAllHaveDone","reCallTask","departFinish","lastVersionProc","addUserOrDepart","doAddUsers","sendMeetingInform","commitPer","updateBusdata","updateData","busDataAndColums","isUpdateOpinion","getDictByKey","queryByFunctionId","upSendFile","butArrLists","iisDefend","created","_this","document","addEventListener","hidden","showBtn","methods","method_router","item","index","$refs","isDefendBtn","sbtnName","$el","innerText","setAttribute","isNotDefendBtn","style","opacity","smethod","doPost","then","res","success","$message","message","error","doGet","important","$emit","destoryDay","saveBusData","busFunction","iisLimits","iisProc","queryParam","i_bus_function_id","iid","backData","i_busdata_id","i_id","result","s_userunit_id","s_create_unitid","deleteBusData","param","processInstanceId","undefined","setTimeout","close","window","isNotDefend","isDefend","cancel","reload2","reload","checkBtnBeforeNext","value","i_is_draft","i_is_typeset","i_is_approve","hiTaskId","addUsersModal","showNextUsers","nextTaskQuery","nextRealQuery","id","procDefkey","s_cur_proc_name","drafterId","s_create_by","taskId","taskDefinitionKey","shareFile","insideReading","dictKey","text","functionId","s_busdata_table","isRead","i_bigint1","i_bigint2","i_bus_model_id","i_bigint3","i_is_display","insideParam","busdataId","tableName","s_title","s_file_num","d_sealdate","s_main_dept_names","s_varchar5","s_create_name","s_varchar6","s_create_dept","s_main_unit_names","s_signer","s_varchar1","s_varchar7","i_safetylevel","i_urgency","s_varchar11","mName","s_varchar12","fName","fileParam","sTable","iTableId","sFileType","receiveTable","oaBusdata","receiveId","proSetId","taskDefKey","act_show","actShow","provinceToCityReceviceSend","selectCityModel","title","show","provinceToCityInsideSend","length","btable","upSendConfirm","receiveData","s_receive_num","j","userId","users","list","iBusdataId","closeModal","downSendFile","selectUnitModel","checkData","buttonList","buttonList2","i","iisCheckbus","setBackDataNew","BackDataNew","lastedUrgency","localStorage","getItem","removeItem","confirmNextUsers","ids","activity","endTime","depts","vars","actMsg","conditionContext","allowMulti","multiAssignee","loopSize","assignee","deptMsg","oaProcActinst","userOrRole","mainDept","departSelect","indexOf","departName","page_ref","pageRef","confirmNextUsersMore","datas","key","type","Object","keys","constructData","taskInfoVoList","confirmAddUserSingle","console","log","JSON","stringify","confirmAddUsers","k","v","isDept","kk","departUsersId","inids","push","selectedRowKeys","justSave","saveAndStartPro","forceEndPro","confirm","processId","showBack","showPoint","showJump","processDefinitionId","backModal","dataSource","reCall","params","$route","router","$router","query","status","task","parm","parms","join","path","deptFinish","showPic","picModalNoTask","name","picModal","endProc","stable","tableid","writeOpinion","opts","td","taskDefKeys","backDataOpt","optId","i_order","i_opinion_set_id","s_opinion_type","s_task_id","s_task_name","s_taskdef_key","i_user_id","sysUserId","s_name","sysUserName","opinionForm","suggest","disableSubmit","saveOption","optionContext","s_opinion","d_sign","dateFormat","Date","s_overt","s_tpye","s_dept_id","deptId","s_dept_name","sysDeptName","showReadCase","busFunctionId","busDataId","showreadmodal","showHead","qiCao","openFile","zwPaiBan","parseInt","s_varchar20","showDiGao","editDiGao","showZw","checkZw","sealFile","saveBanWen","printBanWen","printPublicFile","showFujianFile","showFujianFile2","cmd","compareFile","URL","open","ntkoed","ExtensionInstalled","openWindow","location","origin","ntkoCloseEvent","djDocNum","docNumForm","dengji","saveDocNum","docnum","yrOfficeDoc","officeForm","yinru","gongwenData","updatePaperTitle","titleForm","paperTitle","updateMiddleParameter","middleParameter","s_middle_parameter","delTime","d_datetime1","publishInform","checkParam","i_is_publish","unpublish","piliang","watchForm","banwenModal","banwenForm","bwyjModal","banwenYiJuForm","downAllFiles","callaboration","opinionModal","opinionlistForm","date","date1","Y","getFullYear","M","getMonth","D","getDate","newTime","toTimeString","substr","shuaX","that","isrleod","map","sbtnValue","iisRefresh"],"mappings":"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","sourcesContent":["/**\r\n * 新增修改完成调用 modalFormOk方法 编辑弹框组件ref定义为modalForm\r\n * 高级查询按钮调用 superQuery方法  高级查询组件ref定义为superQueryModal\r\n * data中url定义 list为查询列表  delete为删除单条记录  deleteBatch为批量删除\r\n */\r\nimport {filterObj} from '@/utils/util';\r\nimport {deleteAction, downFile, getAction, postAction} from '@/api/manage'\r\nimport {ACCESS_TOKEN} from \"@/store/mutation-types\"\r\nimport {JeecgListMixin} from '@/mixins/JeecgListMixin'\r\nimport {ntkoBrowser} from './ntkobackground.min.js'\r\n\r\n\r\nexport const taskBth = {\r\n  //接收父组件传值\r\n  props: ['backData', 'busFunction', 'taskMsg', 'opts', 'backDataOpt'],\r\n  inject: ['reload'],\r\n  data() {\r\n    return {\r\n      //按钮展示\r\n      btn: [],\r\n      defindBtns: [], //按钮组二\r\n      currentBtn: '',\r\n      currentUserMessage: '',\r\n      dictData: {\r\n        dictUnitId: '', //数据字典-中支id\r\n        dictFunctionId: '', //数据字典-业务id\r\n        modelId: '',//根据字典值查询获取\r\n        table: '', //根据字典值查询获取\r\n        unitName: \"\", //上报中支名称\r\n        unitId: ''\r\n      },\r\n      flag: false, //填写环节控制\r\n      isSaveFlag: false, //是否填写\r\n      usersData: [], //传阅收文管理员角色用户\r\n      visibleModel: false, //提示框\r\n      ntko: {},\r\n      fileName: '',\r\n      nextConfirm: false,\r\n      havaOtherProc: false,\r\n      haveEnd: false,//是否已办结\r\n      otherProc: {\r\n        busData: {},\r\n        taskMsg: {}\r\n      },\r\n      url: {\r\n        delete: '/oaBus/dynamic/delete', //删除数据\r\n        insert: '/oaBus/dynamic/insert',//动态插入数据\r\n        queryById: '/oaBus/dynamic/queryById',//查询数据\r\n        newPublicFileSend: '/oaouttransdata/oaOutTransData/newPublicFileSend',//新公文传输\r\n        recordFileSend: '/oaouttransdata/oaOutTransData/recordFileSend',//档案系统接口\r\n        //TODO(仅标识) *********************************************    WorkFlow   START   ******************************\r\n        start: '/wf/task/start',//开启流程\r\n        insertDataAndStartPro: '/oaBus/newTask/insertDataAndStartPro',//保存业务同时开启流程\r\n        nextUsers: '/oaBus/taskInAct/nextUserQuery',\r\n        endProUrl: '/wf/task/endProcess',\r\n        showBackAct: '/wf/task/showBackAct',//展示回退/跳转 节点\r\n        currentUserMsg: '/sys/user/getUserSectionInfoByToken',\r\n        currentUserQuery: '/oaBus/taskInAct/currentUserQuery',//查询form信息\r\n        doTask: '/oaBus/taskInAct/doTask',\r\n        doTaskMore: '/oaBus/taskInAct/doTaskMore',\r\n        taskWithDepartSave: '/oaBus/taskInAct/taskWithDepartSave',\r\n        downloadFiles: '/oaBus/oaFile/downloadZipFile',\r\n        queryAllHaveDone: '/wf/task/queryAllHaveDone',//可撤回节点\r\n        reCallTask: 'wf/task/reCallTask',//撤回到上一步\r\n        departFinish: 'wf/task/departFinish',\r\n        lastVersionProc: 'wf/process/lastVersionProc',\r\n        addUserOrDepart: 'oaBus/taskInAct/addUsersQuery',\r\n        doAddUsers:'/oaBus/taskInAct/doAddUsers',\r\n\r\n        //TODO(仅标识) *********************************************    WorkFlow   END   ********************************\r\n        // downloadFiles: '/oaBus/oaFile/downloadZipFile',\r\n        sendMeetingInform: '/oaBus/meetingInform/sendMeetingInform',  //发送通知\r\n        commitPer: '/oaBus/oaBusdata/commitPer', //发布按钮\r\n        updateBusdata: '/oaBus/dynamic/update', //动态修改数据\r\n        updateData: '/oaBus/dynamic/updateData', //普通修改数据\r\n        busDataAndColums: 'oaBus/oaBusdata/queryBusdataById', //查询业务详情\r\n        isUpdateOpinion: '/oaBus/dynamic/updateOpinion',\r\n        getDictByKey: '/sys/dict/getDictByKeyObj',  //数据字典值获取\r\n        queryByFunctionId: '/oaBus/dynamic/queryModelByFunctionId', //根据functionid查询模块信息\r\n        upSendFile: '/oaBus/dynamic/upSendFile', //上报\r\n      },\r\n      butArrLists: null,    // 按钮组列表\r\n      iisDefend: false,   //默认按钮可点击\r\n\r\n    }\r\n  },\r\n  created() {\r\n    //监听页签切换   切换至当前页时刷新底部按钮接口\r\n    var _this = this;\r\n    document.addEventListener('visibilitychange', function () {\r\n      // alert(document.hidden)\r\n      // document.title = document.hidden?'拜拜11111':' 回来啦2222'\r\n      if (document.hidden) {\r\n        _this.showBtn(_this.butArrLists);\r\n      }\r\n    })\r\n  },\r\n  methods: {\r\n    //将起草底稿按钮改为编辑底稿\r\n    /*alertBtnStaus(flagValue,dealBtn){\r\n      alert(flagValue) ;\r\n      let k = -1 ;\r\n      console.log(flagValue)\r\n      for(let i = 0 ; i < this.btn.length ; i ++){\r\n        if(this.btn[i].smethod == flagValue){\r\n          console.log(this.btn[i])\r\n          k = i ;\r\n          break ;\r\n          //alert(k)\r\n        }\r\n      }\r\n      if(k >=0){\r\n        //如果dealBtn为空的话，不插入数据，如果不为空的话，就可以将数据插入到起草底稿的位置\r\n        if(dealBtn == undefined || JSON.stringify(dealBtn) == '{}'){\r\n          this.btn.splice(k,1)\r\n        }else{\r\n          this.btn.splice(k,1,dealBtn)\r\n        }\r\n      }\r\n      //this.btnObj[flagValue] = false ;\r\n    },\r\n*/\r\n    //TODO(仅标识)**********************************************  BASE START   ******************************************\r\n    //方法路由\r\n    method_router(item, index) {\r\n      // console.log(item);\r\n      // console.log( this.$refs.isDefendBtn[index]);\r\n      // console.log( this.$refs.isNotDefendBtn[index]);\r\n      // // console.log( this.$refs.btn[index]);\r\n      this.currentBtn = item;\r\n\r\n      if (this.$refs.isDefendBtn[index]) {\r\n        if (!item.iisDefend && item.sbtnName == this.$refs.isDefendBtn[index].$el.innerText) {\r\n          this.$refs.isDefendBtn[index].$el.setAttribute('disabled', true)\r\n        }\r\n      }\r\n\r\n      if (this.$refs.isNotDefendBtn) {\r\n        if (this.$refs.isNotDefendBtn[index]) {\r\n          if (!item.iisDefend && item.sbtnName == this.$refs.isNotDefendBtn[index].$el.innerText) {\r\n            this.$refs.isNotDefendBtn[index].$el.setAttribute('disabled', true)\r\n            this.$refs.isNotDefendBtn[index].$el.style.opacity = '.6'\r\n\r\n          }\r\n        }\r\n      }\r\n      this[item.smethod]()\r\n    },\r\n    doPost(url, data) {\r\n      postAction(url, data).then(res => {\r\n        if (res.success) {\r\n          this.$message.success(res.message)\r\n        } else {\r\n          this.$message.error(res.message)\r\n        }\r\n      })\r\n    },\r\n    doGet(url, data) {\r\n      getAction(url, data).then(res => {\r\n        if (res.success) {\r\n          this.$message.success(res.message)\r\n        } else {\r\n          this.$message.error(res.message)\r\n        }\r\n      })\r\n    },\r\n    //关注件--是否重要\r\n    important() {\r\n      this.$emit('iIsImportantObj')\r\n    },\r\n    //销假\r\n    destoryDay() {\r\n      // //console.log(\"-----------------------\")\r\n      this.$emit('destoryObj')\r\n    },\r\n    //保存按钮\r\n    saveBusData() {\r\n      //console.log(\"业务数据====》\", this.backData);\r\n      //console.log(\"业务配置====》\", this.busFunction);\r\n      //校验是否有发布范围、流程\r\n      if (this.busFunction.iisLimits == 0 && this.busFunction.iisProc == 0) {\r\n        let queryParam = {};\r\n        queryParam.i_bus_function_id = this.busFunction.iid;\r\n        queryParam.table = this.backData.table + '_permit'\r\n        queryParam.i_busdata_id = this.backData.i_id;\r\n        postAction(this.url.queryById, queryParam).then(res => {\r\n          if (res.success && res.result == null) {\r\n            queryParam.s_userunit_id = this.backData.s_create_unitid\r\n            postAction(this.url.insert, queryParam).then(res => {\r\n            })\r\n          }\r\n        })\r\n      }\r\n      this.$emit('savaObj');\r\n    },\r\n    //删除按钮\r\n    deleteBusData() {\r\n      let param = {};\r\n      param.table = this.backData.table;\r\n      param.i_id = this.backData.i_id;\r\n      // console.log(JSON.stringify(this.taskMsg))\r\n      if (this.taskMsg.processInstanceId != undefined) {\r\n        param.processInstanceId = this.taskMsg.processInstanceId;\r\n      }\r\n      postAction(\"/oaBus/dynamic/deleteBusdata\", param).then(res => {\r\n        if (res.success) {\r\n          this.$message.success(res.message)\r\n          setTimeout(function () {\r\n            this.close()\r\n          }, 500)\r\n        } else {\r\n          this.$message.error(res.message)\r\n        }\r\n      })\r\n    },\r\n    //关闭按钮\r\n    close() {\r\n      // this.$router.go(-1);\r\n      // this.$emit(\"close\")\r\n      window.close()\r\n    },\r\n    //展示按钮\r\n    showBtn(btn) {\r\n      //console.log(btn);\r\n      this.butArrLists = btn;\r\n      this.btn = btn.isNotDefend\r\n      this.defindBtns = btn.isDefend\r\n\r\n      getAction(this.url.currentUserMsg).then(res => {\r\n        if (res.success) {\r\n          this.currentUserMessage = res.result\r\n        } else {\r\n          this.$message.error(res.message)\r\n        }\r\n      })\r\n\r\n    },\r\n    cancel() {\r\n      //console.log('==>>>>>>取消>>>>>>', JSON.stringify(this.backData))\r\n    },\r\n    reload2() {\r\n      this.reload()\r\n    },\r\n    //按钮校验\r\n    checkBtnBeforeNext(value) {\r\n      switch (value) {\r\n        //判断是否已经起草底稿\r\n        case \"qiCao\":\r\n          if (this.backData.i_is_draft != 1) {\r\n            this.$message.error(\"请先起草底稿！！！\");\r\n            return false;\r\n            break;\r\n          }\r\n        //判断是否已经正文排版\r\n        case 'zwPaiBan':\r\n          if (undefined && this.backData.i_is_typeset != 1) {\r\n            this.$message.error(\"请先进行正文排版！！！\");\r\n            return false;\r\n            break;\r\n          }\r\n        case 'saveBanWen':\r\n          if (this.backData.i_is_approve != 1) {\r\n            this.$message.error(\"请先保存办文单！！！\");\r\n            return false;\r\n            break;\r\n          }\r\n        default :\r\n          return true;\r\n      }\r\n    },\r\n    //TODO(仅标识)**********************************************   BASE  END   ******************************************\r\n\r\n    //TODO(仅标识)***************************************************** 工作流相关 START *********************************\r\n    //追加办理人\r\n    addUserOrDepart() {\r\n      //查询下n个节点 找出其中可追加的\r\n      if (this.taskMsg.hiTaskId == undefined || this.taskMsg.hiTaskId == null) {\r\n        this.$message.error('非已办任务不可追加')\r\n        return\r\n      }\r\n      let hiTaskId = this.taskMsg.hiTaskId\r\n      getAction(this.url.addUserOrDepart + '?taskId=' + hiTaskId).then(res => {\r\n        if (res.success) {\r\n          // this.$refs.addUsersModal\r\n          this.$refs.addUsersModal.showNextUsers(res.result)\r\n        } else {\r\n          this.$message.error(res.message)\r\n        }\r\n      })\r\n    },\r\n    //下一任务查询(节点)\r\n    nextTaskQuery() {\r\n      if (this.nextConfirm) {\r\n        this.$message.error('该环节任务已经办理请勿重复点击')\r\n        return\r\n      }\r\n\r\n      // //校验意见\r\n      // if (this.flag) {    //如果要填写意见的话，就进行校验\r\n      //   if (!this.isSaveFlag) {  //如果没有填写\r\n      //     this.$message.error(\"下一任务前必须填写意见！！！\");\r\n      //     return;\r\n      //   }\r\n      // }\r\n      // // 按钮校验\r\n      // if (this.btn != undefined && this.btn.length > 0) {\r\n      //   console.log(JSON.stringify(this.btn))\r\n      //   for (let i = 0; i < this.btn.length; i++) {\r\n      //     //查看是否要校验按钮\r\n      //     if (this.btn[i].iisCheckbus == 1) {\r\n      //       let checkFlagBtn = this.checkBtnBeforeNext(this.btn[i].smethod);\r\n      //       if (!checkFlagBtn) {\r\n      //         return;\r\n      //         break;\r\n      //       }\r\n      //     }\r\n      //   }\r\n      // }\r\n      // //this.$emit('checkData')\r\n      // this.$emit(\"nextCheckDataFun\")\r\n      // //获取store changeCheckDataFlag\r\n      // if (this.$store.state.checkDataFlag) {\r\n      //   this.nextRealQuery()\r\n      // }\r\n      this.nextRealQuery()\r\n\r\n\r\n    },\r\n\r\n    nextRealQuery() {\r\n      if (this.taskMsg.id == undefined && this.taskMsg.hiTaskId != undefined) {\r\n        this.$message.error('已办环节没有下一任务')\r\n        return\r\n      }\r\n\r\n      //根据当前节点查到下几个节点再去表里查具体信息\r\n      getAction(this.url.nextUsers, {\r\n        procDefkey: this.backData.s_cur_proc_name,\r\n        drafterId: this.backData.s_create_by,\r\n        taskId: this.taskMsg.id,\r\n        taskDefinitionKey: this.taskMsg.taskDefinitionKey,\r\n      }).then(res => {\r\n        //展示数据\r\n        if (res.success) {\r\n          this.$refs.nextUsers.showNextUsers(res.result)\r\n        } else {\r\n          this.$message.error(res.message)\r\n        }\r\n      })\r\n    },\r\n    //按钮-共享\r\n    shareFile: function () {\r\n      postAction('oaBus/dynamic/shareFile', this.backData).then(res => {\r\n        if (res.success && res.result == true) {\r\n          this.$message.success(\"共享完成\")\r\n        } else {\r\n          this.$message.error(\"请检查相关配置是否完善\")\r\n        }\r\n      })\r\n    },\r\n    //按钮-内部传阅\r\n    insideReading() {\r\n      //数据字典获取functionID\r\n      getAction(this.url.getDictByKey, {dictKey: 'btn_insideSend'}).then(res => {\r\n        if (res.success && res.result[0].value != undefined) {\r\n          this.dictData.dictUnitId = res.result[0].text //中支id\r\n          this.dictData.dictFunctionId = res.result[0].value //functionid\r\n          //根据functionid查询模块信息\r\n          getAction(this.url.queryByFunctionId, {functionId: this.dictData.dictFunctionId}).then(res => {\r\n            if (res.success) {\r\n              this.dictData.table = res.result.s_busdata_table\r\n              this.dictData.modelId = res.result.i_id\r\n\r\n              //查询业务模板是否传阅\r\n              let isRead = {};\r\n              isRead.table = this.dictData.table;\r\n              isRead.i_bigint1 = this.backData.i_id;  //传阅数据id\r\n              isRead.i_bigint2 = this.backData.i_bus_model_id   //传阅业务模块id\r\n              isRead.i_bigint3 = this.backData.i_bus_function_id   //传阅业务id\r\n              isRead.i_is_display = 0       //isRead.i_is_display = 0   // 状态 1临时 0已传阅\r\n\r\n              //校验该文件是否已经传阅\r\n              postAction(this.url.queryById, isRead).then(res => {\r\n                if (res.success) {\r\n                  if (res.result != null) {\r\n                    this.$message.error(\"该文件已传阅！\")\r\n                    return\r\n                  }\r\n                  this.havaOtherProc = true\r\n                  //新建\r\n                  let param = {}\r\n                  param.modelId = this.dictData.modelId\r\n                  param.functionId = this.dictData.dictFunctionId   //数据字典取值\r\n                  //初始化数据\r\n                  this.otherProc.busData = {}\r\n                  postAction(\"/oaBus/oaBusdata/queryNewTaskMsg\", param).then(res => {\r\n                    if (res.success) {\r\n                      let insideParam = {};\r\n                      this.otherProc.busData.i_id = res.result.busdataId\r\n                      this.otherProc.busData.table = res.result.tableName\r\n                      this.otherProc.busData.s_title = this.backData.s_title   //标题\r\n                      this.otherProc.busData.s_file_num = this.backData.s_file_num //文件字号\r\n                      this.otherProc.busData.d_sealdate = this.backData.d_sealdate   //封发日期\r\n                      this.otherProc.busData.s_main_dept_names = this.backData.s_main_dept_names  //主送部门\r\n                      this.otherProc.busData.s_varchar5 = this.backData.s_create_name  //拟稿时间\r\n                      this.otherProc.busData.s_varchar6 = this.backData.s_create_dept //\r\n                      this.otherProc.busData.s_main_unit_names = this.backData.s_main_unit_names //主送单位\r\n                      this.otherProc.busData.s_signer = this.backData.s_signer  //签发人\r\n                      this.otherProc.busData.s_varchar1 = this.backData.table //业务数据表\r\n                      this.otherProc.busData.s_varchar7 = '内部传阅' //传阅类别\r\n                      this.otherProc.busData.i_safetylevel = this.backData.i_safetylevel //密级\r\n                      this.otherProc.busData.i_urgency = this.backData.i_urgency //缓急\r\n                      this.otherProc.busData.i_bigint1 = this.backData.i_id   //传阅业务数据id\r\n                      this.otherProc.busData.i_bigint2 = this.backData.i_bus_model_id   //传阅业务模块id\r\n                      this.otherProc.busData.i_bigint3 = this.backData.i_bus_function_id //传阅业务id\r\n                      // this.otherProc.busData.s_create_by = this.backData.s_create_by\r\n                      // this.otherProc.busData.s_create_dept = this.backData.s_create_dept\r\n                      // this.otherProc.busData.s_create_deptid = this.backData.s_create_deptid\r\n                      // this.otherProc.busData.i_create_day = this.backData.i_create_day\r\n                      // this.otherProc.busData.i_create_month = this.backData.i_create_month\r\n                      // this.otherProc.busData.i_create_year = this.backData.i_create_year\r\n                      getAction('/oaBus/oaBusdata/getModelSname', {id: this.otherProc.busData.i_bigint3}).then(res => {\r\n                        if (res.success && res.result != null) {\r\n                          this.otherProc.busData.s_varchar11 = res.result.mName;\r\n                          this.otherProc.busData.s_varchar12 = res.result.fName;\r\n                          // alert(JSON.stringify(this.otherProc.busData))\r\n                          //传阅业务业务id\r\n                          let param = {tableName: res.result.tableName, busdataId: res.result.busdataId};\r\n                          postAction(this.url.updateData, this.otherProc.busData).then(res => {\r\n                            if (res.success) {\r\n                              //查询页面数据详情\r\n                              postAction(this.url.busDataAndColums, {\r\n                                tableName: this.otherProc.busData.table,\r\n                                busdataId: this.otherProc.busData.i_id\r\n                              }).then((res) => {\r\n                                if (res.success) {\r\n                                  //复制发文附件\r\n                                  let fileParam = {};\r\n                                  fileParam.sTable = this.backData.table; //发文业务表\r\n                                  fileParam.iTableId = this.backData.i_id; //发文业务数据id\r\n                                  fileParam.sFileType = '4,6'; //附件类型\r\n                                  fileParam.receiveTable = res.result.oaBusdata.table;\r\n                                  fileParam.receiveId = res.result.oaBusdata.i_id\r\n                                  postAction('/oaBus/oaFile/copyFile', fileParam).then(res => {\r\n                                    if (res.success) {\r\n                                      // this.$message.success(res.message);\r\n                                    } else {\r\n                                      this.$message.error(\"文件备份失败\");\r\n                                    }\r\n                                  })\r\n\r\n                                  this.otherProc.busData = res.result.oaBusdata\r\n                                  this.otherProc.busData['iprocSetId'] = res.result.proSetId;\r\n                                  this.otherProc.busData['key'] = res.result.taskDefKey\r\n                                  this.otherProc.busData.act_show = res.result.actShow\r\n                                  //下一任务\r\n                                  getAction(this.url.nextUsers, {\r\n                                    procDefkey: res.result.oaBusdata.s_cur_proc_name, // this.backData.s_cur_proc_name,\r\n                                    drafterId: res.result.oaBusdata.s_create_by\r\n                                  }).then(res => {\r\n                                    //展示数据\r\n                                    if (res.success) {\r\n                                      this.$refs.nextUsers.showNextUsers(res.result)\r\n                                    } else {\r\n                                      this.$message.error(res.message)\r\n                                    }\r\n                                  })\r\n                                } else {\r\n                                  this.$message.error(\"详情数据格式错误\")\r\n                                  return\r\n                                }\r\n\r\n                              })\r\n                            } else {\r\n                              this.$message.error(\"更新数据错误\")\r\n                              return\r\n                            }\r\n                          })\r\n                        } else {\r\n                          this.$message.error(\"业务配置错误\")\r\n                          return\r\n                        }\r\n                      })\r\n                    } else {\r\n                      this.$message.error(\"初始化数据错误\")\r\n                      return\r\n                    }\r\n                  })\r\n                } else {\r\n                  this.$message.error(\"数据错误\")\r\n                  return\r\n                }\r\n              })\r\n            } else {\r\n              this.$message.error('请检查对应模块配置是否正确')\r\n              return\r\n            }\r\n          })\r\n        } else {\r\n          this.$message.error('请配置内部传阅数据字典值')\r\n          return\r\n        }\r\n\r\n      })\r\n\r\n    },\r\n    //按钮-省会-->地市(收文流程)\r\n    provinceToCityReceviceSend() {\r\n      this.$refs.selectCityModel.title = \"选择地市\";\r\n      this.$refs.selectCityModel.show(this.backData, 1);\r\n    },\r\n    //按钮-省会-->地市(传阅不带流程)\r\n    provinceToCityInsideSend() {\r\n      this.$refs.selectCityModel.title = \"选择地市\";\r\n      this.$refs.selectCityModel.show(this.backData, 2);\r\n    },\r\n    //按钮-上报\r\n    upSendFile() {\r\n      postAction(this.url.upSendFile, this.backData).then(res => {\r\n        if (res.success && res.result[\"unitTables\"].length != 0) {\r\n          this.dictData.table = res.result[\"unitTables\"][0].btable;\r\n          this.dictData.dictFunctionId = res.result[\"unitTables\"][0].functionId;\r\n          this.dictData.modelId = res.result[\"unitTables\"][0].modelId;\r\n          this.dictData.unitName = res.result[\"unitTables\"][0].unitName;\r\n          this.dictData.dictUnitId = res.result[\"unitTables\"][0].unitId;\r\n          this.usersData = res.result[this.dictData.dictUnitId];\r\n          this.visibleModel = true;\r\n        } else {\r\n          this.$message.error(\"请检查相关配置是否完善！\")\r\n        }\r\n      })\r\n    },\r\n    //确认上报\r\n    upSendConfirm() {\r\n      this.busData = this.backData;\r\n      let param = {};\r\n      param.table = this.dictData.table;\r\n      param.modelId = this.dictData.modelId;\r\n      param.functionId = this.dictData.dictFunctionId;\r\n      let unitId = this.dictData.dictUnitId;\r\n      let flag = false;\r\n      //新建任务\r\n      postAction(\"/oaBus/oaBusdata/queryNewTaskMsg\", param).then(res => {\r\n        if (res.success) {\r\n          let receiveData = {};\r\n          receiveData.s_title = this.busData.s_title  //标题\r\n          receiveData.d_sealdate = this.busData.d_sealdate//成文日期  d_sealdate\r\n          receiveData.s_receive_num = this.busData.s_file_num //来文字号 s_file_num\r\n          // receiveData.s_varchar5 = this.busData.s_unit_name//来文机关 s_unit_name\r\n          receiveData.i_urgency = this.busData.i_urgency; //缓急 i_urgency\r\n          receiveData.i_safetylevel = this.busData.i_safetylevel; //密级 i_safetylevel\r\n          receiveData.i_bigint1 = this.busData.i_bigint1  //印发份数\r\n          receiveData.i_bigint2 = this.busData.i_bigint2  //正文页数\r\n          receiveData.table = res.result.tableName\r\n          receiveData.i_id = res.result.busdataId\r\n          receiveData.s_create_by = \"\";\r\n          for (let j = 0; j < this.usersData.length; j++) {\r\n            receiveData.s_create_by += this.usersData[j].userId + \",\"; //创建人\r\n          }\r\n          //更新数据\r\n          postAction(this.url.updateData, receiveData).then(res => {\r\n            if (res.success) {\r\n              //开启流程\r\n              postAction(this.url.updateBusdata, {updateBusdata: res.result}).then(res => {\r\n                if (res.success) {\r\n                  let users = [];\r\n                  users = this.usersData;\r\n                  postAction('/oaBus/dynamic/insertPermit', {\r\n                    list: users,\r\n                    functionId: param.functionId,\r\n                    iBusdataId: receiveData.i_id,\r\n                    table: receiveData.table\r\n                  }).then(res => {\r\n                    if (res.success) {\r\n                      //复制发文附件\r\n                      let fileParam = {};\r\n                      fileParam.sTable = this.busData.table; //发文业务表\r\n                      fileParam.iTableId = this.busData.i_id; //发文业务数据id\r\n                      fileParam.sFileType = 4; //附件类型\r\n                      fileParam.receiveTable = receiveData.table;\r\n                      fileParam.receiveId = receiveData.i_id\r\n                      postAction('/oaBus/oaFile/copyFile', fileParam).then(res => {\r\n                        if (res.success) {\r\n                          flag = true;\r\n                          this.$message.success(\"上报成功！\")\r\n                        } else {\r\n                          this.$message.error(\"附件复制失败！\")\r\n                        }\r\n                      })\r\n                    } else {\r\n                      this.$message.error(\"用户权限写入失败！\")\r\n                    }\r\n                  })\r\n                } else {\r\n                  this.$message.error(\"开启流程失败！\")\r\n                }\r\n              })\r\n            } else {\r\n              this.$message.error(\"业务数据更新失败！\")\r\n            }\r\n          })\r\n        } else {\r\n          this.$message.error(\"新建任务失败！\")\r\n        }\r\n      });\r\n      this.closeModal();\r\n    },\r\n    //按钮-传阅下发\r\n    downSendFile() {\r\n      this.$refs.selectUnitModel.title = \"选择下发县行\";\r\n      this.$refs.selectUnitModel.show(this.backData);\r\n      //数据字典配置 类型 上报  1 中支 id value (functionid)\r\n      // 下发---》 县行 key (id) value (functionid)\r\n      // 内部传阅  1 中支id value (functionid)\r\n    },\r\n    //按钮校验\r\n    checkData() {\r\n      let buttonList = this.btn.isDefend //获取上面的按钮\r\n      let buttonList2 = this.btn.isNotDefend //获取下面的按钮\r\n      for (let i = 0; i < buttonList.length; i++) {\r\n        //判断是不是选择了校验\r\n        if (buttonList[i].iisCheckbus != undefined && buttonList[i].iisCheckbus != '') {\r\n          if (buttonList[i].sbtnName == '下一任务') {\r\n            for (let i = 0; i < buttonList2.length; i++) {\r\n              if (buttonList2[i].smethod != undefined && buttonList2[i].smethod != '' && (buttonList2[i].smethod == 'qiCao')) {\r\n\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    setBackDataNew(BackDataNew) {\r\n      this.backData = BackDataNew\r\n    },\r\n    //最新环节和密级\r\n    lastedUrgency() {\r\n      //数据缓急拿到最新\r\n      let i_urgency = localStorage.getItem('缓急:' + this.backData.table + this.backData.i_id)\r\n      this.backData.i_urgency = i_urgency == null ? 4 : i_urgency\r\n      let i_safetylevel = localStorage.getItem('密级:' + this.backData.table + this.backData.i_id)\r\n      this.backData.i_urgency = i_urgency == null ? 4 : i_urgency\r\n      this.backData.i_safetylevel = i_safetylevel == null ? 1 : i_safetylevel\r\n      //清除缓存中的记录\r\n      localStorage.removeItem('缓急:' + this.backData.table + this.backData.i_id)\r\n      localStorage.removeItem('密级:' + this.backData.table + this.backData.i_id)\r\n    },\r\n    //选择下一办理人的同时办理任务\r\n    confirmNextUsers(ids, activity, endTime, depts) {\r\n      //传后台的参数\r\n      var data = {};\r\n      var taskId = this.taskMsg.id\r\n      if (this.havaOtherProc) {\r\n        var taskId = undefined\r\n      }\r\n      data['taskId'] = taskId\r\n      //业务数据权限表（流转过程中逐步维护该表数据、收回删除人员权限）\r\n      data['assignee'] = ids\r\n      data['functionId'] = this.backData.i_bus_function_id\r\n      data['busDataId'] = this.backData.i_id\r\n      //下一节点为 结束节点不需要拼接 下一办理用户\r\n      data['isDept'] = false\r\n      if (ids.length > 0) {\r\n        //连线信息--决定走向\r\n        var vars = activity.actMsg.conditionContext;\r\n        if (vars == undefined) {\r\n          vars = {}\r\n        }\r\n        //进行任务办理\r\n        if (endTime != '') {\r\n          //有时间限制\r\n          vars.endTime = endTime;\r\n        }\r\n        //组装办理人信息\r\n        //是否是设计上的多实例\r\n        if (activity.actMsg.allowMulti) {\r\n          //数据库配置是否允许多实例\r\n          vars[activity.actMsg.multiAssignee] = ids\r\n          vars[activity.actMsg.loopSize] = ids.length\r\n        } else {\r\n          vars[activity.actMsg.assignee] = ids[0]\r\n        }\r\n        //流程所需变量\r\n        data['vars'] = vars\r\n      }\r\n      //记录部门相关信息\r\n      var deptMsg = {}\r\n      //如果是部门 记录部门信息\r\n      if (activity.oaProcActinst != undefined && activity.oaProcActinst.userOrRole == 'dept') {\r\n        //记录部门信息\r\n        deptMsg['tskId'] = this.taskMsg.id\r\n        deptMsg['taskDefKey'] = activity.actMsg.id\r\n        deptMsg['deptMsg'] = depts\r\n        var mainDept = ''\r\n        for (let i in activity.departSelect) {\r\n          if (i.indexOf(\"主办\") >= 0) {\r\n            mainDept = activity.departSelect[i][0].departName\r\n          }\r\n        }\r\n        deptMsg['mainDept'] = mainDept\r\n        data['taskWithDepts'] = deptMsg\r\n        data['isDept'] = true\r\n      }\r\n      this.backData.page_ref = this.taskMsg.pageRef\r\n      //业务数据\r\n      this.$emit(\"getbackDataNew\", this.backData.page_ref)\r\n      this.lastedUrgency()\r\n\r\n      if (this.havaOtherProc) {\r\n        data['busData'] = this.otherProc.busData\r\n        // data['busData']['justStart'] = true\r\n      } else {\r\n        data['busData'] = this.backData\r\n      }\r\n      data['taskDefKey'] = activity.actMsg.id\r\n\r\n\r\n      //参数构造完毕***********************\r\n      postAction(this.url.doTask, data).then(res => {\r\n        if (res.success) {\r\n          this.$message.success(res.message)\r\n          this.havaOtherProc = false\r\n          this.nextConfirm = true\r\n          // this.saveBusData()\r\n          setTimeout(function () {\r\n            this.close()\r\n          }, 500)\r\n          // this.reload()\r\n        } else {\r\n          this.$message.error(res.message)\r\n        }\r\n      })\r\n    },\r\n    //并行/包容网关的确定\r\n    confirmNextUsersMore(actMsg, endTime) {\r\n      var datas = []\r\n      for (let key  in actMsg) {\r\n        let type = actMsg[key]\r\n        if (Object.keys(type).length > 0) {\r\n          this.constructData(type, endTime, datas)\r\n        }\r\n      }\r\n      let taskInfoVoList = {list: datas}\r\n\r\n      //请求后台\r\n      postAction(this.url.doTaskMore, taskInfoVoList).then(res => {\r\n        if (res.success) {\r\n          this.$message.success(res.message)\r\n          this.havaOtherProc = false\r\n          this.nextConfirm = true\r\n          setTimeout(function () {\r\n            this.close()\r\n          }, 500)\r\n        } else {\r\n          this.$message.error(res.message)\r\n        }\r\n      })\r\n    },\r\n    //追加用户\r\n    confirmAddUserSingle(ids, activity, endTime, depts) {\r\n      //传后台的参数\r\n      var data = {};\r\n      var taskId = this.taskMsg.id\r\n      if (this.havaOtherProc) {\r\n        var taskId = undefined\r\n      }\r\n      data['taskId'] = taskId\r\n      //业务数据权限表（流转过程中逐步维护该表数据、收回删除人员权限）\r\n      data['assignee'] = ids\r\n      data['functionId'] = this.backData.i_bus_function_id\r\n      data['busDataId'] = this.backData.i_id\r\n      //下一节点为 结束节点不需要拼接 下一办理用户\r\n      data['isDept'] = false\r\n      if (ids.length > 0) {\r\n        //连线信息--决定走向\r\n        var vars = activity.actMsg.conditionContext;\r\n        if (vars == undefined) {\r\n          vars = {}\r\n        }\r\n        //进行任务办理\r\n        if (endTime != '') {\r\n          //有时间限制\r\n          vars.endTime = endTime;\r\n        }\r\n        //组装办理人信息\r\n        //是否是设计上的多实例\r\n        if (activity.actMsg.allowMulti) {\r\n          //数据库配置是否允许多实例\r\n          vars[activity.actMsg.multiAssignee] = ids\r\n          vars[activity.actMsg.loopSize] = ids.length\r\n        } else {\r\n          vars[activity.actMsg.assignee] = ids[0]\r\n        }\r\n        //流程所需变量\r\n        data['vars'] = vars\r\n      }\r\n      //记录部门相关信息\r\n      var deptMsg = {}\r\n      //如果是部门 记录部门信息\r\n      if (activity.oaProcActinst != undefined && activity.oaProcActinst.userOrRole == 'dept') {\r\n        //记录部门信息\r\n        deptMsg['tskId'] = this.taskMsg.id\r\n        deptMsg['taskDefKey'] = activity.actMsg.id\r\n        deptMsg['deptMsg'] = depts\r\n        var mainDept = ''\r\n        for (let i in activity.departSelect) {\r\n          if (i.indexOf(\"主办\") >= 0) {\r\n            mainDept = activity.departSelect[i][0].departName\r\n          }\r\n        }\r\n        deptMsg['mainDept'] = mainDept\r\n        data['taskWithDepts'] = deptMsg\r\n        data['isDept'] = true\r\n      }\r\n      this.backData.page_ref = this.taskMsg.pageRef\r\n      //业务数据\r\n      this.$emit(\"getbackDataNew\", this.backData.page_ref)\r\n      this.lastedUrgency()\r\n\r\n      if (this.havaOtherProc) {\r\n        data['busData'] = this.otherProc.busData\r\n        // data['busData']['justStart'] = true\r\n      } else {\r\n        data['busData'] = this.backData\r\n      }\r\n      data['taskDefKey'] = activity.actMsg.id\r\n\r\n      console.log('---->>>>>',JSON.stringify(data))\r\n\r\n\r\n\r\n\r\n      //参数构造完毕***********************\r\n      // postAction(this.url.doTask, data).then(res => {\r\n      //   if (res.success) {\r\n      //     this.$message.success(res.message)\r\n      //     this.havaOtherProc = false\r\n      //     this.nextConfirm = true\r\n      //     // this.saveBusData()\r\n      //     setTimeout(function () {\r\n      //       this.close()\r\n      //     }, 500)\r\n      //     // this.reload()\r\n      //   } else {\r\n      //     this.$message.error(res.message)\r\n      //   }\r\n      // })\r\n    },\r\n    //并行/包容追加\r\n    confirmAddUsers(actMsg, endTime) {\r\n      var datas = []\r\n      for (let key  in actMsg) {\r\n        let type = actMsg[key]\r\n        if (Object.keys(type).length > 0) {\r\n          this.constructData(type, endTime, datas)\r\n        }\r\n      }\r\n      let taskInfoVoList = {list: datas}\r\n\r\n      console.log('=========>>>>>',JSON.stringify(taskInfoVoList))\r\n\r\n      //请求后台\r\n      postAction(this.url.doAddUsers, taskInfoVoList).then(res => {\r\n        if (res.success) {\r\n          this.$message.success(res.message)\r\n          this.havaOtherProc = false\r\n          this.nextConfirm = true\r\n          setTimeout(function () {\r\n            this.close()\r\n          }, 500)\r\n        } else {\r\n          this.$message.error(res.message)\r\n        }\r\n      })\r\n    },\r\n    constructData(type, endTime, datas) {\r\n      //传后台的参数\r\n      var taskId = this.taskMsg.id\r\n      if (this.havaOtherProc) {\r\n        taskId = undefined\r\n      }\r\n      for (let k in type) {\r\n        var data = {};\r\n        data['taskId'] = taskId\r\n        let v = type[k]\r\n        // console.log('---------------->>>>>', k, JSON.stringify(v))\r\n        let activity = v.activity\r\n        let isDept = activity.oaProcActinst.userOrRole == 'dept'\r\n        data['isDept'] = isDept\r\n        var ids = []\r\n        if (isDept) {\r\n          //构造用户id集合\r\n          for (let kk in v.departUsersId) {\r\n            let inids = v.departUsersId[kk]\r\n            if (inids.length > 0) {\r\n              ids.push(inids)\r\n            }\r\n          }\r\n          //记录部门相关信息\r\n          var deptMsg = {}\r\n          //记录部门信息\r\n          deptMsg['tskId'] = taskId\r\n          deptMsg['taskDefKey'] = activity.actMsg.id\r\n          var mainDept = '';\r\n          for (let i in v.departSelect) {\r\n            if (i.indexOf(\"主办\") >= 0 && (v.departSelect[i].length > 0)) {\r\n              mainDept = v.departSelect[i][0].departName\r\n              break\r\n            }\r\n          }\r\n          deptMsg['mainDept'] = mainDept\r\n          //记录主办部门信息\r\n          deptMsg['deptMsg'] = v.departUsersId\r\n          data['taskWithDepts'] = deptMsg\r\n          data['isDept'] = true\r\n        } else {\r\n          ids = v.selectedRowKeys\r\n        }\r\n        data['assignee'] = ids\r\n        data['functionId'] = this.backData.i_bus_function_id\r\n        data['busDataId'] = this.backData.i_id\r\n        //下一节点为 结束节点不需要拼接 下一办理用户\r\n        // if (ids.length > 0) {\r\n        //连线信息--决定走向\r\n        var vars = activity.actMsg.conditionContext;\r\n        if (vars == undefined) {\r\n          vars = {}\r\n        }\r\n        //进行任务办理\r\n        if (endTime!=undefined && endTime != '' ) {\r\n          //有时间限制\r\n          vars.endTime = endTime;\r\n        }\r\n        //组装办理人信息\r\n        //是否是设计上的多实例\r\n        if (activity.actMsg.allowMulti) {\r\n          //数据库配置是否允许多实例\r\n          vars[activity.actMsg.multiAssignee] = ids\r\n          vars[activity.actMsg.loopSize] = ids.length\r\n        } else {\r\n          vars[activity.actMsg.assignee] = ids[0]\r\n        }\r\n        //流程所需变量\r\n        data['vars'] = vars\r\n        // }\r\n        this.backData.page_ref = this.taskMsg.pageRef\r\n\r\n        //业务数据\r\n        this.$emit(\"getbackDataNew\", this.backData.page_ref)\r\n        this.lastedUrgency()\r\n        //业务数据\r\n        if (this.havaOtherProc) {\r\n          data['busData'] = this.otherProc.busData\r\n        } else {\r\n          data['busData'] = this.backData\r\n        }\r\n        data['taskDefKey'] = activity.actMsg.id\r\n\r\n        datas.push(data)\r\n\r\n      }\r\n    },\r\n    //仅保存数据\r\n    justSave() {\r\n      postAction(this.url.insert, this.backData).then(res => {\r\n        if (res.success) {\r\n          this.backData.id = res.result.id\r\n          this.$message.success(res.message)\r\n        } else {\r\n          this.$message.error(res.message)\r\n        }\r\n      })\r\n    },\r\n    //开启流程\r\n    start() {\r\n      //加入 任务描述\r\n      this.doPost(this.url.start, this.backData)\r\n    },\r\n    //保存数据并开启流程\r\n    saveAndStartPro() {\r\n      //加入任务描述\r\n      this.doPost(this.url.insertDataAndStartPro, this.backData)\r\n    },\r\n    //强制办结\r\n    forceEndPro() {\r\n      var res = window.confirm(\"是否强制办结\");\r\n      if (res) {\r\n        this.doGet(this.url.endProUrl, {processId: this.taskMsg.processInstanceId})\r\n        //关闭页面刷新父组件\r\n        // this.$emit('close');\r\n        // this.visible = false;\r\n        this.reload()\r\n      }\r\n    },\r\n    //展示回退节点\r\n    showBack() {\r\n      this.showPoint('back')\r\n    },\r\n    //展示跳转节点\r\n    showJump() {\r\n      this.showPoint('all')\r\n    },\r\n    showPoint(type) {\r\n      var text = type == 'all' ? '跳转' : '回退'\r\n      getAction(this.url.showBackAct,\r\n        {\r\n          processDefinitionId: this.taskMsg.processDefinitionId,\r\n          type: type,\r\n          processInstanceId: this.taskMsg.processInstanceId,\r\n          taskDefinitionKey: this.taskMsg.taskDefinitionKey\r\n        }\r\n      ).then(res => {\r\n        if (res.success) {\r\n          if (res.result.length <= 0) {\r\n            this.$message.error('没有可' + text + '节点')\r\n            return\r\n          }\r\n          this.$refs.backModal.dataSource = res.result\r\n          this.$refs.backModal.taskMsg = this.taskMsg\r\n          this.$refs.backModal.title = text\r\n          this.$refs.backModal.show()\r\n        } else {\r\n          this.$message.error(res.message)\r\n        }\r\n      })\r\n    },\r\n    //撤回---判断发出任务是否已读\r\n    reCall() {\r\n\r\n      let params = this.$route;\r\n\r\n      let router = this.$router\r\n\r\n      //展示自己已办的所有节点\r\n      let taskId = this.taskMsg.hiTaskId\r\n      if (taskId == undefined) taskId = this.taskMsg.id\r\n      getAction(this.url.reCallTask + '?taskId=' + taskId).then(res => {\r\n          if (res.success) {\r\n            this.$message.success(res.message)\r\n            setTimeout(function () {\r\n              if (params.query.status != undefined) params.query.status = 'todo'\r\n              if (params.query.task != undefined) params.query.task = JSON.stringify(res.result)\r\n\r\n              let parm = []\r\n              for (let k in  params.query) {\r\n                let v = k + '=' + params.query[k]\r\n                if (k == 'task') {\r\n                  v = k + '=' + JSON.stringify(params.query[k])\r\n                }\r\n                parm.push(v)\r\n              }\r\n              let parms = parm.join('&')\r\n              router.push({path: params.path + '?' + parms})\r\n\r\n            }, 500)\r\n\r\n          } else {\r\n            this.$message.error(res.message)\r\n          }\r\n        }\r\n      )\r\n\r\n\r\n    },\r\n//部门完成\r\n    deptFinish() {\r\n      //拿到当前taskId\r\n      var res = window.confirm(\"是否部门完成\");\r\n      if (res) {\r\n        // let param={taskId: this.taskMsg.id}\r\n        this.doPost(this.url.departFinish + \"?taskId=\" + this.taskMsg.id)\r\n        //关闭页面刷新父组件\r\n        // this.$emit('close');\r\n        // this.visible = false;\r\n        this.reload()\r\n      }\r\n    }\r\n    ,\r\n    showPic() {\r\n      let key = this.backData.s_cur_proc_name\r\n      if (key == undefined || key == null || key.length == 0) {\r\n        this.$message.error('此条业务没有流程,请检查按钮配置')\r\n        return\r\n      }\r\n      if (this.taskMsg.processInstanceId == null) {\r\n        getAction(this.url.lastVersionProc + '?key=' + key).then(res => {\r\n          if (res.success) {\r\n            this.$refs.picModalNoTask.show(res.result.id)\r\n            this.$refs.picModalNoTask.title = res.result.name\r\n          } else {\r\n            this.$message.error(res.message)\r\n          }\r\n        })\r\n      } else {\r\n        this.$refs.picModal.show(this.taskMsg)\r\n      }\r\n    }\r\n    ,\r\n    /**\r\n     * 流程办结\r\n     */\r\n    endProc() {\r\n      getAction(this.url.nextUsers, {\r\n        procDefkey: this.backData.s_cur_proc_name,\r\n        drafterId: this.backData.s_create_by,\r\n        taskId: this.taskMsg.id\r\n      }).then(res => {\r\n        //展示数据\r\n        if (res.success) {\r\n          if (res.result.length == 1) {\r\n            this.confirmNextUsers([], res.result[0], null, null)\r\n            this.reload()\r\n          } else {\r\n            this.$message.error('当前节点不可办结')\r\n          }\r\n          // this.$refs.nextUsers.showNextUsers(res.result)\r\n          //TODO********************************* 档案系统接口  ************************************\r\n          getAction(this.url.recordFileSend, {stable: this.backData.table, tableid: this.backData.i_id}).then(res => {\r\n            if (res.success) {\r\n              this.$message.success(res.message)\r\n            } else {\r\n              this.$message.error(res.message)\r\n            }\r\n          })\r\n        } else {\r\n          this.$message.error(res.message)\r\n        }\r\n      })\r\n    }\r\n    ,\r\n\r\n//TODO(仅标识)*****************************************************  工作流相关 END  *********************************\r\n\r\n//TODO(仅标识)***************************************************** 意见相关 *****************************************\r\n    writeOpinion: function () {\r\n      for (var index in this.opts) {\r\n        //判断意见环节是否匹配\r\n        // let td = this.backData.s_cur_task_name.split(\"-\")[0]\r\n        let td = this.taskMsg.taskDefinitionKey;\r\n        if ((this.opts[index].taskDefKeys).indexOf(td) >= 0) {\r\n          //属性赋值\r\n          this.backDataOpt.i_id = this.backDataOpt.i_id == '' ? this.opts[index].optId : this.backDataOpt.i_id\r\n          this.backDataOpt.i_order = this.opts[index]['orderId']\r\n          this.backDataOpt.i_opinion_set_id = this.opts[index]['optionSetId']\r\n          this.backDataOpt.s_opinion_type = this.opts[index]['type'] //意见类型\r\n          break\r\n        }\r\n      }\r\n      this.backDataOpt.i_bus_function_id = this.backData.i_bus_function_id\r\n      this.backDataOpt.i_busdata_id = this.backData.i_id\r\n      this.backDataOpt.s_task_id = this.backDataOpt.s_task_id\r\n      this.backDataOpt.s_task_name = this.taskMsg.name\r\n      // this.backDataOpt.s_taskdef_key = this.backData.s_cur_task_name.split(\"-\")[0]\r\n      this.backDataOpt.s_taskdef_key = this.taskMsg.taskDefinitionKey\r\n      this.backDataOpt.i_user_id = this.currentUserMessage.sysUserId\r\n      this.backDataOpt.s_name = this.currentUserMessage.sysUserName\r\n      this.backDataOpt.table = this.backData.table + \"_opinion\"\r\n      // console.log(JSON.stringify(this.taskMsg))\r\n      // console.log(JSON.stringify(this.backDataOpt))\r\n      this.$refs.opinionForm.suggest(this.backDataOpt);\r\n      this.$refs.opinionForm.title = \"填写意见\";\r\n      this.$refs.opinionForm.disableSubmit = false;\r\n    }\r\n    ,\r\n//填写意见\r\n    saveOption(optionContext) {\r\n      this.backDataOpt.s_opinion = optionContext\r\n      this.backDataOpt.i_bus_function_id = this.backData.i_bus_function_id\r\n      this.backDataOpt.i_busdata_id = this.backData.i_id\r\n      this.backDataOpt.d_sign = this.dateFormat(new Date())\r\n      this.backDataOpt.s_task_id = this.backDataOpt.s_task_id\r\n      this.backDataOpt.s_task_name = this.taskMsg.name\r\n      this.backDataOpt.s_overt = '0'//是否公开\r\n      this.backDataOpt.s_tpye = '1'//\r\n      this.backDataOpt.s_taskdef_key = this.taskMsg.taskDefinitionKey\r\n      this.backDataOpt.i_user_id = this.currentUserMessage.sysUserId\r\n      this.backDataOpt.s_name = this.currentUserMessage.sysUserName\r\n      this.backDataOpt.s_dept_id = this.currentUserMessage.deptId\r\n      this.backDataOpt.s_dept_name = this.currentUserMessage.sysDeptName\r\n      this.backDataOpt.table = this.backData.table + \"_opinion\"\r\n      // console.log('---->意见数据',this.opts)\r\n      // console.log('---->环节',JSON.stringify(this.taskMsg))\r\n      for (var index in this.opts) {\r\n        //判断意见环节是否匹配\r\n        let td = this.taskMsg.taskDefinitionKey\r\n        if ((this.opts[index].taskDefKeys).indexOf(td) >= 0) {\r\n          //属性赋值\r\n          this.backDataOpt.i_id = this.backDataOpt.i_id == '' ? this.opts[index].optId : this.backDataOpt.i_id\r\n          this.backDataOpt.i_order = this.opts[index]['orderId']\r\n          this.backDataOpt.i_opinion_set_id = this.opts[index]['optionSetId']\r\n          this.backDataOpt.s_opinion_type = this.opts[index]['type'] //意见类型\r\n          this.flag = true;\r\n          break\r\n        }\r\n      }\r\n      if (!this.flag) {\r\n        this.$message.error(\"请配置对应的环节！\")\r\n        return\r\n      }\r\n      //根据taskId判断是否更新意见\r\n      postAction(this.url.isUpdateOpinion, this.backDataOpt).then(res => {\r\n        if (res.success) {\r\n          this.isSaveFlag = true;\r\n          this.$message.success(\"填写意见成功！\")\r\n          setTimeout(() => {\r\n            this.reload();\r\n          }, 800)\r\n          this.backDataOpt.i_id = res.result.i_id;\r\n        } else {\r\n          this.$message.error(\"填写意见失败！\")\r\n        }\r\n      })\r\n    }\r\n    ,\r\n//发送会议通知\r\n    sendMeetingInform: function () {\r\n      this.$emit('submit', this.backData);\r\n    }\r\n    ,\r\n    showReadCase: function () {\r\n      let tableName = this.backData.table;\r\n      let busFunctionId = this.backData.i_bus_function_id;\r\n      let busDataId = this.backData.i_id;\r\n      this.$refs.showreadmodal.showHead(tableName, busFunctionId, busDataId);\r\n      this.$refs.showreadmodal.title = \"已读情况\";\r\n      this.$refs.showreadmodal.disableSubmit = false;\r\n    }\r\n    ,\r\n//TODO(仅标识)***************************************************** 控件相关 *****************************************\r\n//起草底稿\r\n    qiCao() {\r\n      this.openFile(1, this.fileName)\r\n    }\r\n    ,\r\n//正文排版\r\n    zwPaiBan() {\r\n      if (parseInt(this.backData.s_varchar20) == 0) {\r\n        this.$message.error(\"请您先登记文号\");\r\n      } else {\r\n        this.openFile(2, this.fileName)\r\n      }\r\n    }\r\n    ,\r\n//查看底稿\r\n    showDiGao() {\r\n      this.openFile(3, this.fileName)\r\n    }\r\n    ,\r\n//编辑底稿\r\n    editDiGao() {\r\n      this.openFile(4, this.fileName)\r\n    }\r\n    ,\r\n//查看正文\r\n    showZw() {\r\n      this.openFile(5, this.fileName)\r\n    }\r\n    ,\r\n//校核正文\r\n    checkZw() {\r\n      this.openFile(6, this.fileName)\r\n    }\r\n    ,\r\n//盖章(查看正文)\r\n    sealFile() {\r\n      this.openFile(5, this.fileName)\r\n    }\r\n    ,\r\n//保存办文单\r\n    saveBanWen() {\r\n      this.openFile(7, this.fileName)\r\n    }\r\n    ,\r\n//打印办文单\r\n    printBanWen() {\r\n      this.openFile(8, this.fileName)\r\n    }\r\n    ,\r\n//打印公文\r\n    printPublicFile() {\r\n      this.openFile(6, this.fileName)\r\n    }\r\n    ,\r\n//打开附件\r\n    showFujianFile() {\r\n      this.openFile(9, fileName)\r\n    }\r\n    ,\r\n//打开附件\r\n    showFujianFile2(cmd, fileName) {\r\n      this.openFile(9, fileName)\r\n    }\r\n    ,\r\n//对比拟稿\r\n    compareFile() {\r\n      let URL = 'http://localhost:4000/mytask/taskList/Test-detailFile?tableName=' + this.backData.table + '&busdataId=' + this.backData.i_id;\r\n      window.open(URL);\r\n    }\r\n    ,\r\n    openFile(cmd, fileName) {\r\n      let ntkoed = ntkoBrowser.ExtensionInstalled();\r\n      if (ntkoed) {\r\n        //console.log('--------------------->>>>>>!!!!!',JSON.stringify(\"&taskId=\" +this.taskMsg.id))\r\n        //console.log('--------------------->>>>>>!!!!!', JSON.stringify(this.currentBtn.iid))\r\n        //console.log('--------------------->>>>>>!!!!!',JSON.stringify(this.currentUserMessage))\r\n        //console.log('--------------------->>>>>>!!!!!', JSON.stringify(this.backData.s_varchar20))\r\n        console.log('--------------------->>>>>>!!!!!', JSON.stringify(this.backData));\r\n        //console.log('--------------------->>>>>>!!!!!', JSON.stringify(this.opts));\r\n        ntkoBrowser.openWindow(window.location.origin + \"/ntko/editindex.html?cmd=\" + cmd +\r\n          \"&stable=\" + this.backData.table + \"&tableid=\" + this.backData.i_id + \"&sbtnid=\" +\r\n          this.currentBtn.iid + \"&userName=\" + this.currentUserMessage.sysUserName + \"&docNumId=\"\r\n          + parseInt(this.backData.s_varchar20) + \"&fileName=\" + fileName);\r\n      } else {\r\n        window.open(window.location.origin + \"/ntko/exeindex.html\")\r\n      }\r\n      window.ntkoCloseEvent = function () {\r\n        this.$message.error(\"跨浏览器插件应用程序窗口已关闭\");\r\n      }\r\n    }\r\n    ,\r\n//新公文传输\r\n//TODO *************************  新公文传输接口 *************************\r\n    newPublicFileSend() {\r\n      // console.log('=======================>>>>',this.backData.table)\r\n      // console.log('=======================>>>>',this.backData.i_id)\r\n      getAction(this.url.newPublicFileSend, {stable: this.backData.table, tableid: this.backData.i_id}).then(res => {\r\n        if (res.success) {\r\n          this.$message.success(res.message)\r\n        } else {\r\n          this.$message.error(res.message)\r\n        }\r\n      })\r\n    }\r\n    ,\r\n//弹框-登记文号\r\n    djDocNum: function () {\r\n      this.$refs.docNumForm.dengji(this.backData);\r\n      this.$refs.docNumForm.title = \"登记文号\";\r\n      this.$refs.docNumForm.disableSubmit = false;\r\n    }\r\n    ,\r\n//保存登记文号\r\n    saveDocNum(data) {\r\n      let param = {\r\n        table: this.backData.table,\r\n        i_id: this.backData.i_id,\r\n        s_file_num: data.docnum, //文件字号\r\n        s_varchar20: data.id //文号id\r\n      }\r\n      postAction(this.url.updateBusdata, {\r\n        'updateBusdata': param\r\n      }).then(res => {\r\n        if (res.success) {\r\n          this.reload(); //页面刷新\r\n          this.$emit(\"saveDocNum\", data)\r\n          this.$message.success(res.message)\r\n        } else {\r\n          this.$message.error(res.message)\r\n        }\r\n      })\r\n\r\n    }\r\n    ,\r\n//弹框-引入公文链接\r\n    yrOfficeDoc: function () {\r\n      this.$refs.officeForm.yinru();\r\n      this.$refs.officeForm.title = \"引入公文链接\";\r\n      this.$refs.officeForm.disableSubmit = false;\r\n    }\r\n    ,\r\n//保存公文链接\r\n    gongwenData(data) {\r\n      this.$emit(\"saveGongwenData\", data)\r\n    }\r\n    ,\r\n    updatePaperTitle: function () {\r\n      this.$refs.titleForm.paperTitle(this.backData);\r\n      this.$refs.titleForm.title = \"修改文头\";\r\n      this.$refs.titleForm.disableSubmit = false;\r\n    }\r\n    ,\r\n    updateMiddleParameter: function (middleParameter) {\r\n      this.backData.s_middle_parameter = middleParameter;\r\n      // //console.log('---wentou--',this.backData.s_middle_parameter)\r\n    }\r\n    ,\r\n//保存封发日期\r\n    delTime: function () {\r\n      let d_datetime1 = this.dateFormat(new Date());\r\n      let param = {\r\n        table: this.backData.table,\r\n        'i_id': this.backData.i_id,\r\n        'd_sealdate': d_datetime1\r\n      }\r\n      postAction(this.url.updateData, param).then(res => {\r\n        if (res.success) {\r\n          // this.$emit(\"saveDelTime\", d_datetime1)\r\n          this.$message.success(res.message)\r\n          this.reload();\r\n        } else {\r\n          this.$message.error(res.message)\r\n        }\r\n      })\r\n    }\r\n    ,\r\n//按钮-发布\r\n    publishInform: function () {\r\n      //校验是否发布\r\n      let checkParam = {};\r\n      checkParam.table = this.backData.table;\r\n      checkParam.i_id = this.backData.i_id;\r\n      postAction(this.url.queryById, checkParam).then(res => {\r\n        if (res.success && res.result.i_is_publish == 0) {\r\n          this.$emit(\"publishInform\")\r\n        } else {\r\n          this.$message.error(\"该公告已发布！\")\r\n        }\r\n      })\r\n    }\r\n    ,\r\n//按钮-取消发布\r\n    unpublish: function () {\r\n      this.$emit(\"unpublishBtn\")\r\n    }\r\n    ,\r\n\r\n    piliang: function () {\r\n      this.$refs.watchForm.piliang();\r\n      this.$refs.watchForm.title = \"批量审阅\";\r\n      this.$refs.watchForm.disableSubmit = false;\r\n    }\r\n    ,\r\n//弹窗-引入附件\r\n    banwenModal: function () {\r\n      this.$refs.banwenForm.show(this.backData);\r\n      this.$refs.banwenForm.title = \"引入附件\";\r\n      this.$refs.banwenForm.disableSubmit = false;\r\n    }\r\n    ,\r\n//弹窗-引入办文依据\r\n    bwyjModal: function () {\r\n      this.$refs.banwenYiJuForm.show(this.backData);\r\n      this.$refs.banwenYiJuForm.title = \"引入办文依据\";\r\n      this.$refs.banwenYiJuForm.disableSubmit = false;\r\n    }\r\n    ,\r\n\r\n//下载所有附件\r\n    downAllFiles() {\r\n      this.$emit(\"downFiles\")\r\n    }\r\n    ,\r\n//协同办公\r\n    callaboration() {\r\n      // 子组件获取 父组件的tableid 和 什么id  （标题上）\r\n      this.$emit('callaboration')\r\n\r\n    }\r\n    ,\r\n\r\n    opinionModal: function () {\r\n      this.backData['sTaskdefKey'] = this.taskMsg.taskDefinitionKey\r\n      this.backData[\"opinionTable\"] = this.backDataOpt.table\r\n      this.$refs.opinionlistForm.show(this.backData);\r\n      this.$refs.opinionlistForm.title = \"查看意见\";\r\n      this.$refs.opinionlistForm.disableSubmit = false;\r\n    }\r\n    ,\r\n\r\n//日期格式化\r\n    dateFormat(date) {\r\n      let date1 = new Date(date);\r\n      let Y = date1.getFullYear();\r\n      let M = date1.getMonth() + 1;\r\n      let D = date1.getDate();\r\n      let newTime = Y + '-' + (M < 10 ? \"0\" + M : M) + \"-\" + (D < 10 ? \"0\" + D : D) + \" \" + date1.toTimeString().substr(0, 8);\r\n      return newTime;\r\n    }\r\n\r\n  },\r\n//页面刷新\r\n  shuaX(value) {//传入当前按钮的value值\r\n    let that = this;\r\n    let isrleod = false;\r\n    that.btn.map((item, index) => {\r\n      //判断是否需要刷新\r\n      if (item.sbtnValue == value && item.iisRefresh == 1) {\r\n        isrleod = true\r\n      }\r\n    });\r\n    that.defindBtns.map((item, index) => {\r\n      if (item.sbtnValue == value && item.iisRefresh == 1) {\r\n        isrleod = true\r\n      }\r\n    });\r\n\r\n    if (isrleod == true) {\r\n      // this.reload();\r\n      // window.location.replace(window.location.href);\r\n      that.showBtn(that.butArrLists);\r\n    }\r\n  }\r\n  ,\r\n}"]}]}
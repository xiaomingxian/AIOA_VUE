{"remainingRequest":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js!C:\\xxm\\work\\jd\\fore\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\xxm\\work\\jd\\fore\\src\\views\\buttons\\btn-js\\busdataTemplate.js","dependencies":[{"path":"C:\\xxm\\work\\jd\\fore\\src\\views\\buttons\\btn-js\\busdataTemplate.js","mtime":1579343466417},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js","mtime":1570779245522},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":1570780125155}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.regexp.to-string\";\n\n/**\r\n * 业务页面公共模板js\r\n */\n//import {filterObj} from '@/utils/util';\nimport { deleteAction, downFile, getAction, postAction } from '@/api/manage';\nimport { ACCESS_TOKEN } from \"@/store/mutation-types\";\nimport { JeecgListMixin } from '@/mixins/JeecgListMixin';\nimport { ntkoBrowser } from \"./ntkobackground.min.js\";\nexport var busdataTemplate = {\n  inject: ['reload'],\n  data: function data() {\n    return {\n      i_important: true,\n      url: {\n        queryOaFileList: \"/oaBus/oaFile/queryOaFileList\",\n        queryBanWenList: \"/oaBus/oaFile/queryBanWenList\",\n        insert: '/oaBus/dynamic/insert',\n        //动态插入数据\n        updateBusdata: '/oaBus/dynamic/update',\n        //动态修改数据\n        updateBusdataNoCheck: '/oaBus/dynamic/updateNoCheck',\n        //动态修改数据,不开启流程\n        getDictByKey: '/sys/dict/getDictItems/',\n        downloadFiles: '/oaBus/oaFile/downloadZipFile' //下载附件\n\n      }\n    };\n  },\n  created: function created() {},\n  methods: {\n    //附件-修改附件名称\n    updateFileName: function updateFileName(item) {\n      this.$refs.updateFileNameModal.show(item);\n    },\n    //附件-删除\n    deleteFilesBtn: function deleteFilesBtn(data, type) {\n      var param = {}; //删除文件参数\n\n      param.i_id = data.iid;\n      param.table = 'oa_file';\n      var isFile = {}; //是否有附件参数\n\n      isFile.table = this.backDataRef.table;\n      isFile.i_id = this.backDataRef.i_id;\n      isFile.i_is_file = '0';\n\n      if (type == 4) {\n        if (this.oaFileList.length == 1 && this.banWenFileList.length == 0) {\n          this.deleteFile(param, type); //是否有附件状态修改 1 是 0 否\n\n          postAction('/oaBus/dynamic/updateData', isFile).then(function (res) {});\n        } else {\n          this.deleteFile(param, type);\n        }\n      }\n\n      if (type == 6) {\n        if (this.banWenFileList.length == 1 && this.oaFileList.length == 0) {\n          this.deleteFile(param, type); //是否有附件状态修改 1 是 0 否\n\n          postAction('/oaBus/dynamic/updateData', isFile).then(function (res) {});\n        } else {\n          this.deleteFile(param, type);\n        }\n      }\n    },\n    //附件-向上\n    topFile: function topFile(item, index, type) {\n      var _this = this;\n\n      if (index > 0) {\n        if (type == 4) {\n          var param = {};\n          param.id1 = item.iid;\n          param.iorder1 = item.iorder;\n          param.id2 = this.oaFileList[index - 1].iid;\n          param.iorder2 = this.oaFileList[index - 1].iorder;\n          postAction(\"/oaBus/oaFile/sortFile\", param).then(function (res) {\n            _this.getOaFiles(_this.backData.table, _this.backData.i_id);\n          });\n        }\n\n        if (type == 6) {\n          var _param = {};\n          _param.id1 = item.iid;\n          _param.iorder1 = item.iorder;\n          _param.id2 = this.banWenFileList[index - 1].iid;\n          _param.iorder2 = this.banWenFileList[index - 1].iorder;\n          postAction(\"/oaBus/oaFile/sortFile\", _param).then(function (res) {\n            _this.getBanWenFiles(_this.backData.table, _this.backData.i_id);\n          });\n        }\n      }\n    },\n    //附件-向下\n    lowFile: function lowFile(item, index, type) {\n      var _this2 = this;\n\n      if (type == 4) {\n        if (index < this.oaFileList.length - 1) {\n          var param = {};\n          param.id1 = item.iid;\n          param.iorder1 = item.iorder;\n          param.id2 = this.oaFileList[index + 1].iid;\n          param.iorder2 = this.oaFileList[index + 1].iorder;\n          postAction(\"/oaBus/oaFile/sortFile\", param).then(function (res) {\n            _this2.getOaFiles(_this2.backData.table, _this2.backData.i_id);\n          });\n        }\n      }\n\n      if (type == 6) {\n        if (index < this.banWenFileList.length - 1) {\n          var _param2 = {};\n          _param2.id1 = item.iid;\n          _param2.iorder1 = item.iorder;\n          _param2.id2 = this.banWenFileList[index + 1].iid;\n          _param2.iorder2 = this.banWenFileList[index + 1].iorder;\n          postAction(\"/oaBus/oaFile/sortFile\", _param2).then(function (res) {\n            _this2.getBanWenFiles(_this2.backData.table, _this2.backData.i_id);\n          });\n        }\n      }\n    },\n    //刷新附件列表\n    reloadAfterUpdate: function reloadAfterUpdate() {\n      this.getOaFiles(this.backData.table, this.backData.i_id);\n      this.getBanWenFiles(this.backData.table, this.backData.i_id);\n    },\n    //公共调用-删除附件\n    deleteFile: function deleteFile(param, type) {\n      var _this3 = this;\n\n      //参数：1.i_id 2.table\n      postAction('/oaBus/dynamic/delete', param).then(function (res) {\n        if (type == 4) {\n          _this3.getOaFiles(_this3.backData.table, _this3.backData.i_id);\n        }\n\n        if (type == 6) {\n          _this3.getBanWenFiles(_this3.backData.table, _this3.backData.i_id);\n        }\n      });\n    },\n    //关注件--是否重要\n    iIsImportant: function iIsImportant(date) {\n      var _this4 = this;\n\n      if (this.i_important) {\n        this.backData.i_is_important = 1;\n      } else {\n        this.backData.i_is_important = 0;\n      }\n\n      postAction(this.url.updateBusdata, {\n        'updateBusdata': this.backData\n      }).then(function (res) {\n        if (res.success) {\n          if (_this4.i_important) {\n            _this4.$message.success(\"设置成功\");\n          } else {\n            _this4.$message.success(\"取消成功\");\n          }\n\n          _this4.i_important = !_this4.i_important;\n\n          _this4.$emit(\"getBackData\", _this4.backData); //this.close();\n\n        } else {\n          _this4.$message.error(\"设置失败\");\n        }\n      });\n    },\n    getBackDataNew: function getBackDataNew() {\n      return this.backData;\n    },\n    //按钮-销毁\n    destory: function destory(date) {\n      var _this5 = this;\n\n      var str = this.backData.s_cur_task_name.substring(0, this.backData.s_cur_task_name.indexOf(\"-\")); // console.log(str)\n\n      if (str != \"end\") {\n        this.$message.error(\"请假未经同意禁止销假！\");\n        return;\n      } //保存业务数据\n\n\n      var time = new Date();\n      var year = time.getFullYear();\n      var month = time.getMonth() + 1;\n      var day = time.getDay();\n      var hour = time.getDate();\n      var minute = time.getMinutes();\n      var second = time.getSeconds();\n      var newTime = year + \"-\" + month + \"-\" + day + \" \" + hour + \":\" + minute + \":\" + second;\n      console.log(year + \"-\" + month + \"-\" + day + \" \" + hour + \":\" + minute + \":\" + second);\n      this.backData.d_datetime3 = newTime; //设置状态为0\n\n      postAction(this.url.updateBusdata, {\n        'updateBusdata': this.backData\n      }).then(function (res) {\n        if (res.success) {\n          _this5.$message.success(\"销假成功\");\n\n          _this5.$emit(\"getBackData\", _this5.backData); //this.close();\n\n        } else {\n          _this5.$message.error(\"销假失败\");\n        }\n      });\n    },\n    //数据校验\n    checkData: function checkData() {\n      var result = true;\n      var checkList = this.optionMap.checkList;\n      var regulars = this.optionMap.regulars;\n\n      if (checkList != undefined && checkList.length > 0) {\n        for (var i = 0; i < checkList.length; i++) {\n          //如果有js校验的话\n          if (checkList[i].icheckExpjs != undefined && checkList[i].icheckExpjs != '' && checkList[i].icheckExpjs != null) {\n            //let reg = ''\n            for (var j = 0; j < regulars.length; j++) {\n              if (checkList[i].icheckExpjs == regulars[j].value) {\n                var reg = regulars[j].text;\n                var inputVa = this.backData[checkList[i].stableColumn];\n\n                if (!(inputVa == undefined)) {\n                  if (!eval(reg).test(inputVa)) {\n                    //this.$message.error(checkList[i].scolumnName + \":\" + checkList[i].scheckShowmsg);\n                    // this.$refs[checkList[i].scolumnName].\n                    result = false;\n                  }\n\n                  break;\n                } else {\n                  //this.$message.error(checkList[i].scolumnName + \":\" + checkList[i].scheckShowmsg);\n                  result = false;\n                }\n              }\n            }\n          } else if (this.backData[checkList[i].stableColumn] == undefined || this.backData[checkList[i].stableColumn] == '') {\n            // console.log(this.backData[checkList[i].stableColumn] + \"....\");\n            if (checkList[i].scheckShowmsg == 'null') {\n              //如果没有设置提示值\n              if (checkList[i].scolumnName == '销假日期') {\n                continue;\n              } //   this.$message.error(checkList[i].scolumnName + \":\" + \"不能为空\");\n\n            } else {\n              if (checkList[i].scolumnName == '销假日期') {\n                continue;\n              }\n            }\n\n            result = false;\n          }\n        }\n      }\n\n      return result;\n    },\n    saveNoCheck: function saveNoCheck() {\n      var _this6 = this;\n\n      postAction(this.url.updateBusdataNoCheck, this.backData).then(function (res) {\n        if (res.success) {\n          _this6.$message.success(\"保存成功\");\n\n          _this6.reload();\n\n          _this6.$emit(\"getBackData\", _this6.backData); //this.close();\n\n        } else {\n          _this6.$message.error(\"保存失败\");\n        }\n      });\n    },\n    //按钮-保存\n    save: function save(data) {\n      var _this7 = this;\n\n      var flag = this.nullText();\n\n      if (flag) {\n        return;\n      } //校验发布范围\n\n\n      if (this.publishData != undefined) {\n        this.backData.i_bigint3 = this.publishData.iIsLimits; //发布范围\n\n        if (this.publishData.iIsLimits == 2) {\n          this.backData.s_varchar3 = this.publishData.departId; //部门ids\n        }\n\n        if (this.publishData.iIsLimits == 3) {\n          this.backData.s_varchar3 = this.publishData.userRealName; //所选用户\n\n          this.backData.s_varchar4 = this.publishData.userIdS.toString();\n        }\n      }\n      /*if (!this.checkData()) {\r\n        return;\r\n      }\r\n      */\n      //保存业务数据\n\n\n      this.backData.i_is_display = \"0\"; //设置状态为0\n\n      this.backData.i_is_es = 3; //是否已发送全文检索\n\n      this.backData.i_urgency = localStorage.getItem('缓急:' + this.backData.table + this.backData.i_id);\n      this.backData.i_urgency = this.backData.i_urgency == null ? 4 : this.backData.i_urgency;\n      var i_safetylevel = localStorage.getItem('密级:' + this.backData.table + this.backData.i_id);\n      this.backData.i_safetylevel = i_safetylevel == null ? 1 : i_safetylevel;\n      console.log(this.backData);\n      postAction(this.url.updateBusdata, {\n        'updateBusdata': this.backData\n      }).then(function (res) {\n        if (res.success) {\n          _this7.$message.success(\"保存成功\");\n\n          _this7.reload();\n\n          _this7.$emit(\"getBackData\", _this7.backData); //this.close();\n\n        } else {\n          _this7.$message.error(\"保存失败\");\n        }\n      });\n    },\n    //按钮-登记文号\n    saveDocNum: function saveDocNum(data) {\n      this.backData.s_file_num = data.docnum;\n      this.backData.s_varchar20 = data.id;\n    },\n    //按钮-引入公文链接\n    saveGongwenData: function saveGongwenData(data) {\n      this.backData.s_file_num = data.sfileNum;\n      this.backData.s_create_dept = data.sdeptName;\n      this.backData.s_title = data.stitle;\n      this.backData.d_create_time = data.dcreateTime;\n    },\n    //按钮-封发日期\n    saveDelTime: function saveDelTime(data) {\n      this.backData.d_sealdate = data;\n    },\n    //获取附件列表\n    getOaFiles: function getOaFiles(tableName, busDataId) {\n      var _this8 = this;\n\n      getAction(this.url.queryOaFileList, {\n        tableName: tableName,\n        busDataId: busDataId,\n        sFileType: 4\n      }).then(function (res) {\n        _this8.oaFileList = res.result;\n      });\n    },\n    //获取办文依据\n    getBanWenFiles: function getBanWenFiles(tableName, busDataId) {\n      var _this9 = this;\n\n      getAction(this.url.queryBanWenList, {\n        tableName: tableName,\n        busDataId: busDataId,\n        sFileType: 6\n      }).then(function (res) {\n        _this9.banWenFileList = res.result;\n      });\n    },\n    //下载所有附件\n    downAllFiles: function downAllFiles() {\n      var _this10 = this;\n\n      var config = {\n        headers: {\n          'Content-Type': 'application/json',\n          \"Access-Control-Expose-Headers\": \"Content-Disposition\"\n        },\n        responseType: 'blob' //必须要写\n\n      };\n      this.$http.post(this.url.downloadFiles, this.oaFileList, config).then(function (res) {\n        //tableSelection参数，我自己的是对象，后台用List接，可以看一downloadFile接口\n        var data = res;\n\n        if (_this10.backData.s_left_parameter == undefined) {\n          _this10.backData.s_left_parameter = \"\";\n        }\n\n        if (_this10.backData.s_middle_parameter == undefined) {\n          _this10.backData.s_middle_parameter = \"\";\n        }\n\n        if (_this10.backData.s_right_parameter == undefined) {\n          _this10.backData.s_right_parameter = \"\";\n        }\n\n        var fileName = _this10.backData.s_left_parameter + _this10.backData.s_middle_parameter + _this10.backData.s_right_parameter + '_' + new Date().getTime() + '.zip'; // console.log(fileName)\n        // let contentDisposition =\"attachment;filename=Desktop1574646488783.zip\"\n        // let fileName = contentDisposition.substring(contentDisposition.indexOf('=') + 1);\n\n        var url = window.URL.createObjectURL(new Blob([data]));\n        var edik = document.createElement('a');\n        edik.style.display = 'none';\n        edik.href = url;\n        edik.setAttribute('download', fileName);\n        document.body.appendChild(edik); //点击下载\n\n        edik.click(); // 释放掉blob对象\n\n        window.URL.revokeObjectURL(edik); // 下载完成移除元素\n\n        document.body.removeChild(edik);\n      });\n    },\n    //发送通知\n    submit: function submit(data) {\n      this.$emit(\"saveInform\", data);\n    },\n    //日期格式化\n    dateFormat: function dateFormat(date) {\n      var date1 = new Date(date);\n      var Y = date1.getFullYear();\n      var M = date1.getMonth() + 1;\n      var D = date1.getDate();\n      var newTime = Y + '-' + (M < 10 ? \"0\" + M : M) + \"-\" + (D < 10 ? \"0\" + D : D) + \" \" + date1.toTimeString().substr(0, 8);\n      return newTime;\n    },\n    //获取下一个月时间\n    getNextMonth: function getNextMonth(date) {\n      var time = new Date(date).getTime();\n      var lastMonth = time + 60 * 60 * 1000 * 24 * 180; //3个月之后\n\n      var newTime = new Date(lastMonth).toISOString().split('T'[0]);\n      return newTime;\n    },\n    downFileName: function downFileName(path) {\n      // alert(path)\n      var url = window._CONFIG['domianURL'] + \"/papertitle/oaTemplate/download\";\n      window.open(url + \"/\" + path);\n    },\n    blurText: function blurText(value, event) {\n      var checkList = this.optionMap.checkList;\n\n      if (checkList != undefined && checkList.length > 0) {\n        if (event.prefixCls == \"ant-input\") {\n          if (value == '' || value == undefined || value == null) {\n            event.$el.style.borderColor = 'red';\n          } else {\n            event.$el.style.borderColor = '#d9d9d9';\n          }\n        } else if (event.prefixCls == \"ant-select\") {\n          if (value == '' || value == undefined || value == null) {\n            event.$el.childNodes[0].style.borderColor = 'red';\n          } else {\n            event.$el.childNodes[0].style.borderColor = '#d9d9d9';\n          }\n        } else if (event.prefixCls == \"ant-calendar\") {\n          if (value.length == 1) {\n            if (value == '' || value == undefined || value == null) {\n              event.$el.childNodes[0].childNodes[0].style.borderColor = 'red';\n            } else {\n              event.$el.childNodes[0].childNodes[0].style.borderColor = '#d9d9d9';\n            }\n          } else if (value.length == 2) {\n            if (value[0] == '' || value[1] == '' || value[0] == undefined || value[1] == undefined || value[0] == null || value[1] == null) {\n              event.$el.childNodes[0].style.borderColor = 'red';\n            } else {\n              event.$el.childNodes[0].style.borderColor = '#d9d9d9';\n            }\n          }\n        }\n      }\n    },\n    nullText: function nullText() {\n      var checkList = this.optionMap.checkList;\n      var regulars = this.optionMap.regulars;\n      var flag = false; //let message = \"红色区域为必填业务，请录入！\";\n\n      if (checkList != undefined && checkList.length > 0) {\n        for (var i = 0; i < checkList.length; i++) {\n          if (checkList[i].icolumnType == 1 || checkList[i].icolumnType == 3) {\n            //输入框\n            if (this.$refs[this.s_varchar[i]].value == '' || this.$refs[this.s_varchar[i]].value == undefined || this.$refs[this.s_varchar[i]].value == null) {\n              this.$refs[this.s_varchar[i]].$el.style.borderColor = 'red'; //有js校验\n\n              flag = true;\n            } else {\n              var checkJs = checkList[i].icheckExpjs; //如果有值的话，查看一下是否有js校验，有js校验的话，就将校验\n\n              if (checkJs != undefined && checkJs != null && checkJs != \"\") {\n                for (var j = 0; j < regulars.length; j++) {\n                  if (checkList[i].icheckExpjs == regulars[j].value) {\n                    var reg = regulars[j].text; //取得js的正则表达式\n\n                    console.log(reg);\n\n                    if (!eval(reg).test(this.$refs[this.s_varchar[i]].value)) {\n                      //判断\n                      this.$refs[this.s_varchar[i]].$el.style.borderColor = 'red'; //message = checkList[i].scheckShowmsg;\n\n                      flag = true;\n                    }\n\n                    break;\n                  }\n                }\n              } else {\n                //没有js校验的话，就将边框颜色变为正常\n                this.$refs[this.s_varchar[i]].$el.style.borderColor = '#d9d9d9';\n              }\n            }\n          } else if (checkList[i].icolumnType == 2) {\n            if (this.$refs[this.s_varchar[i]].value == '' || this.$refs[this.s_varchar[i]].value == undefined || this.$refs[this.s_varchar[i]].value == null) {\n              this.$refs[this.s_varchar[i]].$el.childNodes[0].style.borderColor = 'red';\n              flag = true;\n            } else {\n              this.$refs[this.s_varchar[i]].$el.childNodes[0].style.borderColor = '#d9d9d9';\n            }\n          }\n          /* else if(checkList[i].icolumnType == 3){    //文本框\r\n             if (this.$refs[this.s_varchar[i]].value == '' || this.$refs[this.s_varchar[i]].value == undefined || this.$refs[this.s_varchar[i]].value == null) {\r\n               this.$refs[this.s_varchar[i]].$el.style.borderColor = 'red';\r\n               flag = true;\r\n             }else {\r\n               this.$refs[this.s_varchar[i]].$el.style.borderColor = '#d9d9d9';\r\n             }\r\n             }*/\n          else if (checkList[i].icolumnType == 4) {\n              if (this.$refs[this.s_varchar[i]].$el.childNodes[0].childNodes[0].value == '' || this.$refs[this.s_varchar[i]].$el.childNodes[0].childNodes[0].value == undefined || this.$refs[this.s_varchar[i]].$el.childNodes[0].childNodes[0].value == null) {\n                this.$refs[this.s_varchar[i]].$el.childNodes[0].childNodes[0].style.borderColor = 'red';\n                flag = true;\n              } else {\n                this.$refs[this.s_varchar[i]].$el.childNodes[0].childNodes[0].style.borderColor = '#d9d9d9';\n              }\n            } else if (checkList[i].icolumnType == 5) {\n              if (this.$refs[this.s_varchar[i]].$el.childNodes[0].childNodes[0].value == '' || this.$refs[this.s_varchar[i]].$el.childNodes[0].childNodes[2].value == '' || this.$refs[this.s_varchar[i]].$el.childNodes[0].childNodes[0].value == undefined || this.$refs[this.s_varchar[i]].$el.childNodes[0].childNodes[2].value == undefined || this.$refs[this.s_varchar[i]].$el.childNodes[0].childNodes[0].value == null || this.$refs[this.s_varchar[i]].$el.childNodes[0].childNodes[2].value == null) {\n                this.$refs[this.s_varchar[i]].$el.childNodes[0].style.borderColor = 'red';\n                flag = true;\n              } else {\n                this.$refs[this.s_varchar[i]].$el.childNodes[0].style.borderColor = '#d9d9d9';\n              }\n            }\n        }\n\n        if (flag == true) {\n          this.$message.error(\"请填写正确的数据！！！\");\n          this.$store.commit('changeCheckDataFlag', false);\n        } else {\n          this.$store.commit('changeCheckDataFlag', true);\n        }\n      }\n\n      return flag;\n    },\n    //附件按钮--提示信息\n    fileBtnName: function fileBtnName(type) {\n      var typeName = '';\n\n      if (type == 1) {\n        typeName = \"编辑文档\";\n        return typeName;\n      }\n\n      if (type == 2) {\n        typeName = \"修改附件名称\";\n        return typeName;\n      }\n\n      if (type == 3) {\n        typeName = \"删除\";\n        return typeName;\n      }\n\n      if (type == 4) {\n        typeName = \"向上\";\n        return typeName;\n      }\n\n      if (type == 5) {\n        typeName = \"向下\";\n        return typeName;\n      }\n    },\n    //根据文件后缀控制编辑按钮显示\n    isSuffex: function isSuffex(fileName) {\n      var suffex = fileName.slice(fileName.lastIndexOf(\".\") + 1);\n\n      if (suffex == 'docx' || suffex == 'doc' || suffex == 'xlsx' || suffex == 'xls' || suffex == 'pptx' || suffex == 'ppt' || suffex == 'pdf' || suffex == 'wps') {\n        return true;\n      } else {\n        return false;\n      }\n    },\n    //打开附件\n    qiCao1: function qiCao1(index, item) {\n      var fileName = item.sfilePath.slice(item.sfilePath.lastIndexOf(\"\\\\\") + 1);\n      var suffex = item.sfileName.slice(item.sfileName.lastIndexOf(\".\") + 1);\n\n      if (suffex == 'docx' || suffex == 'doc' || suffex == 'xlsx' || suffex == 'xls' || suffex == 'pptx' || suffex == 'ppt' || suffex == 'pdf' || suffex == 'wps') {\n        var param = {};\n        param.sFilePath = item.sfilePath;\n        postAction('/oaBus/oaFile/singleCopyFile', param).then(function (res) {\n          var ntkoed = ntkoBrowser.ExtensionInstalled();\n\n          if (ntkoed) {\n            ntkoBrowser.openWindow(window.location.origin + \"/ntko/editindex.html?cmd=\" + index + \"&fileName=\" + fileName);\n          } else {\n            window.open(window.location.origin + \"/ntko/exeindex.html\");\n          }\n\n          window.ntkoCloseEvent = function () {};\n        });\n      } else {\n        this.downFileName(item.sfilePath);\n      }\n    },\n    //编辑附件\n    qiCao2: function qiCao2(index, item) {\n      var _this11 = this;\n\n      var param = {};\n      param.sFilePath = item.sfilePath;\n      postAction('/oaBus/oaFile/singleCopyFile', param).then(function (res) {\n        if (res.success) {\n          _this11.openFile(index, item);\n        } else {\n          _this11.$message.error(\"文件打开失败\");\n        }\n      });\n    },\n    openFile: function openFile(cmd, item) {\n      var fileName = item.sfilePath.slice(item.sfilePath.lastIndexOf(\"\\\\\") + 1);\n      var ntkoed = ntkoBrowser.ExtensionInstalled();\n\n      if (ntkoed) {\n        ntkoBrowser.openWindow(window.location.origin + \"/ntko/editindex.html?cmd=\" + cmd + \"&fileName=\" + fileName + \"&fileId=\" + item.iid + \"&fileType=\" + item.sfileType + \"&stable=\" + item.stable + \"&tableid=\" + item.itableId);\n      } else {\n        window.open(window.location.origin + \"/ntko/exeindex.html\");\n      }\n\n      window.ntkoCloseEvent = function () {};\n    }\n  }\n};",{"version":3,"sources":["C:\\xxm\\work\\jd\\fore\\src\\views\\buttons\\btn-js\\busdataTemplate.js"],"names":["deleteAction","downFile","getAction","postAction","ACCESS_TOKEN","JeecgListMixin","ntkoBrowser","busdataTemplate","inject","data","i_important","url","queryOaFileList","queryBanWenList","insert","updateBusdata","updateBusdataNoCheck","getDictByKey","downloadFiles","created","methods","updateFileName","item","$refs","updateFileNameModal","show","deleteFilesBtn","type","param","i_id","iid","table","isFile","backDataRef","i_is_file","oaFileList","length","banWenFileList","deleteFile","then","res","topFile","index","id1","iorder1","iorder","id2","iorder2","getOaFiles","backData","getBanWenFiles","lowFile","reloadAfterUpdate","iIsImportant","date","i_is_important","success","$message","$emit","error","getBackDataNew","destory","str","s_cur_task_name","substring","indexOf","time","Date","year","getFullYear","month","getMonth","day","getDay","hour","getDate","minute","getMinutes","second","getSeconds","newTime","console","log","d_datetime3","checkData","result","checkList","optionMap","regulars","undefined","i","icheckExpjs","j","value","reg","text","inputVa","stableColumn","eval","test","scheckShowmsg","scolumnName","saveNoCheck","reload","save","flag","nullText","publishData","i_bigint3","iIsLimits","s_varchar3","departId","userRealName","s_varchar4","userIdS","toString","i_is_display","i_is_es","i_urgency","localStorage","getItem","i_safetylevel","saveDocNum","s_file_num","docnum","s_varchar20","id","saveGongwenData","sfileNum","s_create_dept","sdeptName","s_title","stitle","d_create_time","dcreateTime","saveDelTime","d_sealdate","tableName","busDataId","sFileType","downAllFiles","config","headers","responseType","$http","post","s_left_parameter","s_middle_parameter","s_right_parameter","fileName","getTime","window","URL","createObjectURL","Blob","edik","document","createElement","style","display","href","setAttribute","body","appendChild","click","revokeObjectURL","removeChild","submit","dateFormat","date1","Y","M","D","toTimeString","substr","getNextMonth","lastMonth","toISOString","split","downFileName","path","_CONFIG","open","blurText","event","prefixCls","$el","borderColor","childNodes","icolumnType","s_varchar","checkJs","$store","commit","fileBtnName","typeName","isSuffex","suffex","slice","lastIndexOf","qiCao1","sfilePath","sfileName","sFilePath","ntkoed","ExtensionInstalled","openWindow","location","origin","ntkoCloseEvent","qiCao2","openFile","cmd","sfileType","stable","itableId"],"mappings":"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","sourcesContent":["/**\r\n * 业务页面公共模板js\r\n */\r\n//import {filterObj} from '@/utils/util';\r\nimport {deleteAction, downFile, getAction, postAction} from '@/api/manage'\r\nimport {ACCESS_TOKEN} from \"@/store/mutation-types\"\r\nimport {JeecgListMixin} from '@/mixins/JeecgListMixin'\r\nimport {ntkoBrowser} from './ntkobackground.min.js'\r\n\r\n\r\nexport const busdataTemplate = {\r\n  inject: ['reload'],\r\n  data() {\r\n    return {\r\n      i_important: true,\r\n      url: {\r\n        queryOaFileList: \"/oaBus/oaFile/queryOaFileList\",\r\n        queryBanWenList: \"/oaBus/oaFile/queryBanWenList\",\r\n        insert: '/oaBus/dynamic/insert',//动态插入数据\r\n        updateBusdata: '/oaBus/dynamic/update', //动态修改数据\r\n        updateBusdataNoCheck: '/oaBus/dynamic/updateNoCheck', //动态修改数据,不开启流程\r\n        getDictByKey: '/sys/dict/getDictItems/',\r\n        downloadFiles: '/oaBus/oaFile/downloadZipFile', //下载附件\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n  },\r\n  methods: {\r\n\r\n    //附件-修改附件名称\r\n    updateFileName(item) {\r\n      this.$refs.updateFileNameModal.show(item);\r\n    },\r\n\r\n    //附件-删除\r\n    deleteFilesBtn(data, type) {\r\n      let param = {}; //删除文件参数\r\n      param.i_id = data.iid;\r\n      param.table = 'oa_file';\r\n      let isFile = {};   //是否有附件参数\r\n      isFile.table = this.backDataRef.table;\r\n      isFile.i_id = this.backDataRef.i_id;\r\n      isFile.i_is_file = '0';\r\n      if (type == 4) {\r\n        if (this.oaFileList.length == 1 && this.banWenFileList.length == 0) {\r\n          this.deleteFile(param, type);\r\n          //是否有附件状态修改 1 是 0 否\r\n          postAction('/oaBus/dynamic/updateData', isFile).then(res => {\r\n          })\r\n        } else {\r\n          this.deleteFile(param, type);\r\n        }\r\n      }\r\n      if (type == 6) {\r\n        if (this.banWenFileList.length == 1 && this.oaFileList.length == 0) {\r\n          this.deleteFile(param, type);\r\n          //是否有附件状态修改 1 是 0 否\r\n          postAction('/oaBus/dynamic/updateData', isFile).then(res => {\r\n          })\r\n        } else {\r\n          this.deleteFile(param, type);\r\n        }\r\n      }\r\n    },\r\n    //附件-向上\r\n    topFile(item, index, type) {\r\n      if (index > 0) {\r\n        if (type == 4) {\r\n          let param = {};\r\n          param.id1 = item.iid;\r\n          param.iorder1 = item.iorder;\r\n          param.id2 = this.oaFileList[index - 1].iid;\r\n          param.iorder2 = this.oaFileList[index - 1].iorder;\r\n          postAction(\"/oaBus/oaFile/sortFile\", param).then(res => {\r\n            this.getOaFiles(this.backData.table, this.backData.i_id);\r\n          })\r\n        }\r\n        if (type == 6) {\r\n          let param = {};\r\n          param.id1 = item.iid;\r\n          param.iorder1 = item.iorder;\r\n          param.id2 = this.banWenFileList[index - 1].iid;\r\n          param.iorder2 = this.banWenFileList[index - 1].iorder;\r\n          postAction(\"/oaBus/oaFile/sortFile\", param).then(res => {\r\n            this.getBanWenFiles(this.backData.table, this.backData.i_id);\r\n          })\r\n        }\r\n\r\n      }\r\n    },\r\n\r\n    //附件-向下\r\n    lowFile(item, index, type) {\r\n      if (type == 4) {\r\n        if (index < this.oaFileList.length - 1) {\r\n          let param = {};\r\n          param.id1 = item.iid;\r\n          param.iorder1 = item.iorder;\r\n          param.id2 = this.oaFileList[index + 1].iid;\r\n          param.iorder2 = this.oaFileList[index + 1].iorder;\r\n          postAction(\"/oaBus/oaFile/sortFile\", param).then(res => {\r\n            this.getOaFiles(this.backData.table, this.backData.i_id);\r\n          })\r\n        }\r\n      }\r\n      if (type == 6) {\r\n        if (index < this.banWenFileList.length - 1) {\r\n          let param = {};\r\n          param.id1 = item.iid;\r\n          param.iorder1 = item.iorder;\r\n          param.id2 = this.banWenFileList[index + 1].iid;\r\n          param.iorder2 = this.banWenFileList[index + 1].iorder;\r\n          postAction(\"/oaBus/oaFile/sortFile\", param).then(res => {\r\n            this.getBanWenFiles(this.backData.table, this.backData.i_id);\r\n          })\r\n        }\r\n      }\r\n\r\n    },\r\n\r\n    //刷新附件列表\r\n    reloadAfterUpdate() {\r\n      this.getOaFiles(this.backData.table, this.backData.i_id);\r\n      this.getBanWenFiles(this.backData.table, this.backData.i_id)\r\n    },\r\n\r\n    //公共调用-删除附件\r\n    deleteFile(param, type) {\r\n      //参数：1.i_id 2.table\r\n      postAction('/oaBus/dynamic/delete', param).then(res => {\r\n        if (type == 4) {\r\n          this.getOaFiles(this.backData.table, this.backData.i_id);\r\n        }\r\n        if (type == 6) {\r\n          this.getBanWenFiles(this.backData.table, this.backData.i_id);\r\n        }\r\n      })\r\n    },\r\n\r\n    //关注件--是否重要\r\n    iIsImportant(date) {\r\n      if (this.i_important) {\r\n        this.backData.i_is_important = 1;\r\n      } else {\r\n        this.backData.i_is_important = 0;\r\n      }\r\n      postAction(this.url.updateBusdata, {\r\n        'updateBusdata': this.backData\r\n      }).then(res => {\r\n        if (res.success) {\r\n          if (this.i_important) {\r\n            this.$message.success(\"设置成功\")\r\n          } else {\r\n            this.$message.success(\"取消成功\")\r\n          }\r\n          this.i_important = !this.i_important;\r\n          this.$emit(\"getBackData\", this.backData)\r\n          //this.close();\r\n        } else {\r\n          this.$message.error(\"设置失败\")\r\n        }\r\n      })\r\n    },\r\n    getBackDataNew() {\r\n      return this.backData\r\n    },\r\n    //按钮-销毁\r\n    destory(date) {\r\n      var str = this.backData.s_cur_task_name.substring(0, this.backData.s_cur_task_name.indexOf(\"-\"));\r\n      // console.log(str)\r\n      if (str != \"end\") {\r\n        this.$message.error(\"请假未经同意禁止销假！\")\r\n        return;\r\n      }\r\n      //保存业务数据\r\n      var time = new Date()\r\n      var year = time.getFullYear();\r\n      var month = time.getMonth() + 1;\r\n      var day = time.getDay();\r\n      var hour = time.getDate();\r\n      var minute = time.getMinutes();\r\n      var second = time.getSeconds();\r\n      var newTime = year + \"-\" + month + \"-\" + day + \" \" + hour + \":\" + minute + \":\" + second;\r\n      console.log(year + \"-\" + month + \"-\" + day + \" \" + hour + \":\" + minute + \":\" + second);\r\n      this.backData.d_datetime3 = newTime;   //设置状态为0\r\n      postAction(this.url.updateBusdata, {\r\n        'updateBusdata': this.backData\r\n      }).then(res => {\r\n        if (res.success) {\r\n          this.$message.success(\"销假成功\")\r\n          this.$emit(\"getBackData\", this.backData)\r\n          //this.close();\r\n        } else {\r\n          this.$message.error(\"销假失败\")\r\n        }\r\n      })\r\n    },\r\n\r\n    //数据校验\r\n    checkData() {\r\n      let result = true;\r\n      let checkList = this.optionMap.checkList;\r\n      let regulars = this.optionMap.regulars;\r\n      if (checkList != undefined && checkList.length > 0) {\r\n        for (let i = 0; i < checkList.length; i++) {\r\n          //如果有js校验的话\r\n          if (checkList[i].icheckExpjs != undefined && checkList[i].icheckExpjs != '' && checkList[i].icheckExpjs != null) {\r\n            //let reg = ''\r\n            for (let j = 0; j < regulars.length; j++) {\r\n              if (checkList[i].icheckExpjs == regulars[j].value) {\r\n                let reg = regulars[j].text;\r\n                let inputVa = this.backData[checkList[i].stableColumn]\r\n                if (!(inputVa == undefined)) {\r\n                  if (!eval(reg).test(inputVa)) {\r\n                    //this.$message.error(checkList[i].scolumnName + \":\" + checkList[i].scheckShowmsg);\r\n                    // this.$refs[checkList[i].scolumnName].\r\n                    result = false;\r\n                  }\r\n                  break;\r\n                } else {\r\n                  //this.$message.error(checkList[i].scolumnName + \":\" + checkList[i].scheckShowmsg);\r\n                  result = false;\r\n                }\r\n              }\r\n            }\r\n\r\n          } else if (this.backData[checkList[i].stableColumn] == undefined || this.backData[checkList[i].stableColumn] == '') {\r\n            // console.log(this.backData[checkList[i].stableColumn] + \"....\");\r\n            if (checkList[i].scheckShowmsg == 'null') {//如果没有设置提示值\r\n              if (checkList[i].scolumnName == '销假日期') {\r\n                continue;\r\n              }\r\n              //   this.$message.error(checkList[i].scolumnName + \":\" + \"不能为空\");\r\n            } else {\r\n              if (checkList[i].scolumnName == '销假日期') {\r\n                continue;\r\n              }\r\n            }\r\n            result = false;\r\n          }\r\n        }\r\n      }\r\n      return result;\r\n    },\r\n    saveNoCheck() {\r\n      postAction(this.url.updateBusdataNoCheck, this.backData).then(res => {\r\n        if (res.success) {\r\n          this.$message.success(\"保存成功\")\r\n          this.reload();\r\n          this.$emit(\"getBackData\", this.backData)\r\n          //this.close();\r\n        } else {\r\n          this.$message.error(\"保存失败\")\r\n        }\r\n      })\r\n    },\r\n    //按钮-保存\r\n    save(data) {\r\n      let flag = this.nullText();\r\n      if (flag) {\r\n        return;\r\n      }\r\n      //校验发布范围\r\n      if (this.publishData != undefined) {\r\n        this.backData.i_bigint3 = this.publishData.iIsLimits; //发布范围\r\n        if (this.publishData.iIsLimits == 2) {\r\n          this.backData.s_varchar3 = this.publishData.departId;  //部门ids\r\n        }\r\n        if (this.publishData.iIsLimits == 3) {\r\n          this.backData.s_varchar3 = this.publishData.userRealName; //所选用户\r\n          this.backData.s_varchar4 = this.publishData.userIdS.toString();\r\n        }\r\n      }\r\n      /*if (!this.checkData()) {\r\n        return;\r\n      }\r\n*/\r\n      //保存业务数据\r\n      this.backData.i_is_display = \"0\"   //设置状态为0\r\n      this.backData.i_is_es = 3; //是否已发送全文检索\r\n      this.backData.i_urgency = localStorage.getItem('缓急:' + this.backData.table + this.backData.i_id)\r\n      this.backData.i_urgency = this.backData.i_urgency == null ? 4 : this.backData.i_urgency\r\n\r\n      let i_safetylevel = localStorage.getItem('密级:' + this.backData.table + this.backData.i_id)\r\n      this.backData.i_safetylevel = i_safetylevel==null?1:i_safetylevel\r\n\r\n      console.log(this.backData);\r\n      postAction(this.url.updateBusdata, {\r\n        'updateBusdata': this.backData\r\n      }).then(res => {\r\n        if (res.success) {\r\n          this.$message.success(\"保存成功\")\r\n\r\n          this.reload();\r\n\r\n          this.$emit(\"getBackData\", this.backData)\r\n          //this.close();\r\n        } else {\r\n          this.$message.error(\"保存失败\")\r\n        }\r\n      })\r\n    },\r\n\r\n    //按钮-登记文号\r\n    saveDocNum(data) {\r\n      this.backData.s_file_num = data.docnum;\r\n      this.backData.s_varchar20 = data.id\r\n    },\r\n    //按钮-引入公文链接\r\n    saveGongwenData(data) {\r\n      this.backData.s_file_num = data.sfileNum\r\n      this.backData.s_create_dept = data.sdeptName\r\n      this.backData.s_title = data.stitle\r\n      this.backData.d_create_time = data.dcreateTime;\r\n    },\r\n    //按钮-封发日期\r\n    saveDelTime(data) {\r\n      this.backData.d_sealdate = data;\r\n    },\r\n    //获取附件列表\r\n    getOaFiles(tableName, busDataId) {\r\n      getAction(this.url.queryOaFileList,\r\n        {tableName: tableName, busDataId: busDataId, sFileType: 4}).then(res => {\r\n        this.oaFileList = res.result;\r\n      })\r\n    },\r\n    //获取办文依据\r\n    getBanWenFiles(tableName, busDataId) {\r\n      getAction(this.url.queryBanWenList,\r\n        {tableName: tableName, busDataId: busDataId, sFileType: 6}).then(res => {\r\n        this.banWenFileList = res.result;\r\n      })\r\n    },\r\n    //下载所有附件\r\n    downAllFiles() {\r\n      let config = {\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          \"Access-Control-Expose-Headers\": \"Content-Disposition\"\r\n        },\r\n        responseType: 'blob',//必须要写\r\n      };\r\n      this.$http.post(this.url.downloadFiles, this.oaFileList, config).then(res => {//tableSelection参数，我自己的是对象，后台用List接，可以看一downloadFile接口\r\n        let data = res;\r\n        if (this.backData.s_left_parameter == undefined) {\r\n          this.backData.s_left_parameter = \"\"\r\n        }\r\n        if (this.backData.s_middle_parameter == undefined) {\r\n          this.backData.s_middle_parameter = \"\"\r\n        }\r\n        if (this.backData.s_right_parameter == undefined) {\r\n          this.backData.s_right_parameter = \"\"\r\n        }\r\n        let fileName = this.backData.s_left_parameter + this.backData.s_middle_parameter + this.backData.s_right_parameter + '_' + new Date().getTime() + '.zip';\r\n        // console.log(fileName)\r\n        // let contentDisposition =\"attachment;filename=Desktop1574646488783.zip\"\r\n        // let fileName = contentDisposition.substring(contentDisposition.indexOf('=') + 1);\r\n        let url = window.URL.createObjectURL(new Blob([data]));\r\n        let edik = document.createElement('a');\r\n        edik.style.display = 'none';\r\n        edik.href = url;\r\n        edik.setAttribute('download', fileName);\r\n        document.body.appendChild(edik);\r\n        //点击下载\r\n        edik.click();\r\n        // 释放掉blob对象\r\n        window.URL.revokeObjectURL(edik);\r\n        // 下载完成移除元素\r\n        document.body.removeChild(edik);\r\n      });\r\n    },\r\n    //发送通知\r\n    submit(data) {\r\n      this.$emit(\"saveInform\", data)\r\n    },\r\n    //日期格式化\r\n    dateFormat(date) {\r\n      let date1 = new Date(date);\r\n      let Y = date1.getFullYear();\r\n      let M = date1.getMonth() + 1;\r\n      let D = date1.getDate();\r\n      let newTime = Y + '-' + (M < 10 ? \"0\" + M : M) + \"-\" + (D < 10 ? \"0\" + D : D) + \" \" + date1.toTimeString().substr(0, 8);\r\n      return newTime;\r\n    },\r\n    //获取下一个月时间\r\n    getNextMonth(date) {\r\n      let time = new Date(date).getTime();\r\n      let lastMonth = time + (60 * 60 * 1000 * 24 * 180); //3个月之后\r\n      let newTime = new Date(lastMonth).toISOString().split(('T')[0]);\r\n      return newTime;\r\n    },\r\n    downFileName(path) {\r\n      // alert(path)\r\n      let url = window._CONFIG['domianURL'] + \"/papertitle/oaTemplate/download\";\r\n      window.open(url + \"/\" + path);\r\n    },\r\n    blurText(value, event) {\r\n\r\n      let checkList = this.optionMap.checkList;\r\n\r\n      if (checkList != undefined && checkList.length > 0) {\r\n\r\n        if (event.prefixCls == \"ant-input\") {\r\n\r\n          if (value == '' || value == undefined || value == null) {\r\n\r\n            event.$el.style.borderColor = 'red';\r\n\r\n          } else {\r\n\r\n            event.$el.style.borderColor = '#d9d9d9';\r\n\r\n          }\r\n\r\n        } else if (event.prefixCls == \"ant-select\") {\r\n\r\n          if (value == '' || value == undefined || value == null) {\r\n\r\n            event.$el.childNodes[0].style.borderColor = 'red';\r\n\r\n          } else {\r\n\r\n            event.$el.childNodes[0].style.borderColor = '#d9d9d9';\r\n\r\n          }\r\n\r\n        } else if (event.prefixCls == \"ant-calendar\") {\r\n\r\n          if (value.length == 1) {\r\n\r\n            if (value == '' || value == undefined || value == null) {\r\n\r\n              event.$el.childNodes[0].childNodes[0].style.borderColor = 'red';\r\n\r\n            } else {\r\n\r\n              event.$el.childNodes[0].childNodes[0].style.borderColor = '#d9d9d9';\r\n\r\n            }\r\n          } else if (value.length == 2) {\r\n\r\n            if (value[0] == '' || value[1] == '' || value[0] == undefined || value[1] == undefined || value[0] == null || value[1] == null) {\r\n\r\n              event.$el.childNodes[0].style.borderColor = 'red';\r\n\r\n            } else {\r\n\r\n              event.$el.childNodes[0].style.borderColor = '#d9d9d9';\r\n\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    nullText() {\r\n\r\n      let checkList = this.optionMap.checkList;\r\n      let regulars = this.optionMap.regulars;\r\n      let flag = false;\r\n      //let message = \"红色区域为必填业务，请录入！\";\r\n      if (checkList != undefined && checkList.length > 0) {\r\n        for (let i = 0; i < checkList.length; i++) {\r\n          if (checkList[i].icolumnType == 1 || checkList[i].icolumnType == 3) {    //输入框\r\n            if (this.$refs[this.s_varchar[i]].value == '' || this.$refs[this.s_varchar[i]].value == undefined || this.$refs[this.s_varchar[i]].value == null) {\r\n              this.$refs[this.s_varchar[i]].$el.style.borderColor = 'red';\r\n              //有js校验\r\n              flag = true;\r\n            } else {\r\n              let checkJs = checkList[i].icheckExpjs;\r\n              //如果有值的话，查看一下是否有js校验，有js校验的话，就将校验\r\n              if (checkJs != undefined && checkJs != null && checkJs != \"\") {\r\n                for (let j = 0; j < regulars.length; j++) {\r\n                  if (checkList[i].icheckExpjs == regulars[j].value) {\r\n                    let reg = regulars[j].text;   //取得js的正则表达式\r\n                    console.log(reg)\r\n                    if (!eval(reg).test(this.$refs[this.s_varchar[i]].value)) {     //判断\r\n                      this.$refs[this.s_varchar[i]].$el.style.borderColor = 'red';\r\n                      //message = checkList[i].scheckShowmsg;\r\n                      flag = true;\r\n                    }\r\n                    break;\r\n                  }\r\n                }\r\n\r\n              } else {//没有js校验的话，就将边框颜色变为正常\r\n                this.$refs[this.s_varchar[i]].$el.style.borderColor = '#d9d9d9';\r\n              }\r\n            }\r\n          } else if (checkList[i].icolumnType == 2) {\r\n            if (this.$refs[this.s_varchar[i]].value == '' || this.$refs[this.s_varchar[i]].value == undefined || this.$refs[this.s_varchar[i]].value == null) {\r\n              this.$refs[this.s_varchar[i]].$el.childNodes[0].style.borderColor = 'red';\r\n              flag = true;\r\n            } else {\r\n              this.$refs[this.s_varchar[i]].$el.childNodes[0].style.borderColor = '#d9d9d9';\r\n            }\r\n          }\r\n          /* else if(checkList[i].icolumnType == 3){    //文本框\r\n             if (this.$refs[this.s_varchar[i]].value == '' || this.$refs[this.s_varchar[i]].value == undefined || this.$refs[this.s_varchar[i]].value == null) {\r\n               this.$refs[this.s_varchar[i]].$el.style.borderColor = 'red';\r\n               flag = true;\r\n             }else {\r\n               this.$refs[this.s_varchar[i]].$el.style.borderColor = '#d9d9d9';\r\n             }\r\n\r\n           }*/\r\n          else if (checkList[i].icolumnType == 4) {\r\n            if (this.$refs[this.s_varchar[i]].$el.childNodes[0].childNodes[0].value == '' || this.$refs[this.s_varchar[i]].$el.childNodes[0].childNodes[0].value == undefined || this.$refs[this.s_varchar[i]].$el.childNodes[0].childNodes[0].value == null) {\r\n              this.$refs[this.s_varchar[i]].$el.childNodes[0].childNodes[0].style.borderColor = 'red';\r\n              flag = true;\r\n            } else {\r\n              this.$refs[this.s_varchar[i]].$el.childNodes[0].childNodes[0].style.borderColor = '#d9d9d9';\r\n            }\r\n          } else if (checkList[i].icolumnType == 5) {\r\n            if (this.$refs[this.s_varchar[i]].$el.childNodes[0].childNodes[0].value == '' || this.$refs[this.s_varchar[i]].$el.childNodes[0].childNodes[2].value == '' || this.$refs[this.s_varchar[i]].$el.childNodes[0].childNodes[0].value == undefined || this.$refs[this.s_varchar[i]].$el.childNodes[0].childNodes[2].value == undefined || this.$refs[this.s_varchar[i]].$el.childNodes[0].childNodes[0].value == null || this.$refs[this.s_varchar[i]].$el.childNodes[0].childNodes[2].value == null) {\r\n              this.$refs[this.s_varchar[i]].$el.childNodes[0].style.borderColor = 'red';\r\n              flag = true;\r\n            } else {\r\n              this.$refs[this.s_varchar[i]].$el.childNodes[0].style.borderColor = '#d9d9d9';\r\n            }\r\n          }\r\n        }\r\n        if (flag == true) {\r\n          this.$message.error(\"请填写正确的数据！！！\");\r\n          this.$store.commit('changeCheckDataFlag',false)\r\n        }else{\r\n          this.$store.commit('changeCheckDataFlag',true)\r\n        }\r\n      }\r\n      return flag;\r\n    },\r\n    //附件按钮--提示信息\r\n    fileBtnName(type) {\r\n      var typeName = '';\r\n      if (type == 1) {\r\n        typeName = \"编辑文档\";\r\n        return typeName;\r\n      }\r\n      if (type == 2) {\r\n        typeName = \"修改附件名称\";\r\n        return typeName;\r\n      }\r\n      if (type == 3) {\r\n        typeName = \"删除\";\r\n        return typeName;\r\n      }\r\n      if (type == 4) {\r\n        typeName = \"向上\";\r\n        return typeName;\r\n      }\r\n      if (type == 5) {\r\n        typeName = \"向下\";\r\n        return typeName;\r\n      }\r\n    },\r\n    //根据文件后缀控制编辑按钮显示\r\n    isSuffex(fileName) {\r\n      let suffex = fileName.slice(fileName.lastIndexOf(\".\") + 1);\r\n      if (suffex == 'docx' || suffex == 'doc' || suffex == 'xlsx' || suffex == 'xls' || suffex == 'pptx'\r\n        || suffex == 'ppt' || suffex == 'pdf' || suffex == 'wps') {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    },\r\n    //打开附件\r\n    qiCao1(index, item) {\r\n      let fileName = item.sfilePath.slice(item.sfilePath.lastIndexOf(\"\\\\\") + 1);\r\n      let suffex = item.sfileName.slice(item.sfileName.lastIndexOf(\".\") + 1);\r\n      if (suffex == 'docx' || suffex == 'doc' || suffex == 'xlsx' || suffex == 'xls' || suffex == 'pptx'\r\n        || suffex == 'ppt' || suffex == 'pdf' || suffex == 'wps') {\r\n        let param = {};\r\n        param.sFilePath = item.sfilePath;\r\n        postAction('/oaBus/oaFile/singleCopyFile', param).then(res => {\r\n          let ntkoed = ntkoBrowser.ExtensionInstalled();\r\n          if (ntkoed) {\r\n            ntkoBrowser.openWindow(window.location.origin + \"/ntko/editindex.html?cmd=\" + index + \"&fileName=\" + fileName);\r\n          } else {\r\n            window.open(window.location.origin + \"/ntko/exeindex.html\")\r\n          }\r\n          window.ntkoCloseEvent = function () {\r\n          }\r\n        })\r\n      } else {\r\n        this.downFileName(item.sfilePath);\r\n      }\r\n    },\r\n    //编辑附件\r\n    qiCao2(index, item) {\r\n      let param = {};\r\n      param.sFilePath = item.sfilePath;\r\n      postAction('/oaBus/oaFile/singleCopyFile', param).then(res => {\r\n        if (res.success) {\r\n          this.openFile(index, item);\r\n        } else {\r\n          this.$message.error(\"文件打开失败\")\r\n        }\r\n      })\r\n    },\r\n    openFile(cmd, item) {\r\n      let fileName = item.sfilePath.slice(item.sfilePath.lastIndexOf(\"\\\\\") + 1);\r\n\r\n      let ntkoed = ntkoBrowser.ExtensionInstalled();\r\n      if (ntkoed) {\r\n        ntkoBrowser.openWindow(window.location.origin + \"/ntko/editindex.html?cmd=\" + cmd + \"&fileName=\" + fileName + \"&fileId=\" + item.iid\r\n          + \"&fileType=\" + item.sfileType + \"&stable=\" + item.stable +\r\n          \"&tableid=\" + item.itableId);\r\n      } else {\r\n        window.open(window.location.origin + \"/ntko/exeindex.html\")\r\n      }\r\n      window.ntkoCloseEvent = function () {\r\n      }\r\n\r\n\r\n    },\r\n  }\r\n}"]}]}
{"remainingRequest":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js!C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xxm\\work\\jd\\fore\\src\\views\\workflow\\proManagerList.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xxm\\work\\jd\\fore\\src\\views\\workflow\\proManagerList.vue","mtime":1579253199062},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js","mtime":1570779245522},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js","mtime":1570779225726}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport _toConsumableArray from \"C:\\\\xxm\\\\work\\\\jd\\\\fore\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/toConsumableArray\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport editPro from \"./modules/editPro\";\nimport Vue from 'vue';\nimport picModal from \"./modules/picModal\";\nimport { JeecgListMixin } from '@/mixins/JeecgListMixin';\nimport { ACCESS_TOKEN } from \"../../store/mutation-types\";\nimport { deleteAction, getAction } from \"../../api/manage\";\nimport OaProcButtonFastModal from \"./modules/OaProcButtonFastModal\";\nimport OaProcOpinionConfigureModal from \"./modules/OaProcOpinionConfigureModal\";\nimport oaProcActinstList from \"./oaProcActinstList\";\nimport copyProcModal from \"./modules/copyProcModal\";\nimport uploadProc from \"./modules/uploadProc\";\nexport default {\n  name: \"proManagerList\",\n  mixins: [JeecgListMixin],\n  components: {\n    uploadProc: uploadProc,\n    OaProcButtonFastModal: OaProcButtonFastModal,\n    OaProcOpinionConfigureModal: OaProcOpinionConfigureModal,\n    picModal: picModal,\n    editPro: editPro,\n    oaProcActinstList: oaProcActinstList,\n    copyProcModal: copyProcModal\n  },\n  data: function data() {\n    return {\n      fileList: '',\n      headers: {\n        'X-Access-Token': Vue.ls.get(ACCESS_TOKEN)\n      },\n      description: 'proManager管理页面',\n      datasource: [],\n      // 表头\n      columns: [{\n        title: '序号',\n        dataIndex: '',\n        key: 'rowIndex',\n        width: 60,\n        align: \"center\",\n        customRender: function customRender(t, r, index) {\n          return parseInt(index) + 1;\n        }\n      }, // {\n      //   title: '流程定义id',\n      //   align: \"center\",\n      //   dataIndex: 'id'\n      // },\n      {\n        title: '名称',\n        align: \"center\",\n        dataIndex: 'name'\n      }, {\n        title: '关键字',\n        align: \"center\",\n        dataIndex: 'key'\n      }, {\n        title: '版本',\n        align: \"center\",\n        dataIndex: 'version'\n      }, // {\n      //   title: '部署id',\n      //   align: \"center\",\n      //   dataIndex: 'deploymentId'\n      // },\n      {\n        title: '资源名称',\n        align: \"center\",\n        dataIndex: 'resourceName'\n      }, {\n        title: '描述',\n        align: \"center\",\n        dataIndex: 'description'\n      }, // {\n      //   title: '激活状态',\n      //   align: \"center\",\n      //   dataIndex: 'sus'\n      // },\n      {\n        title: '操作',\n        dataIndex: 'action',\n        align: \"center\",\n        scopedSlots: {\n          customRender: 'action'\n        }\n      }],\n      url: {\n        //\n        fileUpload: window._CONFIG['domianURL'] + '/wf/process/deploy',\n        list: \"/wf/process/processQuery\",\n        delete: \"/wf/process/processDel\",\n        active: '/wf/process/activeProcess',\n        disactiveProcess: \"/wf/process/disactiveProcess\",\n        deleteBatch: \"/wf/process/processDel\"\n      }\n    };\n  },\n  computed: {\n    importExcelUrl: function importExcelUrl() {\n      return \"\".concat(window._CONFIG['domianURL'], \"/\").concat(this.url.importExcelUrl);\n    }\n  },\n  methods: {\n    reload: function reload() {\n      var _this = this;\n\n      console.log('~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'); // this.fileList = []\n\n      this.selectedRowKeys = []; // this.loading = true;\n\n      getAction(this.url.list).then(function (res) {\n        // if (res.success) {\n        _this.dataSource = res.result.records;\n        _this.ipagination.total = res.result.total; // }\n        // if (res.code === 510) {\n        //   this.$message.warning(res.message)\n        // }\n        // this.loading = false;\n        //\n      });\n    },\n    showUpload: function showUpload() {\n      this.$refs.upload.show();\n    },\n    beforeUpload: function beforeUpload(file, fileList) {\n      this.fileList = [].concat(_toConsumableArray(this.fileList), [file]);\n      return false;\n    },\n    handleChange: function handleChange(info) {\n      this.fileList = info.fileList;\n\n      if (info.file.status == 'done') {\n        this.$message.success(\"\".concat(info.file.name, \" \\u6587\\u4EF6\\u4E0A\\u4F20\\u6210\\u529F\"));\n        this.reload();\n      } else if (info.file.status == 'error') {\n        this.$message.error(\"\".concat(info.file.name, \" \\u6587\\u4EF6\\u4E0A\\u4F20\\u5931\\u8D25\"));\n        this.reload();\n      } // this.fileList=[]\n\n    },\n    dels: function dels(cascade) {\n      var ids = \"\";\n\n      for (var a = 0; a < this.selectedRowKeys.length; a++) {\n        ids += this.selectedRowKeys[a] + \",\";\n      }\n\n      this.confirmdel(ids, cascade);\n      this.reload();\n    },\n    confirmdel: function confirmdel(id, cascade) {\n      var _this2 = this;\n\n      var flag = cascade == 0 ? false : true;\n      deleteAction(this.url.delete + '?ids=' + id + '&cascade=' + flag).then(function (res) {\n        if (res.success) {\n          _this2.$message.success(res.message);\n\n          _this2.reload();\n        } else {\n          _this2.$message.error(res.message);\n        }\n      });\n    },\n    cancel: function cancel() {\n      console.log('------->取消选择');\n    },\n    active: function active(record) {\n      var _this3 = this;\n\n      if (!record.suspended) {\n        this.$message.error('已是激活状态，请勿重复操作');\n        return;\n      }\n\n      getAction(this.url.active + '?id=' + record.id).then(function (res) {\n        if (res.success) {\n          _this3.$message.success('激活成功');\n        } else {\n          _this3.$message.error('激活失败');\n        }\n      });\n      this.reload();\n    },\n    disactiveProcess: function disactiveProcess(record) {\n      var _this4 = this;\n\n      // var that = this\n      if (record.suspended) {\n        this.$message.error('已是挂起状态，请勿重复操作');\n        return;\n      }\n\n      getAction(this.url.disactiveProcess + '?id=' + record.id).then(function (res) {\n        if (res.success) {\n          _this4.$message.success('挂起成功');\n        } else {\n          _this4.$message.error('挂起失败');\n        }\n      });\n      this.reload();\n    },\n    showPic: function showPic(record) {\n      this.$refs.picModal.show(record.id);\n      this.$refs.picModal.title = record.name;\n    },\n    editPro: function editPro(record) {\n      this.$refs.editPro.editPro(record.id, record.name);\n      this.$refs.editPro.title = '编辑';\n      this.reload();\n    },\n    buttonPermission: function buttonPermission(record) {\n      this.$refs.OaProcButtonFastModal.show1(record.id, record.key);\n      this.$refs.OaProcButtonFastModal.title = '权限配置';\n      this.reload();\n    },\n    opinionConfigure: function opinionConfigure(record) {\n      this.$refs.OaProcOpinionConfigureModal.show1(record.id, record.key);\n      this.$refs.OaProcOpinionConfigureModal.title = '意见配置';\n      this.reload();\n    },\n    newIncreased: function newIncreased(record) {\n      this.$refs.oaProcActinstList.show(record);\n    },\n\n    /**\n     * 复制流程图\n     */\n    copyProc: function copyProc(record) {\n      this.$refs.copyProc.proMSg = record;\n      this.$refs.copyProc.show();\n    }\n  },\n  create: function create() {}\n};",{"version":3,"sources":["proManagerList.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <a-card :bordered=\"false\">\r\n\r\n    <!-- 查询区域 -->\r\n    <div class=\"table-page-search-wrapper\">\r\n      <a-form layout=\"inline\">\r\n        <a-row :gutter=\"24\">\r\n\r\n          <a-col :md=\"6\" :sm=\"8\">\r\n            <a-form-item label=\"流程名称\">\r\n              <a-input placeholder=\"请输入流程名称\" v-model=\"queryParam.name\"></a-input>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :md=\"6\" :sm=\"8\">\r\n            <a-form-item label=\"流程定义key\">\r\n              <a-input placeholder=\"请输入流程定义key\" v-model=\"queryParam.key\"></a-input>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :md=\"6\" :sm=\"8\">\r\n            <span style=\"float: left;overflow: hidden;\" class=\"table-page-search-submitButtons\">\r\n              <a-button type=\"primary\" ref=\"reSearchQuery\" @click=\"searchQuery\" icon=\"search\">查询</a-button>\r\n              <a-button type=\"primary\" @click=\"searchReset\" icon=\"reload\" style=\"margin-left: 8px\">重置</a-button>\r\n            </span>\r\n          </a-col>\r\n\r\n        </a-row>\r\n      </a-form>\r\n    </div>\r\n\r\n    <!-- 操作按钮区域 -->\r\n    <div class=\"table-operator\" style=\"display: flex\">\r\n\r\n      <!--:beforeUpload=\"beforeUpload\"-->\r\n      <!--<a-upload name=\"file\" :multiple=\"true\"  :action=\"url.fileUpload\" :headers=\"headers\" :fileList=\"fileList\"-->\r\n                   <!--@change=\"handleChange\">-->\r\n\r\n        <!---->\r\n        <a-button @click=\"showUpload\"  >\r\n          <a-icon  type=\"upload\"  />\r\n          上传流程图\r\n        </a-button>\r\n      <!--</a-upload>-->\r\n\r\n      <a-dropdown v-if=\"selectedRowKeys.length > 0\">\r\n        <a-menu slot=\"overlay\">\r\n          <a-menu-item key=\"1\" @click=\"dels(0)\">\r\n            <a-icon type=\"delete\"/>\r\n            删除\r\n          </a-menu-item>\r\n          <!--<a-menu-item key=\"1\" @click=\"dels(1)\">-->\r\n          <!--<a-icon type=\"delete\"/>-->\r\n          <!--级联删除-->\r\n          <!--</a-menu-item>-->\r\n        </a-menu>\r\n        <a-button style=\"margin-left: 8px\"> 批量操作\r\n          <a-icon type=\"down\"/>\r\n        </a-button>\r\n      </a-dropdown>\r\n    </div>\r\n\r\n    <!-- table区域-begin -->\r\n    <div>\r\n      <div class=\"ant-alert ant-alert-info\" style=\"margin-bottom: 16px;\">\r\n        <i class=\"anticon anticon-info-circle ant-alert-icon\"></i> 已选择 <a style=\"font-weight: 600\">{{\r\n        selectedRowKeys.length }}</a>项\r\n        <a style=\"margin-left: 24px\" @click=\"onClearSelected\">清空</a>\r\n      </div>\r\n\r\n      <a-table\r\n        ref=\"table\"\r\n        size=\"middle\"\r\n        bordered\r\n        rowKey=\"deploymentId\"\r\n        :columns=\"columns\"\r\n        :dataSource=\"dataSource\"\r\n        :pagination=\"ipagination\"\r\n        :loading=\"loading\"\r\n        :rowSelection=\"{selectedRowKeys: selectedRowKeys, onChange: onSelectChange}\"\r\n        @change=\"handleTableChange\"\r\n        :rowClassName=\"(record,index) => {\r\n              let className  = 'light-row';\r\n              if (index % 2 === 1) className = 'dark-row';\r\n              return className;\r\n          }\"\r\n      >\r\n\r\n        <span slot=\"action\" slot-scope=\"text, record\">\r\n          <a @click=\"editPro(record)\">编辑</a>\r\n\r\n\r\n          <a-divider type=\"vertical\"/>\r\n          <a-dropdown>\r\n            <a class=\"ant-dropdown-link\">更多 <a-icon type=\"down\"/></a>\r\n            <a-menu slot=\"overlay\">\r\n              <a-menu-item>\r\n                      <a>\r\n                        <a-popconfirm title=\"是否删除?\"\r\n                                      @confirm=\"confirmdel(record.deploymentId,0)\"\r\n                                      @cancel=\"cancel\"\r\n                                      okText=\"确认\"\r\n                                      cancelText=\"取消\"> 删除</a-popconfirm>\r\n                      </a>\r\n\r\n                <!--<a>-->\r\n                <!--<a-popconfirm title=\"是否级联删除?\"-->\r\n                <!--@confirm=\"confirmdel(record.deploymentId,1)\"-->\r\n                <!--@cancel=\"cancel\"-->\r\n                <!--okText=\"确认\"-->\r\n                <!--cancelText=\"取消\"> 级联删除</a-popconfirm>-->\r\n                <!--</a>-->\r\n                      <!--<a @click=\"active(record)\"> 激活</a>-->\r\n                      <!--<a @click=\"disactiveProcess(record)\"> 挂起</a>-->\r\n                      <a @click=\"buttonPermission(record)\"> 按钮权限</a>\r\n                      <a @click=\"opinionConfigure(record)\"> 意见配置</a>\r\n                      <a @click=\"newIncreased(record)\"> 环节配置</a>\r\n                      <a @click=\"copyProc(record)\">复制流程</a>\r\n                      <a @click=\"showPic(record)\"> 查看流程图</a>\r\n              </a-menu-item>\r\n            </a-menu>\r\n          </a-dropdown>\r\n        </span>\r\n\r\n      </a-table>\r\n    </div>\r\n    <!-- table区域-end -->\r\n\r\n    <!-- 表单区域 -->\r\n    <pic-modal ref=\"picModal\" @ok=\"modalFormOk\"></pic-modal>\r\n    <edit-pro ref=\"editPro\" @reload=\"reload\"></edit-pro>\r\n    <OaProcButtonFast-Modal ref=\"OaProcButtonFastModal\" @ok=\"modalFormOk\"></OaProcButtonFast-Modal>\r\n    <OaProcOpinionConfigure-Modal ref=\"OaProcOpinionConfigureModal\" @ok=\"modalFormOk\"></OaProcOpinionConfigure-Modal>\r\n    <oa-proc-actinst-list ref=\"oaProcActinstList\"></oa-proc-actinst-list>\r\n\r\n    <copy-proc-modal ref=\"copyProc\" @reload=\"reload\"></copy-proc-modal>\r\n\r\n    <upload-proc ref=\"upload\" @reload=\"reload\"></upload-proc>\r\n  </a-card>\r\n</template>\r\n\r\n<script>\r\n  import editPro from './modules/editPro'\r\n  import Vue from 'vue'\r\n  import picModal from './modules/picModal'\r\n  import {JeecgListMixin} from '@/mixins/JeecgListMixin'\r\n  import {ACCESS_TOKEN} from \"../../store/mutation-types\";\r\n  import {deleteAction, getAction} from \"../../api/manage\";\r\n  import OaProcButtonFastModal from \"./modules/OaProcButtonFastModal\";\r\n  import OaProcOpinionConfigureModal from \"./modules/OaProcOpinionConfigureModal\";\r\n  import oaProcActinstList from './oaProcActinstList'\r\n  import copyProcModal from './modules/copyProcModal'\r\n  import uploadProc from './modules/uploadProc'\r\n\r\n  export default {\r\n    name: \"proManagerList\",\r\n    mixins: [JeecgListMixin],\r\n    components: {\r\n      uploadProc,\r\n      OaProcButtonFastModal,\r\n      OaProcOpinionConfigureModal,\r\n      picModal,\r\n      editPro,\r\n      oaProcActinstList,\r\n      copyProcModal\r\n    },\r\n    data() {\r\n      return {\r\n        fileList: '',\r\n        headers: {'X-Access-Token': Vue.ls.get(ACCESS_TOKEN)},\r\n        description: 'proManager管理页面',\r\n        datasource: [],\r\n        // 表头\r\n        columns: [\r\n          {\r\n            title: '序号',\r\n            dataIndex: '',\r\n            key: 'rowIndex',\r\n            width: 60,\r\n            align: \"center\",\r\n            customRender: function (t, r, index) {\r\n              return parseInt(index) + 1;\r\n            }\r\n          },\r\n          // {\r\n          //   title: '流程定义id',\r\n          //   align: \"center\",\r\n          //   dataIndex: 'id'\r\n          // },\r\n          {\r\n            title: '名称',\r\n            align: \"center\",\r\n            dataIndex: 'name'\r\n          },\r\n          {\r\n            title: '关键字',\r\n            align: \"center\",\r\n            dataIndex: 'key'\r\n          },\r\n          {\r\n            title: '版本',\r\n            align: \"center\",\r\n            dataIndex: 'version'\r\n          },\r\n          // {\r\n          //   title: '部署id',\r\n          //   align: \"center\",\r\n          //   dataIndex: 'deploymentId'\r\n          // },\r\n          {\r\n            title: '资源名称',\r\n            align: \"center\",\r\n            dataIndex: 'resourceName'\r\n          },\r\n          {\r\n            title: '描述',\r\n            align: \"center\",\r\n            dataIndex: 'description'\r\n          },\r\n          // {\r\n          //   title: '激活状态',\r\n          //   align: \"center\",\r\n          //   dataIndex: 'sus'\r\n          // },\r\n          {\r\n            title: '操作',\r\n            dataIndex: 'action',\r\n            align: \"center\",\r\n            scopedSlots: {customRender: 'action'},\r\n          }\r\n        ],\r\n        url: {\r\n          //\r\n          fileUpload:  window._CONFIG['domianURL'] +'/wf/process/deploy',\r\n          list: \"/wf/process/processQuery\",\r\n          delete: \"/wf/process/processDel\",\r\n          active: '/wf/process/activeProcess',\r\n          disactiveProcess: \"/wf/process/disactiveProcess\",\r\n          deleteBatch: \"/wf/process/processDel\"\r\n        },\r\n      }\r\n    },\r\n    computed: {\r\n      importExcelUrl: function () {\r\n        return `${window._CONFIG['domianURL']}/${this.url.importExcelUrl}`;\r\n      }\r\n    },\r\n    methods: {\r\n      reload() {\r\n        console.log('~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~')\r\n        // this.fileList = []\r\n        this.selectedRowKeys = []\r\n        // this.loading = true;\r\n        getAction(this.url.list).then((res) => {\r\n          // if (res.success) {\r\n          this.dataSource = res.result.records;\r\n          this.ipagination.total = res.result.total;\r\n          // }\r\n          // if (res.code === 510) {\r\n          //   this.$message.warning(res.message)\r\n          // }\r\n          // this.loading = false;\r\n          //\r\n        })\r\n\r\n      },\r\n      showUpload(){\r\n        this.$refs.upload.show()\r\n      }\r\n      ,\r\n      beforeUpload: function (file, fileList) {\r\n        this.fileList = [...this.fileList, file];\r\n        return false;\r\n      },\r\n      handleChange(info) {\r\n        this.fileList = info.fileList\r\n\r\n\r\n        if (info.file.status == 'done') {\r\n\r\n          this.$message.success(`${info.file.name} 文件上传成功`)\r\n\r\n          this.reload()\r\n        } else if (info.file.status == 'error') {\r\n          this.$message.error(`${info.file.name} 文件上传失败`)\r\n          this.reload()\r\n        }\r\n        // this.fileList=[]\r\n\r\n      },\r\n      dels(cascade) {\r\n\r\n        var ids = \"\";\r\n        for (var a = 0; a < this.selectedRowKeys.length; a++) {\r\n          ids += this.selectedRowKeys[a] + \",\";\r\n        }\r\n        this.confirmdel(ids, cascade)\r\n\r\n        this.reload()\r\n\r\n      },\r\n      confirmdel(id, cascade) {\r\n        var flag = cascade == 0 ? false : true\r\n\r\n        deleteAction(this.url.delete+'?ids='+id+'&cascade='+flag).then(res=>{\r\n          if (res.success) {\r\n            this.$message.success(res.message)\r\n            this.reload()\r\n\r\n          } else {\r\n            this.$message.error(res.message)\r\n          }\r\n        })\r\n\r\n      },\r\n      cancel() {\r\n        console.log('------->取消选择')\r\n      },\r\n      active(record) {\r\n        if (!record.suspended) {\r\n          this.$message.error('已是激活状态，请勿重复操作')\r\n          return\r\n        }\r\n\r\n        getAction(this.url.active+'?id='+record.id).then(res=>{\r\n          if (res.success) {\r\n            this.$message.success('激活成功')\r\n          } else {\r\n            this.$message.error('激活失败')\r\n          }\r\n        })\r\n\r\n        this.reload()\r\n      },\r\n      disactiveProcess(record) {\r\n        // var that = this\r\n        if (record.suspended) {\r\n          this.$message.error('已是挂起状态，请勿重复操作')\r\n          return\r\n        }\r\n\r\n\r\n        getAction(this.url.disactiveProcess+'?id='+record.id).then(res=>{\r\n          if (res.success) {\r\n            this.$message.success('挂起成功')\r\n          } else {\r\n            this.$message.error('挂起失败')\r\n          }\r\n        })\r\n\r\n        this.reload()\r\n      },\r\n      showPic(record) {\r\n        this.$refs.picModal.show(record.id)\r\n        this.$refs.picModal.title = record.name\r\n      },\r\n      editPro(record) {\r\n        this.$refs.editPro.editPro(record.id, record.name)\r\n        this.$refs.editPro.title = '编辑'\r\n        this.reload()\r\n      },\r\n      buttonPermission(record) {\r\n        this.$refs.OaProcButtonFastModal.show1(record.id, record.key);\r\n        this.$refs.OaProcButtonFastModal.title = '权限配置';\r\n        this.reload()\r\n      },\r\n      opinionConfigure(record) {\r\n        this.$refs.OaProcOpinionConfigureModal.show1(record.id, record.key);\r\n        this.$refs.OaProcOpinionConfigureModal.title = '意见配置';\r\n        this.reload()\r\n      },\r\n      newIncreased(record) {\r\n        this.$refs.oaProcActinstList.show(record);\r\n      },\r\n      /**\r\n       * 复制流程图\r\n       */\r\n      copyProc(record) {\r\n        this.$refs.copyProc.proMSg = record\r\n        this.$refs.copyProc.show()\r\n      }\r\n\r\n    },\r\n    create() {\r\n    },\r\n\r\n  }\r\n</script>\r\n<style scoped>\r\n</style>"],"sourceRoot":"src/views/workflow"}]}
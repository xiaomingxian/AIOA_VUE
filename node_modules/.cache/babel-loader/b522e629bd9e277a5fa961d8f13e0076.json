{"remainingRequest":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js!C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xxm\\work\\jd\\fore\\src\\views\\mytask\\taskList\\preview.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xxm\\work\\jd\\fore\\src\\views\\mytask\\taskList\\preview.vue","mtime":1579416999081},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js","mtime":1570779245522},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js","mtime":1570779225726}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getAction, postAction } from \"@/api/manage\";\nimport { JeecgListMixin } from \"../../../mixins/JeecgListMixin2\";\nimport ATextarea from \"ant-design-vue/es/input/TextArea\";\nimport { busdataTemplate } from \"@/views/buttons/btn-js/busdataTemplate\";\nimport moment from 'moment';\nexport default {\n  name: \"preview\",\n  mixins: [JeecgListMixin, busdataTemplate],\n  components: {\n    ATextarea: ATextarea\n  },\n  props: {\n    backDataRef: {\n      type: Object,\n      required: false\n    },\n    detailList: {\n      type: Object,\n      required: false\n    },\n    busFunction: {\n      type: Object,\n      required: false\n    },\n    optionMap: {\n      type: Object,\n      required: false\n    },\n    publishData: {\n      type: Object,\n      required: false\n    }\n  },\n  data: function data() {\n    return {\n      s_varchar: [],\n      visible: false,\n      visibleDel: false,\n      title: '电子公告',\n      confirmLoading: false,\n      userData: '',\n      //代办信息\n      task: '',\n      //已办信息\n      taskDone: '',\n      detailList: null,\n      //  文档数据   字段含义\n      oaFileList: [],\n      //  文档数据   字段含义\n      typeList: [],\n      //类别\n      select_type: '',\n      //表中的数据相关值\n      backData: {\n        //流程key\n        key: '',\n        //文号\n        // act_show: '',\n        //page ref\n        page_ref: '',\n        //业务配置表id-用于查询按钮/意见权限\n        iprocSetId: '',\n        //对应的业务数据表\n        table: 'oa_busdata30',\n        //---------------------------------- 以下为表存储字段\n        //*******\n        i_id: '',\n        s_receive_type: '',\n        //来文文种\n        //*******\n        //模块\n        i_bus_model_id: '',\n        //\n        i_bus_function_id: '',\n        //密级\n        i_safetylevel: 0,\n        //缓急\n        i_urgency: 0,\n        //主办部门\n        s_main_dept_names: '主办部门',\n        //辅办部门\n        s_cc_dept_names: '辅办部门',\n        //内部发送部门\n        s_inside_deptnames: '内部发送部门',\n        //左侧参数页面头部\n        s_left_parameter: '左侧参数页面头部',\n        //机构\n        s_unit_name: '',\n        //部门\n        s_dept_name: '',\n        //插入参数（修改文头）（页面头部）\n        s_middle_parameter: '',\n        //右侧参数（页面头部）\n        s_right_parameter: '',\n        //来文字号\n        s_receive_num: '',\n        //文件字号\n        s_file_num: '',\n        //来文机关（数据字典取值）\n        i_receive_dept_id: '',\n        //是否办结\n        i_is_state: 0,\n        //是否保存办文单\n        i_is_approve: 0,\n        //是否归档\n        i_is_archives: 0,\n        //是否已送全文检索\n        i_is_es: 0,\n        //是否送公文传输\n        i_is_send: 0,\n        //是否为临时文件\n        i_is_display: 0,\n        //备注\n        s_remarks: '',\n        //创建时间-年\n        i_create_year: new Date().getFullYear(),\n        //创建时间-月\n        i_create_month: new Date().getMonth(),\n        //创建时间-日期\n        i_create_day: new Date().getDate(),\n        //创建人id\n        s_create_by: '',\n        //创建人部门id\n        s_create_deptid: '',\n        //创建人机构id\n        s_create_unitid: '',\n        s_varchar1: '',\n        s_varchar2: '',\n        s_varchar3: '',\n        s_varchar4: '',\n\n        /************电子公告表单内容********************/\n        //标题\n        s_title: '',\n        //创建者姓名\n        s_create_name: '',\n        //创建人部门name\n        s_create_dept: '',\n        //创建时间\n        d_create_time: '',\n        //修改时间\n        d_update_time: new Date().getFullYear() + '-' + new Date().getMonth() + '-' + new Date().getDate(),\n        //有效时间\n        d_datetime1: '',\n        //发布时间\n        d_datetime2: '',\n        //公告类别\n        i_bigint1: '',\n        //发布状态\n        i_bigint2: '',\n        //发布范围\n        i_bigint3: '',\n        s_cur_proc_name: '',\n        //当前任务名称\n        s_cur_task_name: '',\n        //是否重要\n        i_is_important: ''\n      },\n      url: {\n        currentUserMsg: '/sys/user/getUserSectionInfoByToken',\n        updateReadStatus: '/oaBus/taskInAct/changeStatus',\n        selectTaskType: '/oaBus/busModel/list',\n        selectTask: '/oaBus/busModel/list',\n        queryOaFileList: '/oaBus/oaFile/queryOaFileList'\n      }\n    };\n  },\n  created: function created() {\n    this.show();\n  },\n  methods: {\n    moment: moment,\n    //获取选择类别\n    selectType: function selectType(e) {\n      this.backData.i_bigint1 = e;\n    },\n    //获取选中结束时间\n    selectTime: function selectTime(e) {\n      if (e != null) {\n        var endDate = this.dateFormat(e._d);\n        this.backData.d_datetime1 = endDate;\n        this.$emit(\"validDate\", endDate);\n      }\n    },\n    isSelectDate: function isSelectDate() {\n      //校验有效时间是否选择\n      if (this.backData.d_datetime1 == '' || this.backData.d_datetime1 == undefined) {\n        this.visibleDel = true;\n      } else {\n        this.$emit(\"isPublish\", false);\n      }\n    },\n    comfirmModal: function comfirmModal() {\n      this.visibleDel = false;\n      this.$emit(\"isPublish\", true);\n    },\n    closeModal: function closeModal() {\n      this.visibleDel = false;\n    },\n    //打开附件\n    qiCao1: function qiCao1(index, fileName) {\n      var name = fileName.split('\\\\');\n      var name1 = name[name.length - 1];\n      this.$refs.taskRef.showFujianFile2(index, name1);\n    },\n    change: function change(e) {\n      this.backData.i_safetylevel = e;\n    },\n    changeHuanJi: function changeHuanJi(e) {\n      this.backData.i_urgency = e;\n    },\n    //详情页面数据\n    showTaskInAct: function showTaskInAct(taskDetail, task) {\n      this.task = task;\n      this.show(taskDetail); //修改数据信息为已读\n\n      this.changeReadStatus();\n    },\n    show: function show() {\n      for (var _i = 0; _i < this.optionMap.checkList.length; _i++) {\n        this.s_varchar.push(this.optionMap.checkList[_i].stableColumn);\n      }\n\n      console.log('00000000000000000000000000000000000000');\n      console.log(this.s_varchar); // console.log(\"----->\", this.backDataRef)\n      //业务数据赋值\n\n      for (var i in this.backData) {\n        this.backData[i] = this.backDataRef[i];\n      }\n\n      if (this.backData.i_bigint1 != \"\" && this.backData.i_bigint1 != undefined) {\n        this.backData.i_bigint1 = this.backData.i_bigint1 + '';\n      }\n\n      this.getOaFiles(this.backData.table, this.backData.i_id);\n    },\n    ok: function ok() {\n      this.handleCancel();\n    },\n    handleCancel: function handleCancel() {\n      this.$emit('close');\n      this.visible = false;\n      this.disableSubmit = false; //刷新父页面\n\n      this.$emit('reload_todo');\n    },\n    onChange: function onChange(date, dateString) {// console.log(date, dateString);\n    },\n    onChange2: function onChange2(date, dateString) {// console.log(date, dateString);\n    },\n    close: function close() {\n      this.visible = false;\n    }\n  }\n};",{"version":3,"sources":["preview.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <center>\r\n\r\n    <div width=\"100%\" border=\"0\" style=\"border:#913838;\">\r\n      <!--<tr >-->\r\n      <!--<td class=\"title\" width=\"15%\">-->\r\n      <!--标题-->\r\n      <!--<center><h2>{{detailList.s_title}}</h2></center>-->\r\n      <!--</td>-->\r\n      <!--<td colspan=\"3\">-->\r\n      <span style=\"color:#333333;margin-left:1%;border: 0px;font-size: 36px;font-weight: 10px\" cols=\"92\" rows=\"2\" ref=\"s_title\" v-on:blur=\"blurText(index,$event)\"\r\n            v-model=\"backData.s_title\">{{backData.s_title}}</span>\r\n      <!--</td>-->\r\n      <!--</tr>-->\r\n      <!--<tr>-->\r\n      <!--<td class=\"title\" width=\"15%\">-->\r\n      <!--&lt;!&ndash;类型&ndash;&gt;-->\r\n      <!--<center><h3>{{detailList.i_bigint1}}</h3></center>-->\r\n\r\n      <!--</td>-->\r\n      <!--<td colspan=\"3\">-->\r\n      <!--&lt;!&ndash;<a-textarea cols=\"92\" rows=\"2\" v-model=\"backData.i_bigint1\"></a-textarea>v-model=\"select_type\" &ndash;&gt;-->\r\n      <!--<a-select style=\"width:82%\" placeholder=\"请选择类别\" ref=\"i_bigint1\" v-on:blur=\"blurText($event,$refs.i_bigint1)\"-->\r\n      <!--v-model=\"backData.i_bigint1\" @change=\"selectType\">-->\r\n      <!--<a-select-option v-for=\"(item,index) in optionMap.i_bigint1_option\" :key=\"index\" :value=\"item.value\">-->\r\n      <!--{{item.text}}-->\r\n      <!--</a-select-option>-->\r\n      <!--</a-select>-->\r\n      <!--</td>-->\r\n      <!--</tr>-->\r\n      <!--<tr style=\"height: 50px;\">-->\r\n\r\n      <!--<td class=\"title\" width=\"15%\">-->\r\n      <!--&lt;!&ndash;创建人&ndash;&gt;-->\r\n      <!--<center><h3>{{detailList.s_create_name}}</h3></center>-->\r\n      <!--</td>-->\r\n      <!--<td>-->\r\n      <br>\r\n      <span style=\"color: #999999;margin-left:75%;border: 0px;font-size: 18px;font-weight: 10px\">{{backData.s_create_name}}</span>\r\n      <span style=\"color: #999999;margin-left:20px;border: 0px;font-size: 18px;font-weight: 10px\">{{backData.d_create_time}}</span>\r\n      <!--</td>-->\r\n      <!--&lt;!&ndash;创建部门&ndash;&gt;-->\r\n      <!--<td class=\"title\" width=\"15%\">-->\r\n      <!--<center><h3>{{detailList.s_create_dept}}</h3></center>-->\r\n      <!--</td>-->\r\n      <!--<td>-->\r\n      <!--<div style=\"padding-left: 10px;\">{{backData.s_create_dept}}</div>-->\r\n      <!--</td>-->\r\n\r\n      <!--</tr>-->\r\n\r\n      <!--<tr style=\"height: 50px;\">-->\r\n      <!--<td class=\"title\" width=\"15%\">-->\r\n      <!--&lt;!&ndash;创建时间&ndash;&gt;-->\r\n      <!--<center><h3>{{detailList.d_create_time}}</h3></center>-->\r\n      <!--</td>-->\r\n      <!--<td width=\"35%\">-->\r\n      <!--<a-date-picker :defaultValue=\"moment(backData.d_create_time,'YYYY-MM-DD HH:mm:ss')\" showTime=\"true\"-->\r\n      <!--format=\"YYYY-MM-DD HH:mm:ss\" style=\"width: 100%\" disabled></a-date-picker>-->\r\n      <!--</td>-->\r\n      <!--&lt;!&ndash;有效时间&ndash;&gt;-->\r\n      <!--<td class=\"title\" width=\"15%\">-->\r\n      <!--<center><h3>{{detailList.d_datetime1}}</h3></center>-->\r\n      <!--</td>-->\r\n      <!--<td width=\"35%\">-->\r\n      <!--<a-date-picker v-if=\"backData.d_datetime1\" :defaultValue=\"moment(backData.d_datetime1,'YYYY-MM-DD HH:mm:ss')\"-->\r\n      <!--:allowClear=\"false\" showTime=\"true\" format=\"YYYY-MM-DD HH:mm:ss\" style=\"width: 100%\"-->\r\n      <!--@change=\"selectTime\"></a-date-picker>-->\r\n      <!--<a-date-picker v-else showTime=\"true\" format=\"YYYY-MM-DD HH:mm:ss\" style=\"width: 100%\"-->\r\n      <!--@change=\"selectTime\"></a-date-picker>-->\r\n      <!--</td>-->\r\n      <!--</tr>-->\r\n      <!--<tr>-->\r\n      <!--<td class=\"title\" width=\"10%\">-->\r\n      <!--<center><h3>附件</h3></center>-->\r\n      <!--</td>-->\r\n      <!--<td colspan=\"3\">-->\r\n      <!--<div v-for=\"(item,index) in oaFileList\" style=\"padding-left: 15px\">-->\r\n      <!--<div @click=\"qiCao1(9,item.sfilePath)\"><span class=\"hoverred\">{{index}}、{{item.sfileName}}</span>-->\r\n      <!--</div>-->\r\n      <!--</div>-->\r\n      <!--</td>-->\r\n      <!--</tr>-->\r\n    </div>\r\n    <!--&lt;!&ndash;模态框&ndash;&gt;-->\r\n    <!--<a-modal-->\r\n    <!--title=\"温馨提示\"-->\r\n    <!--:visible=\"visibleDel\"-->\r\n    <!--@ok=\"comfirmModal\"-->\r\n    <!--@cancel=\"closeModal\"-->\r\n    <!--&gt;-->\r\n    <!--<p>有效时间尚未选择，是否发布？</p>-->\r\n    <!--</a-modal>-->\r\n  </center>\r\n\r\n</template>\r\n\r\n<script>\r\n  import {getAction, postAction} from \"@/api/manage\";\r\n  import {JeecgListMixin} from \"../../../mixins/JeecgListMixin2\";\r\n  import ATextarea from \"ant-design-vue/es/input/TextArea\";\r\n  import {busdataTemplate} from \"@/views/buttons/btn-js/busdataTemplate\";\r\n  import moment from 'moment';\r\n\r\n  export default {\r\n    name: \"preview\",\r\n    mixins: [JeecgListMixin, busdataTemplate],\r\n    components: {\r\n      ATextarea,\r\n    },\r\n    props: {\r\n      backDataRef: {\r\n        type: Object,\r\n        required: false\r\n      },\r\n      detailList: {\r\n        type: Object,\r\n        required: false\r\n      },\r\n      busFunction: {\r\n        type: Object,\r\n        required: false\r\n      },\r\n      optionMap: {\r\n        type: Object,\r\n        required: false\r\n      },\r\n      publishData: {\r\n        type: Object,\r\n        required: false\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        s_varchar: [],\r\n        visible: false,\r\n        visibleDel: false,\r\n        title: '电子公告',\r\n        confirmLoading: false,\r\n        userData: '',\r\n        //代办信息\r\n        task: '',\r\n        //已办信息\r\n        taskDone: '',\r\n        detailList: null,    //  文档数据   字段含义\r\n        oaFileList: [],    //  文档数据   字段含义\r\n        typeList: [],    //类别\r\n        select_type: '',\r\n        //表中的数据相关值\r\n        backData: {\r\n          //流程key\r\n          key: '',\r\n          //文号\r\n          // act_show: '',\r\n          //page ref\r\n          page_ref: '',\r\n          //业务配置表id-用于查询按钮/意见权限\r\n          iprocSetId: '',\r\n          //对应的业务数据表\r\n          table: 'oa_busdata30',\r\n          //---------------------------------- 以下为表存储字段\r\n          //*******\r\n          i_id: '',\r\n          s_receive_type: '',     //来文文种\r\n\r\n          //*******\r\n          //模块\r\n          i_bus_model_id: '',\r\n          //\r\n          i_bus_function_id: '',\r\n          //密级\r\n          i_safetylevel: 0,\r\n          //缓急\r\n          i_urgency: 0,\r\n          //主办部门\r\n          s_main_dept_names: '主办部门',\r\n          //辅办部门\r\n          s_cc_dept_names: '辅办部门',\r\n          //内部发送部门\r\n          s_inside_deptnames: '内部发送部门',\r\n\r\n          //左侧参数页面头部\r\n          s_left_parameter: '左侧参数页面头部',\r\n          //机构\r\n          s_unit_name: '',\r\n          //部门\r\n          s_dept_name: '',\r\n          //插入参数（修改文头）（页面头部）\r\n          s_middle_parameter: '',\r\n          //右侧参数（页面头部）\r\n          s_right_parameter: '',\r\n          //来文字号\r\n          s_receive_num: '',\r\n          //文件字号\r\n          s_file_num: '',\r\n          //来文机关（数据字典取值）\r\n          i_receive_dept_id: '',\r\n          //是否办结\r\n          i_is_state: 0,\r\n          //是否保存办文单\r\n          i_is_approve: 0,\r\n          //是否归档\r\n          i_is_archives: 0,\r\n          //是否已送全文检索\r\n          i_is_es: 0,\r\n          //是否送公文传输\r\n          i_is_send: 0,\r\n          //是否为临时文件\r\n          i_is_display: 0,\r\n          //备注\r\n          s_remarks: '',\r\n          //创建时间-年\r\n          i_create_year: new Date().getFullYear(),\r\n          //创建时间-月\r\n          i_create_month: new Date().getMonth(),\r\n          //创建时间-日期\r\n          i_create_day: new Date().getDate(),\r\n          //创建人id\r\n          s_create_by: '',\r\n\r\n          //创建人部门id\r\n          s_create_deptid: '',\r\n          //创建人机构id\r\n          s_create_unitid: '',\r\n          s_varchar1: '',\r\n          s_varchar2: '',\r\n          s_varchar3: '',\r\n          s_varchar4: '',\r\n\r\n          /************电子公告表单内容********************/\r\n          //标题\r\n          s_title: '',\r\n          //创建者姓名\r\n          s_create_name: '',\r\n          //创建人部门name\r\n          s_create_dept: '',\r\n          //创建时间\r\n          d_create_time: '',\r\n          //修改时间\r\n          d_update_time: new Date().getFullYear() + '-' + new Date().getMonth() + '-' + new Date().getDate(),\r\n          //有效时间\r\n          d_datetime1: '',\r\n          //发布时间\r\n          d_datetime2: '',\r\n          //公告类别\r\n          i_bigint1: '',\r\n          //发布状态\r\n          i_bigint2: '',\r\n          //发布范围\r\n          i_bigint3: '',\r\n          s_cur_proc_name: '',\r\n          //当前任务名称\r\n          s_cur_task_name: '',\r\n          //是否重要\r\n          i_is_important: ''\r\n        },\r\n        url: {\r\n          currentUserMsg: '/sys/user/getUserSectionInfoByToken',\r\n          updateReadStatus: '/oaBus/taskInAct/changeStatus',\r\n          selectTaskType: '/oaBus/busModel/list',\r\n          selectTask: '/oaBus/busModel/list',\r\n          queryOaFileList: '/oaBus/oaFile/queryOaFileList',\r\n        }\r\n      }\r\n    },\r\n    created() {\r\n      this.show();\r\n    },\r\n\r\n    methods: {\r\n      moment,\r\n      //获取选择类别\r\n      selectType(e) {\r\n        this.backData.i_bigint1 = e;\r\n      },\r\n      //获取选中结束时间\r\n      selectTime(e) {\r\n        if (e != null) {\r\n          let endDate = this.dateFormat(e._d);\r\n          this.backData.d_datetime1 = endDate\r\n          this.$emit(\"validDate\", endDate)\r\n        }\r\n      },\r\n      isSelectDate() {\r\n        //校验有效时间是否选择\r\n        if (this.backData.d_datetime1 == '' || this.backData.d_datetime1 == undefined) {\r\n          this.visibleDel = true;\r\n        } else {\r\n          this.$emit(\"isPublish\", false)\r\n        }\r\n      },\r\n      comfirmModal() {\r\n        this.visibleDel = false;\r\n        this.$emit(\"isPublish\", true)\r\n      },\r\n      closeModal() {\r\n        this.visibleDel = false;\r\n      },\r\n      //打开附件\r\n      qiCao1(index, fileName) {\r\n        let name = fileName.split('\\\\')\r\n        var name1 = name[name.length - 1]\r\n        this.$refs.taskRef.showFujianFile2(index, name1);\r\n      },\r\n      change(e) {\r\n        this.backData.i_safetylevel = e\r\n      }, changeHuanJi(e) {\r\n        this.backData.i_urgency = e\r\n      },\r\n      //详情页面数据\r\n      showTaskInAct(taskDetail, task) {\r\n        this.task = task\r\n        this.show(taskDetail)\r\n        //修改数据信息为已读\r\n        this.changeReadStatus()\r\n      },\r\n      show() {\r\n\r\n        for (let i = 0; i < this.optionMap.checkList.length; i++) {\r\n          this.s_varchar.push(this.optionMap.checkList[i].stableColumn);\r\n        }\r\n\r\n        console.log('00000000000000000000000000000000000000');\r\n        console.log(this.s_varchar);\r\n\r\n\r\n        // console.log(\"----->\", this.backDataRef)\r\n        //业务数据赋值\r\n        for (var i in this.backData) {\r\n          this.backData[i] = this.backDataRef[i]\r\n        }\r\n        if (this.backData.i_bigint1 != \"\" && this.backData.i_bigint1 != undefined) {\r\n          this.backData.i_bigint1 = this.backData.i_bigint1 + '';\r\n        }\r\n        this.getOaFiles(this.backData.table, this.backData.i_id)\r\n      },\r\n      ok() {\r\n        this.handleCancel()\r\n      },\r\n      handleCancel() {\r\n        this.$emit('close');\r\n        this.visible = false;\r\n        this.disableSubmit = false;\r\n        //刷新父页面\r\n        this.$emit('reload_todo')\r\n      }, onChange(date, dateString) {\r\n        // console.log(date, dateString);\r\n      }, onChange2(date, dateString) {\r\n        // console.log(date, dateString);\r\n      },\r\n      close() {\r\n        this.visible = false;\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style lang=\"less\" scoped>\r\n  input.ant-input{\r\n    height: 48px;\r\n  }\r\n\r\n  textarea.ant-input{\r\n    height: 48px;\r\n  }\r\n\r\n  /deep/ .ant-select-selection--single{\r\n    height: 48px;\r\n    padding: 8px 0;\r\n  }\r\n\r\n  /deep/ .ant-calendar-picker-input{\r\n    height: 48px;\r\n  }\r\n</style>\r\n\r\n<style>\r\n  .hoverred:hover {\r\n    color: red;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .title {\r\n    background: #f8f8f8;\r\n    text-align: center;\r\n  }\r\n\r\n  .text {\r\n    padding: 10px;\r\n  }\r\n</style>"],"sourceRoot":"src/views/mytask/taskList"}]}
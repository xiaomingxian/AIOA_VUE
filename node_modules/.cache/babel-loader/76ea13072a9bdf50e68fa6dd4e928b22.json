{"remainingRequest":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js!C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xxm\\work\\jd\\fore\\src\\views\\data\\dataGram\\Distribution.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xxm\\work\\jd\\fore\\src\\views\\data\\dataGram\\Distribution.vue","mtime":1577616664489},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js","mtime":1570779245522},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js","mtime":1570779225726}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Bar from '@/components/chart/Bar';\nimport PeiChart from \"./chartComponents/PieChart\";\nimport BarChart from \"./chartComponents/BarChart\";\nimport LineChart from \"./chartComponents/LineChart\";\nimport { getLoginfo, getVisitInfo } from '@/api/api';\nimport { httpAction, getAction, downFile } from '@/api/manage';\nimport BarDepartChart from \"./chartComponents/BarDepartChart\";\nimport LineDepartChart from \"./chartComponents/LineDepartChart\";\nimport PieDepartChart from \"./chartComponents/PieDepartChart\";\nimport { JeecgListMixin } from '@/mixins/JeecgListMixin';\nimport { filterObj } from '@/utils/util';\nexport default {\n  name: \"Distribution\",\n  mixins: [JeecgListMixin],\n  components: {\n    BarDepartChart: BarDepartChart,\n    LineDepartChart: LineDepartChart,\n    PieDepartChart: PieDepartChart,\n    // Bar,\n    BarChart: BarChart,\n    PeiChart: PeiChart,\n    LineChart: LineChart\n  },\n  data: function data() {\n    return {\n      queryParam: {},\n      code: '',\n      primary: 'primary',\n      // 按钮高亮处理\n      loading: false,\n      typeChart: 0,\n      //展示图标类型\n      typeModelName: 'bar',\n      showtype: 1,\n      // 按月统计 主办部门\n      subData: '',\n      bardata: null,\n      basedata: null,\n      // 按月查询基础数据\n      basedata1: null // 按部门查询基础数据\n\n    };\n  },\n  created: function created() {///data/dataAnalysis/HandlingRate\n  },\n  methods: {\n    // 柱状图 饼图  折线图\n    showTypeChart: function showTypeChart() {\n      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.typeChart;\n      this.typeChart = e;\n\n      if (e == 0) {\n        if (this.showtype == 1) {\n          this.$refs.bar.getData(this.basedata);\n        } else {\n          this.$refs.departbar.getData(this.basedata1);\n        }\n      } else if (e == 1) {\n        if (this.showtype == 1) {\n          this.$refs.pie.getData(this.basedata);\n        } else {\n          this.$refs.deparpie.getData(this.basedata1);\n        }\n      } else {\n        if (this.showtype == 1) {\n          this.$refs.line.getData(this.basedata);\n        } else {\n          this.$refs.deparline.getData(this.basedata1);\n        }\n      }\n    },\n    downLoad: function downLoad() {\n      this.subData.type = this.showtype;\n      console.log(this.subData);\n      var config = {\n        headers: {\n          'Content-Type': 'application/json',\n          \"Access-Control-Expose-Headers\": \"Content-Disposition\"\n        },\n        responseType: 'blob' //必须要写\n\n      };\n      getAction('/data/dataAnalysis/exportXls', this.subData, config).then(function (res) {\n        var data = res;\n        var fileName = \"sdffhgjksh.xls\";\n        var url = window.URL.createObjectURL(new Blob([data]));\n        console.log(new Blob([data]));\n        var edik = document.createElement('a');\n        edik.style.display = 'none';\n        edik.href = url;\n        edik.setAttribute('download', fileName);\n        document.body.appendChild(edik); //点击下载\n\n        edik.click(); // 释放掉blob对象\n\n        window.URL.revokeObjectURL(edik); // 下载完成移除元素\n\n        document.body.removeChild(edik);\n      });\n    },\n    // 按月统计  或者 主办部门  切换\n    getShowType: function getShowType(e) {\n      this.showtype = e;\n      this.getSubData(this.subData);\n    },\n    //图表数据  接收父及页面回传的  subData\n    getSubData: function getSubData(data) {\n      var _this = this;\n\n      this.subData = data;\n\n      if (this.showtype == 1) {\n        var url = '/data/dataAnalysis/myAnalysis'; //按月查询图标基本数据\n\n        getAction(url, data).then(function (res) {\n          console.log('**************************************', res);\n          _this.basedata = res; //初始化主动调用  默认 初始化为柱状图 即 “0”\n\n          _this.showTypeChart();\n        });\n      } else {\n        var url1 = '/data/dataAnalysis/MyDepart'; //按部门查询图标基本数据\n\n        getAction(url1, data).then(function (res) {\n          _this.basedata1 = res; //初始化主动调用  默认 初始化为柱状图 即 “0”\n\n          _this.showTypeChart();\n        });\n      }\n\n      var url2 = '/data/dataAnalysis/HandlingRate'; //办理率\n\n      getAction(url2, data).then(function (res) {\n        console.log(res);\n\n        _this.$refs.bar.getData1(res);\n\n        _this.$refs.pie.getData1(res);\n\n        _this.$refs.line.getData1(res);\n\n        _this.$refs.departbar.getData1(res);\n\n        _this.$refs.deparpie.getData1(res);\n\n        _this.$refs.deparline.getData1(res);\n      });\n      var url3 = '/data/dataAnalysis/Handling'; //总共办理的公文数量\n\n      getAction(url3, data).then(function (res) {\n        console.log(res);\n\n        _this.$refs.bar.getData2(res);\n\n        _this.$refs.pie.getData2(res);\n\n        _this.$refs.line.getData2(res);\n\n        _this.$refs.departbar.getData2(res);\n\n        _this.$refs.deparpie.getData2(res);\n\n        _this.$refs.deparline.getData2(res);\n      });\n      var url4 = '/data/dataAnalysis/PeerNum'; //办理的数量占同行办理数量的比例\n\n      getAction(url4, data).then(function (res) {\n        console.log(res);\n\n        _this.$refs.bar.getData3(res);\n\n        _this.$refs.pie.getData3(res);\n\n        _this.$refs.line.getData3(res);\n\n        _this.$refs.departbar.getData3(res);\n\n        _this.$refs.deparpie.getData3(res);\n\n        _this.$refs.deparline.getData3(res);\n      });\n      var url5 = \"/data/dataAnalysis/Rate\"; // 办结率\n\n      getAction(url5, data).then(function (res) {\n        _this.$refs.bar.getData4(res);\n\n        _this.$refs.pie.getData4(res);\n\n        _this.$refs.line.getData4(res);\n\n        console.log('===========================================================', res);\n\n        _this.$refs.departbar.getData4(res);\n\n        _this.$refs.deparpie.getData4(res);\n\n        _this.$refs.deparline.getData4(res);\n      });\n      var url6 = \"/data/dataAnalysis/MonthAverage\"; // 超过平均值月份\n\n      getAction(url6, data).then(function (res) {\n        console.log(res);\n\n        _this.$refs.bar.getData5(res);\n\n        _this.$refs.pie.getData5(res);\n\n        _this.$refs.line.getData5(res); // this.$refs.departbar.getData5(res);\n        // this.$refs.deparpie.getData5(res);\n        // this.$refs.deparline.getData5(res);\n\n      });\n    }\n  }\n};",{"version":3,"sources":["Distribution.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n <div>\r\n   <a-card :loading=\"loading\" :bordered=\"false\" :body-style=\"{padding: '0'}\">\r\n     <div class=\"salesCard\">\r\n         <div>\r\n            <div class=\"optionsNav\">\r\n               <p>\r\n                 <a-button  key=\"1\" :type=\"showtype==1?primary:'default'\"   @click=\"getShowType(1)\">按月统计展示</a-button>\r\n                 <a-button style=\"margin-left: 10px;\"  key=\"2\"  :type=\"showtype==2?primary:'default'\" @click=\"getShowType(2)\">按主办部门展示</a-button>\r\n               </p>\r\n              <span class=\"lineNav\">\r\n                <span @click=\"showTypeChart(0)\" :style=\"typeChart==0? 'color:#2eabff':'color:rgba(0, 0, 0, 0.65)'\">柱状图</span >\r\n                  <a-divider type=\"vertical\" />\r\n                <span @click=\"showTypeChart(1)\" :style=\"typeChart==1? 'color:#2eabff':'color:rgba(0, 0, 0, 0.65)'\">饼状图</span>\r\n                   <a-divider type=\"vertical\" />\r\n                <span @click=\"showTypeChart(2)\" :style=\"typeChart==2? 'color:#2eabff':'color:rgba(0, 0, 0, 0.65)'\">折线图</span>\r\n                 <a-divider type=\"vertical\" />\r\n                  <span @click=\"downLoad('日程管理表')\" >生成报表</span>\r\n              </span>\r\n            </div>\r\n            <!--<apexchart width=\"60%\" style=\"margin-top: 20px;\" type=\"bar\" height=\"400\" v-if=\"showtype==1?true:false\" title=\"月份排行\" :options=\"chartOptions\" :series=\"series\" ></apexchart>-->\r\n          <!--按月统计展示-->\r\n           <bar-chart v-show=\"showtype==1&&typeChart==0?true:false\" ref=\"bar\"></bar-chart>\r\n           <pei-chart v-show=\"showtype==1&&typeChart==1?true:false\" ref=\"pie\"> </pei-chart>\r\n           <line-chart v-show=\"showtype==1&&typeChart==2?true:false\" ref=\"line\"> </line-chart>\r\n\r\n           <!--按主办部门展示-->\r\n           <bar-depart-chart v-show=\"showtype==2&&typeChart==0?true:false\" ref=\"departbar\"></bar-depart-chart>\r\n           <pie-depart-chart v-show=\"showtype==2&&typeChart==1?true:false\" ref=\"deparpie\"></pie-depart-chart>\r\n           <line-depart-chart  v-show=\"showtype==2&&typeChart==2?true:false\" ref=\"deparline\"></line-depart-chart>\r\n\r\n\r\n         </div>\r\n        <div>\r\n       </div>\r\n     </div>\r\n   </a-card>\r\n </div>\r\n</template>\r\n\r\n<script>\r\n\r\n  import Bar from '@/components/chart/Bar'\r\n  import PeiChart from './chartComponents/PieChart'\r\n  import BarChart from './chartComponents/BarChart'\r\n  import LineChart from './chartComponents/LineChart'\r\n  import { getLoginfo,getVisitInfo } from '@/api/api'\r\n  import {httpAction,getAction,downFile} from '@/api/manage'\r\n  import BarDepartChart  from './chartComponents/BarDepartChart'\r\n  import LineDepartChart  from './chartComponents/LineDepartChart'\r\n  import PieDepartChart  from './chartComponents/PieDepartChart'\r\n  import { JeecgListMixin } from '@/mixins/JeecgListMixin'\r\n  import { filterObj } from '@/utils/util';\r\n\r\n  export default {\r\n      name: \"Distribution\",\r\n      mixins:[JeecgListMixin],\r\n      components: {\r\n          BarDepartChart,\r\n          LineDepartChart,\r\n          PieDepartChart,\r\n          // Bar,\r\n          BarChart,\r\n          PeiChart,\r\n          LineChart\r\n        },\r\n      data() {\r\n        return {\r\n          queryParam:{\r\n\r\n          },\r\n          code: '',\r\n          primary:'primary',// 按钮高亮处理\r\n          loading:false,\r\n          typeChart:0,//展示图标类型\r\n          typeModelName:'bar',\r\n          showtype:1,// 按月统计 主办部门\r\n          subData:'',\r\n\r\n\r\n          bardata:null,\r\n          basedata:null,  // 按月查询基础数据\r\n          basedata1:null,  // 按部门查询基础数据\r\n\r\n        }\r\n      },\r\n      created() {\r\n      ///data/dataAnalysis/HandlingRate\r\n      },\r\n      methods: {\r\n        // 柱状图 饼图  折线图\r\n        showTypeChart(e= this.typeChart){\r\n            this.typeChart = e;\r\n            if(e==0){\r\n              if(this.showtype==1){\r\n                this.$refs.bar.getData(this.basedata);\r\n              }else{\r\n                this.$refs.departbar.getData(this.basedata1);\r\n              }\r\n\r\n            }else if(e==1){\r\n              if(this.showtype==1){\r\n                this.$refs.pie.getData(this.basedata);\r\n              }else{\r\n                this.$refs.deparpie.getData(this.basedata1);\r\n              }\r\n\r\n            }else{\r\n              if(this.showtype==1){\r\n                this.$refs.line.getData(this.basedata);\r\n              }else{\r\n                this.$refs.deparline.getData(this.basedata1);\r\n              }\r\n\r\n            }\r\n\r\n        },\r\n        downLoad(){\r\n          this.subData.type = this.showtype;\r\n            console.log(this.subData);\r\n          let config = {\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              \"Access-Control-Expose-Headers\": \"Content-Disposition\"\r\n            },\r\n            responseType: 'blob',//必须要写\r\n          };\r\n          getAction('/data/dataAnalysis/exportXls', this.subData,config).then((res)=>{\r\n            let data = res;\r\n            let fileName= \"sdffhgjksh.xls\"\r\n            let url = window.URL.createObjectURL(new Blob([data]));\r\n            console.log(new Blob([data]));\r\n\r\n            let edik = document.createElement('a');\r\n            edik.style.display = 'none';\r\n            edik.href = url;\r\n            edik.setAttribute('download', fileName);\r\n            document.body.appendChild(edik);\r\n            //点击下载\r\n            edik.click();\r\n            // 释放掉blob对象\r\n            window.URL.revokeObjectURL(edik);\r\n            // 下载完成移除元素\r\n            document.body.removeChild(edik);\r\n\r\n\r\n\r\n\r\n\r\n          })\r\n\r\n        },\r\n        // 按月统计  或者 主办部门  切换\r\n       getShowType(e){\r\n         this.showtype = e;\r\n         this.getSubData(this.subData);\r\n\r\n       },\r\n        //图表数据  接收父及页面回传的  subData\r\n        getSubData(data){\r\n\r\n          this.subData = data;\r\n          if(this.showtype==1){\r\n            let url = '/data/dataAnalysis/myAnalysis';  //按月查询图标基本数据\r\n            getAction(url,data).then((res)=>{\r\n              console.log('**************************************',res);\r\n              this.basedata = res;\r\n              //初始化主动调用  默认 初始化为柱状图 即 “0”\r\n              this.showTypeChart()\r\n            })\r\n          }else{\r\n            let url1 = '/data/dataAnalysis/MyDepart';//按部门查询图标基本数据\r\n            getAction(url1,data).then((res)=>{\r\n              this.basedata1 = res;\r\n              //初始化主动调用  默认 初始化为柱状图 即 “0”\r\n              this.showTypeChart()\r\n            })\r\n\r\n          }\r\n\r\n\r\n\r\n\r\n          let url2 = '/data/dataAnalysis/HandlingRate'; //办理率\r\n          getAction(url2,data).then((res)=>{\r\n            console.log(res);\r\n            this.$refs.bar.getData1(res);\r\n            this.$refs.pie.getData1(res);\r\n            this.$refs.line.getData1(res);\r\n\r\n\r\n            this.$refs.departbar.getData1(res);\r\n            this.$refs.deparpie.getData1(res);\r\n            this.$refs.deparline.getData1(res);\r\n\r\n          })\r\n          let url3 = '/data/dataAnalysis/Handling';  //总共办理的公文数量\r\n          getAction(url3,data).then((res)=>{\r\n            console.log(res);\r\n            this.$refs.bar.getData2(res);\r\n            this.$refs.pie.getData2(res);\r\n            this.$refs.line.getData2(res);\r\n\r\n            this.$refs.departbar.getData2(res);\r\n            this.$refs.deparpie.getData2(res);\r\n            this.$refs.deparline.getData2(res);\r\n          })\r\n          let url4 = '/data/dataAnalysis/PeerNum';  //办理的数量占同行办理数量的比例\r\n          getAction(url4,data).then((res)=>{\r\n            console.log(res);\r\n            this.$refs.bar.getData3(res);\r\n            this.$refs.pie.getData3(res);\r\n            this.$refs.line.getData3(res);\r\n\r\n            this.$refs.departbar.getData3(res);\r\n            this.$refs.deparpie.getData3(res);\r\n            this.$refs.deparline.getData3(res);\r\n          })\r\n          let url5 = \"/data/dataAnalysis/Rate\";   // 办结率\r\n          getAction(url5,data).then((res) => {\r\n\r\n            this.$refs.bar.getData4(res);\r\n            this.$refs.pie.getData4(res);\r\n            this.$refs.line.getData4(res);\r\n            console.log('===========================================================',res);\r\n            this.$refs.departbar.getData4(res);\r\n            this.$refs.deparpie.getData4(res);\r\n            this.$refs.deparline.getData4(res);\r\n\r\n\r\n          })\r\n          let url6 = \"/data/dataAnalysis/MonthAverage\";   // 超过平均值月份\r\n          getAction(url6,data).then((res) => {\r\n            console.log(res);\r\n            this.$refs.bar.getData5(res);\r\n            this.$refs.pie.getData5(res);\r\n            this.$refs.line.getData5(res);\r\n\r\n            // this.$refs.departbar.getData5(res);\r\n            // this.$refs.deparpie.getData5(res);\r\n            // this.$refs.deparline.getData5(res);\r\n\r\n          })\r\n\r\n\r\n        },\r\n\r\n        // 按部门查询\r\n        // asDepartCheack(data){\r\n        //   // 按部门显示  查询部门\r\n        //     console.log(data);\r\n        //   let url = '/data/dataAnalysis/MyDepart';\r\n        //   getAction(url,data).then((res)=>{\r\n        //     this.basedata = res;\r\n        //     this.showTypeChart()\r\n        //     // console.log(res);\r\n        //     // this.$refs.departbar.getData(res);\r\n        //     // this.$refs.deparpie.getData(res);\r\n        //     // this.$refs.deparline.getData(res);\r\n        //   })\r\n        //\r\n        // },\r\n\r\n\r\n      }\r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n\r\n  .optionsNav{\r\n    width: 100%;\r\n    /*background: darkcyan;*/\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    p{\r\n     width: 190px;\r\n      display: flex;\r\n      /*background: darkcyan;*/\r\n      justify-content: space-between;\r\n    }\r\n    .lineNav{\r\n      span:hover{\r\n        color: #2eabff;\r\n        cursor: pointer;\r\n      }\r\n    }\r\n  }\r\n\r\n</style>"],"sourceRoot":"src/views/data/dataGram"}]}
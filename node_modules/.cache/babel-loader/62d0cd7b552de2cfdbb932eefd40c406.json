{"remainingRequest":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js!C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xxm\\work\\jd\\fore\\src\\views\\mytask\\modules\\backModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xxm\\work\\jd\\fore\\src\\views\\mytask\\modules\\backModal.vue","mtime":1579509215928},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js","mtime":1570779245522},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js","mtime":1570779225726}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { JeecgListMixin } from \"../../../mixins/JeecgListMixin2\";\nimport nextUsers from \"./nextUsers\";\nimport { deleteAction, downFile, getAction, postAction } from '@/api/manage';\nimport JSelectUserByDepSingle from \"../../../components/jeecgbiz/JSelectUserByDepSingle\";\nimport JSelectUserByDepCheckBox from \"../../../components/jeecgbiz/JSelectUserByDepCheckBox\";\nimport userSelect from \"./userSelect\";\nimport ATextarea from \"ant-design-vue/es/input/TextArea\";\nexport default {\n  name: \"backModal\",\n  mixins: [JeecgListMixin],\n  components: {\n    ATextarea: ATextarea,\n    nextUsers: nextUsers,\n    JSelectUserByDepSingle: JSelectUserByDepSingle,\n    JSelectUserByDepCheckBox: JSelectUserByDepCheckBox,\n    userSelect: userSelect\n  },\n  data: function data() {\n    return {\n      scrHeight: window.innerHeight - 250 + 'px',\n      title: '回退',\n      visible: false,\n      confirmLoading: false,\n      taskMsg: '',\n      destMsg: '',\n      //目标节点\n      dataSource: [],\n      isCurrentUsers: false,\n      checkBox: false,\n      isDesignMul: false,\n      //是否是设计上的多实例\n      asssigneeEl: '',\n      isBack: false,\n      reason: null,\n      //退回原因\n      mulEl: '',\n      mulSizeEl: '',\n      isDept: false,\n      //穿梭框数据\n      mockData: [],\n      //部门信息\n      deptsList: [],\n      //部门选择集合\n      departSelect: {},\n      //部门用户\n      departUsers: {},\n      //当前选中的类型\n      currentDepType: '',\n      //普通节点选中的数据(非部门)\n      userIds: [],\n      //传后台的部门用户的id\n      deptMsg: {},\n      columns: [{\n        title: '环节',\n        align: \"center\",\n        dataIndex: 'name'\n      }],\n      columns4: [{\n        title: '环节',\n        align: \"center\",\n        dataIndex: 'name'\n      }, {\n        title: '用户',\n        align: \"center\",\n        dataIndex: 'userNames',\n        customRender: function customRender(t, r, index) {\n          return t.join(',');\n        }\n      }],\n      columns2: [{\n        title: '部门',\n        align: \"center\",\n        dataIndex: 'departName'\n      }],\n      columns3: [{\n        title: '用户',\n        align: \"center\",\n        dataIndex: 'username'\n      }],\n      url: {\n        currentUserQuery: '/oaBus/taskInAct/currentUserQuery',\n        departUsetQuery: '/oaBus/taskInAct/deptUsersQuery',\n        jump: '/wf/task/jump',\n        back: '/wf/task/back',\n        getUserByDeparts: '/sys/user/queryUserByDepts'\n      }\n    };\n  },\n  created: function created() {},\n  methods: {\n    setRowRadio: function setRowRadio(res) {\n      var _this = this;\n\n      return {\n        on: {\n          click: function click() {\n            var keys = [];\n            var rows = [];\n            keys.push(res.id);\n            rows.push(res);\n            _this.selectedRowKeys = keys;\n            _this.selectionRows = rows;\n\n            _this.doShowForm(res);\n          }\n        }\n      };\n    },\n    setRowCheck: function setRowCheck(res) {\n      var _this2 = this;\n\n      return {\n        on: {\n          click: function click() {\n            var rowkeys = _this2.selectedRowKeys;\n            var selectionRows = _this2.selectionRows;\n\n            if (rowkeys.length > 0 && rowkeys.includes(res.id)) {\n              rowkeys.splice(rowkeys.indexOf(res.id), 1);\n              selectionRows.splice(rowkeys.indexOf(res), 1);\n            } else {\n              rowkeys.push(res.id);\n              selectionRows.push(res);\n            }\n\n            _this2.selectedRowKeys = rowkeys;\n            _this2.selectionRows = selectionRows;\n          }\n        }\n      };\n    },\n    //穿梭方法实现\n    toRight: function toRight(item) {\n      //从部门列表中移除--添加到对应的list中\n      //1 主办部门只能有一个\n      if (item.indexOf(\"主办\") >= 0) {\n        //判断是否已经有元素了\n        if (this.departSelect[item].length == 0 && this.selectionRows.length > 1 || this.departSelect[item].length > 0) {\n          this.$message.error(\"主办部门只允许有一个\");\n          return;\n        }\n      } //2 添加到右边--移除左边\n\n\n      var del = {};\n\n      for (var i in this.selectionRows) {\n        this.selectionRows[i].checked = false; //右边\n\n        this.departSelect[item].push(this.selectionRows[i]); //移除元素\n\n        del[this.selectionRows[i].id] = 1;\n      } //移除元素(采用重新赋值的方式)\n\n\n      var mockData2 = [];\n\n      for (var j = 0; j < this.mockData.length; j++) {\n        if (del[this.mockData[j].id] != 1) {\n          mockData2.push(this.mockData[j]);\n        }\n      }\n\n      this.mockData = mockData2; //清空所选\n\n      this.selectionRows = [];\n      this.selectedRowKeys = [];\n    },\n    toLeft: function toLeft(item) {\n      //添加到部门列表中--从list中移除\n      var right = [];\n\n      for (var i in this.departSelect[item]) {\n        var itt = this.departSelect[item][i];\n\n        if (itt.checked) {\n          itt.checked = false;\n          this.mockData.push(itt);\n        } else {\n          right.push(itt);\n        }\n      } //改变右边\n\n\n      this.departSelect[item] = right; //判断对应的选人\n\n      this.departUsers[this.currentDepType] = [];\n      this.deptMsg[this.currentDepType] = []; // //出发后才能选上 原因未知\n\n      var keys = [];\n      var rows = [];\n      this.onSelectChange(keys, rows);\n    },\n    show: function show() {\n      //console.log('-------------',this.title)\n      this.isCurrentUsers = false;\n      if (this.title == '回退') this.isBack = true;else this.isBack = false;\n      this.visible = true;\n    },\n    onChangeCheck: function onChangeCheck(item) {\n      var id = item.target.value.split('-')[0];\n      var type = item.target.value.split('-')[1]; //修改数据属性\n\n      for (var i in this.departSelect[type]) {\n        if (id == this.departSelect[type][i].id) {\n          this.departSelect[type][i].checked = true;\n        }\n      }\n    },\n    showForm: function showForm(record) {\n      var _this3 = this;\n\n      return {\n        on: {\n          click: function click() {\n            //console.log('~~~~~~~~~~~~~~~~~~~~~~~')\n            _this3.doShowForm(record);\n          }\n        }\n      };\n    },\n    doShowForm: function doShowForm(record) {\n      var _this4 = this;\n\n      //console.log('------------->>>>', JSON.stringify(record))\n      this.isDept = record.userOrRole == 'dept'; //单选或者复选\n\n      this.checkBox = record.allowMulti; //办理人变量及其相关设置\n\n      if (record.allowMulti) {\n        //多实例\n        this.isDesignMul = true;\n        this.mulEl = record.multiAssignee;\n        this.mulSizeEl = record.loopSize.indexOf(\"${\") >= 0 ? record.loopSize.split(\"${\")[1].split(\"}\")[0] : record.loopSize;\n      } else {\n        //不允许多实例\n        if (record.multiAssignee == null) {\n          //判断是不是 设计上的多实例\n          //不是设计上的多实例----解析办理人表达式\n          this.isDesignMul = false; //console.log((record.assignee).split(\"${\")[1].split(\"}\")[0])\n\n          this.asssigneeEl = record.assignee.indexOf(\"${\") >= 0 ? record.assignee.split(\"${\")[1].split(\"}\")[0] : record.assignee;\n        } else {\n          //设计上是多实例\n          this.isDesignMul = true;\n          this.mulEl = record.multiAssignee;\n          this.mulSizeEl = record.loopSize.indexOf(\"${\") >= 0 ? record.loopSize.split(\"${\")[1].split(\"}\")[0] : record.loopSize;\n        }\n      }\n\n      this.destMsg = record;\n      if (this.title == '回退') return; //展示节点所需要的办理人\n\n      getAction(this.url.currentUserQuery, {\n        procDefKey: record.procDefKey,\n        taskId: record.id,\n        taskName: record.name,\n        drafterId: this.taskMsg.drafterId\n      }).then(function (res) {\n        if (res.success) {\n          //console.log('-------------success:::::::')\n          if (_this4.isDept) {\n            //是部门任务\n            //console.log('-------------isDept:::::::')\n            //校验部门\n            _this4.mockData = res.result;\n            _this4.deptsList = record.deptsList;\n\n            for (var x in _this4.deptsList) {\n              //构造备选集合\n              _this4.departSelect[_this4.deptsList[x]] = []; //构造部门用户集合\n\n              _this4.departUsers[_this4.deptsList[x]] = []; //传后台数据\n\n              _this4.deptMsg[_this4.deptsList[x]] = [];\n            }\n\n            _this4.visible = true; //部门任务才展示\n\n            _this4.isCurrentUsers = true;\n          } else {\n            //console.log('-----sasssssss----------------')\n            if (_this4.checkBox) {\n              //console.log('---------------------')\n              _this4.$refs.checkBox.show();\n            } else {\n              //console.log('========================')\n              _this4.$refs.single.show();\n            }\n          }\n        } else {\n          _this4.$message.error(res.message);\n        }\n      });\n    },\n    jump: function jump() {\n      var _this5 = this;\n\n      if (this.title == '回退') {\n        if (this.reason == null || this.reason.length == 0) {\n          this.$message.error('请先填写意见');\n          return;\n        }\n      } //办理人信息\n\n\n      var vars = {};\n      var taskWithDepts = {};\n      var assignee = []; //记录参与人\n\n      if (this.isDesignMul) {\n        //多实例\n        vars[this.mulEl] = []; //记录部门信息\n\n        taskWithDepts = {\n          deptMsg: this.deptMsg,\n          taskDefKey: this.destMsg.id //如果是部门任务做特殊处理\n\n        };\n\n        if (this.isDept) {\n          var uids = [];\n\n          for (var i in this.deptMsg) {\n            uids.push(this.deptMsg[i]);\n\n            for (var index in this.deptMsg[i]) {\n              assignee.push(this.deptMsg[i][index]);\n            }\n          }\n\n          if (this.title == '回退') {\n            if (this.selectionRows.length <= 0) {\n              this.$message.error('请选择要退回的环节');\n              return;\n            }\n\n            uids = this.selectionRows[0].userIds;\n          }\n\n          vars[this.mulEl] = uids;\n          vars[this.mulSizeEl] = vars[this.mulEl].length;\n        } else {\n          assignee = this.userIds;\n          vars[this.mulEl] = this.userIds;\n          vars[this.mulSizeEl] = this.userIds.length;\n        }\n      } else {\n        //非多实例\n        if (this.title == '回退') {\n          if (this.selectionRows.length <= 0) {\n            this.$message.error('请选择要退回的环节');\n            return;\n          }\n\n          this.userIds = this.selectionRows[0].userIds;\n        }\n\n        assignee = this.userIds;\n        vars[this.asssigneeEl] = this.userIds[0];\n      } //构造参数\n\n\n      var taskId = this.taskMsg.id;\n      if (taskId == undefined) taskId = this.taskMsg.hiTaskId;\n      var data = {\n        processDefinitionId: this.taskMsg.processDefinitionId,\n        taskId: taskId,\n        executionId: this.taskMsg.executionId,\n        processInstanceId: this.taskMsg.processInstanceId,\n        destActDefKey: this.destMsg.id,\n        destActDefName: this.destMsg.name,\n        currActDefKey: this.taskMsg.taskDefinitionKey,\n        deleteReason: this.title == '回退' ? 'completed_back' : 'completed_jump',\n        //办理人信息\n        vars: vars,\n        isDept: this.isDept,\n        taskWithDepts: taskWithDepts,\n        //存储参与人信息\n        table: this.taskMsg.table,\n        tableId: this.taskMsg.tableId,\n        functionId: this.taskMsg.functionId,\n        assignee: assignee\n      };\n\n      if (this.title == '回退') {\n        data['backReason'] = this.reason;\n        postAction(this.url.back, data).then(function (res) {\n          if (res.success) {\n            _this5.$message.success(res.message);\n\n            setTimeout(function () {\n              window.close();\n            }, 500);\n          } else {\n            _this5.$message.error(res.message);\n          }\n        });\n      } else {\n        postAction(this.url.jump, data).then(function (res) {\n          if (res.success) {\n            _this5.$message.success(res.message);\n\n            setTimeout(function () {\n              window.close();\n            }, 500);\n          } else {\n            _this5.$message.error(res.message);\n          }\n        });\n      }\n\n      this.handleCancel();\n    },\n    cancel: function cancel() {},\n    handleCancel: function handleCancel() {\n      this.$emit('close');\n      this.visible = false;\n      this.dataInit();\n    },\n    dataInit: function dataInit() {\n      this.selectionRows = [];\n      this.selectedRowKeys = [];\n    },\n    queryUser: function queryUser(item) {\n      var _this6 = this;\n\n      this.currentDepType = item; //主办/辐办/传阅\n\n      var departs = this.departSelect[item];\n\n      if (departs.length == 0) {\n        this.$message.error('请先选择部门');\n        return;\n      }\n\n      var ids = [];\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = departs[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var i = _step.value;\n          ids.push(i.id);\n        } //根据部门查用户\n\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      postAction(this.url.getUserByDeparts, {\n        ids: ids\n      }).then(function (res) {\n        _this6.$refs.userSelect.dataSource = res.result;\n\n        _this6.$refs.userSelect.show();\n      });\n    },\n    userSelectCallBcak: function userSelectCallBcak(ids) {\n      this.departUsers[this.currentDepType] = [];\n      this.deptMsg[this.currentDepType] = [];\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = ids[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var i = _step2.value;\n          var data = {\n            id: i.id,\n            username: i.username //\n\n          };\n          this.departUsers[this.currentDepType].push(data);\n          this.deptMsg[this.currentDepType].push(i.id);\n        } //出发后才能选上 原因未知\n\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      var keys = [];\n      var rows = [];\n      this.onSelectChange(keys, rows);\n    },\n    senUserId: function senUserId(ids) {\n      this.userIds = ids;\n      this.jump();\n    },\n\n    /**\n     * 全选/不选\n     */\n    onCheckAllChange: function onCheckAllChange(e) {\n      var checked = e.target.checked;\n      var type = e.target.id;\n\n      if (checked) {\n        //修改数据属性\n        for (var i in this.departSelect[type]) {\n          this.departSelect[type][i].checked = true;\n          this.$refs[type][i].checked = true;\n        }\n      } else {\n        for (var i in this.departSelect[type]) {\n          this.departSelect[type][i].checked = false;\n          this.$refs[type][i].checked = false;\n        }\n      }\n    }\n  }\n};",{"version":3,"sources":["backModal.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <a-modal\r\n    :title=\"title\"\r\n    :width=\"1000\"\r\n    :visible=\"visible\"\r\n    :confirmLoading=\"confirmLoading\"\r\n    @ok=\"jump\"\r\n    @cancel=\"handleCancel\"\r\n    destroyOnClose\r\n    :okText=\"title\"\r\n    cancelText=\"取消\">\r\n\r\n    <div style=\"overflow: auto; position: relative\" :style=\"{height: scrHeight}\">\r\n\r\n\r\n      <a-layout id=\"components-layout-demo-top-side-2\">\r\n        <a-layout>\r\n          <a-layout style=\"padding: 2px 2px 2px\">\r\n            <a-layout-content\r\n              :style=\"{ background: '#fff', padding: '10px', margin: 0, minHeight: '280px' }\">\r\n\r\n\r\n              <!--展示可跳转节点-->\r\n              <div v-if=\"!isCurrentUsers\">\r\n                <div v-if=\"isBack\">\r\n                  <div style=\"width:100%;\">\r\n                    <h4 style=\"width: 7%;margin: 1.5% 0% 0% 1%;float: left;\">退回原因</h4>\r\n                    <a-textarea style=\"width: 91.9%;margin-bottom: 1.1%;\" rows=\"5\" v-model=\"reason\"></a-textarea>\r\n                  </div>\r\n\r\n\r\n                  <!--  :customRow=\"showForm\"-->\r\n                  <div style=\"width: 100%;margin-top: 2%;\">\r\n                    <h4 style=\"width: 7%;margin: 1.5% 0% 0% 1%;float: left;\">退回步骤</h4>\r\n                    <a-table\r\n                      style=\"width: 91.9%;float: left;\" ref=\"table\"\r\n                      size=\"middle\"\r\n                      bordered\r\n                      rowKey=\"id\"\r\n                      :customRow=\"setRowRadio\"\r\n                      :rowSelection=\"{selectedRowKeys: selectedRowKeys, onChange: onSelectChange,type:'radio'}\"\r\n                      :columns=\"columns4\"\r\n                      :dataSource=\"dataSource\">\r\n\r\n                      <!--<span slot=\"action\" slot-scope=\"text, record\">-->\r\n\r\n                      <!--<a @click=\"showForm(record)\">{{title}}</a>-->\r\n                      <!--</span>-->\r\n                    </a-table>\r\n                  </div>\r\n                </div>\r\n                <div v-if=\"!isBack\">\r\n                  <a-table\r\n                    ref=\"table\"\r\n                    size=\"middle\"\r\n                    bordered\r\n                    rowKey=\"id\"\r\n                    :customRow=\"showForm\"\r\n                    :columns=\"columns\"\r\n                    :dataSource=\"dataSource\">\r\n\r\n                    <!--<span slot=\"action\" slot-scope=\"text, record\">-->\r\n\r\n                    <!--<a @click=\"showForm(record)\">{{title}}</a>-->\r\n                    <!--</span>-->\r\n                  </a-table>\r\n                </div>\r\n\r\n              </div>\r\n\r\n\r\n\r\n              <!--选部门-->\r\n              <div style=\"display: flex;align-items: center;justify-content: space-between;\" class=\"box\" v-if=\"isDept && isCurrentUsers\">\r\n                <!--左侧部门-->\r\n                <!--:loading=\"loading\"-->\r\n\r\n                <div class=\"left\">\r\n                  <a-table\r\n                    ref=\"table\"\r\n                    size=\"small\"\r\n                    bordered\r\n                    rowKey=\"id\"\r\n                    :columns=\"columns2\"\r\n                    :dataSource=\"mockData\"\r\n                    :customRow=\"setRowCheck\"\r\n                    :pagination=\"ipagination\"\r\n                    @change=\"handleTableChange\"\r\n                    :rowSelection=\"{selectedRowKeys: selectedRowKeys, onChange: onSelectChange}\">\r\n                  </a-table>\r\n                </div>\r\n\r\n                <!--右侧选择-->\r\n                <div class=\"right\">\r\n                  <div v-for=\"item in deptsList\">\r\n                    <!--左右布局-->\r\n                    <div class=\"box1\">\r\n                      <!--选部门-->\r\n                      <div class=\"rightLeft\" style=\"margin-top: 20px;\">\r\n                        <a-button @click=\"toRight(item)\">\r\n                          <a-icon type=\"right\"/>\r\n                          添加到{{item}}\r\n                        </a-button>\r\n                        <a-button @click=\"toLeft(item)\">\r\n                          <a-icon type=\"left\"/>\r\n                          从{{item}}删除\r\n                        </a-button>\r\n                      </div>\r\n                      <!--选中的部门-->\r\n                      <div class=\"rightRight\">\r\n                        <template>\r\n                          <h4 color=\"red\">{{item}}部门</h4>\r\n                          <a-checkbox :id=\"item\" @change=\"onCheckAllChange\"></a-checkbox>\r\n                          <a-row v-for=\"i in departSelect[item]\">\r\n                            <a-col :span=\"100\">\r\n                              <a-checkbox :ref=\"item\" :key=\"i.id\" :value=\"i.id+'-'+item\" @change=\"onChangeCheck\">\r\n                                {{i.departName}}\r\n                              </a-checkbox>\r\n                            </a-col>\r\n                          </a-row>\r\n                        </template>\r\n                      </div>\r\n                      <div class=\"rightRight1\">\r\n                        <template>\r\n                          <a-button type=\"primary\" size=\"small\" @click=\"queryUser(item)\">【{{item}}】人员</a-button>\r\n                          <a-row v-for=\"i in departUsers[item]\">\r\n                            <a-col :span=\"100\">\r\n                              {{i.username}}\r\n                            </a-col>\r\n                          </a-row>\r\n                        </template>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n              </div>\r\n\r\n\r\n            </a-layout-content>\r\n          </a-layout>\r\n        </a-layout>\r\n      </a-layout>\r\n\r\n    </div>\r\n    <j-select-user-by-dep-check-box ref=\"checkBox\" @senUserId=\"senUserId\"></j-select-user-by-dep-check-box>\r\n    <j-select-user-by-dep-single ref=\"single\" @senUserId=\"senUserId\"></j-select-user-by-dep-single>\r\n\r\n\r\n    <next-users ref=\"nextUsers\"></next-users>\r\n    <user-select ref=\"userSelect\" @func=\"userSelectCallBcak\"></user-select>\r\n\r\n\r\n  </a-modal>\r\n</template>\r\n\r\n<script>\r\n  import {JeecgListMixin} from \"../../../mixins/JeecgListMixin2\";\r\n  import nextUsers from './nextUsers'\r\n  import {deleteAction, downFile, getAction, postAction} from '@/api/manage'\r\n  import JSelectUserByDepSingle from \"../../../components/jeecgbiz/JSelectUserByDepSingle\";\r\n  import JSelectUserByDepCheckBox from \"../../../components/jeecgbiz/JSelectUserByDepCheckBox\";\r\n  import userSelect from './userSelect'\r\n  import ATextarea from \"ant-design-vue/es/input/TextArea\";\r\n\r\n  export default {\r\n    name: \"backModal\",\r\n    mixins: [JeecgListMixin],\r\n    components: {\r\n      ATextarea,\r\n      nextUsers,\r\n      JSelectUserByDepSingle,\r\n      JSelectUserByDepCheckBox,\r\n      userSelect\r\n    },\r\n    data() {\r\n      return {\r\n        scrHeight: window.innerHeight - 250 + 'px',\r\n        title: '回退',\r\n        visible: false,\r\n        confirmLoading: false,\r\n        taskMsg: '',\r\n        destMsg: '',//目标节点\r\n        dataSource: [],\r\n        isCurrentUsers: false,\r\n        checkBox: false,\r\n        isDesignMul: false,//是否是设计上的多实例\r\n        asssigneeEl: '',\r\n        isBack: false,\r\n        reason: null,//退回原因\r\n        mulEl: '',\r\n        mulSizeEl: '',\r\n        isDept: false,\r\n        //穿梭框数据\r\n        mockData: [],\r\n        //部门信息\r\n        deptsList: [],\r\n        //部门选择集合\r\n        departSelect: {},\r\n        //部门用户\r\n        departUsers: {},\r\n        //当前选中的类型\r\n        currentDepType: '',\r\n        //普通节点选中的数据(非部门)\r\n        userIds: [],\r\n        //传后台的部门用户的id\r\n        deptMsg: {},\r\n        columns: [\r\n          {\r\n            title: '环节',\r\n            align: \"center\",\r\n            dataIndex: 'name'\r\n          },\r\n          // {\r\n          //   title: '操作',\r\n          //   dataIndex: 'action',\r\n          //   align: \"center\",\r\n          //   scopedSlots: {customRender: 'action'},\r\n          // }\r\n        ],\r\n        columns4: [\r\n          {\r\n            title: '环节',\r\n            align: \"center\",\r\n            dataIndex: 'name'\r\n          },\r\n          {\r\n            title: '用户',\r\n            align: \"center\",\r\n            dataIndex: 'userNames',\r\n            customRender: function (t, r, index) {\r\n\r\n              return t.join(',')\r\n            }\r\n          }\r\n        ],\r\n        columns2: [\r\n          {\r\n            title: '部门',\r\n            align: \"center\",\r\n            dataIndex: 'departName'\r\n          }\r\n        ],\r\n        columns3: [\r\n          {\r\n            title: '用户',\r\n            align: \"center\",\r\n            dataIndex: 'username'\r\n          }\r\n        ],\r\n        url: {\r\n          currentUserQuery: '/oaBus/taskInAct/currentUserQuery',\r\n          departUsetQuery: '/oaBus/taskInAct/deptUsersQuery',\r\n          jump: '/wf/task/jump',\r\n          back: '/wf/task/back',\r\n          getUserByDeparts: '/sys/user/queryUserByDepts'\r\n        },\r\n      }\r\n    },\r\n    created() {\r\n    },\r\n    methods: {\r\n\r\n      setRowRadio(res) {\r\n        return {\r\n          on: {\r\n            click: () => {\r\n\r\n              let keys = [];\r\n              let rows = [];\r\n              keys.push(res.id);\r\n              rows.push(res);\r\n              this.selectedRowKeys = keys;\r\n              this.selectionRows = rows\r\n\r\n              this.doShowForm(res)\r\n            }\r\n          }\r\n        }\r\n      },\r\n      setRowCheck(res) {\r\n        return {\r\n          on: {\r\n            click: () => {\r\n              let rowkeys = this.selectedRowKeys;\r\n              let selectionRows = this.selectionRows;\r\n              if (rowkeys.length > 0 && rowkeys.includes(res.id)) {\r\n                rowkeys.splice(rowkeys.indexOf(res.id), 1);\r\n                selectionRows.splice(rowkeys.indexOf(res), 1);\r\n              } else {\r\n                rowkeys.push(res.id);\r\n                selectionRows.push(res);\r\n              }\r\n              this.selectedRowKeys = rowkeys;\r\n              this.selectionRows = selectionRows;\r\n            }\r\n          }\r\n        }\r\n      },\r\n      //穿梭方法实现\r\n      toRight(item) {\r\n        //从部门列表中移除--添加到对应的list中\r\n        //1 主办部门只能有一个\r\n        if (item.indexOf(\"主办\") >= 0) {\r\n          //判断是否已经有元素了\r\n          if (((this.departSelect[item].length == 0 && this.selectionRows.length > 1)) || (this.departSelect[item].length > 0)) {\r\n            this.$message.error(\"主办部门只允许有一个\")\r\n            return\r\n          }\r\n        }\r\n        //2 添加到右边--移除左边\r\n        var del = {}\r\n        for (var i in this.selectionRows) {\r\n          this.selectionRows[i].checked = false\r\n          //右边\r\n          this.departSelect[item].push(this.selectionRows[i])\r\n          //移除元素\r\n          del[this.selectionRows[i].id] = 1\r\n        }\r\n        //移除元素(采用重新赋值的方式)\r\n        var mockData2 = []\r\n        for (var j = 0; j < this.mockData.length; j++) {\r\n          if (del[this.mockData[j].id] != 1) {\r\n            mockData2.push(this.mockData[j])\r\n          }\r\n        }\r\n        this.mockData = mockData2\r\n        //清空所选\r\n        this.selectionRows = []\r\n        this.selectedRowKeys = []\r\n      },\r\n      toLeft(item) {\r\n        //添加到部门列表中--从list中移除\r\n        var right = []\r\n        for (var i in this.departSelect[item]) {\r\n          var itt = this.departSelect[item][i]\r\n          if (itt.checked) {\r\n            itt.checked = false\r\n            this.mockData.push(itt)\r\n          } else {\r\n            right.push(itt)\r\n          }\r\n        }\r\n        //改变右边\r\n        this.departSelect[item] = right\r\n        //判断对应的选人\r\n        this.departUsers[this.currentDepType] = []\r\n        this.deptMsg[this.currentDepType] = []\r\n        // //出发后才能选上 原因未知\r\n        let keys = []\r\n        let rows = []\r\n        this.onSelectChange(keys, rows)\r\n      },\r\n      show() {\r\n        //console.log('-------------',this.title)\r\n        this.isCurrentUsers = false\r\n        if (this.title == '回退') this.isBack = true\r\n        else this.isBack = false\r\n\r\n        this.visible = true\r\n      },\r\n      onChangeCheck(item) {\r\n        var id = (item.target.value).split('-')[0]\r\n        var type = (item.target.value).split('-')[1]\r\n        //修改数据属性\r\n        for (var i in  this.departSelect[type]) {\r\n          if (id == this.departSelect[type][i].id) {\r\n            this.departSelect[type][i].checked = true\r\n          }\r\n        }\r\n      },\r\n      showForm(record) {\r\n        return {\r\n          on: {\r\n            click: () => {\r\n              //console.log('~~~~~~~~~~~~~~~~~~~~~~~')\r\n              this.doShowForm(record)\r\n            }\r\n          }\r\n        }\r\n\r\n      },\r\n      doShowForm(record) {\r\n        //console.log('------------->>>>', JSON.stringify(record))\r\n\r\n\r\n        this.isDept = record.userOrRole == 'dept'\r\n\r\n        //单选或者复选\r\n        this.checkBox = record.allowMulti\r\n        //办理人变量及其相关设置\r\n        if (record.allowMulti) {//多实例\r\n          this.isDesignMul = true\r\n          this.mulEl = record.multiAssignee\r\n          this.mulSizeEl = (record.loopSize).indexOf(\"${\") >= 0 ? (record.loopSize).split(\"${\")[1].split(\"}\")[0] : (record.loopSize)\r\n        } else {//不允许多实例\r\n\r\n          if (record.multiAssignee == null) {//判断是不是 设计上的多实例\r\n\r\n            //不是设计上的多实例----解析办理人表达式\r\n            this.isDesignMul = false\r\n            //console.log((record.assignee).split(\"${\")[1].split(\"}\")[0])\r\n            this.asssigneeEl = (record.assignee).indexOf(\"${\") >= 0 ? (record.assignee).split(\"${\")[1].split(\"}\")[0] : (record.assignee)\r\n\r\n          } else {\r\n\r\n            //设计上是多实例\r\n            this.isDesignMul = true\r\n            this.mulEl = record.multiAssignee\r\n            this.mulSizeEl = (record.loopSize).indexOf(\"${\") >= 0 ? (record.loopSize).split(\"${\")[1].split(\"}\")[0] : (record.loopSize)\r\n          }\r\n        }\r\n\r\n        this.destMsg = record\r\n\r\n        if (this.title == '回退') return\r\n\r\n        //展示节点所需要的办理人\r\n        getAction(this.url.currentUserQuery, {\r\n          procDefKey: record.procDefKey,\r\n          taskId: record.id,\r\n          taskName: record.name,\r\n          drafterId: this.taskMsg.drafterId,\r\n        }).then(res => {\r\n          if (res.success) {\r\n            //console.log('-------------success:::::::')\r\n            if (this.isDept) {//是部门任务\r\n              //console.log('-------------isDept:::::::')\r\n\r\n\r\n              //校验部门\r\n              this.mockData = res.result\r\n              this.deptsList = record.deptsList\r\n\r\n              for (var x in  this.deptsList) {\r\n                //构造备选集合\r\n                this.departSelect[this.deptsList[x]] = []\r\n                //构造部门用户集合\r\n                this.departUsers[this.deptsList[x]] = []\r\n                //传后台数据\r\n                this.deptMsg[this.deptsList[x]] = []\r\n              }\r\n              this.visible = true\r\n              //部门任务才展示\r\n              this.isCurrentUsers = true\r\n\r\n            } else {\r\n              //console.log('-----sasssssss----------------')\r\n\r\n              if (this.checkBox) {\r\n                //console.log('---------------------')\r\n                this.$refs.checkBox.show()\r\n\r\n              } else {\r\n                //console.log('========================')\r\n\r\n                this.$refs.single.show()\r\n              }\r\n\r\n            }\r\n\r\n          } else {\r\n            this.$message.error(res.message)\r\n          }\r\n        })\r\n      },\r\n      jump() {\r\n        if (this.title == '回退') {\r\n          if (this.reason == null || this.reason.length == 0) {\r\n            this.$message.error('请先填写意见')\r\n            return\r\n          }\r\n        }\r\n\r\n        //办理人信息\r\n        var vars = {}\r\n        var taskWithDepts = {}\r\n        let assignee = []//记录参与人\r\n        if (this.isDesignMul) {//多实例\r\n          vars[this.mulEl] = []\r\n          //记录部门信息\r\n          taskWithDepts = {\r\n            deptMsg: this.deptMsg,\r\n            taskDefKey: this.destMsg.id\r\n          }\r\n\r\n          //如果是部门任务做特殊处理\r\n          if (this.isDept) {\r\n\r\n            let uids = []\r\n            for (let i in this.deptMsg) {\r\n              uids.push(this.deptMsg[i])\r\n              for (let index in this.deptMsg[i]) {\r\n                assignee.push(this.deptMsg[i][index])\r\n              }\r\n            }\r\n            if (this.title == '回退') {\r\n              if (this.selectionRows.length <= 0) {\r\n                this.$message.error('请选择要退回的环节')\r\n                return\r\n              }\r\n              uids = this.selectionRows[0].userIds\r\n            }\r\n\r\n            vars[this.mulEl] = uids\r\n            vars[this.mulSizeEl] = vars[this.mulEl].length\r\n          } else {\r\n            assignee = this.userIds\r\n            vars[this.mulEl] = this.userIds\r\n            vars[this.mulSizeEl] = this.userIds.length\r\n          }\r\n        } else {//非多实例\r\n\r\n          if (this.title == '回退') {\r\n            if (this.selectionRows.length <= 0) {\r\n              this.$message.error('请选择要退回的环节')\r\n              return\r\n            }\r\n            this.userIds = this.selectionRows[0].userIds\r\n          }\r\n          assignee = this.userIds\r\n          vars[this.asssigneeEl] = this.userIds[0]\r\n        }\r\n        //构造参数\r\n        let taskId = this.taskMsg.id\r\n        if (taskId == undefined) taskId = this.taskMsg.hiTaskId\r\n\r\n        var data = {\r\n          processDefinitionId: this.taskMsg.processDefinitionId,\r\n          taskId: taskId,\r\n          executionId: this.taskMsg.executionId,\r\n          processInstanceId: this.taskMsg.processInstanceId,\r\n          destActDefKey: this.destMsg.id,\r\n          destActDefName: this.destMsg.name,\r\n          currActDefKey: this.taskMsg.taskDefinitionKey,\r\n          deleteReason: this.title == '回退' ? 'completed_back' : 'completed_jump',\r\n          //办理人信息\r\n          vars: vars,\r\n          isDept: this.isDept,\r\n          taskWithDepts: taskWithDepts,\r\n          //存储参与人信息\r\n          table: this.taskMsg.table,\r\n          tableId: this.taskMsg.tableId,\r\n          functionId: this.taskMsg.functionId,\r\n          assignee: assignee\r\n        }\r\n\r\n\r\n        if (this.title == '回退') {\r\n          data['backReason'] = this.reason\r\n          postAction(this.url.back, data).then(res => {\r\n            if (res.success) {\r\n              this.$message.success(res.message)\r\n              setTimeout(function () {\r\n                window.close()\r\n              }, 500)\r\n\r\n            } else {\r\n              this.$message.error(res.message)\r\n            }\r\n          })\r\n\r\n\r\n        } else {\r\n          postAction(this.url.jump, data).then(res => {\r\n            if (res.success) {\r\n              this.$message.success(res.message)\r\n              setTimeout(function () {\r\n                window.close()\r\n              }, 500)\r\n\r\n            } else {\r\n              this.$message.error(res.message)\r\n            }\r\n          })\r\n        }\r\n\r\n        this.handleCancel()\r\n      },\r\n      cancel() {\r\n\r\n      }, handleCancel() {\r\n        this.$emit('close');\r\n        this.visible = false;\r\n        this.dataInit()\r\n      },\r\n      dataInit() {\r\n        this.selectionRows = []\r\n        this.selectedRowKeys = []\r\n      },\r\n      queryUser(item) {\r\n        this.currentDepType = item\r\n        //主办/辐办/传阅\r\n        let departs = this.departSelect[item]\r\n\r\n        if (departs.length == 0) {\r\n          this.$message.error('请先选择部门')\r\n          return\r\n        }\r\n        var ids = []\r\n\r\n        for (var i of departs) {\r\n          ids.push(i.id)\r\n        }\r\n\r\n        //根据部门查用户\r\n        postAction(this.url.getUserByDeparts, {ids: ids}).then(res => {\r\n          this.$refs.userSelect.dataSource = res.result\r\n          this.$refs.userSelect.show()\r\n        })\r\n      },\r\n      userSelectCallBcak(ids) {\r\n        this.departUsers[this.currentDepType] = []\r\n        this.deptMsg[this.currentDepType] = []\r\n\r\n        for (var i of  ids) {\r\n          let data = {\r\n            id: i.id,\r\n            username: i.username\r\n          }\r\n          //\r\n          this.departUsers[this.currentDepType].push(data)\r\n          this.deptMsg[this.currentDepType].push(i.id)\r\n        }\r\n        //出发后才能选上 原因未知\r\n        let keys = []\r\n        let rows = []\r\n        this.onSelectChange(keys, rows)\r\n      },\r\n      senUserId(ids) {\r\n        this.userIds = ids\r\n        this.jump()\r\n      },\r\n      /**\r\n       * 全选/不选\r\n       */\r\n      onCheckAllChange(e) {\r\n        let checked = e.target.checked\r\n        let type = e.target.id\r\n\r\n\r\n        if (checked) {\r\n          //修改数据属性\r\n          for (var i in  this.departSelect[type]) {\r\n            this.departSelect[type][i].checked = true\r\n            this.$refs[type][i].checked = true\r\n          }\r\n        } else {\r\n          for (var i in  this.departSelect[type]) {\r\n            this.departSelect[type][i].checked = false\r\n            this.$refs[type][i].checked = false\r\n\r\n          }\r\n        }\r\n      },\r\n\r\n    }\r\n  }\r\n</script>\r\n<style>\r\n  .left {\r\n    width: 30%;\r\n  }\r\n\r\n\r\n  .right {\r\n    width: 69%;\r\n    height: 400px;\r\n    /*background: #dddddd;*/\r\n    overflow-y: scroll;\r\n  }\r\n\r\n  .box1 {\r\n    width: 100%;\r\n    display: flex;\r\n    align-items: flex-start;\r\n    justify-content: space-between;\r\n  }\r\n\r\n  /*background: darkcyan;*/\r\n\r\n  .rightRight {\r\n    /*width: 90%;*/\r\n    width: 200px;\r\n    height: 120px;\r\n    /*background: #fff;*/\r\n    margin-left: 150px;\r\n    margin-right: 1px;\r\n    margin-top: 10px;\r\n    overflow-y: scroll;\r\n  }\r\n\r\n  .rightRight1 {\r\n    /*width: 90%;*/\r\n    width: 200px;\r\n    height: 120px;\r\n    /*background: #fff;*/\r\n    margin-left: 1px;\r\n    margin-right: 10px;\r\n    margin-top: 10px;\r\n    overflow-y: scroll;\r\n  }\r\n\r\n  .rightLeft {\r\n    width: 3%;\r\n  }\r\n\r\n</style>"],"sourceRoot":"src/views/mytask/modules"}]}
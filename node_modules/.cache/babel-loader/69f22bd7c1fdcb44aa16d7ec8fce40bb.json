{"remainingRequest":"D:\\ProgramFiles\\ideaIUWork\\jeecg-boot\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js!D:\\ProgramFiles\\ideaIUWork\\jeecg-boot\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\ProgramFiles\\ideaIUWork\\jeecg-boot\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ProgramFiles\\ideaIUWork\\jeecg-boot\\ant-design-vue-jeecg\\src\\components\\jeecg\\JSuperQuery.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\ProgramFiles\\ideaIUWork\\jeecg-boot\\ant-design-vue-jeecg\\src\\components\\jeecg\\JSuperQuery.vue","mtime":1568535203584},{"path":"D:\\ProgramFiles\\ideaIUWork\\jeecg-boot\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1568345883562},{"path":"D:\\ProgramFiles\\ideaIUWork\\jeecg-boot\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js","mtime":1568345858740},{"path":"D:\\ProgramFiles\\ideaIUWork\\jeecg-boot\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1568345883562},{"path":"D:\\ProgramFiles\\ideaIUWork\\jeecg-boot\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js","mtime":1568345696677}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport ACol from 'ant-design-vue/es/grid/Col';\nimport JDate from '@/components/jeecg/JDate.vue';\nexport default {\n  name: 'JSuperQuery',\n  components: {\n    ACol: ACol,\n    JDate: JDate\n  },\n  data: function data() {\n    return {\n      visible: false,\n      confirmLoading: false,\n      queryParamsModel: [{}]\n    };\n  },\n  props: {\n    /*  fieldList:[{value:'',text:'',type:''}]\n    * type:date datetime int number string\n    * */\n    fieldList: {\n      type: Array,\n      required: true\n    },\n\n    /*\n    * 这个回调函数接收一个数组参数 即查询条件\n    * */\n    callback: {\n      type: String,\n      required: false,\n      default: 'handleSuperQuery'\n    }\n  },\n  methods: {\n    show: function show() {\n      if (!this.queryParamsModel || this.queryParamsModel.length == 0) {\n        this.queryParamsModel = [{}];\n      }\n\n      this.visible = true;\n    },\n    handleOk: function handleOk() {\n      console.log(\"---高级查询参数--->\", this.queryParamsModel);\n\n      if (!this.isNullArray()) {\n        this.$emit(this.callback, this.queryParamsModel);\n      } else {\n        this.$emit(this.callback);\n      }\n    },\n    handleCancel: function handleCancel() {\n      this.close();\n    },\n    close: function close() {\n      this.$emit('close');\n      this.visible = false;\n    },\n    handleAdd: function handleAdd() {\n      this.queryParamsModel.push({});\n    },\n    handleDel: function handleDel(index) {\n      this.queryParamsModel.splice(index, 1);\n      this.$message.warning(\"请关闭后重新打开\");\n    },\n    handleSelected: function handleSelected(option, item) {\n      item['type'] = option.data.attrs['data-type'];\n    },\n    handleReset: function handleReset() {\n      this.queryParamsModel = [{}];\n      this.$emit(this.callback);\n    },\n    isNullArray: function isNullArray() {\n      //判断是不是空数组对象\n      if (!this.queryParamsModel || this.queryParamsModel.length == 0) {\n        return true;\n      }\n\n      if (this.queryParamsModel.length == 1) {\n        var obj = this.queryParamsModel[0];\n\n        if (!obj.field || !obj.val || !obj.rule) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }\n};",{"version":3,"sources":["JSuperQuery.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA,OAAA,IAAA,MAAA,4BAAA;AACA,OAAA,KAAA,MAAA,8BAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,IAAA,EAAA,IADA;AAEA,IAAA,KAAA,EAAA;AAFA,GAFA;AAMA,EAAA,IANA,kBAMA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,KADA;AAEA,MAAA,cAAA,EAAA,KAFA;AAGA,MAAA,gBAAA,EAAA,CAAA,EAAA;AAHA,KAAA;AAKA,GAZA;AAaA,EAAA,KAAA,EAAA;AACA;;;AAGA,IAAA,SAAA,EAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,QAAA,EAAA;AAFA,KAJA;;AAQA;;;AAGA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA,KAFA;AAGA,MAAA,OAAA,EAAA;AAHA;AAXA,GAbA;AA8BA,EAAA,OAAA,EAAA;AACA,IAAA,IADA,kBACA;AACA,UAAA,CAAA,KAAA,gBAAA,IAAA,KAAA,gBAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,aAAA,gBAAA,GAAA,CAAA,EAAA,CAAA;AACA;;AACA,WAAA,OAAA,GAAA,IAAA;AACA,KANA;AAOA,IAAA,QAPA,sBAOA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,eAAA,EAAA,KAAA,gBAAA;;AACA,UAAA,CAAA,KAAA,WAAA,EAAA,EAAA;AACA,aAAA,KAAA,CAAA,KAAA,QAAA,EAAA,KAAA,gBAAA;AACA,OAFA,MAEA;AACA,aAAA,KAAA,CAAA,KAAA,QAAA;AACA;AACA,KAdA;AAeA,IAAA,YAfA,0BAeA;AACA,WAAA,KAAA;AACA,KAjBA;AAkBA,IAAA,KAlBA,mBAkBA;AACA,WAAA,KAAA,CAAA,OAAA;AACA,WAAA,OAAA,GAAA,KAAA;AACA,KArBA;AAsBA,IAAA,SAtBA,uBAsBA;AACA,WAAA,gBAAA,CAAA,IAAA,CAAA,EAAA;AACA,KAxBA;AAyBA,IAAA,SAzBA,qBAyBA,KAzBA,EAyBA;AAEA,WAAA,gBAAA,CAAA,MAAA,CAAA,KAAA,EAAA,CAAA;AACA,WAAA,QAAA,CAAA,OAAA,CAAA,UAAA;AACA,KA7BA;AA8BA,IAAA,cA9BA,0BA8BA,MA9BA,EA8BA,IA9BA,EA8BA;AACA,MAAA,IAAA,CAAA,MAAA,CAAA,GAAA,MAAA,CAAA,IAAA,CAAA,KAAA,CAAA,WAAA,CAAA;AACA,KAhCA;AAiCA,IAAA,WAjCA,yBAiCA;AACA,WAAA,gBAAA,GAAA,CAAA,EAAA,CAAA;AACA,WAAA,KAAA,CAAA,KAAA,QAAA;AACA,KApCA;AAqCA,IAAA,WArCA,yBAqCA;AACA;AACA,UAAA,CAAA,KAAA,gBAAA,IAAA,KAAA,gBAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,eAAA,IAAA;AACA;;AACA,UAAA,KAAA,gBAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,YAAA,GAAA,GAAA,KAAA,gBAAA,CAAA,CAAA,CAAA;;AACA,YAAA,CAAA,GAAA,CAAA,KAAA,IAAA,CAAA,GAAA,CAAA,GAAA,IAAA,CAAA,GAAA,CAAA,IAAA,EAAA;AACA,iBAAA,IAAA;AACA;AACA;;AACA,aAAA,KAAA;AACA;AAjDA;AA9BA,CAAA","sourcesContent":["<template>\r\n  <a-modal\r\n    title=\"高级查询构造器\"\r\n    :width=\"800\"\r\n    :visible=\"visible\"\r\n    :confirmLoading=\"confirmLoading\"\r\n    @cancel=\"handleCancel\"\r\n    :mask=\"false\"\r\n    wrapClassName=\"ant-modal-cust-warp\"\r\n    style=\"top:5%;max-height: 95%;\">\r\n    <template slot=\"footer\">\r\n      <a-button @click=\"handleCancel\">关 闭</a-button>\r\n      <a-button @click=\"handleReset\" style=\"float: left\">重 置</a-button>\r\n      <a-button type=\"primary\" @click=\"handleOk\">查 询</a-button>\r\n    </template>\r\n\r\n    <a-spin :spinning=\"confirmLoading\">\r\n      <a-form>\r\n        <div>\r\n          <a-row type=\"flex\" style=\"margin-bottom:10px\" :gutter=\"16\" v-for=\"(item, index) in queryParamsModel\" :key=\"index\">\r\n\r\n            <a-col :span=\"6\">\r\n              <a-select placeholder=\"选择查询字段\" v-model=\"item.field\" @select=\"(val,option)=>handleSelected(option,item)\">\r\n                <a-select-option v-for=\"(f,fIndex) in fieldList\" :key=\" 'field'+fIndex\" :value=\"f.value\" :data-type=\"f.type\">{{ f.text }}</a-select-option>\r\n              </a-select>\r\n            </a-col>\r\n\r\n            <a-col :span=\"6\">\r\n              <a-select placeholder=\"选择匹配规则\" v-model=\"item.rule\">\r\n                <a-select-option value=\"eq\">等于</a-select-option>\r\n                <a-select-option value=\"ne\">不等于</a-select-option>\r\n                <a-select-option value=\"gt\">大于</a-select-option>\r\n                <a-select-option value=\"ge\">大于等于</a-select-option>\r\n                <a-select-option value=\"lt\">小于</a-select-option>\r\n                <a-select-option value=\"le\">小于等于</a-select-option>\r\n                <a-select-option value=\"right_like\">以..开始</a-select-option>\r\n                <a-select-option value=\"left_like\">以..结尾</a-select-option>\r\n                <a-select-option value=\"like\">包含</a-select-option>\r\n                <a-select-option value=\"in\">在...中</a-select-option>\r\n              </a-select>\r\n            </a-col>\r\n\r\n            <a-col :span=\"6\">\r\n              <j-date v-if=\" item.type=='date' \" v-model=\"item.val\" placeholder=\"请选择日期\"></j-date>\r\n              <j-date v-else-if=\" item.type=='datetime' \" v-model=\"item.val\" placeholder=\"请选择时间\" :show-time=\"true\" date-format=\"YYYY-MM-DD HH:mm:ss\"></j-date>\r\n              <a-input-number v-else-if=\" item.type=='int'||item.type=='number' \" style=\"width: 100%\" placeholder=\"请输入数值\" v-model=\"item.val\"/>\r\n              <a-input v-else v-model=\"item.val\" placeholder=\"请输入值\" />\r\n            </a-col>\r\n\r\n            <a-col :span=\"6\">\r\n              <a-button @click=\"handleAdd\" icon=\"plus\"></a-button>&nbsp;\r\n              <a-button @click=\"handleDel( index )\" icon=\"minus\"></a-button>\r\n            </a-col>\r\n\r\n          </a-row>\r\n        </div>\r\n      </a-form>\r\n    </a-spin>\r\n  </a-modal>\r\n</template>\r\n\r\n<script>\r\n  import ACol from 'ant-design-vue/es/grid/Col'\r\n  import JDate from '@/components/jeecg/JDate.vue';\r\n\r\n  export default {\r\n    name: 'JSuperQuery',\r\n    components: {\r\n      ACol,\r\n      JDate\r\n    },\r\n    data(){\r\n      return {\r\n        visible:false,\r\n        confirmLoading:false,\r\n        queryParamsModel:[{}]\r\n      }\r\n    },\r\n    props:{\r\n      /*  fieldList:[{value:'',text:'',type:''}]\r\n      * type:date datetime int number string\r\n      * */\r\n      fieldList:{\r\n        type:Array,\r\n        required:true\r\n      },\r\n      /*\r\n      * 这个回调函数接收一个数组参数 即查询条件\r\n      * */\r\n      callback:{\r\n        type:String,\r\n        required:false,\r\n        default:'handleSuperQuery'\r\n      }\r\n    },\r\n    methods:{\r\n      show(){\r\n        if(!this.queryParamsModel ||this.queryParamsModel.length==0){\r\n          this.queryParamsModel = [{}]\r\n        }\r\n        this.visible = true;\r\n      },\r\n      handleOk(){\r\n        console.log(\"---高级查询参数--->\",this.queryParamsModel)\r\n        if(!this.isNullArray()){\r\n          this.$emit(this.callback, this.queryParamsModel)\r\n        }else{\r\n          this.$emit(this.callback)\r\n        }\r\n      },\r\n      handleCancel(){\r\n        this.close()\r\n      },\r\n      close () {\r\n        this.$emit('close');\r\n        this.visible = false;\r\n      },\r\n      handleAdd () {\r\n        this.queryParamsModel.push({});\r\n      },\r\n      handleDel (index) {\r\n\r\n        this.queryParamsModel.splice(index,1);\r\n        this.$message.warning(\"请关闭后重新打开\")\r\n      },\r\n      handleSelected(option,item){\r\n        item['type'] = option.data.attrs['data-type']\r\n      },\r\n      handleReset(){\r\n        this.queryParamsModel=[{}]\r\n        this.$emit(this.callback)\r\n      },\r\n      isNullArray(){\r\n        //判断是不是空数组对象\r\n        if(!this.queryParamsModel || this.queryParamsModel.length==0){\r\n          return true\r\n        }\r\n        if(this.queryParamsModel.length==1){\r\n          let obj = this.queryParamsModel[0]\r\n          if(!obj.field || !obj.val || !obj.rule){\r\n            return true\r\n          }\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style >\r\n\r\n</style>"],"sourceRoot":"src/components/jeecg"}]}
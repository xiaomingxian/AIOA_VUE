{"remainingRequest":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js!C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xxm\\work\\jd\\fore\\src\\views\\mytask\\taskList\\receiveFile.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xxm\\work\\jd\\fore\\src\\views\\mytask\\taskList\\receiveFile.vue","mtime":1579416998973},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js","mtime":1570779245522},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js","mtime":1570779225726}],"contextDependencies":[],"result":["import _defineProperty from \"C:\\\\xxm\\\\work\\\\jd\\\\fore\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getAction, postAction } from \"../../../api/manage\";\nimport { JeecgListMixin } from \"../../../mixins/JeecgListMixin2\";\nimport { ntkoBrowser } from \"../../buttons/btn-js/ntkobackground.min.js\"; //模板\n\nimport { busdataTemplate } from \"@/views/buttons/btn-js/busdataTemplate\";\nimport DelTime from \"../../buttons/DelTimeModal\";\nexport default {\n  name: \"doTaskModal\",\n  mixins: [JeecgListMixin, busdataTemplate],\n  components: {\n    DelTime: DelTime\n  },\n  props: {\n    backDataRef: {\n      type: Object,\n      required: false\n    },\n    detailList: {\n      type: Object,\n      required: false\n    },\n    busFunction: {\n      type: Object,\n      required: false\n    },\n    taskParent: {\n      type: Object,\n      required: false\n    },\n    optionMap: {\n      type: Object,\n      required: false\n    },\n    isShowFile: {\n      type: Object,\n      required: false\n    }\n  },\n  data: function data() {\n    var _backData;\n\n    return {\n      visible: false,\n      title: '收文',\n      s_varchar: [],\n      recFileTypeList: [],\n      recFileOrgList: [],\n      confirmLoading: false,\n      userData: '',\n      //代办信息\n      task: '',\n      //已办信息\n      taskDone: '',\n      opts: [],\n      //意见框信息\n      //意见表相关\n      backDataOpt: {\n        //回填数据id\n        table: 'oa_busdata20_opinion',\n        i_id: \"\",\n        i_opinion_set_id: \"\",\n        i_bus_function_id: \"\",\n        i_busdata_id: \"\",\n        s_name: \"\",\n        i_user_id: \"\",\n        d_sign: \"\",\n        s_opinion: \"\",\n        s_opinion_type: \"\",\n        s_task_id: \"\",\n        s_task_name: \"\",\n        s_overt: \"\",\n        i_order: \"\",\n        s_tpye: \"\",\n        s_dept_id: \"\",\n        s_dept_name: \"\",\n        s_taskdef_key: \"\",\n        //是否重要\n        i_is_important: ''\n      },\n      oaFileList: [],\n      //  文档数据   字段含义\n      //表中的数据相关值\n      jeditShow: false,\n      //富文本编辑器的内容的value值\n      jeditor: {\n        value: ''\n      },\n      backData: (_backData = {\n        //属性判断---新建时使用\n        //---------------------------------------------\n        //流程key\n        key: '',\n        //文号\n        act_show: '',\n        //page ref\n        page_ref: '',\n        //function值用于排序\n        ilevel: '',\n        //业务配置表id-用于查询按钮/意见权限\n        iprocSetId: '',\n        //对应的业务数据表\n        table: 'oa_busdata20',\n        //---------------------------------- 以下为表存储字段\n        //*******\n        i_id: '',\n        i_bigint1: '',\n        //份数\n        i_bigint2: '',\n        //页数\n        s_receive_type: '',\n        //来文文种\n        s_varchar3: '',\n        //\"办文依据\"\n        //d_datetime1: '',//\"成文日期\"\n        d_sealdate: '',\n        //\"成文日期\"\n        //*******\n        //模块\n        i_bus_model_id: '',\n        //\n        i_bus_function_id: '',\n        //密级\n        i_safetylevel: '0',\n        //缓急\n        i_urgency: '0',\n        //主办部门\n        s_main_dept_names: '主办部门',\n        //辅办部门\n        s_cc_dept_names: '辅办部门',\n        //内部发送部门\n        s_inside_deptnames: '内部发送部门',\n        //标题\n        s_title: '中国人民银行永州市中心支行收文处理签',\n        //左侧参数页面头部\n        s_left_parameter: '左侧参数页面头部',\n        //机构\n        s_unit_name: '',\n        //部门\n        s_dept_name: '',\n        //插入参数（修改文头）（页面头部）\n        s_middle_parameter: '',\n        //右侧参数（页面头部）\n        s_right_parameter: '',\n        //来文字号\n        s_receive_num: '',\n        //文件字号\n        s_file_num: '',\n        //来文机关（数据字典取值）\n        i_receive_dept_id: '',\n        //是否办结\n        i_is_state: '0',\n        //是否保存办文单\n        i_is_approve: '0',\n        //是否归档\n        i_is_archives: '0',\n        //是否已送全文检索\n        i_is_es: '0',\n        //是否送公文传输\n        i_is_send: '0',\n        //是否为临时文件\n        i_is_display: '0',\n        //备注\n        s_remarks: '',\n        //创建时间-年\n        i_create_year: new Date().getFullYear(),\n        //创建时间-月\n        i_create_month: new Date().getMonth(),\n        //创建时间-日期\n        i_create_day: new Date().getDate(),\n        //创建人id\n        s_create_by: '',\n        //创建者姓名\n        s_create_name: '',\n        //创建人部门name\n        s_create_dept: '',\n        //创建人部门id\n        s_create_deptid: '',\n        //创建人机构id\n        s_create_unitid: ''\n      }, _defineProperty(_backData, \"d_sealdate\", ''), _defineProperty(_backData, \"d_create_time\", ''), _defineProperty(_backData, \"d_update_time\", ''), _defineProperty(_backData, \"s_cur_proc_name\", ''), _defineProperty(_backData, \"s_cur_task_name\", ''), _backData),\n      url: {\n        optionAndBtn: '/oaBus/newTask/optionAndBtn',\n        currentUserMsg: '/sys/user/getUserSectionInfoByToken',\n        updateReadStatus: '/oaBus/taskInAct/changeStatus',\n        selectTaskType: '/oaBus/busModel/list',\n        selectTask: '/oaBus/busModel/list',\n        queryOaFileList: '/oaBus/oaFile/queryOaFileList',\n        functionQuery: '/oaBus/busFunction/list',\n        initSelDate: '/sys/dict/getDictByKeyObj'\n      }\n    };\n  },\n  created: function created() {\n    this.initSelDate();\n    this.show();\n  },\n  methods: {\n    initSelDate: function initSelDate() {\n      var _this = this;\n\n      //初始化来文文种\n      getAction(this.url.initSelDate, {\n        dictKey: \"recFileType\"\n      }).then(function (res) {\n        _this.recFileTypeList = res.result;\n      }); //初始化来文机关\n\n      getAction(this.url.initSelDate, {\n        dictKey: \"recFileOrg\"\n      }).then(function (res) {\n        _this.recFileOrgList = res.result;\n      });\n    },\n    optsGet: function optsGet(opts) {\n      this.opts = opts;\n    },\n    change: function change(e) {\n      this.backData.i_safetylevel = e;\n    },\n    changeHuanJi: function changeHuanJi(e) {\n      console.log('=============', e);\n      this.backData.i_urgency = e;\n    },\n    //详情页面数据\n    showTaskInAct: function showTaskInAct(taskDetail, task) {\n      //查询出优先级\n      this.task = task;\n      this.show(taskDetail); //修改数据信息为已读\n\n      this.changeReadStatus();\n    },\n    show: function show() {\n      for (var _i = 0; _i < this.optionMap.checkList.length; _i++) {\n        this.s_varchar.push(this.optionMap.checkList[_i].stableColumn);\n      }\n\n      for (var i in this.backData) {\n        this.backData[i] = this.backDataRef[i];\n      }\n\n      this.getOaFiles(this.backData.table, this.backData.i_id); // this.backData.table = table\n\n      this.visible = true;\n    },\n    //子孙组件事件回传\n    watchSub: function watchSub(e) {\n      this.getOaFileList(this.backData.table, this.backData.i_id);\n    },\n    //意见id赋值  区分新增与更新\n    optSet: function optSet(opts, key) {\n      for (var i in opts) {\n        if (opts[i].taskDefKey == key) {\n          this.backDataOpt.i_id = opts[i].optId;\n        }\n      }\n    },\n    ok: function ok() {\n      this.handleCancel();\n    },\n    getOaFileList: function getOaFileList(tableName, busDataId) {\n      var _this2 = this;\n\n      getAction(this.url.queryOaFileList, {\n        tableName: tableName,\n        busDataId: busDataId\n      }).then(function (res) {\n        _this2.oaFileList = res.result;\n      });\n    },\n    handleCancel: function handleCancel() {\n      this.$emit('close');\n      this.visible = false;\n      this.disableSubmit = false; //清除意见与按钮页面数据\n\n      this.$refs.taskOptRef.clear(); //刷新父页面\n\n      this.$emit('reload_todo');\n    },\n    onChange: function onChange(date, dateString) {// console.log(date, dateString);\n    },\n    onChange2: function onChange2(date, dateString) {// console.log(date, dateString);\n    }\n  }\n};",{"version":3,"sources":["receiveFile.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\r\n  <form>\r\n    <center>\r\n\r\n      <table width=\"100%\" border=\"1\" style=\"border:#913838;\">\r\n        <tr>\r\n          <td class=\"title\" width=\"15%\">\r\n            <!--标题-->\r\n            <center><h3>{{detailList.s_title}}</h3></center>\r\n          </td>\r\n          <td colspan=\"3\">\r\n            <a-textarea cols=\"92\" rows=\"2\" ref=\"s_title\" v-on:blur=\"blurText(backData.s_title,$refs.s_title)\" v-model=\"backData.s_title\"></a-textarea>\r\n          </td>\r\n        </tr>\r\n       <!-- <tr>\r\n          <td class=\"title\" width=\"15%\">\r\n            &lt;!&ndash;登记人员&ndash;&gt;\r\n            <center><h3>{{detailList.s_create_name}}</h3></center>\r\n          </td>\r\n          <td colspan=\"3\">\r\n            <div style=\"padding-left: 10px;width:35%;\">{{backData.s_create_name}}</div>\r\n          </td>\r\n          &lt;!&ndash;创建部门&ndash;&gt;\r\n          &lt;!&ndash;<td width=\"15%\">\r\n            <center><h3>{{detailList.s_create_dept}}</h3></center>\r\n          </td>&ndash;&gt;\r\n          &lt;!&ndash;<td>\r\n            <div style=\"padding-left: 10px\">{{backData.s_create_dept}}</div>\r\n          </td>&ndash;&gt;\r\n        </tr>-->\r\n        <tr>\r\n          <td class=\"title\" width=\"15%\">\r\n            <!--收文日期-->\r\n            <center><h3>{{detailList.d_create_time}}</h3></center>\r\n          </td>\r\n          <td width=\"35%\">\r\n            <div style=\"padding-left: 10px;\">{{backData.d_create_time}}</div>\r\n            <!--<a-input :value=\"backData.d_create_time\"></a-input>-->\r\n          </td>\r\n          <td class=\"title\" width=\"15%\">\r\n            <!--成文日期-->\r\n            <center><h3>{{detailList.d_sealdate}}</h3></center>\r\n          </td>\r\n          <td>\r\n            <a-input :value=\"backData.d_sealdate\"></a-input>\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td class=\"title\" width=\"10%\">\r\n            <!--文件字号-->\r\n            <center><h3>{{detailList.s_file_num}}</h3></center>\r\n          </td>\r\n          <td colspan=\"3\">\r\n            <a-input :value=\"backData.s_file_num\"></a-input>\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td class=\"title\" width=\"15%\">\r\n            <!--来文文种-->\r\n            <center><h3>{{detailList.s_varchar4}}</h3></center>\r\n          </td>\r\n          <td>\r\n            <!--<a-input :value=\"backData.s_varchar4\"></a-input>-->\r\n            <a-select placeholder=\"请选择来文文种\" ref=\"s_varchar4\" v-on:blur=\"blurText(backData.s_varchar4,$refs.s_varchar4)\"\r\n                      v-model=\"backData.s_varchar4\">\r\n              <a-select-option v-for=\"(item,index) in recFileTypeList\" :key=\"index\" :value=\"item.value\">\r\n                {{item.text}}\r\n              </a-select-option>\r\n            </a-select>\r\n          </td>\r\n          <td class=\"title\" width=\"15%\">\r\n            <!--来文字号-->\r\n            <center><h3>{{detailList.s_receive_num}}</h3></center>\r\n          </td>\r\n          <td>\r\n            <a-input :value=\"backData.s_receive_num\"></a-input>\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td class=\"title\" width=\"10%\">\r\n            <!--来文机关-->\r\n            <center><h3>{{detailList.s_varchar5}}</h3></center>\r\n          </td>\r\n          <td >\r\n            <a-select placeholder=\"请选择来文机关\" ref=\"s_varchar5\" v-on:blur=\"blurText(backData.s_varchar5,$refs.s_varchar5)\"\r\n                      v-model=\"backData.s_varchar5\">\r\n              <a-select-option v-for=\"(item,index) in recFileOrgList\" :key=\"index\" :value=\"item.value\">\r\n                {{item.text}}\r\n              </a-select-option>\r\n            </a-select>\r\n          </td>\r\n\r\n          <td class=\"title\" width=\"15%\">\r\n            <center><h3>数量</h3></center>\r\n          </td>\r\n          <td>\r\n            <a-input style=\"width: 45%\" ref=\"i_bigint1\" v-on:blur=\"blurText(backData.i_bigint1,$refs.i_bigint1)\" v-model=\"backData.i_bigint1\"></a-input>\r\n            份\r\n            <a-input style=\"width: 45%\" ref=\"i_bigint2\" v-on:blur=\"blurText(backData.i_bigint2,$refs.i_bigint2)\" v-model=\"backData.i_bigint2\"></a-input>\r\n            页\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td class=\"title\" width=\"10%\">\r\n            <!--主办部门-->\r\n            <center><h3>{{detailList.s_create_dept}}</h3></center>\r\n          </td>\r\n          <td colspan=\"3\">\r\n            <a-input :value=\"backData.s_create_dept\"></a-input>\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td class=\"title\" width=\"10%\">\r\n            <!--辅办部门-->\r\n            <center><h3>{{detailList.s_cc_dept_names}}</h3></center>\r\n          </td>\r\n          <td colspan=\"3\">\r\n            <a-input :value=\"backData.s_cc_dept_names\"></a-input>\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td class=\"title\" width=\"10%\">\r\n            <!--内部发送部门-->\r\n            <center><h3>{{detailList.s_inside_deptnames}}</h3></center>\r\n          </td>\r\n          <td colspan=\"3\">\r\n            <a-input :value=\"backData.s_inside_deptnames\"></a-input>\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td class=\"title\" width=\"10%\">\r\n            <!--备注-->\r\n            <center><h3>{{detailList.s_remarks}}</h3></center>\r\n          </td>\r\n          <td colspan=\"3\">\r\n            <a-input v-model=\"backData.s_remarks\"></a-input>\r\n          </td>\r\n        </tr>\r\n\r\n        <tr>\r\n          <td class=\"title\" width=\"10%\">\r\n            <center><h3>附件</h3></center>\r\n          </td>\r\n          <td colspan=\"3\">\r\n            <div v-for=\"(item,index) in oaFileList\" style=\"padding-left: 15px\">\r\n              <!--<div @click=\"openFile(9,item.sfileName)\"><span class=\"hoverred\">{{index}}、{{item.sfileName}}</span>-->\r\n              <div class=\"qiCao\"><span class=\"hoverred\" @click=\"qiCao1(9,item)\">{{index+1}}、{{item.sfileName}}</span>\r\n                <span class=\"delCss\" v-show=\"isShowFile\">\r\n                <img :title=\"fileBtnName(1)\" v-show =\"isSuffex(item.sfileName)\" class=\"pices\" @click.stop=\"qiCao2(10,item)\" src=\"../../../../src/assets/set.png\"/>\r\n                <img :title=\"fileBtnName(2)\" class=\"pices\" @click.stop=\"updateFileName(item)\" src=\"../../../../src/assets/setName.png\"/>\r\n                <img :title=\"fileBtnName(3)\" class=\"pices\" @click.stop=\"deleteFilesBtn(item,4)\" src=\"../../../../src/assets/delete.png\"/>\r\n                <img :title=\"fileBtnName(4)\" v-show=\"oaFileList.length > 1 && index > 0\" class=\"pices\" @click.stop=\"topFile(item,index,4)\" src=\"../../../../src/assets/top.png\"/>\r\n                <img :title=\"fileBtnName(5)\" v-show=\"oaFileList.length > 1 && index < oaFileList.length-1\" class=\"pices\" @click.stop=\"lowFile(item,index,4)\" src=\"../../../../src/assets/bottom.png\"/>\r\n              </span>\r\n              </div>\r\n            </div>\r\n            <!--<a-input :value=\"backData.s_remarks\"></a-input>-->\r\n          </td>\r\n        </tr>\r\n      </table>\r\n      <del-time ref=\"updateFileNameModal\" @reloadAfterUpdate=\"reloadAfterUpdate\"></del-time>\r\n    </center>\r\n  </form>\r\n</template>\r\n\r\n<script>\r\n  import {getAction, postAction} from \"../../../api/manage\";\r\n  import {JeecgListMixin} from \"../../../mixins/JeecgListMixin2\";\r\n  import {ntkoBrowser} from '../../buttons/btn-js/ntkobackground.min.js'\r\n  //模板\r\n  import {busdataTemplate} from \"@/views/buttons/btn-js/busdataTemplate\";\r\n  import DelTime from \"../../buttons/DelTimeModal\";\r\n\r\n\r\n  export default {\r\n    name: \"doTaskModal\",\r\n    mixins: [JeecgListMixin,busdataTemplate],\r\n    components: {\r\n      DelTime\r\n\r\n    },\r\n    props: {\r\n      backDataRef: {\r\n        type: Object,\r\n        required: false\r\n      },\r\n      detailList: {\r\n        type: Object,\r\n        required: false\r\n      },\r\n      busFunction: {\r\n        type: Object,\r\n        required: false\r\n      },\r\n      taskParent: {\r\n        type: Object,\r\n        required: false\r\n      },\r\n      optionMap: {\r\n        type: Object,\r\n        required: false\r\n      },\r\n      isShowFile:{\r\n        type: Object,\r\n        required: false\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        visible: false,\r\n        title: '收文',\r\n        s_varchar:[],\r\n        recFileTypeList:[],\r\n        recFileOrgList:[],\r\n        confirmLoading: false,\r\n        userData: '',\r\n        //代办信息\r\n        task: '',\r\n        //已办信息\r\n        taskDone: '',\r\n        opts: [],//意见框信息\r\n\r\n        //意见表相关\r\n        backDataOpt: {\r\n          //回填数据id\r\n          table: 'oa_busdata20_opinion',\r\n          i_id: \"\",\r\n          i_opinion_set_id: \"\",\r\n          i_bus_function_id: \"\",\r\n          i_busdata_id: \"\",\r\n          s_name: \"\",\r\n          i_user_id: \"\",\r\n          d_sign: \"\",\r\n          s_opinion: \"\",\r\n          s_opinion_type: \"\",\r\n          s_task_id: \"\",\r\n          s_task_name: \"\",\r\n          s_overt: \"\",\r\n          i_order: \"\",\r\n          s_tpye: \"\",\r\n          s_dept_id: \"\",\r\n          s_dept_name: \"\",\r\n          s_taskdef_key: \"\",\r\n          //是否重要\r\n          i_is_important: ''\r\n        },\r\n        oaFileList: [],    //  文档数据   字段含义\r\n        //表中的数据相关值\r\n        jeditShow: false,   //富文本编辑器的内容的value值\r\n        jeditor: {\r\n          value: ''\r\n        },\r\n\r\n        backData: {\r\n          //属性判断---新建时使用\r\n          //---------------------------------------------\r\n          //流程key\r\n          key: '',\r\n          //文号\r\n          act_show: '',\r\n          //page ref\r\n          page_ref: '',\r\n          //function值用于排序\r\n          ilevel: '',\r\n          //业务配置表id-用于查询按钮/意见权限\r\n          iprocSetId: '',\r\n          //对应的业务数据表\r\n          table: 'oa_busdata20',\r\n          //---------------------------------- 以下为表存储字段\r\n\r\n          //*******\r\n          i_id: '',\r\n          i_bigint1: '',   //份数\r\n          i_bigint2: '',   //页数\r\n          s_receive_type: '',     //来文文种\r\n          s_varchar3: '',//\"办文依据\"\r\n          //d_datetime1: '',//\"成文日期\"\r\n          d_sealdate: '',//\"成文日期\"\r\n          //*******\r\n          //模块\r\n          i_bus_model_id: '',\r\n          //\r\n          i_bus_function_id: '',\r\n          //密级\r\n          i_safetylevel: '0',\r\n          //缓急\r\n          i_urgency: '0',\r\n          //主办部门\r\n          s_main_dept_names: '主办部门',\r\n          //辅办部门\r\n          s_cc_dept_names: '辅办部门',\r\n          //内部发送部门\r\n          s_inside_deptnames: '内部发送部门',\r\n          //标题\r\n          s_title: '中国人民银行永州市中心支行收文处理签',\r\n          //左侧参数页面头部\r\n          s_left_parameter: '左侧参数页面头部',\r\n          //机构\r\n          s_unit_name: '',\r\n          //部门\r\n          s_dept_name: '',\r\n          //插入参数（修改文头）（页面头部）\r\n          s_middle_parameter: '',\r\n          //右侧参数（页面头部）\r\n          s_right_parameter: '',\r\n          //来文字号\r\n          s_receive_num: '',\r\n          //文件字号\r\n          s_file_num: '',\r\n          //来文机关（数据字典取值）\r\n          i_receive_dept_id: '',\r\n          //是否办结\r\n          i_is_state: '0',\r\n          //是否保存办文单\r\n          i_is_approve: '0',\r\n          //是否归档\r\n          i_is_archives: '0',\r\n          //是否已送全文检索\r\n          i_is_es: '0',\r\n          //是否送公文传输\r\n          i_is_send: '0',\r\n          //是否为临时文件\r\n          i_is_display: '0',\r\n          //备注\r\n          s_remarks: '',\r\n          //创建时间-年\r\n          i_create_year: new Date().getFullYear(),\r\n          //创建时间-月\r\n          i_create_month: new Date().getMonth(),\r\n          //创建时间-日期\r\n          i_create_day: new Date().getDate(),\r\n          //创建人id\r\n          s_create_by: '',\r\n          //创建者姓名\r\n          s_create_name: '',\r\n          //创建人部门name\r\n          s_create_dept: '',\r\n          //创建人部门id\r\n          s_create_deptid: '',\r\n          //创建人机构id\r\n          s_create_unitid: '',\r\n          d_sealdate: '',\r\n          //创建时间\r\n          d_create_time: '',\r\n          //修改时间\r\n          d_update_time: '',\r\n          //当前流程名称\r\n          s_cur_proc_name: '',\r\n          //当前任务名称\r\n          s_cur_task_name: ''\r\n        },\r\n\r\n        url: {\r\n          optionAndBtn: '/oaBus/newTask/optionAndBtn',\r\n          currentUserMsg: '/sys/user/getUserSectionInfoByToken',\r\n          updateReadStatus: '/oaBus/taskInAct/changeStatus',\r\n          selectTaskType: '/oaBus/busModel/list',\r\n          selectTask: '/oaBus/busModel/list',\r\n          queryOaFileList: '/oaBus/oaFile/queryOaFileList',\r\n          functionQuery: '/oaBus/busFunction/list',\r\n          initSelDate: '/sys/dict/getDictByKeyObj',\r\n        }\r\n      }\r\n    },\r\n    created() {\r\n      this.initSelDate() ;\r\n      this.show();\r\n    },\r\n    methods: {\r\n      initSelDate(){\r\n        //初始化来文文种\r\n        getAction(this.url.initSelDate,{dictKey:\"recFileType\"}).then(res =>{\r\n          this.recFileTypeList = res.result ;\r\n        })\r\n        //初始化来文机关\r\n        getAction(this.url.initSelDate,{dictKey:\"recFileOrg\"}).then(res =>{\r\n          this.recFileOrgList = res.result ;\r\n        })\r\n      },\r\n      optsGet(opts) {\r\n        this.opts = opts\r\n      },\r\n      change(e) {\r\n        this.backData.i_safetylevel = e\r\n\r\n      }, changeHuanJi(e) {\r\n        console.log('=============',e)\r\n        this.backData.i_urgency = e\r\n      },\r\n      //详情页面数据\r\n      showTaskInAct(taskDetail, task) {\r\n        //查询出优先级\r\n        this.task = task\r\n        this.show(taskDetail)\r\n        //修改数据信息为已读\r\n        this.changeReadStatus()\r\n      },\r\n      show() {\r\n\r\n        for(let i = 0;i<this.optionMap.checkList.length;i++){\r\n          this.s_varchar.push(this.optionMap.checkList[i].stableColumn);\r\n        }\r\n\r\n        for (var i in this.backData) {\r\n\r\n          this.backData[i] = this.backDataRef[i]\r\n        }\r\n        this.getOaFiles(this.backData.table, this.backData.i_id);\r\n        // this.backData.table = table\r\n        this.visible = true\r\n      },\r\n      //子孙组件事件回传\r\n      watchSub(e) {\r\n        this.getOaFileList(this.backData.table, this.backData.i_id);\r\n      },\r\n      //意见id赋值  区分新增与更新\r\n      optSet(opts, key) {\r\n        for (let i in opts) {\r\n          if (opts[i].taskDefKey == key) {\r\n            this.backDataOpt.i_id = opts[i].optId\r\n          }\r\n        }\r\n      },\r\n\r\n      ok() {\r\n        this.handleCancel()\r\n      },\r\n      getOaFileList(tableName, busDataId) {\r\n        getAction(this.url.queryOaFileList,\r\n          {\r\n            tableName: tableName, busDataId: busDataId\r\n          }).then(res => {\r\n          this.oaFileList = res.result;\r\n        })\r\n      },\r\n      handleCancel() {\r\n        this.$emit('close');\r\n        this.visible = false;\r\n        this.disableSubmit = false;\r\n        //清除意见与按钮页面数据\r\n        this.$refs.taskOptRef.clear()\r\n\r\n        //刷新父页面\r\n        this.$emit('reload_todo')\r\n      }, onChange(date, dateString) {\r\n        // console.log(date, dateString);\r\n      }, onChange2(date, dateString) {\r\n        // console.log(date, dateString);\r\n      }\r\n\r\n    }\r\n  }\r\n</script>\r\n<style lang=\"less\" scoped>\r\n  input.ant-input{\r\n    height: 48px;\r\n  }\r\n\r\n  textarea.ant-input{\r\n    height: 48px;\r\n  }\r\n\r\n  /deep/ .ant-select-selection--single{\r\n    height: 48px;\r\n    padding: 8px 0;\r\n  }\r\n\r\n  /deep/ .ant-calendar-picker-input{\r\n    height: 48px;\r\n  }\r\n</style>\r\n\r\n<style>\r\n  .hoverred:hover {\r\n    color: red;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .title{\r\n    background-color: #e9ecf2 !important;\r\n    padding: 0.7% !important;\r\n    text-align: center !important;\r\n  }\r\n\r\n  .text {\r\n    padding: 10px;\r\n  }\r\n\r\n\r\n  .title  h3 {\r\n    font-weight: bolder !important;\r\n  }\r\n\r\n  .ant-btn-default{\r\n    font-weight: bolder !important;\r\n    background: rgb(178, 218, 255) !important;\r\n  }\r\n</style>"],"sourceRoot":"src/views/mytask/taskList"}]}
{"remainingRequest":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js!C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xxm\\work\\jd\\fore\\src\\views\\oaBus\\BusPageDetailDef.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xxm\\work\\jd\\fore\\src\\views\\oaBus\\BusPageDetailDef.vue","mtime":1577616664241},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js","mtime":1570779245522},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js","mtime":1570779225726}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { httpAction, getAction, deleteAction, postAction } from '@/api/manage';\nimport pick from 'lodash.pick';\nimport { JeecgListMixin } from '@/mixins/JeecgListMixin';\nimport BusPageDetailDefModal from \"./modules/BusPageDetailDefModal\";\nexport default {\n  name: \"BusPageDetailDef\",\n  mixins: [JeecgListMixin],\n  components: {\n    BusPageDetailDefModal: BusPageDetailDefModal\n  },\n  data: function data() {\n    return {\n      title: \"配置含义\",\n      visible: false,\n      iBMId: '',\n      modelWidth: '100%',\n      showFlag: false,\n      queryParam: {},\n      columns00: [{\n        dataIndex: 'stableColumn'\n      }],\n      columns1: [{\n        title: '列名',\n        align: \"center\",\n        dataIndex: 'stableColumn'\n      }, {\n        title: '列的含义',\n        align: \"center\",\n        dataIndex: 'scolumnName'\n      }, {\n        title: '数据列',\n        align: \"center\",\n        dataIndex: 'iisListtitle',\n        customRender: function customRender(text) {\n          if (text == '1' || text == 1) {\n            return \"是\";\n          } else {\n            return '否';\n          }\n        }\n      }, {\n        title: '排序',\n        align: \"center\",\n        dataIndex: 'iorder',\n        customRender: function customRender(text) {\n          if (text == null) {\n            return \"--\";\n          } else {\n            return text;\n          }\n        }\n      }, {\n        title: '操作',\n        dataIndex: 'action',\n        align: \"center\",\n        scopedSlots: {\n          customRender: 'action'\n        }\n      }],\n      columns: [{\n        title: '列名',\n        align: \"center\",\n        dataIndex: 'stableColumn'\n      }, {\n        title: '列的含义',\n        align: \"center\",\n        dataIndex: 'scolumnName'\n      }, {\n        title: '操作',\n        dataIndex: 'action',\n        align: \"center\",\n        scopedSlots: {\n          customRender: 'action'\n        }\n      }],\n      dataSource00: [{\n        stableColumn: '固定列名'\n      }],\n      dataSource2: [],\n      dataSource1: [],\n      ipagination1: {\n        current: 1,\n        pageSize: 100,\n        showTotal: function showTotal(total, range) {\n          return range[0] + \"-\" + range[1] + \" 共\" + total + \"条\";\n        },\n        showQuickJumper: true,\n        showSizeChanger: true,\n        total: 0\n      },\n      ipagination2: {\n        current: 1,\n        pageSize: 100,\n        showTotal: function showTotal(total, range) {\n          return range[0] + \"-\" + range[1] + \" 共\" + total + \"条\";\n        },\n        showQuickJumper: true,\n        showSizeChanger: true,\n        total: 0\n      },\n      procDefKv: '',\n      model: {\n        busPageDetailList: [{}]\n      },\n      labelCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 5\n        }\n      },\n      wrapperCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 16\n        }\n      },\n      confirmLoading: false,\n      form: this.$form.createForm(this),\n      validatorRules: {},\n      functionId: '',\n      pageId: '',\n      modelId: '',\n      url: {\n        add: \"/oaBus/busFunction/add\",\n        delete: \"/oaBus/busPageDetail/delete\",\n        edit: \"/oaBus/busFunction/edit\",\n        getbusPageDetailList: \"/oaBus/oaBusdata/getPageDataForm\",\n        orderTicketList: \"/test/jeecgOrderMain/queryOrderTicketListByMainId\",\n        initDetail: \"/oaBus/busPageDetail/initDetail\",\n        queryCount: \"/oaBus/busPageDetail/queryCount\",\n        list: \"/oaBus/busPageDetail/queryListByFunctionId\",\n        queryListByName: \"/oaBus/busPageDetail/queryListByName\"\n      }\n    };\n  },\n  created: function created() {\n    this.getSelection();\n  },\n  destroyed: function destroyed() {\n    this.close();\n  },\n  methods: {\n    searchTable1: function searchTable1() {\n      var _this = this;\n\n      var par = {\n        iBusFunctionId: this.functionId,\n        iBusPageId: this.pageId\n      };\n      var param = Object.assign(par, this.queryParam);\n      getAction(this.url.queryListByName, param).then(function (res) {\n        //console.log(res);\n        _this.dataSource1 = res.result;\n        _this.ipagination1.total = res.result.length;\n\n        _this.$forceUpdate();\n      }); //this.getSelection();\n    },\n    //删除数据\n    handleDelect: function handleDelect(id) {\n      var _this2 = this;\n\n      deleteAction(this.url.delete, {\n        id: id\n      }).then(function (res) {\n        _this2.refesh();\n      });\n    },\n    refesh: function refesh() {\n      this.initTabel1();\n      this.initTabel2();\n    },\n\n    /*每次进来后初始化含义*/\n    initDetail: function initDetail() {\n      var _this3 = this;\n\n      getAction(this.url.initDetail, {\n        functionId: this.functionId,\n        pageId: this.pageId,\n        modelId: this.modelId\n      }).then(function (res) {\n        //console.log(res);\n        _this3.initTabel1();\n\n        _this3.initTabel2();\n      });\n    },\n    busFunProcButOpin: function busFunProcButOpin(procButtonOpinion) {\n      this.procButtonOpinion = {};\n      this.procButtonOpinion = procButtonOpinion;\n    },\n    handleEdit: function handleEdit(records) {\n      this.$refs.busPageDetailDefModel.edit(records, this.pageId, this.functionId, this.modelId);\n    },\n    initTabel1: function initTabel1() {\n      var _this4 = this;\n\n      getAction(this.url.list, {\n        ibusFunctionId: this.functionId,\n        ibusPageId: this.pageId\n      }).then(function (res) {\n        //console.log(res);\n        _this4.dataSource1 = res.result;\n        _this4.ipagination1.total = res.result.length;\n\n        _this4.$forceUpdate();\n      });\n    },\n    initTabel2: function initTabel2() {\n      var _this5 = this;\n\n      getAction(this.url.getbusPageDetailList, {\n        pageId: this.pageId,\n        modelId: this.modelId,\n        functionId: this.functionId\n      }).then(function (res) {\n        //console.log(res);\n        _this5.dataSource2 = res.result.records;\n        _this5.ipagination2.total = res.result.records.length;\n\n        _this5.$forceUpdate();\n      });\n    },\n    show: function show(rec) {\n      this.visible = true;\n      this.title = \"含义配置：\" + rec.sname;\n      console.log(\"****\" + JSON.stringify(rec));\n      this.pageId = rec.ipageId;\n      this.functionId = rec.iid;\n      this.modelId = rec.ibusModelId;\n\n      if (this.pageId == null || this.pageId == '') {\n        this.$message.error(\"页面数据未定义，请确认数据完整！！！\");\n        this.close();\n        return;\n      }\n\n      if (this.functionId == null || this.functionId == '') {\n        this.$message.error(\"业务数据未定义，请确认数据完整！！！\");\n        this.close();\n        return;\n      }\n\n      if (this.functionId == null || this.modelId == '') {\n        this.$message.error(\"模板数据未定义，请确认数据完整！！！\");\n        this.close();\n        return;\n      }\n\n      this.initDetail();\n    },\n    add: function add() {\n      this.edit({});\n    },\n    edit: function edit(record) {\n      var _this6 = this;\n\n      this.form.resetFields();\n      this.model = Object.assign({}, record);\n      this.visible = true;\n      this.$nextTick(function () {\n        _this6.form.setFieldsValue(pick(_this6.model, 'ibusModelId', 'sname', 'ipageId', 'sbusLeftParameter', 'iisUnit', 'iisDept', 'sbusRightParameter', 'iisEditor', 'iisLimits', 'iisEs', 'iisProc', 'iprocSetId', 'screateBy', 'supdateBy'));\n      });\n    },\n    close: function close() {\n      //this.$emit('close');\n      this.ipagination1.total = '';\n      this.ipagination2.total = '';\n      this.dataSource2 = [];\n      this.dataSource1 = [];\n      this.visible = false;\n    },\n    //选择页面\n    selectPageOk: function selectPageOk(data) {\n      var _this7 = this;\n\n      this.model.ipageId = data[0];\n      this.$nextTick(function () {\n        _this7.form.setFieldsValue(pick(_this7.model, 'ipageId'));\n      });\n    },\n    handleOk: function handleOk() {\n      this.close();\n    },\n    handleCancel: function handleCancel() {\n      this.close();\n    },\n    getSelection: function getSelection() {\n      var _this8 = this;\n\n      var url = \"/oaBus/busModel/modelList\";\n      getAction(url).then(function (res) {\n        /*alert(res.result.iid);\n        console.log('----------------------------------------------------------');\n        console.log(res.result);*/\n        _this8.selectModelData = res.result;\n      });\n    }\n  }\n};",{"version":3,"sources":["BusPageDetailDef.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <a-modal :visible=\"visible\" :title=\"title\" :width=\"1200\" @ok=\"handleOk\" @cancel=\"handleCancel\">\r\n\r\n    <!--<div style=\"padding:20px;\"  v-show=\"showFlag\" class=\"table-operator\">\r\n      <a-button type=\"primary\" @click=\"handleSaveAll\" >生成含义</a-button>\r\n    </div>  -->\r\n    <div style=\"height: 550px;overflow: auto\">\r\n      <div style=\"width: 95%\">\r\n\r\n\r\n        <div class=\"table-page-search-wrapper\">\r\n          <a-form layout=\"inline\">\r\n            <a-row :gutter=\"24\">\r\n              <a-col :md=\"6\" :sm=\"8\">\r\n                <a-form-item label=\"列名\">\r\n                  <a-input placeholder=\"请输入列名\" v-model=\"queryParam.sTableColumn\"></a-input>\r\n                </a-form-item>\r\n              </a-col>\r\n              <a-col :md=\"6\" :sm=\"8\">\r\n                <a-form-item label=\"列的含义\">\r\n                  <a-input placeholder=\"请输入列的含义\" v-model=\"queryParam.sColumnName\"></a-input>\r\n                </a-form-item>\r\n              </a-col>\r\n              <a-col :md=\"6\" :sm=\"8\">\r\n            <span style=\"float: left;overflow: hidden;\" class=\"table-page-search-submitButtons\">\r\n              <a-button type=\"primary\" @click=\"searchTable1\" icon=\"search\">查询</a-button>\r\n              <a-button type=\"primary\" @click=\"refesh\" icon=\"reload\" style=\"margin-left: 8px\">重置</a-button>\r\n            </span>\r\n              </a-col>\r\n\r\n            </a-row>\r\n          </a-form>\r\n        </div>\r\n        <div style=\"padding-left:20px;\" class=\"table-operator\">\r\n          <h3>自定义列名</h3>\r\n        </div>\r\n        <a-table\r\n          ref=\"table\"\r\n          size=\"middle\"\r\n          bordered\r\n\r\n          rowKey=\"index\"\r\n          :columns=\"columns1\"\r\n          :dataSource=\"dataSource1\"\r\n          :pagination=\"ipagination1\"\r\n          :loading=\"loading\"\r\n          @change=\"handleTableChange\">\r\n        <span slot=\"action\" slot-scope=\"text, record\">\r\n          <a @click=\"handleEdit(record)\">编辑</a>\r\n          <a-divider type=\"vertical\"/>\r\n          <a @click=\"handleDelect(record.iid)\">删除</a>\r\n        </span>\r\n        </a-table>\r\n        <a-table\r\n          rowKey=\"index\"\r\n          :columns=\"columns00\"\r\n          :dataSource=\"dataSource00\"\r\n          :pagination=\"false\"\r\n          :loading=\"loading\"\r\n          :showAlertInfo=\"false\"\r\n          :showHeader=\"false\"\r\n          :expandIconAsCell=\"false\"\r\n        >\r\n          <a-table\r\n            slot=\"expandedRowRender\"\r\n            ref=\"table\"\r\n            size=\"middle\"\r\n            bordered\r\n            rowKey=\"index\"\r\n            :columns=\"columns\"\r\n            :dataSource=\"dataSource2\"\r\n            :pagination=\"ipagination2\"\r\n            :loading=\"loading\">\r\n        <span slot=\"action\" slot-scope=\"text, record\">\r\n          <a @click=\"handleEdit(record)\">编辑</a>\r\n        </span>\r\n\r\n          </a-table>\r\n        </a-table>\r\n      </div>\r\n\r\n      <bus-page-detail-def-modal ref=\"busPageDetailDefModel\" @loading=\"refesh\" @ok=\"refesh\"/>\r\n    </div>\r\n  </a-modal>\r\n</template>\r\n\r\n<script>\r\n  import {httpAction, getAction, deleteAction, postAction} from '@/api/manage'\r\n  import pick from 'lodash.pick'\r\n  import {JeecgListMixin} from '@/mixins/JeecgListMixin'\r\n  import BusPageDetailDefModal from \"./modules/BusPageDetailDefModal\";\r\n\r\n  export default {\r\n    name: \"BusPageDetailDef\",\r\n    mixins: [JeecgListMixin],\r\n    components: {\r\n      BusPageDetailDefModal\r\n    },\r\n    data() {\r\n      return {\r\n        title: \"配置含义\",\r\n        visible: false,\r\n        iBMId: '',\r\n        modelWidth: '100%',\r\n        showFlag: false,\r\n        queryParam: {},\r\n        columns00: [\r\n          {\r\n            dataIndex: 'stableColumn'\r\n          }\r\n        ],\r\n        columns1: [\r\n          {\r\n            title: '列名',\r\n            align: \"center\",\r\n            dataIndex: 'stableColumn'\r\n          },\r\n          {\r\n            title: '列的含义',\r\n            align: \"center\",\r\n            dataIndex: 'scolumnName'\r\n          },\r\n          {\r\n            title: '数据列',\r\n            align: \"center\",\r\n            dataIndex: 'iisListtitle',\r\n            customRender: (text) => {\r\n              if (text == '1' || text == 1) {\r\n                return \"是\"\r\n              } else {\r\n                return '否'\r\n              }\r\n            }\r\n          },\r\n          {\r\n            title: '排序',\r\n            align: \"center\",\r\n            dataIndex: 'iorder',\r\n            customRender: (text) => {\r\n              if (text == null) {\r\n                return \"--\"\r\n              } else {\r\n                return text\r\n              }\r\n            }\r\n          },\r\n          {\r\n            title: '操作',\r\n            dataIndex: 'action',\r\n            align: \"center\",\r\n            scopedSlots: {customRender: 'action'},\r\n          }\r\n        ],\r\n        columns: [\r\n          {\r\n            title: '列名',\r\n            align: \"center\",\r\n            dataIndex: 'stableColumn'\r\n          },\r\n          {\r\n            title: '列的含义',\r\n            align: \"center\",\r\n            dataIndex: 'scolumnName'\r\n          },\r\n          {\r\n            title: '操作',\r\n            dataIndex: 'action',\r\n            align: \"center\",\r\n            scopedSlots: {customRender: 'action'},\r\n          }\r\n        ],\r\n        dataSource00: [\r\n          {\r\n            stableColumn: '固定列名',\r\n          }\r\n        ],\r\n        dataSource2: [],\r\n        dataSource1: [],\r\n        ipagination1: {\r\n          current: 1,\r\n          pageSize: 100,\r\n          showTotal: (total, range) => {\r\n            return range[0] + \"-\" + range[1] + \" 共\" + total + \"条\"\r\n          },\r\n          showQuickJumper: true,\r\n          showSizeChanger: true,\r\n          total: 0\r\n        },\r\n        ipagination2: {\r\n          current: 1,\r\n          pageSize: 100,\r\n          showTotal: (total, range) => {\r\n            return range[0] + \"-\" + range[1] + \" 共\" + total + \"条\"\r\n          },\r\n          showQuickJumper: true,\r\n          showSizeChanger: true,\r\n          total: 0\r\n        },\r\n        procDefKv: '',\r\n        model: {busPageDetailList: [{}]},\r\n        labelCol: {\r\n          xs: {span: 24},\r\n          sm: {span: 5},\r\n        },\r\n        wrapperCol: {\r\n          xs: {span: 24},\r\n          sm: {span: 16},\r\n        },\r\n        confirmLoading: false,\r\n        form: this.$form.createForm(this),\r\n        validatorRules: {},\r\n        functionId: '',\r\n        pageId: '',\r\n        modelId: '',\r\n        url: {\r\n          add: \"/oaBus/busFunction/add\",\r\n          delete: \"/oaBus/busPageDetail/delete\",\r\n          edit: \"/oaBus/busFunction/edit\",\r\n          getbusPageDetailList: \"/oaBus/oaBusdata/getPageDataForm\",\r\n          orderTicketList: \"/test/jeecgOrderMain/queryOrderTicketListByMainId\",\r\n          initDetail: \"/oaBus/busPageDetail/initDetail\",\r\n          queryCount: \"/oaBus/busPageDetail/queryCount\",\r\n          list: \"/oaBus/busPageDetail/queryListByFunctionId\",\r\n          queryListByName: \"/oaBus/busPageDetail/queryListByName\",\r\n        },\r\n      }\r\n    },\r\n    created() {\r\n      this.getSelection();\r\n    },\r\n\r\n    destroyed() {\r\n      this.close();\r\n    },\r\n    methods: {\r\n      searchTable1() {\r\n        let par = {iBusFunctionId: this.functionId, iBusPageId: this.pageId};\r\n        let param = Object.assign(par, this.queryParam)\r\n        getAction(this.url.queryListByName, param).then((res) => {\r\n          //console.log(res);\r\n          this.dataSource1 = res.result;\r\n          this.ipagination1.total = res.result.length;\r\n          this.$forceUpdate()\r\n        })\r\n        //this.getSelection();\r\n      },\r\n      //删除数据\r\n      handleDelect(id) {\r\n\r\n        deleteAction(this.url.delete, {id: id}).then(res => {\r\n          this.refesh()\r\n        })\r\n      },\r\n      refesh() {\r\n        this.initTabel1();\r\n        this.initTabel2();\r\n      },\r\n      /*每次进来后初始化含义*/\r\n      initDetail() {\r\n        getAction(this.url.initDetail, {\r\n          functionId: this.functionId,\r\n          pageId: this.pageId,\r\n          modelId: this.modelId\r\n        }).then((res) => {\r\n          //console.log(res);\r\n          this.initTabel1();\r\n          this.initTabel2();\r\n        })\r\n      },\r\n      busFunProcButOpin(procButtonOpinion) {\r\n        this.procButtonOpinion = {};\r\n        this.procButtonOpinion = procButtonOpinion;\r\n      },\r\n      handleEdit(records) {\r\n        this.$refs.busPageDetailDefModel.edit(records, this.pageId, this.functionId, this.modelId);\r\n      },\r\n      initTabel1() {\r\n\r\n        getAction(this.url.list, {ibusFunctionId: this.functionId, ibusPageId: this.pageId}).then((res) => {\r\n          //console.log(res);\r\n          this.dataSource1 = res.result;\r\n          this.ipagination1.total = res.result.length;\r\n          this.$forceUpdate()\r\n        })\r\n      },\r\n      initTabel2() {\r\n        getAction(this.url.getbusPageDetailList,\r\n          {pageId: this.pageId, modelId: this.modelId, functionId: this.functionId}).then((res) => {\r\n          //console.log(res);\r\n          this.dataSource2 = res.result.records;\r\n          this.ipagination2.total = res.result.records.length;\r\n          this.$forceUpdate()\r\n        })\r\n      },\r\n      show(rec) {\r\n        this.visible = true;\r\n        this.title = \"含义配置：\" + rec.sname;\r\n        console.log(\"****\" + JSON.stringify(rec))\r\n        this.pageId = rec.ipageId;\r\n        this.functionId = rec.iid;\r\n        this.modelId = rec.ibusModelId;\r\n\r\n        if (this.pageId == null || this.pageId == '') {\r\n          this.$message.error(\"页面数据未定义，请确认数据完整！！！\")\r\n          this.close()\r\n          return;\r\n        }\r\n        if (this.functionId == null || this.functionId == '') {\r\n          this.$message.error(\"业务数据未定义，请确认数据完整！！！\")\r\n          this.close();\r\n          return;\r\n        }\r\n        if (this.functionId == null || this.modelId == '') {\r\n          this.$message.error(\"模板数据未定义，请确认数据完整！！！\")\r\n          this.close();\r\n          return;\r\n        }\r\n        this.initDetail();\r\n      },\r\n\r\n      add() {\r\n        this.edit({});\r\n      },\r\n      edit(record) {\r\n        this.form.resetFields();\r\n        this.model = Object.assign({}, record);\r\n        this.visible = true;\r\n        this.$nextTick(() => {\r\n          this.form.setFieldsValue(pick(this.model, 'ibusModelId', 'sname', 'ipageId', 'sbusLeftParameter', 'iisUnit', 'iisDept', 'sbusRightParameter', 'iisEditor', 'iisLimits', 'iisEs', 'iisProc', 'iprocSetId', 'screateBy', 'supdateBy'))\r\n        });\r\n\r\n      },\r\n      close() {\r\n        //this.$emit('close');\r\n        this.ipagination1.total = '';\r\n        this.ipagination2.total = '';\r\n        this.dataSource2 = [];\r\n        this.dataSource1 = [];\r\n        this.visible = false;\r\n      },\r\n      //选择页面\r\n      selectPageOk(data) {\r\n        this.model.ipageId = data[0];\r\n        this.$nextTick(() => {\r\n          this.form.setFieldsValue(pick(this.model, 'ipageId'))\r\n        });\r\n\r\n      },\r\n      handleOk() {\r\n        this.close();\r\n      },\r\n\r\n      handleCancel() {\r\n        this.close()\r\n      },\r\n      getSelection() {\r\n        let url = \"/oaBus/busModel/modelList\";\r\n        getAction(url).then((res) => {\r\n          /*alert(res.result.iid);\r\n          console.log('----------------------------------------------------------');\r\n          console.log(res.result);*/\r\n          this.selectModelData = res.result;\r\n        })\r\n      }\r\n\r\n    }\r\n  }\r\n</script>\r\n<style scoped>\r\n  @import '~@assets/less/common.less'\r\n</style>\r\n<!--\r\n<style lang=\"less\" scoped>\r\n  .ant-card-body .table-operator{\r\n    margin-bottom: 18px;\r\n  }\r\n  .ant-table-tbody .ant-table-row td{\r\n    padding-top:15px;\r\n    padding-bottom:15px;\r\n  }\r\n  .anty-row-operator button{margin: 0 5px}\r\n  .ant-btn-danger{background-color: #ffffff}\r\n\r\n  .ant-modal-cust-warp{height: 100%}\r\n  .ant-modal-cust-warp .ant-modal-body{height:calc(100% - 110px) !important;overflow-y: auto}\r\n  .ant-modal-cust-warp .ant-modal-content{height:90% !important;overflow-y: hidden}\r\n</style>\r\n-->\r\n"],"sourceRoot":"src/views/oaBus"}]}
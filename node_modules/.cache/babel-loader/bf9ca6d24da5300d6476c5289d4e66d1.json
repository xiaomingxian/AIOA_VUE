{"remainingRequest":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js!C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xxm\\work\\jd\\fore\\src\\views\\buttons\\SuggesttionModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xxm\\work\\jd\\fore\\src\\views\\buttons\\SuggesttionModal.vue","mtime":1578292730214},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js","mtime":1570779245522},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js","mtime":1570779225726},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js","mtime":1570779245522},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js","mtime":1570779225726}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { httpAction, postAction } from '@/api/manage';\nimport pick from 'lodash.pick';\nimport { getAction } from '@/api/manage';\nimport CreateUserOpinionModal from \"../buttons/CreateUserOpinionModal\";\nexport default {\n  name: \"SuggesttionModal\",\n  components: {\n    CreateUserOpinionModal: CreateUserOpinionModal\n  },\n  data: function data() {\n    return {\n      selectedModel: '',\n      title: \"操作\",\n      areatext: '',\n      visible: false,\n      model: {},\n      labelCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 5\n        }\n      },\n      wrapperCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 16\n        }\n      },\n      backData: {},\n      confirmLoading: false,\n      routeSwitch: true,\n      opinionlist: [],\n      suggesttionLists: [{\n        id: '0',\n        scontent: '请批示'\n      }, {\n        id: '1',\n        scontent: '请审签'\n      }, {\n        id: '2',\n        scontent: '不同意'\n      }, {\n        id: '3',\n        scontent: '阅'\n      }, {\n        id: '4',\n        scontent: '同意'\n      }],\n      sUserId: 0,\n      form: this.$form.createForm(this),\n      validatorRules: {// iId:{rules: [{ required: true, message: '请输入主键id!' }]},\n      },\n      url: {\n        add: \"/button/button/putOpinion\",\n        list: '/sys_user_opinion/sysUserOpinion/getUserOpinion'\n      }\n    };\n  },\n  created: function created() {// this.opinionList();\n    // const suggesttionLists = [\n    //   {id: '0', scontent: '请批示'},\n    //   {id: '1', scontent: '请审签'},\n    //   {id: '2', scontent: '不同意'},\n    //   {id: '3', scontent: '阅'},\n    //   {id: '4', scontent: '同意'},\n    // ];\n    // let url = this.url.list;\n    // getAction(url, {sUserId: 'e9ca23d68d884d4ebb19d07889727dae'}).then((res) => {\n    //   // this.opinionlist = res.result;\n    //   // console.log(res.result);\n    //   res.result.map((item, index) => {\n    //     // console.log(item.scontent);\n    //     // console.log(item.scontent);\n    //     // console.log(index);\n    //     suggesttionLists.push({id: suggesttionLists.length, scontent: item.scontent})\n    //   });\n    //   this.suggesttionLists = suggesttionLists;\n    //   console.log(this.suggesttionLists)\n    // });\n  },\n  methods: {\n    suggest: function suggest(record) {\n      this.backData = record;\n      this.sUserId = this.backData.i_user_id;\n      this.visible = true;\n      this.opinionList();\n      this.getUserWriteOpinion();\n    },\n    getUserWriteOpinion: function getUserWriteOpinion() {\n      var _this = this;\n\n      var param = {};\n      param.i_opinion_set_id = this.backData.i_opinion_set_id;\n      param.i_bus_function_id = this.backData.i_bus_function_id;\n      param.i_busdata_id = this.backData.i_busdata_id;\n      param.i_user_id = this.backData.i_user_id;\n      param.s_task_id = this.backData.s_task_id;\n      param.s_taskdef_key = this.backData.s_taskdef_key;\n      param.table = this.backData.table;\n      postAction('oaBus/dynamic/queryById', param).then(function (res) {\n        if (res.success && res.result != null) {\n          _this.areatext = res.result.s_opinion;\n        }\n      });\n    },\n    opinionList: function opinionList() {\n      var _this2 = this;\n\n      var url = this.url.list;\n      getAction(url, {\n        sUserId: this.sUserId\n      }).then(function (res) {\n        res.result.map(function (item, index) {\n          // console.log(item.scontent);\n          // console.log(item.scontent);\n          // console.log(index);\n          _this2.suggesttionLists.push({\n            id: _this2.suggesttionLists.length,\n            scontent: item.scontent\n          });\n        }); // this.suggesttionLists = suggesttionLists;\n        // console.log(this.suggesttionLists)\n        // this.opinionlist = res.result;\n      });\n    },\n    close: function close() {\n      this.$emit('close');\n      this.visible = false;\n      this.routeSwitch = true;\n    },\n    handleOk: function handleOk() {\n      this.$emit('saveOption', this.areatext);\n      this.close();\n    },\n    handleCancel: function handleCancel() {\n      this.close();\n    },\n    //获取是否追加\n    getchangeval: function getchangeval(e) {\n      console.log(e);\n      this.routeSwitch = e;\n    },\n    selectval: function selectval(e) {\n      if (this.routeSwitch) {\n        this.areatext += this.suggesttionLists[e].scontent + ' ';\n      } else {\n        this.areatext = '';\n        this.areatext = this.suggesttionLists[e].scontent;\n      }\n    },\n    toModal: function toModal() {\n      this.$refs.userOpinionForm.show();\n      this.$refs.userOpinionForm.title = \"定制个人意见\";\n      this.$refs.userOpinionForm.disableSubmit = false;\n    }\n  }\n};",{"version":3,"sources":["SuggesttionModal.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <a-modal\r\n    :title=\"title\"\r\n    :width=\"800\"\r\n    :visible=\"visible\"\r\n    :confirmLoading=\"confirmLoading\"\r\n    okText=\"提交意见\"\r\n    @ok=\"handleOk\"\r\n    @cancel=\"handleCancel\"\r\n    cancelText=\"关闭\">\r\n\r\n    <div class=\"box\">\r\n      <div class=\"isreplace\">\r\n        <span style=\"font-weight: bolder\">是否替换：</span>\r\n        <a>\r\n          <a-switch checkedChildren=\"追加\" @change=\"getchangeval\" unCheckedChildren=\"替换\" defaultChecked v-model=\"routeSwitch\"/>\r\n        </a>\r\n        <span style=\"margin-left: 50px;font-weight: bolder\" >快捷意见</span>\r\n        <a-select v-model=\"selectedModel\" style=\"width: 260px;margin-bottom:7px; margin-left: 15px\" @change=\"selectval\"\r\n                  v-decorator=\"[ 'ibusModelId', {}]\">\r\n          <!--<a-select-option v-for=\"(item,index) in modelData\" :key=\"index\" :value=\"item.iid\">{{item.sname}}</a-select-option>-->\r\n          <a-select-option :value=\"item.id\" v-for=\"(item,index) in suggesttionLists\" :key=\"index\">{{item.scontent}}\r\n          </a-select-option>\r\n        </a-select>\r\n      </div>\r\n      <!--<a-button @click=\"toModal\" type=\"primary\" icon=\"plus\">定制个人意见</a-button>-->\r\n    </div>\r\n\r\n    <div style=\"margin-top: 30px\">\r\n    <a-textarea style=\"font-weight: bolder\" :rows=\"3\" placeholder=\"请填选意见\" v-model=\"areatext\"></a-textarea>\r\n    </div>\r\n    <create-user-opinion-modal ref=\"userOpinionForm\"></create-user-opinion-modal>\r\n\r\n  </a-modal>\r\n</template>\r\n\r\n<script>\r\n  import {httpAction,postAction} from '@/api/manage'\r\n  import pick from 'lodash.pick'\r\n  import {getAction} from '@/api/manage'\r\n  import CreateUserOpinionModal from '../buttons/CreateUserOpinionModal'\r\n\r\n  export default {\r\n    name: \"SuggesttionModal\",\r\n    components: {\r\n      CreateUserOpinionModal\r\n    },\r\n    data() {\r\n      return {\r\n        selectedModel: '',\r\n        title: \"操作\",\r\n        areatext: '',\r\n        visible: false,\r\n        model: {},\r\n        labelCol: {\r\n          xs: {span: 24},\r\n          sm: {span: 5},\r\n        },\r\n        wrapperCol: {\r\n          xs: {span: 24},\r\n          sm: {span: 16},\r\n        },\r\n        backData: {},\r\n        confirmLoading: false,\r\n        routeSwitch: true,\r\n        opinionlist: [],\r\n        suggesttionLists: [\r\n          {id: '0', scontent: '请批示'},\r\n          {id: '1', scontent: '请审签'},\r\n          {id: '2', scontent: '不同意'},\r\n          {id: '3', scontent: '阅'},\r\n          {id: '4', scontent: '同意'},\r\n        ],\r\n        sUserId: 0,\r\n        form: this.$form.createForm(this),\r\n        validatorRules: {\r\n          // iId:{rules: [{ required: true, message: '请输入主键id!' }]},\r\n        },\r\n        url: {\r\n          add: \"/button/button/putOpinion\",\r\n          list: '/sys_user_opinion/sysUserOpinion/getUserOpinion'\r\n        },\r\n      }\r\n    },\r\n    created() {\r\n      // this.opinionList();\r\n      // const suggesttionLists = [\r\n      //   {id: '0', scontent: '请批示'},\r\n      //   {id: '1', scontent: '请审签'},\r\n      //   {id: '2', scontent: '不同意'},\r\n      //   {id: '3', scontent: '阅'},\r\n      //   {id: '4', scontent: '同意'},\r\n      // ];\r\n\r\n      // let url = this.url.list;\r\n      // getAction(url, {sUserId: 'e9ca23d68d884d4ebb19d07889727dae'}).then((res) => {\r\n      //   // this.opinionlist = res.result;\r\n      //   // console.log(res.result);\r\n      //   res.result.map((item, index) => {\r\n      //     // console.log(item.scontent);\r\n      //     // console.log(item.scontent);\r\n      //     // console.log(index);\r\n      //     suggesttionLists.push({id: suggesttionLists.length, scontent: item.scontent})\r\n      //   });\r\n      //   this.suggesttionLists = suggesttionLists;\r\n      //   console.log(this.suggesttionLists)\r\n      // });\r\n    },\r\n\r\n    methods: {\r\n      suggest(record) {\r\n        this.backData = record;\r\n        this.sUserId = this.backData.i_user_id;\r\n        this.visible = true;\r\n        this.opinionList();\r\n        this.getUserWriteOpinion();\r\n      },\r\n      getUserWriteOpinion() {\r\n        let param = {};\r\n        param.i_opinion_set_id = this.backData.i_opinion_set_id;\r\n        param.i_bus_function_id = this.backData.i_bus_function_id;\r\n        param.i_busdata_id = this.backData.i_busdata_id;\r\n        param.i_user_id = this.backData.i_user_id;\r\n        param.s_task_id = this.backData.s_task_id;\r\n        param.s_taskdef_key = this.backData.s_taskdef_key;\r\n        param.table = this.backData.table;\r\n        postAction('oaBus/dynamic/queryById',param).then(res=>{\r\n          if (res.success && res.result !=null){\r\n            this.areatext = res.result.s_opinion;\r\n          }\r\n        })\r\n      },\r\n      opinionList() {\r\n        let url = this.url.list;\r\n        getAction(url, {sUserId: this.sUserId}).then((res) => {\r\n          res.result.map((item, index) => {\r\n            // console.log(item.scontent);\r\n            // console.log(item.scontent);\r\n            // console.log(index);\r\n            this.suggesttionLists.push({id: this.suggesttionLists.length, scontent: item.scontent})\r\n          });\r\n          // this.suggesttionLists = suggesttionLists;\r\n          // console.log(this.suggesttionLists)\r\n          // this.opinionlist = res.result;\r\n        })\r\n      },\r\n      close() {\r\n        this.$emit('close');\r\n        this.visible = false;\r\n        this.routeSwitch = true;\r\n      },\r\n      handleOk() {\r\n\r\n        this.$emit('saveOption', this.areatext)\r\n        this.close()\r\n\r\n      },\r\n      handleCancel() {\r\n        this.close()\r\n      },\r\n      //获取是否追加\r\n      getchangeval(e) {\r\n        console.log(e);\r\n        this.routeSwitch = e;\r\n      },\r\n      selectval(e) {\r\n        if (this.routeSwitch) {\r\n          this.areatext += this.suggesttionLists[e].scontent + ' ';\r\n        } else {\r\n          this.areatext = '';\r\n          this.areatext = this.suggesttionLists[e].scontent;\r\n        }\r\n      },\r\n      toModal: function () {\r\n        this.$refs.userOpinionForm.show();\r\n        this.$refs.userOpinionForm.title = \"定制个人意见\";\r\n        this.$refs.userOpinionForm.disableSubmit = false;\r\n      },\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .box {\r\n    width: 100%;\r\n    height: auto;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    margin-bottom: -20px;\r\n\r\n    .isreplace {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: space-between;\r\n    }\r\n  }\r\n\r\n</style>"],"sourceRoot":"src/views/buttons"}]}
{"remainingRequest":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js!C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xxm\\work\\jd\\fore\\src\\views\\mytask\\taskList\\cutFile.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xxm\\work\\jd\\fore\\src\\views\\mytask\\taskList\\cutFile.vue","mtime":1574923545356},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js","mtime":1570779245522},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js","mtime":1570779225726}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getAction, postAction } from \"../../../api/manage\";\nimport { JeecgListMixin } from \"../../../mixins/JeecgListMixin2\";\nimport taskBtn from \"../../buttons/taskBtn\";\nimport taskOpt from \"../../buttons/taskOpt\";\nimport JEditor from '@/components/jeecg/JEditor';\nexport default {\n  name: \"cutFile\",\n  mixins: [JeecgListMixin],\n  components: {\n    taskBtn: taskBtn,\n    taskOpt: taskOpt,\n    JEditor: JEditor\n  },\n  data: function data() {\n    return {\n      visible: false,\n      title: '新建收文任务',\n      confirmLoading: false,\n      detailList: null,\n      //  文档数据   字段含义\n      jeditShow: false,\n      jeditor: {\n        value: ''\n      },\n      backData: {\n        id: '',\n        key: ''\n      },\n      //fileTitle: '',\n      partname: '',\n      username: '',\n      filetime: '',\n      busDataTable: {\n        table: '',\n        i_id: '',\n        s_left_parameter: '',\n        s_unit_name: '',\n        s_dept_name: '',\n        s_middle_parameter: '',\n        s_right_parameter: '',\n        //part3\n        s_title: '',\n        // 标题\n        s_main_unit_names: '',\n        //主送单位\n        s_cc_unit_names: '',\n        //抄送单位\n        s_inside_deptnames: '',\n        //内部发送\n        s_file_num: '',\n        //\"文件字号\"\n        s_varchar3: '',\n        //\"办文依据\"\n        i_bigint1: '',\n        //印发份数\n        d_datetime1: '',\n        //\"分发日期\"\n        i_bigint2: '',\n        //正文页数\n        s_varchar1: '',\n        //校对\n        s_varchar2: '',\n        //打字\n        s_remarks: '' // 备注\n\n      },\n      busFunction: {},\n      url: {\n        selectTaskType: window._CONFIG['domianURL'] + '/oaBus/busModel/list',\n        selectTask: window._CONFIG['domianURL'] + '/oaBus/busModel/list',\n        optionAndBtn: window._CONFIG['domianURL'] + '/oaBus/newTask/optionAndBtn',\n        queryBusdata: '/oaBus/oaBusdata/queryBusdataById',\n        departurl: '/oaBus/oaBusdata/getBusDataUserDepart',\n        updateBusdata: '/oaBus/dynamic/update'\n      }\n    };\n  },\n  created: function created() {\n    //获取当前用户信息\n    var usersdata = JSON.parse(localStorage.getItem('userdata'));\n    console.log(usersdata);\n  },\n  methods: {\n    optsGet: function optsGet(opts) {\n      this.opts = opts;\n    },\n    change: function change(e) {\n      this.backData.i_safetylevel = e;\n    },\n    changeHuanJi: function changeHuanJi(e) {\n      this.backData.i_urgency = e;\n    },\n    //详情页面数据\n    showTaskInAct: function showTaskInAct(taskDetail, task) {\n      this.task = task;\n      this.show(taskDetail);\n    },\n    //页面初始化调用方法，初始化渲染页面\n    show: function show(taskDetail) {\n      var _this = this;\n\n      //查询按钮与意见框展示权限\n      var t = taskDetail;\n      console.log(taskDetail);\n      var promiseParamse = new Promise(function (resolve) {\n        //初始化方法\n        postAction(_this.url.queryBusdata, {\n          functionId: '22',\n          busdataId: JSON.stringify(t.i_id)\n        }).then(function (res) {\n          console.log(res); // 获取红头文件头部标题\n          //this.busDataTable.fileTitle = res.oaBusdata.s_left_parameter + res.oaBusdata.s_unit_name + res.oaBusdata.s_dept_name + res.oaBusdata.s_middle_parameter + res.oaBusdata.s_right_parameter;\n\n          _this.busDataTable.i_id = res.oaBusdata.i_id;\n          _this.busDataTable.table = res.optionTable.substring(0, res.optionTable.length - 8); //左侧参数\n\n          _this.busDataTable.s_left_parameter = res.oaBusdata.s_left_parameter; //机构\n\n          _this.busDataTable.s_unit_name = res.oaBusdata.s_unit_name; //部门\n\n          _this.busDataTable.s_dept_name = res.oaBusdata.s_dept_name; //插入参数（修改文头）（页面头部）\n\n          _this.busDataTable.s_middle_parameter = res.oaBusdata.s_middle_parameter; //右侧参数（页面头部）\n\n          _this.busDataTable.s_right_parameter = res.oaBusdata.s_right_parameter; //  拟稿时间\n\n          _this.filetime = res.oaBusdata.i_create_year + '-' + res.oaBusdata.i_create_month + '-' + res.oaBusdata.i_create_day; //拟稿人\n\n          _this.username = res.oaBusdata.s_create_name; //主办部门\n\n          _this.partname = res.oaBusdata.s_create_dept; // 抄送单位\n\n          _this.busDataTable.s_cc_unit_names = res.oaBusdata.s_cc_unit_names; // 标题\n\n          _this.busDataTable.s_title = res.oaBusdata.s_title; //办文依据\n\n          _this.busDataTable.s_varchar3 = res.oaBusdata.s_varchar3; //主送单位名称\n\n          _this.busDataTable.s_main_unit_names = res.oaBusdata.s_main_unit_names; //印发份数\n\n          _this.busDataTable.i_bigint1 = res.oaBusdata.i_bigint1; //分发日期\n\n          _this.busDataTable.d_datetime1 = res.oaBusdata.d_datetime1; //文件字号\n\n          _this.busDataTable.s_file_num = res.oaBusdata.s_file_num; //正文页数\n\n          _this.busDataTable.i_bigint2 = res.oaBusdata.i_bigint2; //校对\n\n          _this.busDataTable.s_varchar1 = res.oaBusdata.s_varchar1; //打字\n\n          _this.busDataTable.s_varchar2 = res.oaBusdata.s_varchar2; //备注\n\n          _this.busDataTable.s_remarks = res.oaBusdata.s_remarks;\n          console.log(res); //--------------------------\n          //  文档数据  map\n\n          var detailList = res.detailList;\n          console.log(detailList);\n          _this.detailList = detailList;\n          _this.busFunction = res.busFunction;\n\n          if (_this.busFunction.iisEditor == 1) {\n            _this.jeditShow = true;\n          } //resolove 嫁接参数\n\n\n          resolve(res);\n        });\n        _this.visible = true; // this.title = t.sname\n      }); //异步请求\n\n      promiseParamse.then(function (leastVal) {\n        console.log(leastVal); //按钮组件查询\n\n        getAction(_this.url.optionAndBtn, {\n          iprocSetId: leastVal.proSetId,\n          taskDefKey: leastVal.taskDefKey,\n          busDataId: t.i_id,\n          optionTable: leastVal.optionTable\n        }).then(function (res) {\n          //获取流程定义key用于开启任务\n          console.log(res);\n\n          if (res.success) {\n            // this.backData.key = res.result.key\n            _this.$refs.taskRef.showBtn(res.result.btn);\n\n            _this.$refs.taskOptRef.showOpt(res.result.opt);\n          } else {\n            that.$message.error('查询按钮与意见框失败');\n          }\n        });\n      });\n    },\n    save: function save() {\n      alert(\"queding\");\n      postAction(this.url.updateBusdata, {\n        'updateBusdata': this.busDataTable\n      }).then(function (res) {\n        //获取流程定义key用于开启任务\n        console.log(res);\n      });\n    },\n    handleCancel: function handleCancel() {\n      this.$emit('close');\n      this.visible = false;\n      this.disableSubmit = false; //清除富文本框数据\n\n      this.jeditor.value = ''; //清除意见与按钮页面数据\n\n      this.$refs.taskOptRef.clear(); // this.$refs.taskRef.clear()\n      //刷新父页面\n      // this.$emit('reload_todo')\n    },\n    onChange: function onChange(date, dateString) {\n      console.log(date, dateString);\n    },\n    onChange2: function onChange2(date, dateString) {\n      console.log(date, dateString);\n    }\n  }\n};",{"version":3,"sources":["cutFile.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <a-modal\r\n    :title=\"title\"\r\n    :width=\"1300\"\r\n    :visible=\"visible\"\r\n    :confirmLoading=\"confirmLoading\"\r\n    @ok=\"save\"\r\n    @cancel=\"handleCancel\"\r\n    okText=\"确定\"\r\n    cancelText=\"取消\">\r\n    <form>\r\n\r\n      <center>\r\n        <table width=\"97%\" border=\"0\">\r\n          <tr>\r\n            <td align=\"right\" colspan=\"3\" class=\"\">\r\n              机密：\r\n              <a-select style=\"width: 120px\" placeholder=\"请选择密级\" @change=\"change\">\r\n                <a-select-option value=\"1\">普通</a-select-option>\r\n                <a-select-option value=\"2\">秘密</a-select-option>\r\n                <a-select-option value=\"3\">机密</a-select-option>\r\n                <a-select-option value=\"4\">决密</a-select-option>\r\n              </a-select>\r\n\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td align=\"center\" colspan=\"2\" height=\"50\" valign=\"bottom\">\r\n              <h1 style=\"color: red; font-weight: 800; font-size: 25px\">\r\n                <!--{{fileTitle}}-->\r\n                <span >{{busDataTable.s_left_parameter}}</span>\r\n                <span >{{busDataTable.s_unit_name}}</span>\r\n                <span >{{busDataTable.s_dept_name}}</span>\r\n                <span >{{busDataTable.s_middle_parameter}}</span>\r\n                <span >{{busDataTable.s_right_parameter}}</span>\r\n              </h1>\r\n            </td>\r\n          </tr>\r\n          <center>\r\n            <!--引入意见展示框-->\r\n            <task-opt ref=\"taskOptRef\" @optsReturn=\"optsGet\"></task-opt>\r\n\r\n            <!--part3-->\r\n            <table width=\"90%\" border=\"1\">\r\n\r\n              <tr>\r\n                <td width=\"15%\">\r\n                  <center><h3>主办部门：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-input :value=\"partname\"></a-input>\r\n                </td>\r\n                <td width=\"15%\">\r\n                  <center><h3>拟稿人：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-input :value=\"username\"></a-input>\r\n                </td>\r\n              </tr>\r\n\r\n              <tr>\r\n                <td width=\"15%\">\r\n                  <center><h3>拟稿时间：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-input :value=\"filetime\"></a-input>\r\n                </td>\r\n                <td width=\"15%\">\r\n                  <center><h3>电话：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-input></a-input>\r\n                </td>\r\n              </tr>\r\n\r\n\r\n              <tr>\r\n                <td width=\"15%\">\r\n                  <center><h3>信息公开：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-select style=\"width: 160px\" placeholder=\"请选择缓急程度\">\r\n                    <a-select-option value=\"1\">普通</a-select-option>\r\n                    <a-select-option value=\"2\">工作机密</a-select-option>\r\n                  </a-select>\r\n                </td>\r\n                <td width=\"15%\">\r\n                  <center><h3>不公开理由：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-select style=\"width: 160px\" placeholder=\"请选择缓急程度\">\r\n                    <a-select-option value=\"1\">普通</a-select-option>\r\n                    <a-select-option value=\"2\">工作机密</a-select-option>\r\n                  </a-select>\r\n                </td>\r\n              </tr>\r\n\r\n            </table>\r\n\r\n            <table width=\"90%\" border=\"1\">\r\n              <tr>\r\n                <!--标题-->\r\n                <td width=\"10%\">\r\n                  <center><h3>{{detailList.s_title}}：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-input v-model=\"busDataTable.s_title\"></a-input>\r\n                </td>\r\n              </tr>\r\n              <tr>\r\n                <td width=\"15%\">\r\n                  <center><h3>{{detailList.s_main_unit_names}}：</h3></center>\r\n                </td>\r\n                <!--主送单位-->\r\n                <td>\r\n                  <a-input v-model=\"busDataTable.s_main_unit_names\"></a-input>\r\n                </td>\r\n              </tr>\r\n              <tr>\r\n                <!--抄送单位-->\r\n                <td width=\"10%\">\r\n                  <center><h3>{{detailList.s_cc_unit_names}}：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-input v-model=\"busDataTable.s_cc_unit_names\"></a-input>\r\n                </td>\r\n              </tr>\r\n\r\n              <tr>\r\n                <td width=\"10%\">\r\n                  <!--\"\"办文依据\"\"-->\r\n                  <center><h3>{{detailList.s_varchar3}}：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-input v-model=\"busDataTable.s_varchar3\"></a-input>\r\n                </td>\r\n              </tr>\r\n            </table>\r\n            <!--印发分数   分发日期   文件字号  正文页数等-->\r\n            <table width=\"90%\" border=\"1\">\r\n\r\n              <tr>\r\n                <!---印发份数-->\r\n                <td width=\"15%\">\r\n                  <center><h3>{{detailList.i_bigint1}}：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-input style=\"width: 90%\" v-model=\"busDataTable.i_bigint1\"></a-input>\r\n                  &nbsp份\r\n                </td>\r\n                <!---分发日期-->\r\n                <td width=\"15%\">\r\n                  <center><h3>{{detailList.d_datetime1}}：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-input v-model=\"busDataTable.d_datetime1\"></a-input>\r\n                </td>\r\n              </tr>\r\n\r\n              <tr>\r\n                <!---文件字号-->\r\n                <td width=\"15%\">\r\n                  <center><h3>{{detailList.s_file_num}}：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-input v-model=\"busDataTable.s_file_num\"></a-input>\r\n                </td>\r\n                <!--- 正文页数-->\r\n                <td width=\"15%\">\r\n                  <center><h3>{{detailList.i_bigint2}}：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-input v-model=\"busDataTable.i_bigint2\"></a-input>\r\n                </td>\r\n              </tr>\r\n\r\n              <tr>\r\n                <!--校对 -->\r\n                <td width=\"15%\">\r\n                  <center><h3>{{detailList.s_varchar1}}：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-input v-model=\"busDataTable.s_varchar1\"></a-input>\r\n                </td>\r\n                <!--打字 -->\r\n                <td width=\"15%\">\r\n                  <center><h3>{{detailList.s_varchar2}}：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-input v-model=\"busDataTable.s_varchar2\"></a-input>\r\n                </td>\r\n              </tr>\r\n\r\n            </table>\r\n\r\n\r\n            <table width=\"90%\" border=\"1\">\r\n              <tr>\r\n                <td width=\"15%\">\r\n                  <!--备注-->\r\n                  <center><h3>{{detailList.s_remarks}}：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-input v-model=\"busDataTable.s_remarks\"></a-input>\r\n                </td>\r\n              </tr>\r\n            </table>\r\n\r\n\r\n            <table v-show=\"jeditShow\" width=\"90%\" border=\"1\">\r\n              <tr>\r\n                <td>\r\n                  <j-editor v-model=\"jeditor.value\"/>\r\n                </td>\r\n              </tr>\r\n            </table>\r\n\r\n\r\n\r\n          </center>\r\n        </table>\r\n\r\n        <br/>\r\n        <task-btn ref=\"taskRef\" :backData=\"backData\" :backDataOpt=\"backDataOpt\" :taskMsg=\"task\" :opts=\"opts\"></task-btn>\r\n\r\n      </center>\r\n    </form>\r\n  </a-modal>\r\n</template>\r\n\r\n\r\n<script>\r\n  import {getAction, postAction} from \"../../../api/manage\";\r\n  import {JeecgListMixin} from \"../../../mixins/JeecgListMixin2\";\r\n  import taskBtn from '../../buttons/taskBtn'\r\n  import taskOpt from '../../buttons/taskOpt'\r\n  import JEditor from '@/components/jeecg/JEditor'\r\n\r\n\r\n  export default {\r\n    name: \"cutFile\",\r\n    mixins: [JeecgListMixin],\r\n    components: {\r\n      taskBtn,\r\n      taskOpt,\r\n      JEditor\r\n    },\r\n    data() {\r\n      return {\r\n        visible: false,\r\n        title: '新建收文任务',\r\n        confirmLoading: false,\r\n        detailList: null,    //  文档数据   字段含义\r\n        jeditShow : false ,\r\n        jeditor:{\r\n          value :''\r\n        },\r\n        backData: {\r\n          id: '',\r\n          key: ''\r\n        },\r\n        //fileTitle: '',\r\n        partname: '',\r\n        username: '',\r\n        filetime: '',\r\n        busDataTable: {\r\n          table : '',\r\n          i_id : '',\r\n          s_left_parameter :'',\r\n          s_unit_name : '',\r\n          s_dept_name : '',\r\n          s_middle_parameter: '',\r\n          s_right_parameter: '',\r\n          //part3\r\n          s_title: '', // 标题\r\n          s_main_unit_names: '', //主送单位\r\n          s_cc_unit_names: '',//抄送单位\r\n          s_inside_deptnames: '',//内部发送\r\n          s_file_num: '',//\"文件字号\"\r\n          s_varchar3: '',//\"办文依据\"\r\n          i_bigint1: '',//印发份数\r\n          d_datetime1: '',//\"分发日期\"\r\n          i_bigint2: '',//正文页数\r\n          s_varchar1: '',//校对\r\n          s_varchar2: '',//打字\r\n          s_remarks: '', // 备注\r\n        },\r\n        busFunction:{},\r\n        url:{\r\n          selectTaskType: window._CONFIG['domianURL'] + '/oaBus/busModel/list',\r\n          selectTask: window._CONFIG['domianURL'] + '/oaBus/busModel/list',\r\n          optionAndBtn: window._CONFIG['domianURL'] + '/oaBus/newTask/optionAndBtn',\r\n          queryBusdata: '/oaBus/oaBusdata/queryBusdataById',\r\n          departurl: '/oaBus/oaBusdata/getBusDataUserDepart',\r\n          updateBusdata: '/oaBus/dynamic/update',\r\n\r\n        }\r\n      }\r\n    },\r\n    created() {\r\n      //获取当前用户信息\r\n      let usersdata = JSON.parse(localStorage.getItem('userdata'));\r\n      console.log(usersdata);\r\n\r\n    },\r\n    methods: {\r\n      optsGet(opts) {\r\n        this.opts = opts\r\n      },\r\n      change(e) {\r\n        this.backData.i_safetylevel = e\r\n\r\n      },\r\n      changeHuanJi(e) {\r\n        this.backData.i_urgency = e\r\n      },\r\n      //详情页面数据\r\n      showTaskInAct(taskDetail, task) {\r\n        this.task = task\r\n        this.show(taskDetail)\r\n      },\r\n\r\n      //页面初始化调用方法，初始化渲染页面\r\n      show(taskDetail){\r\n        //查询按钮与意见框展示权限\r\n        let t = taskDetail\r\n        console.log(taskDetail);\r\n\r\n        let promiseParamse = new Promise((resolve) => {\r\n          //初始化方法\r\n          postAction(this.url.queryBusdata, {functionId: '22', busdataId: JSON.stringify(t.i_id),}).then((res) => {\r\n            console.log(res);\r\n\r\n            // 获取红头文件头部标题\r\n            //this.busDataTable.fileTitle = res.oaBusdata.s_left_parameter + res.oaBusdata.s_unit_name + res.oaBusdata.s_dept_name + res.oaBusdata.s_middle_parameter + res.oaBusdata.s_right_parameter;\r\n            this.busDataTable.i_id = res.oaBusdata.i_id ;\r\n            this.busDataTable.table = res.optionTable.substring(0,res.optionTable.length - 8) ;\r\n            //左侧参数\r\n            this.busDataTable.s_left_parameter = res.oaBusdata.s_left_parameter ;\r\n\r\n            //机构\r\n            this.busDataTable.s_unit_name = res.oaBusdata.s_unit_name ;\r\n            //部门\r\n            this.busDataTable.s_dept_name = res.oaBusdata.s_dept_name ;\r\n            //插入参数（修改文头）（页面头部）\r\n            this.busDataTable.s_middle_parameter = res.oaBusdata.s_middle_parameter ;\r\n            //右侧参数（页面头部）\r\n            this.busDataTable.s_right_parameter = res.oaBusdata.s_right_parameter ;\r\n\r\n            //  拟稿时间\r\n            this.filetime = res.oaBusdata.i_create_year + '-' + res.oaBusdata.i_create_month + '-' + res.oaBusdata.i_create_day;\r\n            //拟稿人\r\n            this.username = res.oaBusdata.s_create_name;\r\n            //主办部门\r\n            this.partname = res.oaBusdata.s_create_dept;\r\n            // 抄送单位\r\n            this.busDataTable.s_cc_unit_names = res.oaBusdata.s_cc_unit_names;\r\n\r\n            // 标题\r\n            this.busDataTable.s_title = res.oaBusdata.s_title;\r\n            //办文依据\r\n            this.busDataTable.s_varchar3 = res.oaBusdata.s_varchar3;\r\n            //主送单位名称\r\n            this.busDataTable.s_main_unit_names = res.oaBusdata.s_main_unit_names;\r\n            //印发份数\r\n            this.busDataTable.i_bigint1 = res.oaBusdata.i_bigint1;\r\n            //分发日期\r\n            this.busDataTable.d_datetime1 = res.oaBusdata.d_datetime1;\r\n            //文件字号\r\n            this.busDataTable.s_file_num = res.oaBusdata.s_file_num;\r\n            //正文页数\r\n            this.busDataTable.i_bigint2 = res.oaBusdata.i_bigint2;\r\n            //校对\r\n            this.busDataTable.s_varchar1 = res.oaBusdata.s_varchar1;\r\n            //打字\r\n            this.busDataTable.s_varchar2 = res.oaBusdata.s_varchar2;\r\n            //备注\r\n            this.busDataTable.s_remarks = res.oaBusdata.s_remarks;\r\n\r\n            console.log(res);\r\n\r\n            //--------------------------\r\n            //  文档数据  map\r\n            let detailList = res.detailList;\r\n            console.log(detailList);\r\n            this.detailList = detailList;\r\n            this.busFunction = res.busFunction;\r\n            if(this.busFunction.iisEditor == 1 ){\r\n\r\n              this.jeditShow = true ;\r\n            }\r\n            //resolove 嫁接参数\r\n            resolve(res);\r\n\r\n\r\n\r\n          });\r\n          this.visible = true\r\n          // this.title = t.sname\r\n        })\r\n\r\n        //异步请求\r\n        promiseParamse.then((leastVal) => {\r\n          console.log(leastVal);\r\n          //按钮组件查询\r\n          getAction(this.url.optionAndBtn, {\r\n            iprocSetId: leastVal.proSetId,\r\n            taskDefKey: leastVal.taskDefKey,\r\n            busDataId: t.i_id,\r\n            optionTable: leastVal.optionTable,\r\n          }).then(res => {\r\n            //获取流程定义key用于开启任务\r\n            console.log(res);\r\n            if (res.success) {\r\n              // this.backData.key = res.result.key\r\n              this.$refs.taskRef.showBtn(res.result.btn)\r\n              this.$refs.taskOptRef.showOpt(res.result.opt)\r\n            } else {\r\n              that.$message.error('查询按钮与意见框失败')\r\n            }\r\n          })\r\n        });\r\n\r\n      }\r\n\r\n\r\n      ,\r\n      save() {\r\n        alert(\"queding\");\r\n        postAction(this.url.updateBusdata, {\r\n          'updateBusdata': this.busDataTable\r\n        }).then(res => {\r\n          //获取流程定义key用于开启任务\r\n          console.log(res);\r\n\r\n        })\r\n\r\n\r\n      },\r\n      handleCancel() {\r\n        this.$emit('close');\r\n        this.visible = false;\r\n        this.disableSubmit = false;\r\n        //清除富文本框数据\r\n        this.jeditor.value=''\r\n        //清除意见与按钮页面数据\r\n        this.$refs.taskOptRef.clear()\r\n        // this.$refs.taskRef.clear()\r\n\r\n        //刷新父页面\r\n        // this.$emit('reload_todo')\r\n      }, onChange(date, dateString) {\r\n        console.log(date, dateString);\r\n      }, onChange2(date, dateString) {\r\n        console.log(date, dateString);\r\n      }\r\n\r\n    }\r\n  }\r\n</script>"],"sourceRoot":"src/views/mytask/taskList"}]}
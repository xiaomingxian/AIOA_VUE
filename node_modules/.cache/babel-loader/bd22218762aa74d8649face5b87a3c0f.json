{"remainingRequest":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js!C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xxm\\work\\jd\\fore\\src\\views\\mytask\\taskList\\signQutoFile.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xxm\\work\\jd\\fore\\src\\views\\mytask\\taskList\\signQutoFile.vue","mtime":1579416998997},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js","mtime":1570779245522},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js","mtime":1570779225726}],"contextDependencies":[],"result":["import _defineProperty from \"C:\\\\xxm\\\\work\\\\jd\\\\fore\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getAction, postAction } from \"../../../api/manage\";\nimport { JeecgListMixin } from \"../../../mixins/JeecgListMixin2\";\nimport ATextarea from \"ant-design-vue/es/input/TextArea\";\nimport { busdataTemplate } from \"@/views/buttons/btn-js/busdataTemplate\";\nimport moment from 'moment';\nimport SelDepartName from \"../../oaBus/pageModels/selDepartName\";\n\nfunction formatNumber(value) {\n  value += '';\n  var list = value.split('.');\n  var prefix = list[0].charAt(0) === '-' ? '-' : '';\n  var num = prefix ? list[0].slice(1) : list[0];\n  var result = '';\n\n  while (num.length > 3) {\n    result = \",\".concat(num.slice(-3)).concat(result);\n    num = num.slice(0, num.length - 3);\n  }\n\n  if (num) {\n    result = num + result;\n  }\n\n  return \"\".concat(prefix).concat(result).concat(list[1] ? \".\".concat(list[1]) : '');\n}\n\nexport default {\n  name: \"signQutoFile\",\n  mixins: [JeecgListMixin, busdataTemplate],\n  components: {\n    ATextarea: ATextarea,\n    SelDepartName: SelDepartName\n  },\n  props: {\n    backDataRef: {\n      type: Object,\n      required: false\n    },\n    detailList: {\n      type: Object,\n      required: false\n    },\n    optionMap: {\n      type: Object,\n      required: false\n    }\n  },\n  data: function data() {\n    var _backData;\n\n    return {\n      s_varchar: [],\n      // value:'',\n      visible: false,\n      title: '签报管理',\n      confirmLoading: false,\n      userData: '',\n      //代办信息\n      task: '',\n      //已办信息\n      taskDone: '',\n      detailList: null,\n      //  文档数据   字段含义\n      oaFileList: [],\n      //  文档数据   字段含义\n      //表中的数据相关值\n      backData: (_backData = {\n        //流程key\n        key: '',\n        //文号\n        // act_show: '',\n        //page ref\n        page_ref: '',\n        //业务配置表id-用于查询按钮/意见权限\n        iprocSetId: '',\n        //对应的业务数据表\n        table: 'oa_busdata70',\n        //---------------------------------- 以下为表存储字段\n        //缓急\n        i_urgency: 0,\n        //*******\n        i_id: '',\n        //拟稿人-\n        s_create_name: '',\n        //标题-\n        s_title: '',\n        //所属部门\n        s_dept_name: '',\n        //主办部门-\n        s_create_dept: '',\n        //联系电话-\n        i_phone: 0,\n        //校对\n        s_varchar1: '',\n        //封发日期\n        d_sealdate: '',\n        //校对-\n        s_varchar2: ''\n      }, _defineProperty(_backData, \"s_varchar2\", ''), _defineProperty(_backData, \"s_varchar3\", ''), _defineProperty(_backData, \"d_create_time\", ''), _defineProperty(_backData, \"i_bigint1\", ''), _defineProperty(_backData, \"i_bigint2\", ''), _defineProperty(_backData, \"s_file_num\", ''), _defineProperty(_backData, \"s_inside_deptnames\", ''), _defineProperty(_backData, \"s_remarks\", ''), _defineProperty(_backData, \"s_main_unit_names\", ''), _defineProperty(_backData, \"s_cur_proc_name\", ''), _defineProperty(_backData, \"s_cur_task_name\", ''), _defineProperty(_backData, \"i_is_important\", ''), _backData),\n      url: {\n        /*optionAndBtn: '/oaBus/newTask/optionAndBtn',\n        currentUserMsg: '/sys/user/getUserSectionInfoByToken',\n        updateReadStatus: '/oaBus/taskInAct/changeStatus',\n        selectTaskType: '/oaBus/busModel/list',\n        selectTask: '/oaBus/busModel/list',\n        queryOaFileList: '/oaBus/oaFile/queryOaFileList',\n        updateBusdata: '/oaBus/dynamic/update'*/\n      }\n    };\n  },\n  created: function created() {\n    this.show();\n  },\n  methods: {\n    // formatNumber,\n    // changeIphone(e){\n    //   const {value}=e.target;\n    //   const reg=/^-?(0|[1-9][0-9]*)(\\.[0-9]*)?$/;\n    //   if(!isNaN(value)&&reg.test(value)||value===''||value==='-'){\n    //     this.value=value;\n    //   }\n    // },\n    // blurIphone(){\n    //   const {value,changeIphone}=this;\n    //   if (value.charAt(value.length-1)==='.'||value==='-'){\n    //     changeIphone({value:value.slice(0,-1)});\n    //   }\n    // },\n    witeDepart: function witeDepart(param) {\n      this.backData.s_create_dept = param.str1;\n      this.backData.s_main_unit_names = param.str2;\n      this.backData.s_inside_deptnames = param.str3;\n    },\n    //选择主送单位\n    selDepartName: function selDepartName() {\n      //this.$refs.selDepartNameRef.show() ;\n      var param = {\n        str1: this.backData.s_create_dept,\n        str2: this.backData.s_main_unit_names,\n        str3: this.backData.s_inside_deptnames\n      };\n      this.$refs.selDepartNameRef.show(param);\n    },\n    selectInsideType: function selectInsideType(e) {\n      this.backData.s_inside_deptnames = e;\n    },\n    selectType: function selectType(e, d) {\n      console.log(\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\");\n      console.log(e);\n      this.backData.s_main_unit_names = e;\n    },\n    getDateTime4: function getDateTime4(e, datetime4) {\n      // alert(datetime4)\n      this.d_datetime4 = datetime4;\n    },\n    getDateTime5: function getDateTime5(e, d_sealdate) {\n      // alert(datetime4)\n      this.d_sealdate = d_sealdate;\n    },\n    moment: moment,\n    //时间\n    //打开附件\n    qiCao1: function qiCao1(index, fileName) {\n      var name = fileName.split('\\\\');\n      var name1 = name[name.length - 1];\n      alert(name1);\n      this.$refs.taskRef.showFujianFile2(index, name1);\n    },\n    dateFormat: function dateFormat(date) {\n      var date1 = new Date(date);\n      var Y = date1.getFullYear();\n      var M = date1.getMonth() + 1;\n      var D = date1.getDate();\n      var newTime = Y + '-' + (M < 10 ? \"0\" + M : M) + \"-\" + (D < 10 ? \"0\" + D : D) + \" \" + date1.toTimeString().substr(0, 8);\n      return newTime;\n    },\n    change: function change(e) {\n      this.backData.i_safetylevel = e;\n    },\n    changeHuanJi: function changeHuanJi(e) {\n      this.backData.i_urgency = e;\n    },\n    //详情页面数据\n    showTaskInAct: function showTaskInAct(taskDetail, task) {\n      this.task = task;\n      this.show(taskDetail); //修改数据信息为已读\n\n      this.changeReadStatus();\n    },\n    show: function show(taskDetail) {\n      for (var _i = 0; _i < this.optionMap.checkList.length; _i++) {\n        this.s_varchar.push(this.optionMap.checkList[_i].stableColumn);\n      } //业务数据赋值\n\n\n      var table = this.backData.table; // this.backData = taskDetail.data\n\n      for (var i in this.backData) {\n        this.backData[i] = this.backDataRef[i];\n      }\n\n      this.backData.table = table;\n      this.getOaFiles(this.backData.table, this.backData.i_id);\n    },\n    ok: function ok() {\n      this.handleCancel();\n    },\n    handleCancel: function handleCancel() {\n      this.$emit('close');\n      this.visible = false;\n      this.disableSubmit = false; //刷新父页面\n\n      this.$emit('reload_todo');\n    },\n    onChange: function onChange(date, dateString) {// console.log(date, dateString);\n    },\n    onChange2: function onChange2(date, dateString) {// console.log(date, dateString);\n    },\n    close: function close() {\n      this.visible = false;\n    }\n  }\n};",{"version":3,"sources":["signQutoFile.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <form>\r\n  <center>\r\n\r\n    <table width=\"100%\" border=\"1\" style=\"border:#913838;\">\r\n      <tr>\r\n        <td class=\"title\" width=\"15%\">\r\n          <!--主办部门-->\r\n          <center><h3>{{detailList.s_create_dept}}</h3></center>\r\n        </td>\r\n        <td colspan=\"2\">\r\n          <!--<a-textarea cols=\"92\" rows=\"2\" v-model=\"backData.s_create_dept\"></a-textarea>-->\r\n          <!--<a-input style=\"padding-left: 10px\" v-model=\"backData.s_create_dept\"></a-input>-->\r\n          <a-input style=\"width:85%;\" ref=\"s_create_dept\" v-on:blur=\"blurText(backData.s_create_dept,$refs.s_create_dept)\" onkeyPress=\"if(event.keyCode == 32){event.keyCode = 0;event.returnValue = false}\"  v-model=\"backData.s_create_dept\"></a-input>\r\n          <a-button style=\"width:15%;\" @click=\"selDepartName\" >选择</a-button>\r\n        </td>\r\n        <td class=\"title\" width=\"15%\">\r\n          <!--拟稿人-->\r\n          <center><h3>{{detailList.s_create_name}}</h3></center>\r\n        </td>\r\n        <td colspan=\"2\">\r\n          <!--<a-textarea cols=\"92\" rows=\"2\" v-model=\"backData.s_create_name\"></a-textarea>-->\r\n          <a-input style=\"padding-left: 10px\" ref=\"s_create_name\" v-on:blur=\"blurText(backData.s_create_name,$refs.s_create_name)\" onkeyPress=\"if(event.keyCode == 32){event.keyCode = 0;event.returnValue = false}\" v-model=\"backData.s_create_name\"></a-input>\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td class=\"title\" width=\"15%\">\r\n          <!--联系电话-->\r\n          <center><h3>{{detailList.i_phone}}</h3></center>\r\n        </td>\r\n        <td colspan=\"2\">\r\n          <!--<a-textarea cols=\"92\" rows=\"2\" v-model=\"backData.i_phone\"></a-textarea>-->\r\n          <!--:value=\"value\"-->\r\n          <!--@change=\"changeIphone\"-->\r\n          <!--@blur=\"blurIphone\"-->\r\n          <a-input\r\n            type=\"number\"\r\n            style=\"padding-left: 10px\" ref=\"i_phone\" v-on:blur=\"blurText(backData.i_phone,$refs.i_phone)\" onkeyPress=\"if(event.keyCode == 32){event.keyCode = 0;event.returnValue = false}\" v-model=\"backData.i_phone\"></a-input>\r\n        </td>\r\n        <td class=\"title\" width=\"15%\">\r\n          <!--拟稿日期-->\r\n          <center><h3>{{detailList.d_create_time}}</h3></center>\r\n        </td>\r\n        <td colspan=\"2\">\r\n          <!--<a-input style=\"padding-left: 10px\" v-model=\"backData.d_create_time\"></a-input>-->\r\n          <!--<a-date-picker @change=\"getDateTime4\" showTime=\"true\" format=\"YYYY-MM-DD HH:mm:ss\"  style=\"width: 100%\"  ></a-date-picker>-->\r\n          <a-date-picker :defaultValue=\"moment(backData.d_create_time,'YYYY-MM-DD HH:mm:ss')\"  showTime=\"true\" format=\"YYYY-MM-DD HH:mm:ss\"  style=\"width: 100%\" disabled></a-date-picker>\r\n        </td>\r\n      </tr>\r\n      <tr >\r\n        <td class=\"title\" width=\"15%\">\r\n           <!--标题-->\r\n          <center><h3>{{detailList.s_title}}</h3></center>\r\n        </td>\r\n        <td colspan=\"7\">\r\n          <a-textarea cols=\"92\" rows=\"4\" ref=\"s_title\" v-on:blur=\"blurText(backData.s_title,$refs.s_title)\" onkeyPress=\"if(event.keyCode == 32){event.keyCode = 0;event.returnValue = false}\" v-model=\"backData.s_title\"></a-textarea>\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td class=\"title\" width=\"15%\">\r\n          <!--辅办单位-->\r\n          <center><h3>{{detailList.s_main_unit_names}}</h3></center>\r\n        </td>\r\n        <td colspan=\"7\">\r\n          <!--<a-textarea cols=\"92\" rows=\"4\" v-model=\"backData.s_main_unit_names\"></a-textarea>-->\r\n          <!--<a-input style=\"padding-left: 10px\" v-model=\"backData.s_main_unit_names\"></a-input>-->\r\n\r\n          <!--<a-select style=\"width:82%\" placeholder=\"请选择主送单位\" v-model=\"backData.s_main_unit_names\" @change=\"selectType\">-->\r\n            <!--<a-select-option v-for=\"(item,index) in optionMap.s_main_unit_names_option\" :key=\"index\" :value=\"item.value\">{{item.text}}-->\r\n            <!--</a-select-option>-->\r\n          <!--</a-select>-->\r\n\r\n          <a-input style=\"width:85%;\" ref=\"s_main_unit_names\" v-on:blur=\"blurText(backData.s_main_unit_names,$refs.s_main_unit_names)\" onkeyPress=\"if(event.keyCode == 32){event.keyCode = 0;event.returnValue = false}\"  v-model=\"backData.s_main_unit_names\"></a-input>\r\n          <a-button style=\"width:15%;\" @click=\"selDepartName\" >选择</a-button>\r\n        </td>\r\n\r\n      </tr>\r\n\r\n      <tr>\r\n        <!--内部发送-->\r\n        <td class=\"title\" width=\"10%\">\r\n          <center><h3>{{detailList.s_inside_deptnames}}</h3></center>\r\n        </td>\r\n        <td colspan=\"7\">\r\n          <!--<a-input  cols=\"92\" rows=\"4\"  v-model=\"backData.s_inside_deptnames\"></a-input>-->\r\n\r\n          <!--<a-select style=\"width:82%\" placeholder=\"请选择内部发送\" v-model=\"backData.s_inside_deptnames\" @change=\"selectInsideType\">-->\r\n            <!--<a-select-option v-for=\"(item,index) in optionMap.s_inside_deptnames_option\" :key=\"index\" :value=\"item.value\">{{item.text}}-->\r\n            <!--</a-select-option>-->\r\n          <!--</a-select>-->\r\n\r\n          <a-input style=\"width:85%;\" ref=\"s_inside_deptnames\" v-on:blur=\"blurText(backData.s_inside_deptnames,$refs.s_inside_deptnames)\" onkeyPress=\"if(event.keyCode == 32){event.keyCode = 0;event.returnValue = false}\"  v-model=\"backData.s_inside_deptnames\"></a-input>\r\n          <a-button style=\"width:15%;\" @click=\"selDepartName\" >选择</a-button>\r\n        </td>\r\n      </tr>\r\n\r\n\r\n      <tr>\r\n        <td class=\"title\" width=\"15%\">\r\n          <!--文件字号-->\r\n          <center><h3>{{detailList.s_file_num}}</h3></center>\r\n        </td>\r\n        <td colspan=\"2\">\r\n          <a-textarea onkeyPress=\"if(event.keyCode == 32){event.keyCode = 0;event.returnValue = false}\" v-model=\"backData.s_file_num\"></a-textarea>\r\n          <!--<a-input cols=\"92\" rows=\"2\" v-model=\"backData.s_file_num\"></a-input>-->\r\n        </td>\r\n        <td class=\"title\" width=\"15%\">\r\n          <!--文件备注-->\r\n          <center><h3>{{detailList.s_remarks}}</h3></center>\r\n        </td>\r\n        <td colspan=\"2\">\r\n          <a-textarea onkeyPress=\"if(event.keyCode == 32){event.keyCode = 0;event.returnValue = false}\" v-model=\"backData.s_remarks\"></a-textarea>\r\n          <!--<a-input cols=\"92\" rows=\"2\" v-model=\"backData.s_remarks\"></a-input>-->\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td class=\"title\" width=\"10%\">\r\n          <center><h3>附件</h3></center>\r\n        </td>\r\n        <td colspan=\"6\" style=\"height: 80px\">\r\n          <div  v-for=\"(item,index) in oaFileList\" style=\"padding-left: 15px\">\r\n            <!--<div @click=\"openFile(9,item.sfileName)\"><span class=\"hoverred\">{{index}}、{{item.sfileName}}</span>-->\r\n            <div @click=\"qiCao1(9,item.sfilePath)\"><span class=\"hoverred\">{{index}}、{{item.sfileName}}</span>\r\n            </div>\r\n          </div>\r\n          <!--<a-input :value=\"backData.s_remarks\"></a-input>-->\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td class=\"title\" width=\"10%\">\r\n          <!--\"\"办文依据\"\"-->\r\n          <center><h3>{{detailList.s_varchar3}}</h3></center>\r\n        </td>\r\n        <td colspan=\"7\">\r\n          <a-input ref=\"s_varchar3\" v-on:blur=\"blurText(backData.s_varchar3,$refs.s_varchar3)\" onkeyPress=\"if(event.keyCode == 32){event.keyCode = 0;event.returnValue = false}\" v-model=\"backData.s_varchar3\"></a-input>\r\n        </td>\r\n      </tr>\r\n      <tr>\r\n        <td class=\"title\" width=\"15%\">\r\n          <!--印发份数-->\r\n          <center><h3>{{detailList.i_bigint1}}</h3></center>\r\n        </td>\r\n        <td colspan=\"2\">\r\n          <a-input ref=\"i_bigint1\" v-on:blur=\"blurText(backData.i_bigint1,$refs.i_bigint1)\" onkeyPress=\"if(event.keyCode == 32){event.keyCode = 0;event.returnValue = false}\" style=\"padding-left: 10px\" v-model=\"backData.i_bigint1\"></a-input>\r\n          <!--<a-textarea cols=\"92\" rows=\"5\" v-model=\"backData.s_varchar4\"></a-textarea>-->\r\n        </td>\r\n        <!--- 正文页数-->\r\n        <td class=\"title\" width=\"15%\">\r\n          <center><h3>{{detailList.i_bigint2}}</h3></center>\r\n        </td>\r\n        <td colspan=\"2\">\r\n          <a-input ref=\"i_bigint2\" v-on:blur=\"blurText(backData.i_bigint2,$refs.i_bigint2)\" onkeyPress=\"if(event.keyCode == 32){event.keyCode = 0;event.returnValue = false}\" v-model=\"backData.i_bigint2\"></a-input>\r\n        </td>\r\n      </tr>\r\n\r\n      <tr>\r\n        <!--校对 -->\r\n        <td class=\"title\" width=\"15%\">\r\n          <center><h3>{{detailList.s_varchar1}}</h3></center>\r\n        </td>\r\n        <td colspan=\"2\">\r\n          <a-input onkeyPress=\"if(event.keyCode == 32){event.keyCode = 0;event.returnValue = false}\" v-model=\"backData.s_varchar1\"></a-input>\r\n        </td>\r\n        <!--打字 -->\r\n        <td class=\"title\" width=\"15%\">\r\n          <center><h3>{{detailList.s_varchar2}}</h3></center>\r\n        </td>\r\n        <td colspan=\"2\">\r\n          <a-input onkeyPress=\"if(event.keyCode == 32){event.keyCode = 0;event.returnValue = false}\" v-model=\"backData.s_varchar2\"></a-input>\r\n        </td>\r\n      </tr>\r\n\r\n      <tr>\r\n        <td class=\"title\" width=\"15%\">\r\n          <!--封发日期-->\r\n          <center><h3>{{detailList.d_sealdate}}</h3></center>\r\n        </td>\r\n        <!--<td colspan=\"3\">-->\r\n        <!--<a-textarea cols=\"92\" rows=\"5\" v-model=\"backData.s_varchar4\"></a-textarea>-->\r\n        <td colspan=\"7\">\r\n          <!--<a-input  v-model=\"backData.d_sealdate\"></a-input>-->\r\n          <!--<a-date-picker @change=\"getDateTime5\"  showTime=\"true\" format=\"YYYY-MM-DD HH:mm:ss\"   style=\"width: 100%\"></a-date-picker>-->\r\n          <a-input onkeyPress=\"if(event.keyCode == 32){event.keyCode = 0;event.returnValue = false}\" disabled v-model=\"backData.d_sealdate\"></a-input>\r\n\r\n        </td>\r\n      </tr>\r\n    </table>\r\n\r\n  </center>\r\n\r\n    <sel-depart-name ref=\"selDepartNameRef\" @ok=\"witeDepart\"></sel-depart-name>\r\n  </form>\r\n\r\n</template>\r\n\r\n<script>\r\n  import {getAction, postAction} from \"../../../api/manage\";\r\n  import {JeecgListMixin} from \"../../../mixins/JeecgListMixin2\";\r\n  import ATextarea from \"ant-design-vue/es/input/TextArea\";\r\n  import {busdataTemplate} from \"@/views/buttons/btn-js/busdataTemplate\";\r\n  import moment from 'moment';\r\n  import SelDepartName from \"../../oaBus/pageModels/selDepartName\";\r\n\r\n  function formatNumber(value) {\r\n    value+='';\r\n    const list=value.split('.');\r\n    const prefix=list[0].charAt(0)==='-'?'-':'';\r\n    let num=prefix?list[0].slice(1):list[0];\r\n    let result='';\r\n    while (num.length>3){\r\n      result=`,${num.slice(-3)}${result}`;\r\n      num=num.slice(0,num.length-3);\r\n    }\r\n    if (num){\r\n      result=num+result;\r\n    }\r\n    return `${prefix}${result}${list[1]?`.${list[1]}`:''}`;\r\n  }\r\n\r\n  export default {\r\n    name: \"signQutoFile\",\r\n    mixins: [JeecgListMixin,busdataTemplate],\r\n    components: {\r\n      ATextarea,\r\n      SelDepartName,\r\n    },\r\n    props: {\r\n      backDataRef: {\r\n        type: Object,\r\n        required: false\r\n      },\r\n      detailList: {\r\n        type: Object,\r\n        required: false\r\n      },\r\n      optionMap: {\r\n        type: Object,\r\n        required: false\r\n      },\r\n    },\r\n    data() {\r\n      return {\r\n        s_varchar:[],\r\n        // value:'',\r\n        visible: false,\r\n        title: '签报管理',\r\n        confirmLoading: false,\r\n        userData: '',\r\n        //代办信息\r\n        task: '',\r\n        //已办信息\r\n        taskDone: '',\r\n        detailList: null,    //  文档数据   字段含义\r\n        oaFileList: [],    //  文档数据   字段含义\r\n        //表中的数据相关值\r\n        backData: {\r\n          //流程key\r\n          key: '',\r\n          //文号\r\n          // act_show: '',\r\n          //page ref\r\n          page_ref: '',\r\n          //业务配置表id-用于查询按钮/意见权限\r\n          iprocSetId: '',\r\n          //对应的业务数据表\r\n          table: 'oa_busdata70',\r\n          //---------------------------------- 以下为表存储字段\r\n\r\n          //缓急\r\n          i_urgency: 0,\r\n          //*******\r\n          i_id: '',\r\n          //拟稿人-\r\n          s_create_name: '',\r\n          //标题-\r\n          s_title:'',\r\n          //所属部门\r\n          s_dept_name: '',\r\n          //主办部门-\r\n          s_create_dept: '',\r\n          //联系电话-\r\n          i_phone: 0,\r\n          //校对\r\n          s_varchar1: '',\r\n          //封发日期\r\n          d_sealdate: '',\r\n          //校对-\r\n          s_varchar2: '',\r\n          //打字-\r\n          s_varchar2: '',\r\n          //办文依据-\r\n          s_varchar3: '',\r\n          //拟稿时间-\r\n          d_create_time: '',\r\n          //印发份数-\r\n          i_bigint1: '',\r\n          //正文页数-\r\n          i_bigint2: '',\r\n          //文件字号-\r\n          s_file_num: '',\r\n          //内部发送-\r\n          s_inside_deptnames: '',\r\n          //文件备注-\r\n          s_remarks: '',\r\n          //主送单位-\r\n          s_main_unit_names:'',\r\n          s_cur_proc_name: '',\r\n          //当前任务名称\r\n          s_cur_task_name: '',\r\n          //是否重要\r\n          i_is_important: ''\r\n        },\r\n\r\n        url: {\r\n          /*optionAndBtn: '/oaBus/newTask/optionAndBtn',\r\n          currentUserMsg: '/sys/user/getUserSectionInfoByToken',\r\n          updateReadStatus: '/oaBus/taskInAct/changeStatus',\r\n          selectTaskType: '/oaBus/busModel/list',\r\n          selectTask: '/oaBus/busModel/list',\r\n          queryOaFileList: '/oaBus/oaFile/queryOaFileList',\r\n          updateBusdata: '/oaBus/dynamic/update'*/\r\n        }\r\n      }\r\n    },\r\n    created() {\r\n      this.show();\r\n    },\r\n    methods: {\r\n      // formatNumber,\r\n      // changeIphone(e){\r\n      //   const {value}=e.target;\r\n      //   const reg=/^-?(0|[1-9][0-9]*)(\\.[0-9]*)?$/;\r\n      //   if(!isNaN(value)&&reg.test(value)||value===''||value==='-'){\r\n      //     this.value=value;\r\n      //   }\r\n      // },\r\n      // blurIphone(){\r\n      //   const {value,changeIphone}=this;\r\n      //   if (value.charAt(value.length-1)==='.'||value==='-'){\r\n      //     changeIphone({value:value.slice(0,-1)});\r\n      //   }\r\n      // },\r\n\r\n      witeDepart(param){\r\n        this.backData.s_create_dept = param.str1;\r\n        this.backData.s_main_unit_names = param.str2;\r\n        this.backData.s_inside_deptnames = param.str3;\r\n      },\r\n    //选择主送单位\r\n    selDepartName(){\r\n      //this.$refs.selDepartNameRef.show() ;\r\n      let param = {\r\n        str1:this.backData.s_create_dept,\r\n        str2:this.backData.s_main_unit_names,\r\n        str3:this.backData.s_inside_deptnames\r\n      }\r\n      this.$refs.selDepartNameRef.show(param);\r\n    },\r\n      selectInsideType(e){\r\n        this.backData.s_inside_deptnames = e;\r\n      },\r\n      selectType(e,d) {\r\n        console.log(\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\");\r\n        console.log(e);\r\n        this.backData.s_main_unit_names=e;\r\n      },\r\n      getDateTime4(e,datetime4){\r\n        // alert(datetime4)\r\n        this.d_datetime4 = datetime4;\r\n      },\r\n      getDateTime5(e,d_sealdate){\r\n        // alert(datetime4)\r\n        this.d_sealdate = d_sealdate;\r\n      },\r\n      moment,  //时间\r\n      //打开附件\r\n      qiCao1(index, fileName) {\r\n        let name = fileName.split('\\\\')\r\n        var name1 = name[name.length - 1]\r\n        alert(name1)\r\n        this.$refs.taskRef.showFujianFile2(index, name1);\r\n      },\r\n      dateFormat(date) {\r\n        let date1 = new Date(date);\r\n        let Y = date1.getFullYear();\r\n        let M = date1.getMonth() + 1;\r\n        let D = date1.getDate();\r\n        let newTime = Y + '-' + (M < 10 ? \"0\" + M : M) + \"-\" + (D < 10 ? \"0\" + D : D) + \" \" + date1.toTimeString().substr(0, 8);\r\n        return newTime;\r\n      },\r\n      change(e) {\r\n        this.backData.i_safetylevel = e\r\n      }, changeHuanJi(e) {\r\n        this.backData.i_urgency = e\r\n      },\r\n      //详情页面数据\r\n      showTaskInAct(taskDetail, task) {\r\n        this.task = task\r\n        this.show(taskDetail)\r\n        //修改数据信息为已读\r\n        this.changeReadStatus()\r\n      },\r\n      show(taskDetail) {\r\n\r\n        for(let i = 0;i<this.optionMap.checkList.length;i++){\r\n          this.s_varchar.push(this.optionMap.checkList[i].stableColumn);\r\n        }\r\n\r\n        //业务数据赋值\r\n        var table = this.backData.table\r\n        // this.backData = taskDetail.data\r\n        for (var i in this.backData) {\r\n          this.backData[i] = this.backDataRef[i]\r\n        }\r\n        this.backData.table = table\r\n        this.getOaFiles(this.backData.table, this.backData.i_id)\r\n      },\r\n\r\n      ok() {\r\n        this.handleCancel()\r\n      },\r\n\r\n      handleCancel() {\r\n        this.$emit('close');\r\n        this.visible = false;\r\n        this.disableSubmit = false;\r\n        //刷新父页面\r\n        this.$emit('reload_todo')\r\n      }, onChange(date, dateString) {\r\n        // console.log(date, dateString);\r\n      }, onChange2(date, dateString) {\r\n        // console.log(date, dateString);\r\n      },\r\n      close() {\r\n        this.visible = false;\r\n      }\r\n\r\n    }\r\n  }\r\n</script>\r\n<style lang=\"less\" scoped>\r\n  input.ant-input{\r\n    height: 48px;\r\n  }\r\n\r\n  textarea.ant-input{\r\n    height: 48px;\r\n  }\r\n\r\n  /deep/ .ant-select-selection--single{\r\n    height: 48px;\r\n    padding: 8px 0;\r\n  }\r\n\r\n  /deep/ .ant-calendar-picker-input{\r\n    height: 48px;\r\n  }\r\n</style>\r\n\r\n<style>\r\n  .hoverred:hover {\r\n    color: red;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .title{\r\n    background-color: #e9ecf2 !important;\r\n    padding: 0.7% !important;\r\n    text-align: center !important;\r\n  }\r\n\r\n  .text {\r\n    padding: 10px;\r\n  }\r\n\r\n\r\n  .title  h3 {\r\n    font-weight: bolder !important;\r\n  }\r\n\r\n  .ant-btn-default{\r\n    font-weight: bolder !important;\r\n    background: rgb(178, 218, 255) !important;\r\n  }\r\n</style>"],"sourceRoot":"src/views/mytask/taskList"}]}
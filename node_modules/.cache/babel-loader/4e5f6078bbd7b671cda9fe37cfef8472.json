{"remainingRequest":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js!C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xxm\\work\\jd\\fore\\src\\views\\template\\modules\\SuggesttionModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xxm\\work\\jd\\fore\\src\\views\\template\\modules\\SuggesttionModal.vue","mtime":1572859833553},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js","mtime":1570779245522},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js","mtime":1570779225726}],"contextDependencies":[],"result":["import _objectSpread from \"C:\\\\xxm\\\\work\\\\jd\\\\fore\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { httpAction } from '@/api/manage';\nimport pick from 'lodash.pick';\nimport moment from \"moment\";\nimport { deleteAction, getAction, downFile } from '@/api/manage';\nexport default {\n  name: \"OaTemplateModal\",\n  data: function data() {\n    return {\n      selectedModel: '',\n      title: \"操作\",\n      areatext: '',\n      visible: false,\n      upFileName: '',\n      model: {},\n      labelCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 5\n        }\n      },\n      wrapperCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 16\n        }\n      },\n      selectData: [],\n      confirmLoading: false,\n      form: this.$form.createForm(this),\n      validatorRules: {// iId:{rules: [{ required: true, message: '请输入主键id!' }]},\n      },\n      url: {\n        add: \"/papertitle/oaTemplate/add\",\n        edit: \"/papertitle/oaTemplate/edit\",\n        download: \"papertitle/oaTemplate/download\"\n      }\n    };\n  },\n  created: function created() {\n    this.getSelection();\n  },\n  methods: {\n    suggest: function suggest(record) {\n      var _this = this;\n\n      // alert(111);\n      // this.getFileNameById(record.ifileId);\n      this.form.resetFields(); // this.model = Object.assign({}, record);\n\n      this.visible = true;\n      this.$nextTick(function () {\n        _this.form.setFieldsValue(pick(_this.model, 'iid', 'itype', 'sname', 'ifileId', 'ititleRuleId', 'sremarks'));\n      });\n    },\n    close: function close() {\n      this.$emit('close');\n      this.visible = false;\n      this.upFileName = '';\n    },\n    handleOk: function handleOk() {\n      this.close();\n    },\n    handleCancel: function handleCancel() {\n      this.close();\n    },\n    selectval: function selectval(e) {\n      this.areatext = e;\n    },\n    getFileNameById: function getFileNameById(id) {\n      var _this2 = this;\n\n      var url = \"/papertitle/oaTemplate/getFileNameById\";\n      getAction(url, {\n        ifileId: id\n      }).then(function (res) {\n        _this2.upFileName = res.result.fileName;\n      });\n    },\n    getSelection: function getSelection() {\n      var _this3 = this;\n\n      var url = \"/papertitle/paperTitleSetting/paperTitleList\";\n      getAction(url).then(function (res) {\n        _this3.selectData = res.result;\n      });\n    },\n    downFileName: function downFileName(fileName) {\n      var _this4 = this;\n\n      if (!fileName || typeof fileName != \"string\") {\n        fileName = \"导出文件\";\n      }\n\n      var param = _objectSpread({}, this.queryParam);\n\n      if (this.selectedRowKeys && this.selectedRowKeys.length > 0) {\n        param['selections'] = this.selectedRowKeys.join(\",\");\n      }\n\n      console.log(\"导出参数\", param);\n      downFile(this.url.exportXlsUrl, param).then(function (data) {\n        if (!data) {\n          _this4.$message.warning(\"文件下载失败\");\n\n          return;\n        }\n\n        if (typeof window.navigator.msSaveBlob !== 'undefined') {\n          window.navigator.msSaveBlob(new Blob([data]), fileName + '.xls');\n        } else {\n          var url = window.URL.createObjectURL(new Blob([data]));\n          var link = document.createElement('a');\n          link.style.display = 'none';\n          link.href = url;\n          link.setAttribute('download', fileName + '.xls');\n          document.body.appendChild(link);\n          link.click();\n          document.body.removeChild(link); //下载完成移除元素\n\n          window.URL.revokeObjectURL(url); //释放掉blob对象\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["SuggesttionModal.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <a-modal\r\n    :title=\"title\"\r\n    :width=\"800\"\r\n    :visible=\"visible\"\r\n    :confirmLoading=\"confirmLoading\"\r\n    okText=\"提交意见\"\r\n    @ok=\"handleOk\"\r\n    @cancel=\"handleCancel\"\r\n    cancelText=\"关闭\">\r\n\r\n    <a-select v-model=\"selectedModel\" style=\"width: 260px;margin-bottom:20px;\" @change=\"selectval\"  v-decorator=\"[ 'ibusModelId', {}]\">\r\n      <!--<a-select-option v-for=\"(item,index) in modelData\" :key=\"index\" :value=\"item.iid\">{{item.sname}}</a-select-option>-->\r\n      <a-select-option value=\"你好\">你好</a-select-option>\r\n      <a-select-option value=\"我好\">我好</a-select-option>\r\n      <a-select-option value=\"大家好\">大家好</a-select-option>\r\n      <a-select-option value=\"世界好\">世界好</a-select-option>\r\n    </a-select>\r\n    <a-textarea :rows=\"6\" placeholder=\"请填选意见\" v-model=\"areatext\"></a-textarea>\r\n  </a-modal>\r\n</template>\r\n\r\n<script>\r\n  import { httpAction } from '@/api/manage'\r\n  import pick from 'lodash.pick'\r\n  import moment from \"moment\"\r\n  import { deleteAction, getAction,downFile } from '@/api/manage'\r\n  export default {\r\n    name: \"OaTemplateModal\",\r\n    data () {\r\n      return {\r\n        selectedModel:'',\r\n        title:\"操作\",\r\n        areatext:'',\r\n        visible: false,\r\n        upFileName:'',\r\n        model: {},\r\n        labelCol: {\r\n          xs: { span: 24 },\r\n          sm: { span: 5 },\r\n        },\r\n        wrapperCol: {\r\n          xs: { span: 24 },\r\n          sm: { span: 16 },\r\n        },\r\n        selectData:[],\r\n        confirmLoading: false,\r\n        form: this.$form.createForm(this),\r\n        validatorRules:{\r\n        // iId:{rules: [{ required: true, message: '请输入主键id!' }]},\r\n        },\r\n        url: {\r\n          add: \"/papertitle/oaTemplate/add\",\r\n          edit: \"/papertitle/oaTemplate/edit\",\r\n          download:\"papertitle/oaTemplate/download\"\r\n        },\r\n      }\r\n    },\r\n    created(){\r\n      this.getSelection();\r\n\r\n    },\r\n    methods: {\r\n      suggest (record) {\r\n        // alert(111);\r\n        // this.getFileNameById(record.ifileId);\r\n        this.form.resetFields();\r\n        // this.model = Object.assign({}, record);\r\n        this.visible = true;\r\n        this.$nextTick(() => {\r\n          this.form.setFieldsValue(pick(this.model,'iid','itype','sname','ifileId','ititleRuleId','sremarks'))\r\n        });\r\n      },\r\n      close () {\r\n        this.$emit('close');\r\n        this.visible = false;\r\n        this.upFileName = '';\r\n      },\r\n      handleOk () {\r\n        this.close()\r\n      },\r\n      handleCancel () {\r\n        this.close()\r\n      },\r\n      selectval(e){\r\n\r\n          this.areatext = e;\r\n      },\r\n      getFileNameById(id){\r\n        let url = \"/papertitle/oaTemplate/getFileNameById\";\r\n        getAction(url,{ifileId:id}).then((res)=>{\r\n          this.upFileName = res.result.fileName;\r\n        })\r\n      },\r\n      getSelection(){\r\n        let url = \"/papertitle/paperTitleSetting/paperTitleList\";\r\n        getAction(url).then((res)=>{\r\n          this.selectData = res.result;\r\n        })\r\n      },\r\n      downFileName(fileName){\r\n        if(!fileName || typeof fileName != \"string\"){\r\n          fileName = \"导出文件\"\r\n        }\r\n        let param = {...this.queryParam};\r\n        if(this.selectedRowKeys && this.selectedRowKeys.length>0){\r\n          param['selections'] = this.selectedRowKeys.join(\",\")\r\n        }\r\n        console.log(\"导出参数\",param)\r\n        downFile(this.url.exportXlsUrl,param).then((data)=>{\r\n          if (!data) {\r\n            this.$message.warning(\"文件下载失败\")\r\n            return\r\n          }\r\n          if (typeof window.navigator.msSaveBlob !== 'undefined') {\r\n            window.navigator.msSaveBlob(new Blob([data]), fileName+'.xls')\r\n          }else{\r\n            let url = window.URL.createObjectURL(new Blob([data]))\r\n            let link = document.createElement('a')\r\n            link.style.display = 'none'\r\n            link.href = url\r\n            link.setAttribute('download', fileName+'.xls')\r\n            document.body.appendChild(link)\r\n            link.click()\r\n            document.body.removeChild(link); //下载完成移除元素\r\n            window.URL.revokeObjectURL(url); //释放掉blob对象\r\n          }\r\n        })\r\n      }\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\r\n</style>"],"sourceRoot":"src/views/template/modules"}]}
{"remainingRequest":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xxm\\work\\jd\\fore\\src\\views\\mytask\\taskList\\cutFile.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xxm\\work\\jd\\fore\\src\\views\\mytask\\taskList\\cutFile.vue","mtime":1574923545356},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js","mtime":1570779245522},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js","mtime":1570779225726}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {getAction, postAction} from \"../../../api/manage\";\nimport {JeecgListMixin} from \"../../../mixins/JeecgListMixin2\";\nimport taskBtn from '../../buttons/taskBtn'\nimport taskOpt from '../../buttons/taskOpt'\nimport JEditor from '@/components/jeecg/JEditor'\n\n\nexport default {\n  name: \"cutFile\",\n  mixins: [JeecgListMixin],\n  components: {\n    taskBtn,\n    taskOpt,\n    JEditor\n  },\n  data() {\n    return {\n      visible: false,\n      title: '新建收文任务',\n      confirmLoading: false,\n      detailList: null,    //  文档数据   字段含义\n      jeditShow : false ,\n      jeditor:{\n        value :''\n      },\n      backData: {\n        id: '',\n        key: ''\n      },\n      //fileTitle: '',\n      partname: '',\n      username: '',\n      filetime: '',\n      busDataTable: {\n        table : '',\n        i_id : '',\n        s_left_parameter :'',\n        s_unit_name : '',\n        s_dept_name : '',\n        s_middle_parameter: '',\n        s_right_parameter: '',\n        //part3\n        s_title: '', // 标题\n        s_main_unit_names: '', //主送单位\n        s_cc_unit_names: '',//抄送单位\n        s_inside_deptnames: '',//内部发送\n        s_file_num: '',//\"文件字号\"\n        s_varchar3: '',//\"办文依据\"\n        i_bigint1: '',//印发份数\n        d_datetime1: '',//\"分发日期\"\n        i_bigint2: '',//正文页数\n        s_varchar1: '',//校对\n        s_varchar2: '',//打字\n        s_remarks: '', // 备注\n      },\n      busFunction:{},\n      url:{\n        selectTaskType: window._CONFIG['domianURL'] + '/oaBus/busModel/list',\n        selectTask: window._CONFIG['domianURL'] + '/oaBus/busModel/list',\n        optionAndBtn: window._CONFIG['domianURL'] + '/oaBus/newTask/optionAndBtn',\n        queryBusdata: '/oaBus/oaBusdata/queryBusdataById',\n        departurl: '/oaBus/oaBusdata/getBusDataUserDepart',\n        updateBusdata: '/oaBus/dynamic/update',\n\n      }\n    }\n  },\n  created() {\n    //获取当前用户信息\n    let usersdata = JSON.parse(localStorage.getItem('userdata'));\n    console.log(usersdata);\n\n  },\n  methods: {\n    optsGet(opts) {\n      this.opts = opts\n    },\n    change(e) {\n      this.backData.i_safetylevel = e\n\n    },\n    changeHuanJi(e) {\n      this.backData.i_urgency = e\n    },\n    //详情页面数据\n    showTaskInAct(taskDetail, task) {\n      this.task = task\n      this.show(taskDetail)\n    },\n\n    //页面初始化调用方法，初始化渲染页面\n    show(taskDetail){\n      //查询按钮与意见框展示权限\n      let t = taskDetail\n      console.log(taskDetail);\n\n      let promiseParamse = new Promise((resolve) => {\n        //初始化方法\n        postAction(this.url.queryBusdata, {functionId: '22', busdataId: JSON.stringify(t.i_id),}).then((res) => {\n          console.log(res);\n\n          // 获取红头文件头部标题\n          //this.busDataTable.fileTitle = res.oaBusdata.s_left_parameter + res.oaBusdata.s_unit_name + res.oaBusdata.s_dept_name + res.oaBusdata.s_middle_parameter + res.oaBusdata.s_right_parameter;\n          this.busDataTable.i_id = res.oaBusdata.i_id ;\n          this.busDataTable.table = res.optionTable.substring(0,res.optionTable.length - 8) ;\n          //左侧参数\n          this.busDataTable.s_left_parameter = res.oaBusdata.s_left_parameter ;\n\n          //机构\n          this.busDataTable.s_unit_name = res.oaBusdata.s_unit_name ;\n          //部门\n          this.busDataTable.s_dept_name = res.oaBusdata.s_dept_name ;\n          //插入参数（修改文头）（页面头部）\n          this.busDataTable.s_middle_parameter = res.oaBusdata.s_middle_parameter ;\n          //右侧参数（页面头部）\n          this.busDataTable.s_right_parameter = res.oaBusdata.s_right_parameter ;\n\n          //  拟稿时间\n          this.filetime = res.oaBusdata.i_create_year + '-' + res.oaBusdata.i_create_month + '-' + res.oaBusdata.i_create_day;\n          //拟稿人\n          this.username = res.oaBusdata.s_create_name;\n          //主办部门\n          this.partname = res.oaBusdata.s_create_dept;\n          // 抄送单位\n          this.busDataTable.s_cc_unit_names = res.oaBusdata.s_cc_unit_names;\n\n          // 标题\n          this.busDataTable.s_title = res.oaBusdata.s_title;\n          //办文依据\n          this.busDataTable.s_varchar3 = res.oaBusdata.s_varchar3;\n          //主送单位名称\n          this.busDataTable.s_main_unit_names = res.oaBusdata.s_main_unit_names;\n          //印发份数\n          this.busDataTable.i_bigint1 = res.oaBusdata.i_bigint1;\n          //分发日期\n          this.busDataTable.d_datetime1 = res.oaBusdata.d_datetime1;\n          //文件字号\n          this.busDataTable.s_file_num = res.oaBusdata.s_file_num;\n          //正文页数\n          this.busDataTable.i_bigint2 = res.oaBusdata.i_bigint2;\n          //校对\n          this.busDataTable.s_varchar1 = res.oaBusdata.s_varchar1;\n          //打字\n          this.busDataTable.s_varchar2 = res.oaBusdata.s_varchar2;\n          //备注\n          this.busDataTable.s_remarks = res.oaBusdata.s_remarks;\n\n          console.log(res);\n\n          //--------------------------\n          //  文档数据  map\n          let detailList = res.detailList;\n          console.log(detailList);\n          this.detailList = detailList;\n          this.busFunction = res.busFunction;\n          if(this.busFunction.iisEditor == 1 ){\n\n            this.jeditShow = true ;\n          }\n          //resolove 嫁接参数\n          resolve(res);\n\n\n\n        });\n        this.visible = true\n        // this.title = t.sname\n      })\n\n      //异步请求\n      promiseParamse.then((leastVal) => {\n        console.log(leastVal);\n        //按钮组件查询\n        getAction(this.url.optionAndBtn, {\n          iprocSetId: leastVal.proSetId,\n          taskDefKey: leastVal.taskDefKey,\n          busDataId: t.i_id,\n          optionTable: leastVal.optionTable,\n        }).then(res => {\n          //获取流程定义key用于开启任务\n          console.log(res);\n          if (res.success) {\n            // this.backData.key = res.result.key\n            this.$refs.taskRef.showBtn(res.result.btn)\n            this.$refs.taskOptRef.showOpt(res.result.opt)\n          } else {\n            that.$message.error('查询按钮与意见框失败')\n          }\n        })\n      });\n\n    }\n\n\n    ,\n    save() {\n      alert(\"queding\");\n      postAction(this.url.updateBusdata, {\n        'updateBusdata': this.busDataTable\n      }).then(res => {\n        //获取流程定义key用于开启任务\n        console.log(res);\n\n      })\n\n\n    },\n    handleCancel() {\n      this.$emit('close');\n      this.visible = false;\n      this.disableSubmit = false;\n      //清除富文本框数据\n      this.jeditor.value=''\n      //清除意见与按钮页面数据\n      this.$refs.taskOptRef.clear()\n      // this.$refs.taskRef.clear()\n\n      //刷新父页面\n      // this.$emit('reload_todo')\n    }, onChange(date, dateString) {\n      console.log(date, dateString);\n    }, onChange2(date, dateString) {\n      console.log(date, dateString);\n    }\n\n  }\n}\n",{"version":3,"sources":["cutFile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwOA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"cutFile.vue","sourceRoot":"src/views/mytask/taskList","sourcesContent":["<template>\r\n  <a-modal\r\n    :title=\"title\"\r\n    :width=\"1300\"\r\n    :visible=\"visible\"\r\n    :confirmLoading=\"confirmLoading\"\r\n    @ok=\"save\"\r\n    @cancel=\"handleCancel\"\r\n    okText=\"确定\"\r\n    cancelText=\"取消\">\r\n    <form>\r\n\r\n      <center>\r\n        <table width=\"97%\" border=\"0\">\r\n          <tr>\r\n            <td align=\"right\" colspan=\"3\" class=\"\">\r\n              机密：\r\n              <a-select style=\"width: 120px\" placeholder=\"请选择密级\" @change=\"change\">\r\n                <a-select-option value=\"1\">普通</a-select-option>\r\n                <a-select-option value=\"2\">秘密</a-select-option>\r\n                <a-select-option value=\"3\">机密</a-select-option>\r\n                <a-select-option value=\"4\">决密</a-select-option>\r\n              </a-select>\r\n\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td align=\"center\" colspan=\"2\" height=\"50\" valign=\"bottom\">\r\n              <h1 style=\"color: red; font-weight: 800; font-size: 25px\">\r\n                <!--{{fileTitle}}-->\r\n                <span >{{busDataTable.s_left_parameter}}</span>\r\n                <span >{{busDataTable.s_unit_name}}</span>\r\n                <span >{{busDataTable.s_dept_name}}</span>\r\n                <span >{{busDataTable.s_middle_parameter}}</span>\r\n                <span >{{busDataTable.s_right_parameter}}</span>\r\n              </h1>\r\n            </td>\r\n          </tr>\r\n          <center>\r\n            <!--引入意见展示框-->\r\n            <task-opt ref=\"taskOptRef\" @optsReturn=\"optsGet\"></task-opt>\r\n\r\n            <!--part3-->\r\n            <table width=\"90%\" border=\"1\">\r\n\r\n              <tr>\r\n                <td width=\"15%\">\r\n                  <center><h3>主办部门：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-input :value=\"partname\"></a-input>\r\n                </td>\r\n                <td width=\"15%\">\r\n                  <center><h3>拟稿人：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-input :value=\"username\"></a-input>\r\n                </td>\r\n              </tr>\r\n\r\n              <tr>\r\n                <td width=\"15%\">\r\n                  <center><h3>拟稿时间：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-input :value=\"filetime\"></a-input>\r\n                </td>\r\n                <td width=\"15%\">\r\n                  <center><h3>电话：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-input></a-input>\r\n                </td>\r\n              </tr>\r\n\r\n\r\n              <tr>\r\n                <td width=\"15%\">\r\n                  <center><h3>信息公开：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-select style=\"width: 160px\" placeholder=\"请选择缓急程度\">\r\n                    <a-select-option value=\"1\">普通</a-select-option>\r\n                    <a-select-option value=\"2\">工作机密</a-select-option>\r\n                  </a-select>\r\n                </td>\r\n                <td width=\"15%\">\r\n                  <center><h3>不公开理由：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-select style=\"width: 160px\" placeholder=\"请选择缓急程度\">\r\n                    <a-select-option value=\"1\">普通</a-select-option>\r\n                    <a-select-option value=\"2\">工作机密</a-select-option>\r\n                  </a-select>\r\n                </td>\r\n              </tr>\r\n\r\n            </table>\r\n\r\n            <table width=\"90%\" border=\"1\">\r\n              <tr>\r\n                <!--标题-->\r\n                <td width=\"10%\">\r\n                  <center><h3>{{detailList.s_title}}：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-input v-model=\"busDataTable.s_title\"></a-input>\r\n                </td>\r\n              </tr>\r\n              <tr>\r\n                <td width=\"15%\">\r\n                  <center><h3>{{detailList.s_main_unit_names}}：</h3></center>\r\n                </td>\r\n                <!--主送单位-->\r\n                <td>\r\n                  <a-input v-model=\"busDataTable.s_main_unit_names\"></a-input>\r\n                </td>\r\n              </tr>\r\n              <tr>\r\n                <!--抄送单位-->\r\n                <td width=\"10%\">\r\n                  <center><h3>{{detailList.s_cc_unit_names}}：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-input v-model=\"busDataTable.s_cc_unit_names\"></a-input>\r\n                </td>\r\n              </tr>\r\n\r\n              <tr>\r\n                <td width=\"10%\">\r\n                  <!--\"\"办文依据\"\"-->\r\n                  <center><h3>{{detailList.s_varchar3}}：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-input v-model=\"busDataTable.s_varchar3\"></a-input>\r\n                </td>\r\n              </tr>\r\n            </table>\r\n            <!--印发分数   分发日期   文件字号  正文页数等-->\r\n            <table width=\"90%\" border=\"1\">\r\n\r\n              <tr>\r\n                <!---印发份数-->\r\n                <td width=\"15%\">\r\n                  <center><h3>{{detailList.i_bigint1}}：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-input style=\"width: 90%\" v-model=\"busDataTable.i_bigint1\"></a-input>\r\n                  &nbsp份\r\n                </td>\r\n                <!---分发日期-->\r\n                <td width=\"15%\">\r\n                  <center><h3>{{detailList.d_datetime1}}：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-input v-model=\"busDataTable.d_datetime1\"></a-input>\r\n                </td>\r\n              </tr>\r\n\r\n              <tr>\r\n                <!---文件字号-->\r\n                <td width=\"15%\">\r\n                  <center><h3>{{detailList.s_file_num}}：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-input v-model=\"busDataTable.s_file_num\"></a-input>\r\n                </td>\r\n                <!--- 正文页数-->\r\n                <td width=\"15%\">\r\n                  <center><h3>{{detailList.i_bigint2}}：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-input v-model=\"busDataTable.i_bigint2\"></a-input>\r\n                </td>\r\n              </tr>\r\n\r\n              <tr>\r\n                <!--校对 -->\r\n                <td width=\"15%\">\r\n                  <center><h3>{{detailList.s_varchar1}}：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-input v-model=\"busDataTable.s_varchar1\"></a-input>\r\n                </td>\r\n                <!--打字 -->\r\n                <td width=\"15%\">\r\n                  <center><h3>{{detailList.s_varchar2}}：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-input v-model=\"busDataTable.s_varchar2\"></a-input>\r\n                </td>\r\n              </tr>\r\n\r\n            </table>\r\n\r\n\r\n            <table width=\"90%\" border=\"1\">\r\n              <tr>\r\n                <td width=\"15%\">\r\n                  <!--备注-->\r\n                  <center><h3>{{detailList.s_remarks}}：</h3></center>\r\n                </td>\r\n                <td>\r\n                  <a-input v-model=\"busDataTable.s_remarks\"></a-input>\r\n                </td>\r\n              </tr>\r\n            </table>\r\n\r\n\r\n            <table v-show=\"jeditShow\" width=\"90%\" border=\"1\">\r\n              <tr>\r\n                <td>\r\n                  <j-editor v-model=\"jeditor.value\"/>\r\n                </td>\r\n              </tr>\r\n            </table>\r\n\r\n\r\n\r\n          </center>\r\n        </table>\r\n\r\n        <br/>\r\n        <task-btn ref=\"taskRef\" :backData=\"backData\" :backDataOpt=\"backDataOpt\" :taskMsg=\"task\" :opts=\"opts\"></task-btn>\r\n\r\n      </center>\r\n    </form>\r\n  </a-modal>\r\n</template>\r\n\r\n\r\n<script>\r\n  import {getAction, postAction} from \"../../../api/manage\";\r\n  import {JeecgListMixin} from \"../../../mixins/JeecgListMixin2\";\r\n  import taskBtn from '../../buttons/taskBtn'\r\n  import taskOpt from '../../buttons/taskOpt'\r\n  import JEditor from '@/components/jeecg/JEditor'\r\n\r\n\r\n  export default {\r\n    name: \"cutFile\",\r\n    mixins: [JeecgListMixin],\r\n    components: {\r\n      taskBtn,\r\n      taskOpt,\r\n      JEditor\r\n    },\r\n    data() {\r\n      return {\r\n        visible: false,\r\n        title: '新建收文任务',\r\n        confirmLoading: false,\r\n        detailList: null,    //  文档数据   字段含义\r\n        jeditShow : false ,\r\n        jeditor:{\r\n          value :''\r\n        },\r\n        backData: {\r\n          id: '',\r\n          key: ''\r\n        },\r\n        //fileTitle: '',\r\n        partname: '',\r\n        username: '',\r\n        filetime: '',\r\n        busDataTable: {\r\n          table : '',\r\n          i_id : '',\r\n          s_left_parameter :'',\r\n          s_unit_name : '',\r\n          s_dept_name : '',\r\n          s_middle_parameter: '',\r\n          s_right_parameter: '',\r\n          //part3\r\n          s_title: '', // 标题\r\n          s_main_unit_names: '', //主送单位\r\n          s_cc_unit_names: '',//抄送单位\r\n          s_inside_deptnames: '',//内部发送\r\n          s_file_num: '',//\"文件字号\"\r\n          s_varchar3: '',//\"办文依据\"\r\n          i_bigint1: '',//印发份数\r\n          d_datetime1: '',//\"分发日期\"\r\n          i_bigint2: '',//正文页数\r\n          s_varchar1: '',//校对\r\n          s_varchar2: '',//打字\r\n          s_remarks: '', // 备注\r\n        },\r\n        busFunction:{},\r\n        url:{\r\n          selectTaskType: window._CONFIG['domianURL'] + '/oaBus/busModel/list',\r\n          selectTask: window._CONFIG['domianURL'] + '/oaBus/busModel/list',\r\n          optionAndBtn: window._CONFIG['domianURL'] + '/oaBus/newTask/optionAndBtn',\r\n          queryBusdata: '/oaBus/oaBusdata/queryBusdataById',\r\n          departurl: '/oaBus/oaBusdata/getBusDataUserDepart',\r\n          updateBusdata: '/oaBus/dynamic/update',\r\n\r\n        }\r\n      }\r\n    },\r\n    created() {\r\n      //获取当前用户信息\r\n      let usersdata = JSON.parse(localStorage.getItem('userdata'));\r\n      console.log(usersdata);\r\n\r\n    },\r\n    methods: {\r\n      optsGet(opts) {\r\n        this.opts = opts\r\n      },\r\n      change(e) {\r\n        this.backData.i_safetylevel = e\r\n\r\n      },\r\n      changeHuanJi(e) {\r\n        this.backData.i_urgency = e\r\n      },\r\n      //详情页面数据\r\n      showTaskInAct(taskDetail, task) {\r\n        this.task = task\r\n        this.show(taskDetail)\r\n      },\r\n\r\n      //页面初始化调用方法，初始化渲染页面\r\n      show(taskDetail){\r\n        //查询按钮与意见框展示权限\r\n        let t = taskDetail\r\n        console.log(taskDetail);\r\n\r\n        let promiseParamse = new Promise((resolve) => {\r\n          //初始化方法\r\n          postAction(this.url.queryBusdata, {functionId: '22', busdataId: JSON.stringify(t.i_id),}).then((res) => {\r\n            console.log(res);\r\n\r\n            // 获取红头文件头部标题\r\n            //this.busDataTable.fileTitle = res.oaBusdata.s_left_parameter + res.oaBusdata.s_unit_name + res.oaBusdata.s_dept_name + res.oaBusdata.s_middle_parameter + res.oaBusdata.s_right_parameter;\r\n            this.busDataTable.i_id = res.oaBusdata.i_id ;\r\n            this.busDataTable.table = res.optionTable.substring(0,res.optionTable.length - 8) ;\r\n            //左侧参数\r\n            this.busDataTable.s_left_parameter = res.oaBusdata.s_left_parameter ;\r\n\r\n            //机构\r\n            this.busDataTable.s_unit_name = res.oaBusdata.s_unit_name ;\r\n            //部门\r\n            this.busDataTable.s_dept_name = res.oaBusdata.s_dept_name ;\r\n            //插入参数（修改文头）（页面头部）\r\n            this.busDataTable.s_middle_parameter = res.oaBusdata.s_middle_parameter ;\r\n            //右侧参数（页面头部）\r\n            this.busDataTable.s_right_parameter = res.oaBusdata.s_right_parameter ;\r\n\r\n            //  拟稿时间\r\n            this.filetime = res.oaBusdata.i_create_year + '-' + res.oaBusdata.i_create_month + '-' + res.oaBusdata.i_create_day;\r\n            //拟稿人\r\n            this.username = res.oaBusdata.s_create_name;\r\n            //主办部门\r\n            this.partname = res.oaBusdata.s_create_dept;\r\n            // 抄送单位\r\n            this.busDataTable.s_cc_unit_names = res.oaBusdata.s_cc_unit_names;\r\n\r\n            // 标题\r\n            this.busDataTable.s_title = res.oaBusdata.s_title;\r\n            //办文依据\r\n            this.busDataTable.s_varchar3 = res.oaBusdata.s_varchar3;\r\n            //主送单位名称\r\n            this.busDataTable.s_main_unit_names = res.oaBusdata.s_main_unit_names;\r\n            //印发份数\r\n            this.busDataTable.i_bigint1 = res.oaBusdata.i_bigint1;\r\n            //分发日期\r\n            this.busDataTable.d_datetime1 = res.oaBusdata.d_datetime1;\r\n            //文件字号\r\n            this.busDataTable.s_file_num = res.oaBusdata.s_file_num;\r\n            //正文页数\r\n            this.busDataTable.i_bigint2 = res.oaBusdata.i_bigint2;\r\n            //校对\r\n            this.busDataTable.s_varchar1 = res.oaBusdata.s_varchar1;\r\n            //打字\r\n            this.busDataTable.s_varchar2 = res.oaBusdata.s_varchar2;\r\n            //备注\r\n            this.busDataTable.s_remarks = res.oaBusdata.s_remarks;\r\n\r\n            console.log(res);\r\n\r\n            //--------------------------\r\n            //  文档数据  map\r\n            let detailList = res.detailList;\r\n            console.log(detailList);\r\n            this.detailList = detailList;\r\n            this.busFunction = res.busFunction;\r\n            if(this.busFunction.iisEditor == 1 ){\r\n\r\n              this.jeditShow = true ;\r\n            }\r\n            //resolove 嫁接参数\r\n            resolve(res);\r\n\r\n\r\n\r\n          });\r\n          this.visible = true\r\n          // this.title = t.sname\r\n        })\r\n\r\n        //异步请求\r\n        promiseParamse.then((leastVal) => {\r\n          console.log(leastVal);\r\n          //按钮组件查询\r\n          getAction(this.url.optionAndBtn, {\r\n            iprocSetId: leastVal.proSetId,\r\n            taskDefKey: leastVal.taskDefKey,\r\n            busDataId: t.i_id,\r\n            optionTable: leastVal.optionTable,\r\n          }).then(res => {\r\n            //获取流程定义key用于开启任务\r\n            console.log(res);\r\n            if (res.success) {\r\n              // this.backData.key = res.result.key\r\n              this.$refs.taskRef.showBtn(res.result.btn)\r\n              this.$refs.taskOptRef.showOpt(res.result.opt)\r\n            } else {\r\n              that.$message.error('查询按钮与意见框失败')\r\n            }\r\n          })\r\n        });\r\n\r\n      }\r\n\r\n\r\n      ,\r\n      save() {\r\n        alert(\"queding\");\r\n        postAction(this.url.updateBusdata, {\r\n          'updateBusdata': this.busDataTable\r\n        }).then(res => {\r\n          //获取流程定义key用于开启任务\r\n          console.log(res);\r\n\r\n        })\r\n\r\n\r\n      },\r\n      handleCancel() {\r\n        this.$emit('close');\r\n        this.visible = false;\r\n        this.disableSubmit = false;\r\n        //清除富文本框数据\r\n        this.jeditor.value=''\r\n        //清除意见与按钮页面数据\r\n        this.$refs.taskOptRef.clear()\r\n        // this.$refs.taskRef.clear()\r\n\r\n        //刷新父页面\r\n        // this.$emit('reload_todo')\r\n      }, onChange(date, dateString) {\r\n        console.log(date, dateString);\r\n      }, onChange2(date, dateString) {\r\n        console.log(date, dateString);\r\n      }\r\n\r\n    }\r\n  }\r\n</script>"]}]}
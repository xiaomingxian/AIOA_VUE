{"remainingRequest":"D:\\ProgramFiles\\ideaIUWork\\jeecg-boot\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\ProgramFiles\\ideaIUWork\\jeecg-boot\\ant-design-vue-jeecg\\src\\views\\system\\modules\\DataLogCompareModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\ProgramFiles\\ideaIUWork\\jeecg-boot\\ant-design-vue-jeecg\\src\\views\\system\\modules\\DataLogCompareModal.vue","mtime":1568535262822},{"path":"D:\\ProgramFiles\\ideaIUWork\\jeecg-boot\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1568345883562},{"path":"D:\\ProgramFiles\\ideaIUWork\\jeecg-boot\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js","mtime":1568345858740},{"path":"D:\\ProgramFiles\\ideaIUWork\\jeecg-boot\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1568345883562},{"path":"D:\\ProgramFiles\\ideaIUWork\\jeecg-boot\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js","mtime":1568345696677}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {getAction} from '@/api/manage'\n\nexport default {\n  name: 'DataLogCompareModal',\n  data() {\n    return {\n      modalWidth: 1000,\n      modaltoggleFlag: true,\n      confirmDirty: false,\n      title: '操作',\n      visible: false,\n      model: {},\n      confirmLoading: false,\n      headers: {},\n      //版本号\n      dataVersion1Num:'',\n      dataVersion2Num:'',\n      //表头\n      columns: [\n        {\n          title: '字段名',\n          align: 'left',\n          dataIndex: 'code',\n          width: '30%',\n        }, {\n          align: 'left',\n          dataIndex: 'dataVersion1',\n          width: '30%',\n          slots: { title: 'dataVersionTitle1' },\n        }, {\n          title: '',\n          dataIndex: 'imgshow',\n          align: 'center',\n          scopedSlots: {customRender: \"avatarslot\"},\n          width: '10%',\n        }, {\n          align: 'left',\n          dataIndex: 'dataVersion2',\n          width: '30%',\n          slots: { title: 'dataVersionTitle2' },\n        }\n      ],\n      //数据集\n      dataSource: [],\n      loading: false,\n      url: {\n        queryCompareUrl: \"/sys/dataLog/queryCompareList\",\n      },\n    }\n  },\n  created() {\n\n  },\n  methods: {\n    loadData(dataId1, dataId2) {\n      this.dataSource = [];\n      let that = this;\n      getAction(that.url.queryCompareUrl, {dataId1: dataId1, dataId2: dataId2}).then((res) => {\n        if (res.success) {\n          that.dataVersion1Num = res.result[0].dataVersion;\n          that.dataVersion2Num = res.result[1].dataVersion;\n          let json1 = JSON.parse(res.result[0].dataContent);\n          let json2 = JSON.parse(res.result[1].dataContent);\n          for (var item1 in json1) {\n            for (var item2 in json2) {\n              if (item1 == item2) {\n                this.dataSource.push({\n                  code: item1,\n                  imgshow: '',\n                  dataVersion1: json1[item1],\n                  dataVersion2: json2[item2],\n                })\n              }\n            }\n          }\n        } else {\n          console.log(res.message);\n        }\n      })\n    },\n    compareModal(dataId1, dataId2) {\n      this.visible = true\n      this.loadData(dataId1, dataId2);\n    },\n    handleCancel() {\n      this.close()\n    },\n    modalFormOk() {\n    },\n    close() {\n      this.$emit('close');\n      this.visible = false;\n      this.disableSubmit = false;\n    },\n    setdataCss(record) {\n      let className = 'trcolor';\n      const dataVersion1 = record.dataVersion1;\n      const dataVersion2 = record.dataVersion2;\n      if (dataVersion1 != dataVersion2) {\n        return className;\n      }\n    },\n    getAvatarView: function (avatar) {\n      if (avatar.dataVersion1 != avatar.dataVersion2) {\n        return \"/goright.png\";\n      } else {\n        return \"\";\n      }\n    },\n  }\n}\n",{"version":3,"sources":["DataLogCompareModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DataLogCompareModal.vue","sourceRoot":"src/views/system/modules","sourcesContent":["<template>\r\n  <a-modal\r\n    :width=\"modalWidth\"\r\n    :visible=\"visible\"\r\n    :footer=\"null\"\r\n    @cancel=\"handleCancel\"\r\n    cancelText=\"关闭\">\r\n    <!--table区 -->\r\n    <div class=\"marginCss\">\r\n      <a-table\r\n        ref=\"table\"\r\n        size=\"small\"\r\n        bordered\r\n        rowKey=\"id\"\r\n        :columns=\"columns\"\r\n        :dataSource=\"dataSource\"\r\n        :rowClassName=\"setdataCss\"\r\n        :loading=\"loading\"\r\n        :scroll=\"{ y: 700 }\"\r\n        :pagination=\"false\">\r\n        <span slot=\"dataVersionTitle1\"><a-icon type=\"smile-o\" /> 版本:{{dataVersion1Num}}</span>\r\n        <span slot=\"dataVersionTitle2\"><a-icon type=\"smile-o\" /> 版本:{{dataVersion2Num}}</span>\r\n        <template slot=\"avatarslot\" slot-scope=\"text, record\">\r\n          <div class=\"anty-img-wrap\">\r\n            <img :src=\"getAvatarView(record)\"/>\r\n          </div>\r\n\r\n        </template>\r\n      </a-table>\r\n    </div>\r\n  </a-modal>\r\n</template>\r\n\r\n<script>\r\n  import {getAction} from '@/api/manage'\r\n\r\n  export default {\r\n    name: 'DataLogCompareModal',\r\n    data() {\r\n      return {\r\n        modalWidth: 1000,\r\n        modaltoggleFlag: true,\r\n        confirmDirty: false,\r\n        title: '操作',\r\n        visible: false,\r\n        model: {},\r\n        confirmLoading: false,\r\n        headers: {},\r\n        //版本号\r\n        dataVersion1Num:'',\r\n        dataVersion2Num:'',\r\n        //表头\r\n        columns: [\r\n          {\r\n            title: '字段名',\r\n            align: 'left',\r\n            dataIndex: 'code',\r\n            width: '30%',\r\n          }, {\r\n            align: 'left',\r\n            dataIndex: 'dataVersion1',\r\n            width: '30%',\r\n            slots: { title: 'dataVersionTitle1' },\r\n          }, {\r\n            title: '',\r\n            dataIndex: 'imgshow',\r\n            align: 'center',\r\n            scopedSlots: {customRender: \"avatarslot\"},\r\n            width: '10%',\r\n          }, {\r\n            align: 'left',\r\n            dataIndex: 'dataVersion2',\r\n            width: '30%',\r\n            slots: { title: 'dataVersionTitle2' },\r\n          }\r\n        ],\r\n        //数据集\r\n        dataSource: [],\r\n        loading: false,\r\n        url: {\r\n          queryCompareUrl: \"/sys/dataLog/queryCompareList\",\r\n        },\r\n      }\r\n    },\r\n    created() {\r\n\r\n    },\r\n    methods: {\r\n      loadData(dataId1, dataId2) {\r\n        this.dataSource = [];\r\n        let that = this;\r\n        getAction(that.url.queryCompareUrl, {dataId1: dataId1, dataId2: dataId2}).then((res) => {\r\n          if (res.success) {\r\n            that.dataVersion1Num = res.result[0].dataVersion;\r\n            that.dataVersion2Num = res.result[1].dataVersion;\r\n            let json1 = JSON.parse(res.result[0].dataContent);\r\n            let json2 = JSON.parse(res.result[1].dataContent);\r\n            for (var item1 in json1) {\r\n              for (var item2 in json2) {\r\n                if (item1 == item2) {\r\n                  this.dataSource.push({\r\n                    code: item1,\r\n                    imgshow: '',\r\n                    dataVersion1: json1[item1],\r\n                    dataVersion2: json2[item2],\r\n                  })\r\n                }\r\n              }\r\n            }\r\n          } else {\r\n            console.log(res.message);\r\n          }\r\n        })\r\n      },\r\n      compareModal(dataId1, dataId2) {\r\n        this.visible = true\r\n        this.loadData(dataId1, dataId2);\r\n      },\r\n      handleCancel() {\r\n        this.close()\r\n      },\r\n      modalFormOk() {\r\n      },\r\n      close() {\r\n        this.$emit('close');\r\n        this.visible = false;\r\n        this.disableSubmit = false;\r\n      },\r\n      setdataCss(record) {\r\n        let className = 'trcolor';\r\n        const dataVersion1 = record.dataVersion1;\r\n        const dataVersion2 = record.dataVersion2;\r\n        if (dataVersion1 != dataVersion2) {\r\n          return className;\r\n        }\r\n      },\r\n      getAvatarView: function (avatar) {\r\n        if (avatar.dataVersion1 != avatar.dataVersion2) {\r\n          return \"/goright.png\";\r\n        } else {\r\n          return \"\";\r\n        }\r\n      },\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .anty-img-wrap {\r\n    height: 25px;\r\n    position: relative;\r\n  }\r\n\r\n  .anty-img-wrap > img {\r\n    max-height: 100%;\r\n  }\r\n\r\n  .marginCss {\r\n    margin-top: 20px;\r\n  }\r\n\r\n  @import '../../../assets/less/index.less';\r\n</style>"]}]}
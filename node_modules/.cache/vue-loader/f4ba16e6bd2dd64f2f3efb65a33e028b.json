{"remainingRequest":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xxm\\work\\jd\\fore\\src\\views\\mytask\\taskList\\meetingNotice.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\xxm\\work\\jd\\fore\\src\\views\\mytask\\taskList\\meetingNotice.vue","mtime":1579166496787},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\css-loader\\index.js","mtime":1570780111199},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1570779225817},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\postcss-loader\\src\\index.js","mtime":1570780438513},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js","mtime":1570779225726}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.hoverred:hover {\n  color: red;\n  cursor: pointer;\n}\n\n.title{\n  background-color: #e9ecf2 !important;\n  padding: 0.7% !important;\n  text-align: center !important;\n}\n\n.text {\n  padding: 10px;\n}\n\n\n.title  h3 {\n  font-weight: bolder !important;\n}\n\n.ant-btn-default{\n  font-weight: bolder !important;\n  background: rgb(178, 218, 255) !important;\n}\n",{"version":3,"sources":["meetingNotice.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2cA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"meetingNotice.vue","sourceRoot":"src/views/mytask/taskList","sourcesContent":["<template>\r\n  <center>\r\n    <table width=\"100%\" border=\"1\" :submit=\"submit\">\r\n      <tr style=\"height: 50px;\">\r\n        <td width=\"15%\" class=\"title\">\r\n          <center><h3>{{detailList.s_create_dept}}</h3></center>\r\n        </td>\r\n        <td>\r\n          <div style=\"padding-left: 10px;\">{{backData.s_create_dept}}</div>\r\n        </td>\r\n        <td width=\"15%\" class=\"title\">\r\n          <!--登记人员-->\r\n          <centezr><h3>{{detailList.s_create_name}}</h3></centezr>\r\n        </td>\r\n        <td>\r\n          <div style=\"padding-left: 10px\">{{backData.s_create_name}}</div>\r\n        </td>\r\n\r\n      </tr>\r\n      <!--会议室申请-->\r\n      <tr style=\"height: 50px;\">\r\n        <td colspan=\"1\" class=\"title\">\r\n          <center><h3>{{detailList.s_varchar1}}</h3></center>\r\n        </td>\r\n        <td class=\"text\" colspan=\"7\">\r\n          <center>\r\n            <a-select style=\"width: 100%\" placeholder=\"请选择会议室\" ref=\"s_varchar1\" v-on:blur=\"blurText(backData.s_varchar1,$refs.s_varchar1)\" v-model=\"backData.s_varchar1\"\r\n                      @change=\"changeMeetingRoom\">\r\n              <a-select-option v-for=\"(item,index) in optionMap.s_varchar1_option\" :key=\"index\" :text=\"item.text\"\r\n                               :value=\"item.value\">{{item.text}}\r\n              </a-select-option>\r\n\r\n            </a-select>\r\n          </center>\r\n        </td>\r\n\r\n      </tr>\r\n      <!--申请时间-->\r\n      <tr style=\"height: 50px;\">\r\n        <td colspan=\"1\" class=\"title\">\r\n          <center><h3>{{detailList.d_datetime1}}</h3></center>\r\n        </td>\r\n        <td class=\"text\" colspan=\"7\">\r\n          <center>\r\n\r\n            <a-select style=\"width: 100%\" v-model=\"backData.d_datetime1\" multiple placeholder=\"请选择会议时间\" ref=\"d_datetime1\"  v-on:blur=\"blurText($event,$refs.d_datetime1)\"  @change=\"changeTime\">\r\n              <a-select-option v-for=\"(item,index) in meetingTime\" :key=\"index\" :value=\"item.dDatetime1\">\r\n                {{item.dDatetime1}}\r\n              </a-select-option>\r\n\r\n            </a-select>\r\n          </center>\r\n        </td>\r\n      </tr>\r\n      <!--会议内容-->\r\n      <tr>\r\n        <td colspan=\"1\" class=\"title\">\r\n          <center><h3>{{detailList.s_varchar2}}</h3></center>\r\n        </td>\r\n        <td class=\"text\" colspan=\"7\" height=\"100px\">\r\n          <center>\r\n            <template>\r\n              <a-textarea placeholder=\"请输入会议内容...\" ref=\"s_varchar2\" v-on:blur=\"blurText(backData.s_varchar2,$refs.s_varchar2)\" onkeyPress=\"if(event.keyCode == 32){event.keyCode = 0;event.returnValue = false}\" v-model=\"backData.s_varchar2\" style=\"height: 100px\"\r\n                          :rows=\"true\"></a-textarea>\r\n            </template>\r\n          </center>\r\n        </td>\r\n      </tr>\r\n      <!--参会人员-->\r\n      <tr style=\"height: 50px;\">\r\n        <td width=\"10%\" class=\"title\">\r\n          <center><h3>{{detailList.s_varchar4}}</h3></center>\r\n        </td>\r\n        <td colspan=\"3\">\r\n          <getpersons v-model=\"backData.s_varchar4\" :backData=\"backData\" @saveInform=\"submit\"\r\n                      @getDUS=\"getDUS\"/>\r\n        </td>\r\n      </tr>\r\n      <!--附件-->\r\n      <tr style=\"height: 50px;\">\r\n        <td width=\"10%\" class=\"title\">\r\n          <center><h3>{{detailList.s_varchar3}}</h3></center>\r\n        </td>\r\n        <td colspan=\"3\">\r\n          <div v-for=\"(item,index) in oaFileList\" style=\"padding-left: 15px\">\r\n            <div class=\"qiCao\"><span class=\"hoverred\" @click=\"qiCao1(9,item)\">{{index+1}}、{{item.sfileName}}</span>\r\n              <span class=\"delCss\" v-show=\"isShowFile\">\r\n                <img :title=\"fileBtnName(1)\" v-show =\"isSuffex(item.sfileName)\" class=\"pices\" @click.stop=\"qiCao2(10,item)\" src=\"../../../../src/assets/set.png\"/>\r\n                <img :title=\"fileBtnName(2)\" class=\"pices\" @click.stop=\"updateFileName(item)\" src=\"../../../../src/assets/setName.png\"/>\r\n                <img :title=\"fileBtnName(3)\" class=\"pices\" @click.stop=\"deleteFilesBtn(item,4)\" src=\"../../../../src/assets/delete.png\"/>\r\n                <img :title=\"fileBtnName(4)\" v-show=\"oaFileList.length > 1 && index > 0\" class=\"pices\" @click.stop=\"topFile(item,index,4)\" src=\"../../../../src/assets/top.png\"/>\r\n                <img :title=\"fileBtnName(5)\" v-show=\"oaFileList.length > 1 && index < oaFileList.length-1\" class=\"pices\" @click.stop=\"lowFile(item,index,4)\" src=\"../../../../src/assets/bottom.png\"/>\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </td>\r\n      </tr>\r\n\r\n      <!--创建时间-->\r\n      <template v-if=\"this.backData.d_create_time != timeStrings\">\r\n        <tr style=\"height: 50px;\">\r\n          <td width=\"10%\" class=\"title\">\r\n            <center><h3>{{detailList.d_create_time}}</h3></center>\r\n          </td>\r\n          <td colspan=\"3\">\r\n            <div style=\"padding-left: 10px;\">{{backData.d_create_time}}</div>\r\n          </td>\r\n        </tr>\r\n      </template>\r\n      <template v-else>\r\n        <tr style=\"height: 50px;\">\r\n          <td width=\"10%\" class=\"title\">\r\n            <center><h3>{{detailList.d_create_time}}</h3></center>\r\n          </td>\r\n          <td colspan=\"3\">\r\n            <div style=\"padding-left: 10px;\" v-model=\"backData.d_create_time\">{{ timeStrings }}</div>\r\n          </td>\r\n        </tr>\r\n      </template>\r\n    </table>\r\n    <del-time ref=\"updateFileNameModal\" @reloadAfterUpdate=\"reloadAfterUpdate\"></del-time>\r\n  </center>\r\n\r\n</template>\r\n\r\n\r\n<script>\r\n  import {getAction} from \"../../../api/manage\";\r\n  import {JeecgListMixin} from \"../../../mixins/JeecgListMixin2\";\r\n  import moment from 'moment'\r\n  import {busdataTemplate} from \"@/views/buttons/btn-js/busdataTemplate\";\r\n  import getpersons from \"../../oaBus/pageModels/meetingUser\"\r\n  import DelTime from \"../../buttons/DelTimeModal\";\r\n\r\n  export default {\r\n    name: \"meetingNotice\",\r\n    mixins: [JeecgListMixin, busdataTemplate],\r\n    components: {DelTime, getpersons},\r\n    props: {\r\n      backDataRef: {\r\n        type: Object,\r\n        required: false\r\n      },\r\n      detailList: {\r\n        type: Object,\r\n        required: false\r\n      },\r\n      optionMap: {\r\n        type: Object,\r\n        required: false\r\n      },\r\n      isShowFile:{\r\n        type: Object,\r\n        required: false\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        s_varchar:[],\r\n        userRealName: '',\r\n\r\n        value: 1,\r\n        isAllChack: false,\r\n        //会议时间\r\n        meetingTime: [],\r\n        //选择会议开始时间\r\n        startTime: '',\r\n        //会议室\r\n        address: '',\r\n        //参会人员id\r\n        meetingUserId: [],\r\n        oaFileList: [],    //  文档数据\r\n        banWenFileList:[],\r\n        visible: true,\r\n        title: '会议申请',\r\n        confirmLoading: false,\r\n        userData: '',\r\n        //代办信息\r\n        task: '',\r\n        //已办信息\r\n        taskDone: '',\r\n        opts: [],//意见框信息\r\n        meeting: '',\r\n        //意见表相关\r\n        backDataOpt: {\r\n          //回填数据id\r\n          table: 'oa_busdata40',\r\n          i_id: \"\",\r\n          i_opinion_set_id: \"\",\r\n          i_bus_function_id: \"\",\r\n          i_busdata_id: \"\",\r\n          s_name: \"\",\r\n          i_user_id: \"\",\r\n          d_sign: \"\",\r\n          s_opinion: \"\",\r\n          s_opinion_type: \"\",\r\n          s_task_id: \"\",\r\n          s_task_name: \"\",\r\n          s_overt: \"\",\r\n          i_order: \"\",\r\n          s_tpye: \"\",\r\n          s_dept_id: \"\",\r\n          s_dept_name: \"\",\r\n          s_taskdef_key: \"\"\r\n        },\r\n        oaFileList: [],    //  文档数据   字段含义\r\n        //表中的数据相关值\r\n        jeditShow: false,   //富文本编辑器的内容的value值\r\n        jeditor: {\r\n          value: ''\r\n        },\r\n\r\n        backData: {\r\n\r\n          //属性判断---新建时使用\r\n          //---------------------------------------------\r\n          //流程key\r\n          key: '',\r\n          //文号\r\n          act_show: '',\r\n          //page ref\r\n          page_ref: '',\r\n          //业务配置表id-用于查询按钮/意见权限\r\n          iprocSetId: '',\r\n          //对应的业务数据表\r\n          table: 'oa_busdata40',\r\n          //---------------------------------- 以下为表存储字段\r\n\r\n          //*******\r\n          i_id: '',\r\n          i_bigint1: '',   //份数\r\n          i_bigint2: '',   //页数\r\n          s_receive_type: '',     //来文文种\r\n          s_varchar3: '',//\"办文依据\"\r\n          d_datetime1: '',//\"成文日期\"\r\n          //*******\r\n          //模块---业务模块id\r\n          i_bus_model_id: '',\r\n          //-------业务功能id\r\n          i_bus_function_id: '',\r\n          //密级\r\n          i_safetylevel: 0,\r\n          //缓急\r\n          i_urgency: 0,\r\n          //主办部门\r\n          s_main_dept_names: '主办部门',\r\n          //辅办部门\r\n          s_cc_dept_names: '辅办部门',\r\n          //内部发送部门\r\n          s_inside_deptnames: '内部发送部门',\r\n          //标题\r\n          s_title: '中国人民银行永州市中心支行收文处理签',\r\n          //左侧参数页面头部\r\n          s_left_parameter: '左侧参数页面头部',\r\n          //机构\r\n          s_unit_name: '',\r\n          //部门\r\n          s_dept_name: '',\r\n          //插入参数（修改文头）（页面头部）\r\n          s_middle_parameter: '',\r\n          //右侧参数（页面头部）\r\n          s_right_parameter: '',\r\n          //来文字号\r\n          s_receive_num: '',\r\n          //文件字号\r\n          s_file_num: '',\r\n          //来文机关（数据字典取值）\r\n          i_receive_dept_id: '',\r\n          //是否办结\r\n          i_is_state: 0,\r\n          //是否保存办文单\r\n          i_is_approve: 0,\r\n          //是否归档\r\n          i_is_archives: 0,\r\n          //是否已送全文检索\r\n          i_is_es: 0,\r\n          //是否送公文传输\r\n          i_is_send: 0,\r\n          //是否为临时文件\r\n          i_is_display: 0,\r\n          //备注\r\n          s_remarks: '',\r\n          //创建时间-年\r\n          i_create_year: new Date().getFullYear(),\r\n          //创建时间-月\r\n          i_create_month: new Date().getMonth(),\r\n          //创建时间-日期\r\n          i_create_day: new Date().getDate(),\r\n          //创建人id\r\n          s_create_by: '',\r\n          //创建者姓名\r\n          s_create_name: '',\r\n          //创建人部门name\r\n          s_create_dept: '',\r\n          //创建人部门id\r\n          s_create_deptid: '',\r\n          //创建人机构id\r\n          s_create_unitid: '',\r\n          //创建时间\r\n          d_create_time: '',\r\n          //修改时间\r\n          d_update_time: new Date().getFullYear() + '-' + new Date().getMonth() + '-' + new Date().getDate(),\r\n          //申请会议室id\r\n          s_varchar1: 0,\r\n          //会议内容--标题\r\n          s_varchar2: '',\r\n          //附件\r\n          s_varchar3: '',\r\n          //参会人员---参会人员id\r\n          s_varchar4: '',\r\n          //全行，部门，用户标示\r\n          s_varchar5: '',\r\n          //会议室名\r\n          s_varchar6: '',\r\n          //参会选择id\r\n          s_varchar7: '',\r\n          //录入时间---日程开始时间\r\n          d_create_time: '',\r\n          //开始时间---日程结束时间\r\n          d_datetime1: '',\r\n          //截至时间\r\n          d_datetime2: '',\r\n          s_cur_proc_name: '',\r\n          //当前任务名称\r\n          s_cur_task_name: ''\r\n        },\r\n\r\n        url: {\r\n          optionAndBtn: '/oaBus/newTask/optionAndBtn',\r\n          currentUserMsg: '/sys/user/getUserSectionInfoByToken',\r\n          updateReadStatus: '/oaBus/taskInAct/changeStatus',\r\n          queryOaFileList: '/oaBus/oaFile/queryOaFileList',\r\n          queryMeetingTime: '/oaBus/meetingInform/getMeetingTime',\r\n          queryChooseUser: '/sys/user/queryChooseUser'\r\n        }\r\n      }\r\n    },\r\n    computed: {\r\n      timeStrings() {\r\n        let oneTime = new Date();\r\n        let Y = oneTime.getFullYear();\r\n        let M = oneTime.getMonth() + 1;\r\n        let D = oneTime.getDate();\r\n        return Y + '-' + (M < 10 ? \"0\" + M : M) + \"-\" + (D < 10 ? \"0\" + D : D) + \" \" + oneTime.toTimeString().substr(0, 8);\r\n      },\r\n    },\r\n\r\n    created() {\r\n      this.show();\r\n      // this.changeMeetingRoom();//-------------------------不要随便初始化---------\r\n    },\r\n    methods: {\r\n      moment,\r\n      //调用参会人员子组件业务数据处理方法\r\n      submit() {\r\n        // let address = this.address;\r\n        // let time = this.startTime;\r\n        this.$refs.s_varchar4.sendUser();\r\n\r\n      },\r\n\r\n      getDUS(data,iIsLimits,id) {\r\n        console.log('----------------->>><<<<<<', data);\r\n        console.log('----------------->>><<<<<<!!!!!', iIsLimits);\r\n        console.log('----------------->>><<<<<<!!!!!', id);\r\n        if (id != undefined){\r\n          this.backData.s_varchar7=id.toString();\r\n        }\r\n        this.backData.s_varchar4 = data;\r\n        this.backData.s_varchar5 = iIsLimits;\r\n      },\r\n\r\n      //选择会议室查对应时间\r\n      changeMeetingRoom(e, d) {\r\n\r\n        this.backData.d_datetime1 = '';\r\n\r\n        this.backData.s_varchar1 = e;\r\n\r\n        this.backData.s_varchar6 = d.data.attrs.text;\r\n\r\n        getAction(this.url.queryMeetingTime, {\r\n          meetingRoom: this.backData.s_varchar1,\r\n          tableName: this.backData.table\r\n        }).then((res) => {\r\n          this.meetingTime = res.result\r\n\r\n        });\r\n      },\r\n\r\n      //选择会议时间\r\n      changeTime(e) {\r\n        this.backData.d_datetime1 = e;\r\n      },\r\n\r\n      close() {\r\n        this.visible = false;\r\n      },\r\n\r\n\r\n\r\n   /*   change(e) {\r\n        this.backData.i_safetylevel = e\r\n      },\r\n*/\r\n\r\n      /*blurText(e,g){\r\n        for(let i = 0;i<this.optionMap.checkList.length;i++){\r\n          if(this.optionMap.checkList[i].stableColumn == g.target.id){\r\n            this.$refs[g.target.id].$el.style.borderColor = 'red'\r\n          }\r\n        }\r\n      },*/\r\n     /* //已读\r\n      changeReadStatus() {\r\n        var param = 'table=' + this.backData.table + \"_permit&userId=\" + this.userData.sysUserId + \"&functionId=\"\r\n          + this.backData.i_bus_function_id + \"&dataId=\" + this.backData.i_id;\r\n\r\n        getAction(this.url.updateReadStatus + \"?\" + param).then(res => {\r\n          if (!res.success) {\r\n            this.$message.error(res.message)\r\n          }\r\n        })\r\n      },*/\r\n\r\n      show() {\r\n\r\n        for(let i = 0;i<this.optionMap.checkList.length;i++){\r\n          this.s_varchar.push(this.optionMap.checkList[i].stableColumn);\r\n        }\r\n\r\n        //业务数据赋值\r\n        // console.dir(this.backDataRef)\r\n        for (var i in this.backData) {\r\n          this.backData[i] = this.backDataRef[i];\r\n\r\n        }\r\n      },\r\n\r\n      ok() {\r\n        this.handleCancel()\r\n      },\r\n\r\n\r\n      handleCancel() {\r\n        this.$emit('close');\r\n        this.visible = false;\r\n        this.disableSubmit = false;\r\n        //清除意见与按钮页面数据\r\n        this.$refs.taskOptRef.clear()\r\n\r\n        //刷新父页面\r\n        this.$emit('reload_todo')\r\n      },\r\n\r\n    }\r\n  }\r\n</script>\r\n<style>\r\n  .hoverred:hover {\r\n    color: red;\r\n    cursor: pointer;\r\n  }\r\n\r\n  .title{\r\n    background-color: #e9ecf2 !important;\r\n    padding: 0.7% !important;\r\n    text-align: center !important;\r\n  }\r\n\r\n  .text {\r\n    padding: 10px;\r\n  }\r\n\r\n\r\n  .title  h3 {\r\n    font-weight: bolder !important;\r\n  }\r\n\r\n  .ant-btn-default{\r\n    font-weight: bolder !important;\r\n    background: rgb(178, 218, 255) !important;\r\n  }\r\n</style>"]}]}
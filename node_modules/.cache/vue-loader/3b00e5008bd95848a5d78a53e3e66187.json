{"remainingRequest":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xxm\\work\\jd\\fore\\src\\views\\mytask\\taskToDo.vue?vue&type=style&index=0&id=d3821a02&scoped=true&lang=css&","dependencies":[{"path":"C:\\xxm\\work\\jd\\fore\\src\\views\\mytask\\taskToDo.vue","mtime":1578623692244},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\css-loader\\index.js","mtime":1570780111199},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1570779225817},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\postcss-loader\\src\\index.js","mtime":1570780438513},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js","mtime":1570779225726}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/*@import '~@assets/less/common.less'*/\n/deep/ .ant-table-middle .ant-table-tbody > tr:hover {\n  cursor: pointer;\n}\n",{"version":3,"sources":["taskToDo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4gDA;AACA;AACA;AACA","file":"taskToDo.vue","sourceRoot":"src/views/mytask","sourcesContent":["<template>\r\n  <a-card :bordered=\"false\">\r\n\r\n    <!-- 查询区域 -->\r\n    <div class=\"table-page-search-wrapper\">\r\n      <a-form layout=\"inline\">\r\n        <a-row :gutter=\"24\">\r\n          <a-col :md=\"6\" :sm=\"8\">\r\n            <a-form-item label=\"标题\">\r\n              <a-input placeholder=\"标题\" v-model=\"queryParam.dataTitle\"></a-input>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :md=\"6\" :sm=\"8\">\r\n            <a-form-item label=\"文件字号\">\r\n              <a-input placeholder=\"文件字号\" v-model=\"queryParam.fileNum\"></a-input>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :md=\"6\" :sm=\"8\">\r\n            <a-form-item label=\"拟稿人\">\r\n              <a-input placeholder=\"拟稿人\" v-model=\"queryParam.createName\"></a-input>\r\n            </a-form-item>\r\n          </a-col>\r\n\r\n\r\n          <template v-if=\"toggleSearchStatus\">\r\n            <a-col :md=\"6\" :sm=\"8\">\r\n\r\n              <a-form-item label=\"任务类型\">\r\n                <a-select style=\"width: 150px\" @change=\"taskTypeChange\" v-model=\"taskType\">\r\n                  <a-select-option value=\"全部\">全部</a-select-option>\r\n                  <a-select-option value=\"传阅\">传阅</a-select-option>\r\n                  <a-select-option value=\"主办\">主办</a-select-option>\r\n                  <a-select-option value=\"辅办\">辅办</a-select-option>\r\n                </a-select>\r\n              </a-form-item>\r\n            </a-col>\r\n            <a-col :md=\"6\" :sm=\"8\">\r\n              <a-form-item label=\"主办部门\">\r\n                <a-input placeholder=\"主办部门\" v-model=\"queryParam.mainDept\"></a-input>\r\n              </a-form-item>\r\n            </a-col>\r\n\r\n            <a-col :md=\"6\" :sm=\"8\">\r\n              <a-form-item label=\"开始时间\">\r\n                <a-date-picker showTime format=\"YYYY-MM-DD HH:mm:ss\" placeholder=\"请选择开始时间\"\r\n                               v-model='startTimeFake' @change=\"startTime\"/>\r\n              </a-form-item>\r\n            </a-col>\r\n            <a-col :md=\"6\" :sm=\"8\">\r\n              <a-form-item label=\"结束时间\">\r\n                <a-date-picker showTime format=\"YYYY-MM-DD HH:mm:ss\" placeholder=\"请选择结束时间\"\r\n                               v-model='endTimeFake' @change=\"endTime\"/>\r\n              </a-form-item>\r\n            </a-col>\r\n\r\n\r\n          </template>\r\n\r\n\r\n          <a-col :md=\"6\" :sm=\"8\">\r\n            <span style=\"float: left;overflow: hidden;\" class=\"table-page-search-submitButtons\">\r\n              <a-button type=\"primary\" ref=\"reSearchQuery\" @click=\"searchQueryMy\" icon=\"search\">查询</a-button>\r\n              <a-button type=\"primary\" @click=\"searchResetMy\" icon=\"reload\" style=\"margin-left: 8px\">重置</a-button>\r\n              <a @click=\"handleToggleSearch\" style=\"margin-left: 8px\">\r\n                {{ toggleSearchStatus ? '收起' : '展开' }}\r\n                <a-icon :type=\"toggleSearchStatus ? 'up' : 'down'\"/>\r\n              </a>\r\n            </span>\r\n          </a-col>\r\n\r\n        </a-row>\r\n      </a-form>\r\n    </div>\r\n\r\n<<<<<<< .mine\r\n    <!-- 操作按钮区域 -->\r\n    <div class=\"table-operator\">\r\n      <a-dropdown v-if=\"selectedRowKeys.length > 0\">\r\n        <a-menu slot=\"overlay\">\r\n          <!--<a-menu-item key=\"1\" @click=\"batchEnd\">-->\r\n          <!--<a-icon type=\"delete\"/>-->\r\n          <!--批量办结-->\r\n          <!--</a-menu-item>-->\r\n          <a-menu-item v-if=\"(this.queryParam.deptType=='传阅')\"\r\n                       key=\"1\" @click=\"batchPiYue\">\r\n            <a-icon type=\"delete\"/>\r\n            批量批阅\r\n          </a-menu-item>\r\n        </a-menu>\r\n||||||| .r1752\r\n          <!-- table区域-begin -->\r\n          <div v-if=\"iisFold == 0 || collapse == 0\">\r\n            <!-- 操作按钮区域 -->\r\n            <div class=\"table-operator\">\r\n              <a-dropdown v-if=\"selectedRowKeys.length > 0\">\r\n                <a-menu slot=\"overlay\">\r\n                  <a-menu-item key=\"1\" @click=\"batchEnd\">\r\n                    <a-icon type=\"delete\"/>\r\n                    批量办结\r\n                  </a-menu-item>\r\n                  <a-menu-item v-if=\"(url.list=='/wf/task/queryTask?operstatus=my_chuanyue') \"\r\n                               key=\"1\" @click=\"batchPiYue\">\r\n                    <a-icon type=\"delete\"/>\r\n                    批量批阅\r\n                  </a-menu-item>\r\n                </a-menu>\r\n=======\r\n          <!-- table区域-begin -->\r\n          <div v-if=\"iisFold == 0 || collapse == 0\">\r\n            <!-- 操作按钮区域 -->\r\n            <div class=\"table-operator\">\r\n              <a-dropdown v-if=\"selectedRowKeys.length > 0\">\r\n                <a-menu slot=\"overlay\">\r\n                  <!--<a-menu-item key=\"1\" @click=\"batchEnd\">-->\r\n                  <!--<a-icon type=\"delete\"/>-->\r\n                  <!--批量办结-->\r\n                  <!--</a-menu-item>-->\r\n                  <a-menu-item v-if=\"(this.queryParam.deptType=='传阅')\"\r\n                               key=\"1\" @click=\"batchPiYue\">\r\n                    <a-icon type=\"delete\"/>\r\n                    批量批阅\r\n                  </a-menu-item>\r\n                </a-menu>\r\n>>>>>>> .r1766\r\n\r\n<<<<<<< .mine\r\n        <a-button style=\"margin-left: 8px\"> 批量操作\r\n          <a-icon type=\"down\"/>\r\n        </a-button>\r\n      </a-dropdown>\r\n||||||| .r1752\r\n                <a-button style=\"margin-left: 8px\"> 批量操作\r\n                  <a-icon type=\"down\"/>\r\n                </a-button>\r\n              </a-dropdown>\r\n            </div>\r\n=======\r\n                <a-button style=\"margin-left: 8px\"> 批量操作\r\n                  <a-icon type=\"down\"/>\r\n                </a-button>\r\n              </a-dropdown>\r\n\r\n            </div>\r\n>>>>>>> .r1766\r\n\r\n    </div>\r\n\r\n<<<<<<< .mine\r\n    <!-- table区域-begin -->\r\n    <div>\r\n||||||| .r1752\r\n            <a-table\r\n              size=\"middle\"\r\n              :columns=\"columns\"\r\n              :dataSource=\"dataSource\"\r\n              :pagination=\"pagination\"\r\n              :loading=\"loading\"\r\n              :showAlertInfo=\"false\"\r\n              bordered\r\n              rowKey=\"processInstanceId\"\r\n              :rowSelection=\"{selectedRowKeys: selectedRowKeys, onChange: onSelectChange}\"\r\n              :customRow=\"doTask\"\r\n              @change=\"(page,pageSize) => {\r\n               handleTableChange(page)\r\n          }\"\r\n              :rowClassName=\"(record,index) => {\r\n              let className  = 'light-row';\r\n              if (index % 2 === 1) className = 'dark-row';\r\n              return className;\r\n          }\"\r\n            >\r\n=======\r\n            <a-table\r\n              ref=\"table\"\r\n              size=\"middle\"\r\n              bordered\r\n              rowKey=\"processInstanceId\"\r\n              :columns=\"columns\"\r\n              :dataSource=\"dataSource\"\r\n              :pagination=\"ipagination\"\r\n              :loading=\"loading\"\r\n              :rowSelection=\"{selectedRowKeys: selectedRowKeys, onChange: onSelectChange}\"\r\n              @change=\"handleTableChange\"\r\n              :customRow=\"doTask\"\r\n              :rowClassName=\"(record,index) => {\r\n              let className  = 'light-row';\r\n              if (index % 2 === 1) className = 'dark-row';\r\n              return className;\r\n          }\"\r\n            >\r\n>>>>>>> .r1766\r\n\r\n      <div class=\"ant-alert ant-alert-info\" style=\"margin-bottom: 16px;\">\r\n        <i class=\"anticon anticon-info-circle ant-alert-icon\"></i> 已选择 <a style=\"font-weight: 600\">{{\r\n        selectedRowKeys.length }}</a>项\r\n        <a style=\"margin-left: 24px\" @click=\"onClearSelected\">清空</a>\r\n      </div>\r\n\r\n<<<<<<< .mine\r\n      <a-table\r\n        ref=\"table\"\r\n        size=\"middle\"\r\n        bordered\r\n        rowKey=\"processInstanceId\"\r\n        :columns=\"columns\"\r\n        :dataSource=\"dataSource\"\r\n        :pagination=\"ipagination\"\r\n        :loading=\"loading\"\r\n        :rowSelection=\"{selectedRowKeys: selectedRowKeys, onChange: onSelectChange}\"\r\n        @change=\"handleTableChange\"\r\n        :customRow=\"doTask\"\r\n        :rowClassName=\"(record,index) => {\r\n||||||| .r1752\r\n          <!--<a @click.stop=\"unDo(record)\">未办理信息</a>-->\r\n\r\n\r\n                     <!--<a-divider type=\"vertical\"/>-->\r\n          <a @click.stop=\"showPic(record)\">查看流程图</a>\r\n\r\n        </span>\r\n\r\n            </a-table>\r\n          </div>\r\n\r\n        <div  v-if=\"iisFold == 1 && collapse == 1\">\r\n          <!-- 操作按钮区域 -->\r\n          <div class=\"table-operator\">\r\n            <a-dropdown>\r\n              <a-menu slot=\"overlay\">\r\n                <a-menu-item key=\"1\" @click=\"batchEnd\">\r\n                  <a-icon type=\"delete\"/>\r\n                  批量办结\r\n                </a-menu-item>\r\n                <a-menu-item v-if=\"(url.list=='/wf/task/queryTask?operstatus=my_chuanyue') \"\r\n                             key=\"1\" @click=\"batchPiYue\">\r\n                  <a-icon type=\"delete\"/>\r\n                  批量批阅\r\n                </a-menu-item>\r\n              </a-menu>\r\n\r\n              <a-button style=\"margin-left: 8px\"> 批量操作\r\n                <a-icon type=\"down\"/>\r\n              </a-button>\r\n            </a-dropdown>\r\n          </div>\r\n\r\n          <a-table\r\n            :columns=\"columnes\"\r\n            :dataSource=\"dataSources\"\r\n            :pagination=\"false\"\r\n            :loading=\"loading\"\r\n            :showAlertInfo=\"false\"\r\n            :showHeader=\"false\"\r\n            :expandIconAsCell=\"false\"\r\n            bordered\r\n            @expandedRowsChange=\"(expandedRows) => {\r\n               getPgSecondList(expandedRows);\r\n          }\"\r\n          >\r\n\r\n            <a-table\r\n              slot=\"expandedRowRender\"\r\n              slot-scope=\"record,index,indent,expanded\"\r\n              size=\"middle\"\r\n              :columns=\"columns\"\r\n              :dataSource=\"dataSource\"\r\n              :pagination=\"false\"\r\n              :loading=\"loading\"\r\n              :showAlertInfo=\"false\"\r\n              :rowKey=\"record => record.key\"\r\n              :rowSelection=\"{selectedRowKeys: selectedRowKeys, onChange: onSelectChange}\"\r\n              :customRow=\"doTask\"\r\n              :rowClassName=\"(record,index) => {\r\n=======\r\n          <!--<a @click.stop=\"unDo(record)\">未办理信息</a>-->\r\n\r\n\r\n                     <!--<a-divider type=\"vertical\"/>-->\r\n          <a @click.stop=\"showPic(record)\">查看流程图</a>\r\n\r\n        </span>\r\n\r\n            </a-table>\r\n          </div>\r\n\r\n        <div  v-if=\"iisFold == 1 && collapse == 1\">\r\n          <!-- 操作按钮区域 -->\r\n          <div class=\"table-operator\">\r\n            <a-dropdown>\r\n              <a-menu slot=\"overlay\">\r\n                <!--<a-menu-item key=\"1\" @click=\"batchEnd\">-->\r\n                <!--<a-icon type=\"delete\"/>-->\r\n                <!--批量办结-->\r\n                <!--</a-menu-item>-->\r\n                <a-menu-item v-if=\"(this.queryParam.deptType=='传阅')\"\r\n                             key=\"1\" @click=\"batchPiYue\">\r\n                  <a-icon type=\"delete\"/>\r\n                  批量批阅\r\n                </a-menu-item>\r\n              </a-menu>\r\n\r\n              <a-button style=\"margin-left: 8px\"> 批量操作\r\n                <a-icon type=\"down\"/>\r\n              </a-button>\r\n            </a-dropdown>\r\n\r\n          </div>\r\n\r\n          <a-table\r\n            :columns=\"columnes\"\r\n            :dataSource=\"dataSources\"\r\n            :pagination=\"false\"\r\n            :loading=\"loading\"\r\n            :showAlertInfo=\"false\"\r\n            :showHeader=\"false\"\r\n            :expandIconAsCell=\"false\"\r\n            bordered\r\n            @expandedRowsChange=\"(expandedRows) => {\r\n               getPgSecondList(expandedRows);\r\n          }\"\r\n          >\r\n\r\n            <a-table\r\n              slot=\"expandedRowRender\"\r\n              slot-scope=\"record,index,indent,expanded\"\r\n              size=\"middle\"\r\n              bordered\r\n              rowKey=\"processInstanceId\"\r\n              :columns=\"columns\"\r\n              :dataSource=\"dataSource\"\r\n              :pagination=\"false\"\r\n              :loading=\"loading\"\r\n              :rowSelection=\"{selectedRowKeys: selectedRowKeys, onChange: onSelectChange}\"\r\n              :customRow=\"doTask\"\r\n              :rowClassName=\"(record,index) => {\r\n>>>>>>> .r1766\r\n              let className  = 'light-row';\r\n              if (index % 2 === 1) className = 'dark-row';\r\n              return className;\r\n          }\">\r\n\r\n        <span slot=\"action\" slot-scope=\"text, record\">\r\n\r\n          <!--<a @click.stop=\"unDo(record)\">未办理信息</a>-->\r\n\r\n\r\n          <!--<a-divider type=\"vertical\"/>-->\r\n          <a @click.stop=\"showPic(record)\">查看流程图</a>\r\n\r\n        </span>\r\n\r\n      </a-table>\r\n    </div>\r\n    <!-- table区域-end -->\r\n\r\n    <!-- 表单区域 -->\r\n    <pic2-modal ref=\"pic2Modal\" @ok=\"modalFormOk\"></pic2-modal>\r\n    <new-task-modal ref=\"newTask\"></new-task-modal>\r\n\r\n\r\n    <!--业务页面-->\r\n    <detail-file ref=\"detailFile\"></detail-file>\r\n\r\n  </a-card>\r\n</template>\r\n\r\n<script>\r\n  import Vue from 'vue'\r\n  import {JeecgListMixin} from '@/mixins/JeecgListMixin'\r\n  import {ACCESS_TOKEN} from \"../../store/mutation-types\";\r\n  import {getAction, postAction} from \"../../api/manage\";\r\n  import pic2Modal from './modules/pic2Modal'\r\n  //业务页面\r\n  import detailFile from './taskList/detailFile'\r\n\r\n\r\n  export default {\r\n    name: \"taskToDo\",\r\n    mixins: [JeecgListMixin],\r\n    components: {\r\n      pic2Modal,\r\n      //业务\r\n      detailFile\r\n    },\r\n    data() {\r\n      return {\r\n        headers: {'X-Access-Token': Vue.ls.get(ACCESS_TOKEN)},\r\n        description: '待办任务',\r\n        datasource: [],\r\n        loginInfo: '',\r\n        // 表头\r\n        columns: [\r\n          {\r\n            title: '序号',\r\n            dataIndex: '',\r\n            key: 'rowIndex',\r\n            width: 60,\r\n            align: \"center\",\r\n            customRender: function (t, r, index) {\r\n              return parseInt(index) + 1;\r\n            }\r\n          },\r\n          {\r\n            title: '文号',\r\n            width: 100,\r\n            align: \"center\",\r\n            sorter: (i, ii, type) => {\r\n\r\n              this.queryParam.tableOrder = true\r\n              this.nullOther('orederByWenHao')\r\n\r\n              this.queryParam.orederByWenHao = type == 'descend' ? -1 : 1;\r\n              return true\r\n            },\r\n            dataIndex: 'wenHao'\r\n          },\r\n          {\r\n            title: '标题',\r\n            sorter: (i, ii, type) => {\r\n              //descend倒叙\r\n              //ascend正序\r\n\r\n              this.queryParam.tableOrder = true\r\n              //置空其他环节\r\n              this.nullOther('orederByTile')\r\n              this.queryParam.orederByTile = type == 'descend' ? -1 : 1;\r\n              return true\r\n            },\r\n            width: 400,\r\n            align: \"left\",\r\n            dataIndex: 'title'\r\n          },\r\n          // {\r\n          //   title: '业务名称',\r\n          //   align: \"center\",\r\n          //   dataIndex: 'funName'\r\n          // },\r\n          {\r\n            title: '当前环节',\r\n            width: 180,\r\n            sorter: (i, ii, type) => {\r\n              this.queryParam.tableOrder = true\r\n              this.nullOther('orederByHuanJie')\r\n\r\n              this.queryParam.orederByHuanJie = type == 'descend' ? -1 : 1\r\n              return true\r\n            },\r\n            align: \"center\",\r\n            dataIndex: 'name'\r\n          },\r\n          {\r\n            title: '拟稿人',\r\n            width: 100,\r\n            sorter: (i, ii, type) => {\r\n              this.queryParam.tableOrder = true\r\n              this.nullOther('orederByDrafter')\r\n\r\n              this.queryParam.orederByDrafter = type == 'descend' ? -1 : 1;\r\n              return true\r\n            },\r\n            align: \"center\",\r\n            dataIndex: 'drafter'\r\n          },\r\n          // {\r\n          //   title: '重要级别',\r\n          //   align: \"center\",\r\n          //   dataIndex: 'important'\r\n          // },\r\n          {\r\n            title: '转发时间',\r\n            width: 160,\r\n            sorter: (i, ii, type) => {\r\n              this.queryParam.tableOrder = true\r\n              this.nullOther('orederByTime')\r\n\r\n              this.queryParam.orederByTime = type == 'descend' ? -1 : 1;\r\n              return true\r\n            },\r\n            align: \"center\",\r\n            dataIndex: 'createTime',\r\n            // customRender: function (index) {\r\n            //   var date = new Date(index);\r\n            //   return date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate();\r\n            // }\r\n          }\r\n          ,\r\n          {\r\n            title: '操作',\r\n            width: 100,\r\n            dataIndex: 'action',\r\n            align: \"center\",\r\n            scopedSlots:\r\n              {\r\n                customRender: 'action'\r\n              }\r\n            ,\r\n          }\r\n        ],\r\n        url:\r\n          {\r\n            list: \"/wf/task/queryTask?operstatus=task_todo\",\r\n            busDataAndColums: 'oaBus/oaBusdata/queryBusdataById',\r\n            yewuDataQuery: \"/oaBus/dynamic/query\",\r\n            actShowQuery: '/oaBus/busPage/queryActShowByPageRef',\r\n            batchEnd: '/wf/task/batchEnd',\r\n            batchPiYue: '/wf/task/batchPiYue',\r\n            currentUnDo: '/wf/task/queryTaskUnDoCurrent'\r\n          }\r\n        ,\r\n        startTimeFake: null,\r\n        endTimeFake: null,\r\n        taskType: null,\r\n      }\r\n    },\r\n    computed: {\r\n      importExcelUrl: function () {\r\n        return `${window._CONFIG['domianURL']}/${this.url.importExcelUrl}`;\r\n      }\r\n    },\r\n    methods: {\r\n      //清空其他排序条件\r\n      nullOther(type) {\r\n        let orderColums = ['orederByWenHao', 'orederByTile', 'orederByHuanJie', 'orederByDrafter', 'orederByTime']\r\n        for (let i in orderColums) {\r\n          if (i != type) {\r\n            this.queryParam[orderColums[i]] = undefined\r\n          }\r\n        }\r\n      },\r\n      unDo(record) {\r\n        let procInstId = record.processInstanceId\r\n        getAction(this.url.currentUnDo, {\r\n          procInstId: procInstId\r\n        }).then(res => {\r\n          if (res.success) {\r\n\r\n            const h = this.$createElement;\r\n            let content = []\r\n            for (let i in res.result) {\r\n              let msg = res.result[i]\r\n              content.push(h('p', `【${msg.taskDefName}】 ${msg.deptName} ：${msg.userName}`))\r\n            }\r\n\r\n            let content_ = h('div', {}, content)\r\n\r\n            const modal = this.$success({\r\n              title: '未办理信息',\r\n              content: content_,\r\n            });\r\n          } else {\r\n            this.$message.error(res.message)\r\n          }\r\n        })\r\n\r\n\r\n      },\r\n      //类型选择\r\n      taskTypeChange(type) {\r\n        if (type != '全部') {\r\n          this.queryParam.isDept = true\r\n        } else {\r\n          this.queryParam.isDept = false\r\n        }\r\n        this.queryParam.deptType = type\r\n      },\r\n      searchQueryMy() {\r\n        this.queryParam.tableOrder = false\r\n        this.searchQuery()\r\n        this.selectionRows = []\r\n        this.selectedRowKeys = []\r\n\r\n      },\r\n      searchResetMy() {\r\n        this.queryParam.tableOrder = false\r\n        this.searchReset()\r\n        this.startTimeFake = null\r\n        this.endTimeFake = null\r\n        this.taskType = null\r\n        this.queryParam.isDept = false\r\n        this.selectionRows = []\r\n        this.selectedRowKeys = []\r\n      },\r\n      endTime(a, time) {\r\n        this.queryParam.endQueryTime = time\r\n      },\r\n      startTime(a, time) {\r\n        this.queryParam.startQueryTime = time\r\n      },\r\n      reload() {\r\n        this.loading = true;\r\n        getAction(this.url.list).then((res) => {\r\n          if (res.success) {\r\n            this.dataSource = res.result.records;\r\n            this.ipagination.total = res.result.total;\r\n          }\r\n          if (res.code === 510) {\r\n            this.$message.warning(res.message)\r\n          }\r\n          this.loading = false;\r\n        })\r\n      },\r\n      cancel() {\r\n        console.log('------->取消选择')\r\n      },\r\n      showPic(record) {\r\n        this.$refs.pic2Modal.show(record)\r\n        this.$refs.pic2Modal.title = '当前环节'\r\n      },\r\n      //批量办结\r\n      batchEnd() {\r\n\r\n        var ids = []\r\n        for (let i in this.selectionRows) {\r\n          if (this.selectionRows[i].processInstanceId != undefined) {\r\n            ids.push(this.selectionRows[i].processInstanceId)\r\n          }\r\n        }\r\n        var param = {ids: ids}\r\n\r\n        postAction(this.url.batchEnd, param).then(res => {\r\n          if (res.success) {\r\n            this.$message.success(res.message)\r\n            this.reload()\r\n          } else {\r\n            this.$message.error(res.message)\r\n          }\r\n        })\r\n\r\n      },\r\n      batchPiYue() {\r\n        var data = []\r\n        for (let i in this.selectionRows) {\r\n          if (this.selectionRows[i].id != undefined) {\r\n            let d = this.selectionRows[i]\r\n            let v = {\r\n              table: d.table + '_opinion',\r\n              i_busdata_id: d.tableId,\r\n              s_opinion_type: 4,\r\n              s_task_id: d.id,\r\n              s_task_name: d.name,\r\n              s_overt: 0,\r\n              s_taskdef_key: d.taskDefinitionKey,\r\n              s_dept_id: this.loginInfo.depart.id,\r\n              s_dept_name: this.loginInfo.depart.departName,\r\n              id: d.id\r\n            }\r\n            data.push(v)\r\n          }\r\n        }\r\n\r\n\r\n        postAction(this.url.batchPiYue, data).then(res => {\r\n          if (res.success) {\r\n            this.$message.success(res.message)\r\n            this.reload()\r\n          } else {\r\n            this.$message.error(res.message)\r\n          }\r\n        })\r\n\r\n      },\r\n<<<<<<< .mine\r\n||||||| .r1752\r\n      // changFunId(index) {\r\n      //   index = index - 1;\r\n      //   this.resetPgConditionList();\r\n      //   getAction(this.url.getConditionByFunId, {functionId: this.selectList[index].iid}).then((res) => {\r\n      //     this.conditionList = res;\r\n      //     this.queryParam = Object.assign({}, this.setConditionList);\r\n      //     for (let i = 0; i < this.conditionList.length; i++) {\r\n      //       this.queryParam = Object.assign({}, this.queryParam, {[this.conditionList[i].s_table_column]: \"\"});\r\n      //     }\r\n      //     this.queryParam.function_id = this.selectList[index].iid;\r\n      //     this.resetConditionList = Object.assign({}, this.queryParam);\r\n      //     this.pagination.current = 1;\r\n      //     this.columns = [];\r\n      //     this.columnes = [];\r\n      //     this.dataSource = [];\r\n      //     this.dataSources = [];\r\n      //     this.collapseListOrNot();\r\n      //   });\r\n      // },\r\n      // init() {\r\n      //   let path = this.$route.path;\r\n      //   let paths = path.split('/')\r\n      //   let str = paths[paths.length - 1]\r\n      //   this.getModelIdByUrl(str);\r\n      // },\r\n      // clearData() {\r\n      //   this.conditionList = [];\r\n      //   this.selectList = [];\r\n      //   this.columns = [];\r\n      //   this.columnes = [];\r\n      //   this.dataSource = [];\r\n      //   this.dataSources = [];\r\n      // },\r\n      // getQueryParams() {\r\n      //   let param = Object.assign({}, this.queryParam, this.isorter);\r\n      //   param.field = this.getQueryField();\r\n      //   param.current = this.ipagination.current;\r\n      //   param.pageSize = this.ipagination.pageSize;\r\n      //   return filterObj(param);\r\n      // },\r\n      // getQueryField() {\r\n      //   let str = \"id,\";\r\n      //   for (let i = 0; i < this.columns.length; i++) {\r\n      //     str += \",\" + this.columns[i].dataIndex;\r\n      //   }\r\n      //   return str;\r\n      // },\r\n      //\r\n      // handleEdit(record) {\r\n      //   this.mdl = Object.assign({}, record);\r\n      //   console.log(this.mdl);\r\n      //   this.visible = true;\r\n      // },\r\n      // handleOk() {\r\n      //\r\n      // },\r\n\r\n      //添加逻辑\r\n      // handleModalVisible(isVisible) {\r\n      //   this.visibleCreateModal = isVisible;\r\n      // },\r\n      //\r\n      // handleCreateModalCancel() {\r\n      //   this.visibleCreateModal = false;\r\n      // },\r\n      //\r\n      // onChange(row) {\r\n      //   this.selectedRowKeys = row.selectedRowKeys;\r\n      //   this.selectedRows = row.selectedRows;\r\n      //   // console.log(this.$refs.table)\r\n      // },\r\n      // toggleAdvanced() {\r\n      //   this.advanced = !this.advanced\r\n      // },\r\n      //\r\n      // resetSearchForm() {\r\n      //   this.queryParam = {\r\n      //     date: moment(new Date())\r\n      //   }\r\n      // },\r\n      // handleTableChange(page) {\r\n      //   this.pagination.current = page.current;\r\n      //   this.pagination.pageSize = page.pageSize;\r\n      //   this.collapseListOrNot();\r\n      // },\r\n      // getModelIdByUrl(str) {\r\n      //   //let url = \"/papertitle/docNumSet/busModelList\";\r\n      //   getAction(this.url.getModelIdByUrl, {str: 'electronicFile'}).then((res) => {\r\n      //     this.modelId = res;\r\n      //     this.getPgConditionList();\r\n\r\n          //this.getPgSearchList();\r\n      //   });\r\n      // },\r\n      // getPgConditionList() {\r\n      //   let url = \"/oaBus/oaBusdata/queryFunSelByModelId\";\r\n      //   postAction(url, {modelId: this.modelId, function_id: this.queryParam.function_id}).then((res) => {\r\n      //     this.clearData();\r\n      //     this.conditionList = res.colList;\r\n      //     this.selectList = res.funList;\r\n      //     this.tableName = res.tableName;\r\n      //     this.timeList = res.d_create_time;\r\n      //     this.queryParam.function_id = this.selectList[0].iid;\r\n      //     this.setConditionList = Object.assign({}, this.queryParam);\r\n      //     for (let i = 0; i < this.conditionList.length; i++) {\r\n      //       this.queryParam = Object.assign({}, this.queryParam, {[this.conditionList[i].s_table_column]: \"\"});\r\n      //     }\r\n      //     this.resetConditionList = Object.assign({}, this.queryParam);\r\n\r\n          // console.log('----------------------------------------------------------');\r\n          // console.log(this.queryParam);\r\n\r\n      // this.collapseListOrNot();\r\n      //   });\r\n      // },\r\n      getPgFirstList() {\r\n        this.columnes = [];\r\n        this.dataSources = [];\r\n        // this.chooseSearch();\r\n\r\n        let url = \"/sys/dict/getDictByKey\";\r\n        getAction(url, {dictKey: 'urgencyDegree'}).then((res) => {\r\n\r\n          this.columnes.push({\r\n            dataIndex: 'wenHao',\r\n          });\r\n\r\n          for (let i = 0; i < res.result.length; i++) {\r\n            // this.taskKey.push(res.result[i].itemValue);\r\n            this.dataSources.push({\r\n              key: i,\r\n              wenHao: res.result[i].itemText,\r\n            });\r\n          }\r\n          // console.log('-----------------------<><><><><><><><><><><><><>--------------------------');\r\n          // console.log(this.taskKey);\r\n          // console.log('------------->>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>---------------');\r\n          // console.log(this.dataSources);\r\n\r\n\r\n        });\r\n      },\r\n      getCaption(obj, state) {\r\n        let index = obj.lastIndexOf(\"\\-\");\r\n        if (state == 0) {\r\n          obj = obj.substring(0, index);\r\n        } else {\r\n          obj = obj.substring(index + 1, obj.length)\r\n        }\r\n        return obj;\r\n      },\r\n      getPgSecondList(taskNames) {\r\n        this.taskArray = taskNames;\r\n        this.taskNames = taskNames[taskNames.length - 1];\r\n        taskNames.length = 0;\r\n        this.columns = [];\r\n        this.dataSource = [];\r\n        let url = \"urgency/degree/queryTask\";\r\n        getAction(url, {operstatus: 'jump', urgencyDegree: 'null'}).then((res) => {\r\n\r\n          // this.searchColumns = JSON.parse(res.records);\r\n\r\n        //   for (let i = 1; i < this.searchColumns.length; i++) {\r\n        //     this.columnes.push({\r\n        //       title: this.searchColumns[i].s_column_name,\r\n        //       dataIndex: this.searchColumns[i].s_table_column,\r\n        //       align: \"center\",\r\n        //     });\r\n        //   }\r\n          this.columns.push({\r\n              title: '序号',\r\n              dataIndex: '',\r\n              key: 'rowIndex',\r\n              width: 60,\r\n              align: \"center\",\r\n              customRender: function (t, r, index) {\r\n                return parseInt(index) + 1;\r\n              }\r\n            },\r\n            {\r\n              title: '文号',\r\n              width: 100,\r\n              sorter: (i, ii, type) => {\r\n\r\n                this.queryParam.tableOrder = true\r\n                this.nullOther('orederByWenHao')\r\n\r\n                this.queryParam.orederByWenHao = type == 'descend' ? -1 : 1;\r\n                return true\r\n              },\r\n              align: \"center\",\r\n              dataIndex: 'wenHao'\r\n            },\r\n            {\r\n              title: '标题',\r\n              width: 350,\r\n              align: \"center\",\r\n              sorter: (i, ii, type) => {\r\n                //descend倒叙\r\n                //ascend正序\r\n\r\n                this.queryParam.tableOrder = true\r\n                //置空其他环节\r\n                this.nullOther('orederByTile')\r\n                this.queryParam.orederByTile = type == 'descend' ? -1 : 1;\r\n                return true\r\n              },\r\n              align: \"center\",\r\n              dataIndex: 'title'\r\n            },\r\n            {\r\n              title: '当前环节',\r\n              sorter: (i, ii, type) => {\r\n                this.queryParam.tableOrder = true\r\n                this.nullOther('orederByHuanJie')\r\n\r\n                this.queryParam.orederByHuanJie = type == 'descend' ? -1 : 1\r\n                return true\r\n              },\r\n              align: \"center\",\r\n              dataIndex: 'name'\r\n            },\r\n            {\r\n              title: '拟稿人',\r\n              sorter: (i, ii, type) => {\r\n                this.queryParam.tableOrder = true\r\n                this.nullOther('orederByDrafter')\r\n\r\n                this.queryParam.orederByDrafter = type == 'descend' ? -1 : 1;\r\n                return true\r\n              },\r\n              align: \"center\",\r\n              dataIndex: 'drafter'\r\n            },\r\n            {\r\n              title: '转发时间',\r\n              sorter: (i, ii, type) => {\r\n                this.queryParam.tableOrder = true\r\n                this.nullOther('orederByTime')\r\n\r\n                this.queryParam.orederByTime = type == 'descend' ? -1 : 1;\r\n                return true\r\n              },\r\n              align: \"center\",\r\n              dataIndex: 'createTime'\r\n            },\r\n            {\r\n              title: '操作',\r\n              dataIndex: 'action',\r\n              align: \"center\",\r\n              scopedSlots: {customRender: 'action'},\r\n            });\r\n\r\n          // this.dataSources = res.result.dataList;\r\n\r\n\r\n          this.dataSource = res.result.records;\r\n          for(let i = 0;i < this.dataSource.length;i++){\r\n            this.dataSource[i].key = this.dataSource[i].id;\r\n          }\r\n\r\n          console.log('-------------++++++++++++++++++++++++++++++---------------');\r\n          console.log(this.dataSource);\r\n\r\n        });\r\n      },\r\n      getPgSearchList() {\r\n        this.columns = [];\r\n        this.dataSource = [];\r\n        // this.chooseSearch();\r\n        // let url = \"urgency/degree/queryTask\";\r\n        // getAction(url, {operstatus: 'jump', urgencyDegree: 'null'}).then((res) => {\r\n          // this.searchColumns = JSON.parse(res.message);\r\n          // this.searchList = res.result;\r\n          // this.pagination.current = this.searchList.current;\r\n          // this.pagination.pageSize = this.searchList.size;\r\n          // this.pagination.total = this.searchList.total;\r\n\r\n          // this.dataSource = this.searchList.records;\r\n          // for (let i = 0; i < this.searchColumns.length; i++) {\r\n          //   if (this.searchColumns[i].s_table_column != 'i_id') {\r\n          //     if(this.searchColumns[i].s_table_column =='i_is_state'){\r\n          //       this.columns.push({\r\n          //         title: this.searchColumns[i].s_column_name,\r\n          //         dataIndex: this.searchColumns[i].s_table_column,\r\n          //         align: \"center\",\r\n          //         customRender: (text) => {\r\n          //           if(text == true){\r\n          //             return '已办结'\r\n          //           }else if(text == false){\r\n          //             return '未办结'\r\n          //           }else{\r\n          //             return text\r\n          //           }\r\n          //         }\r\n          //       });\r\n          //     }else{\r\n          //       this.columns.push({\r\n          //         title: this.searchColumns[i].s_column_name,\r\n          //         dataIndex: this.searchColumns[i].s_table_column,\r\n          //         align: \"center\",\r\n          //       });\r\n          //     }\r\n\r\n          //   }\r\n          // }\r\n\r\n          this.columns.push({\r\n              title: '序号',\r\n              dataIndex: '',\r\n              key: 'rowIndex',\r\n              width: 60,\r\n              align: \"center\",\r\n              customRender: function (t, r, index) {\r\n                return parseInt(index) + 1;\r\n              }\r\n            },\r\n            {\r\n              title: '文号',\r\n              width: 100,\r\n              sorter: (i, ii, type) => {\r\n\r\n                this.queryParam.tableOrder = true\r\n                this.nullOther('orederByWenHao')\r\n\r\n                this.queryParam.orederByWenHao = type == 'descend' ? -1 : 1;\r\n                return true\r\n              },\r\n              align: \"center\",\r\n              dataIndex: 'wenHao'\r\n            },\r\n            {\r\n              title: '标题',\r\n              width: 350,\r\n              align: \"center\",\r\n              sorter: (i, ii, type) => {\r\n                //descend倒叙\r\n                //ascend正序\r\n\r\n                this.queryParam.tableOrder = true\r\n                //置空其他环节\r\n                this.nullOther('orederByTile')\r\n                this.queryParam.orederByTile = type == 'descend' ? -1 : 1;\r\n                return true\r\n              },\r\n              align: \"center\",\r\n              dataIndex: 'title'\r\n            },\r\n            {\r\n              title: '当前环节',\r\n              sorter: (i, ii, type) => {\r\n                this.queryParam.tableOrder = true\r\n                this.nullOther('orederByHuanJie')\r\n\r\n                this.queryParam.orederByHuanJie = type == 'descend' ? -1 : 1\r\n                return true\r\n              },\r\n              align: \"center\",\r\n              dataIndex: 'name'\r\n            },\r\n            {\r\n              title: '拟稿人',\r\n              sorter: (i, ii, type) => {\r\n                this.queryParam.tableOrder = true\r\n                this.nullOther('orederByDrafter')\r\n\r\n                this.queryParam.orederByDrafter = type == 'descend' ? -1 : 1;\r\n                return true\r\n              },\r\n              align: \"center\",\r\n              dataIndex: 'drafter'\r\n            },\r\n            {\r\n              title: '转发时间',\r\n              sorter: (i, ii, type) => {\r\n                this.queryParam.tableOrder = true\r\n                this.nullOther('orederByTime')\r\n\r\n                this.queryParam.orederByTime = type == 'descend' ? -1 : 1;\r\n                return true\r\n              },\r\n              align: \"center\",\r\n              dataIndex: 'createTime'\r\n            },\r\n            {\r\n              title: '操作',\r\n              dataIndex: 'action',\r\n              align: \"center\",\r\n              scopedSlots: {customRender: 'action'},\r\n            });\r\n\r\n          // this.dataSource = res.result.records;\r\n\r\n        this.reload();\r\n\r\n\r\n        // });\r\n\r\n      },\r\n      // changeInput(event, obj) {\r\n      //   this.queryParam[obj] = event.currentTarget.value;\r\n        // console.log('----------------------------------------------------------');\r\n        // console.log(\"object: \" + obj + \" value: \" + event);\r\n        // console.log('----------------------------------------------------------');\r\n        // console.log(this.queryParam);\r\n      // },\r\n      // changeSelect(event, obj) {\r\n        // this.queryParam[obj] = event.toString();\r\n        // console.log('----------------------------------------------------------');\r\n        // console.log(\"object: \" + obj + \" value: \" + event);\r\n        // console.log('----------------------------------------------------------');\r\n        // console.log(this.queryParam);\r\n      // },\r\n      // onClick(record, index) {\r\n      //   return {\r\n      //     on: {\r\n      //       click: (event) => {\r\n      //         //查询---业务数据--流程信息\r\n      //         let param = {tableName: this.tableName, busdataId: record.i_id};\r\n      //         this.$refs.detailFile.show(param)\r\n\r\n              // this.$router.push({path:'/mytask/taskList/Test-detailFile',query:param})\r\n      //       }\r\n      //     }\r\n      //   }\r\n      // },\r\n=======\r\n      // changFunId(index) {\r\n      //   index = index - 1;\r\n      //   this.resetPgConditionList();\r\n      //   getAction(this.url.getConditionByFunId, {functionId: this.selectList[index].iid}).then((res) => {\r\n      //     this.conditionList = res;\r\n      //     this.queryParam = Object.assign({}, this.setConditionList);\r\n      //     for (let i = 0; i < this.conditionList.length; i++) {\r\n      //       this.queryParam = Object.assign({}, this.queryParam, {[this.conditionList[i].s_table_column]: \"\"});\r\n      //     }\r\n      //     this.queryParam.function_id = this.selectList[index].iid;\r\n      //     this.resetConditionList = Object.assign({}, this.queryParam);\r\n      //     this.pagination.current = 1;\r\n      //     this.columns = [];\r\n      //     this.columnes = [];\r\n      //     this.dataSource = [];\r\n      //     this.dataSources = [];\r\n      //     this.collapseListOrNot();\r\n      //   });\r\n      // },\r\n      // init() {\r\n      //   let path = this.$route.path;\r\n      //   let paths = path.split('/')\r\n      //   let str = paths[paths.length - 1]\r\n      //   this.getModelIdByUrl(str);\r\n      // },\r\n      // clearData() {\r\n      //   this.conditionList = [];\r\n      //   this.selectList = [];\r\n      //   this.columns = [];\r\n      //   this.columnes = [];\r\n      //   this.dataSource = [];\r\n      //   this.dataSources = [];\r\n      // },\r\n      // getQueryParams() {\r\n      //   let param = Object.assign({}, this.queryParam, this.isorter);\r\n      //   param.field = this.getQueryField();\r\n      //   param.current = this.ipagination.current;\r\n      //   param.pageSize = this.ipagination.pageSize;\r\n      //   return filterObj(param);\r\n      // },\r\n      // getQueryField() {\r\n      //   let str = \"id,\";\r\n      //   for (let i = 0; i < this.columns.length; i++) {\r\n      //     str += \",\" + this.columns[i].dataIndex;\r\n      //   }\r\n      //   return str;\r\n      // },\r\n      //\r\n      // handleEdit(record) {\r\n      //   this.mdl = Object.assign({}, record);\r\n      //   console.log(this.mdl);\r\n      //   this.visible = true;\r\n      // },\r\n      // handleOk() {\r\n      //\r\n      // },\r\n\r\n      //添加逻辑\r\n      // handleModalVisible(isVisible) {\r\n      //   this.visibleCreateModal = isVisible;\r\n      // },\r\n      //\r\n      // handleCreateModalCancel() {\r\n      //   this.visibleCreateModal = false;\r\n      // },\r\n      //\r\n      // onChange(row) {\r\n      //   this.selectedRowKeys = row.selectedRowKeys;\r\n      //   this.selectedRows = row.selectedRows;\r\n      //   // console.log(this.$refs.table)\r\n      // },\r\n      // toggleAdvanced() {\r\n      //   this.advanced = !this.advanced\r\n      // },\r\n      //\r\n      // resetSearchForm() {\r\n      //   this.queryParam = {\r\n      //     date: moment(new Date())\r\n      //   }\r\n      // },\r\n      // handleTableChange(page) {\r\n      //   this.pagination.current = page.current;\r\n      //   this.pagination.pageSize = page.pageSize;\r\n      //   this.collapseListOrNot();\r\n      // },\r\n      // getModelIdByUrl(str) {\r\n      //   //let url = \"/papertitle/docNumSet/busModelList\";\r\n      //   getAction(this.url.getModelIdByUrl, {str: 'electronicFile'}).then((res) => {\r\n      //     this.modelId = res;\r\n      //     this.getPgConditionList();\r\n\r\n          //this.getPgSearchList();\r\n      //   });\r\n      // },\r\n      // getPgConditionList() {\r\n      //   let url = \"/oaBus/oaBusdata/queryFunSelByModelId\";\r\n      //   postAction(url, {modelId: this.modelId, function_id: this.queryParam.function_id}).then((res) => {\r\n      //     this.clearData();\r\n      //     this.conditionList = res.colList;\r\n      //     this.selectList = res.funList;\r\n      //     this.tableName = res.tableName;\r\n      //     this.timeList = res.d_create_time;\r\n      //     this.queryParam.function_id = this.selectList[0].iid;\r\n      //     this.setConditionList = Object.assign({}, this.queryParam);\r\n      //     for (let i = 0; i < this.conditionList.length; i++) {\r\n      //       this.queryParam = Object.assign({}, this.queryParam, {[this.conditionList[i].s_table_column]: \"\"});\r\n      //     }\r\n      //     this.resetConditionList = Object.assign({}, this.queryParam);\r\n\r\n          // console.log('----------------------------------------------------------');\r\n          // console.log(this.queryParam);\r\n\r\n      // this.collapseListOrNot();\r\n      //   });\r\n      // },\r\n      getPgFirstList() {\r\n        this.columnes = [];\r\n        this.dataSources = [];\r\n        // this.chooseSearch();\r\n\r\n        let url = \"/sys/dict/getDictByKey\";\r\n        getAction(url, {dictKey: 'urgencyDegree'}).then((res) => {\r\n\r\n          this.columnes.push({\r\n            dataIndex: 'wenHao',\r\n          });\r\n\r\n          for (let i = 0; i < res.result.length; i++) {\r\n            // this.taskKey.push(res.result[i].itemValue);\r\n            this.dataSources.push({\r\n              key: i,\r\n              wenHao: res.result[i].itemText,\r\n            });\r\n          }\r\n          // console.log('-----------------------<><><><><><><><><><><><><>--------------------------');\r\n          // console.log(this.taskKey);\r\n          // console.log('------------->>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>---------------');\r\n          // console.log(this.dataSources);\r\n\r\n\r\n        });\r\n      },\r\n      getCaption(obj, state) {\r\n        let index = obj.lastIndexOf(\"\\-\");\r\n        if (state == 0) {\r\n          obj = obj.substring(0, index);\r\n        } else {\r\n          obj = obj.substring(index + 1, obj.length)\r\n        }\r\n        return obj;\r\n      },\r\n      getPgSecondList(taskNames) {\r\n        this.taskArray = taskNames;\r\n        this.taskNames = taskNames[taskNames.length - 1];\r\n        taskNames.length = 0;\r\n        this.columns = [];\r\n        this.dataSource = [];\r\n        let url = \"urgency/degree/queryTask\";\r\n        getAction(url, {operstatus: 'jump', urgencyDegree: 'null'}).then((res) => {\r\n\r\n          // this.searchColumns = JSON.parse(res.records);\r\n\r\n        //   for (let i = 1; i < this.searchColumns.length; i++) {\r\n        //     this.columnes.push({\r\n        //       title: this.searchColumns[i].s_column_name,\r\n        //       dataIndex: this.searchColumns[i].s_table_column,\r\n        //       align: \"center\",\r\n        //     });\r\n        //   }\r\n          this.columns.push({\r\n              title: '序号',\r\n              dataIndex: '',\r\n              key: 'rowIndex',\r\n              width: 60,\r\n              align: \"center\",\r\n              customRender: function (t, r, index) {\r\n                return parseInt(index) + 1;\r\n              }\r\n            },\r\n            {\r\n              title: '文号',\r\n              width: 100,\r\n              sorter: (i, ii, type) => {\r\n\r\n                this.queryParam.tableOrder = true\r\n                this.nullOther('orederByWenHao')\r\n\r\n                this.queryParam.orederByWenHao = type == 'descend' ? -1 : 1;\r\n                return true\r\n              },\r\n              align: \"center\",\r\n              dataIndex: 'wenHao'\r\n            },\r\n            {\r\n              title: '标题',\r\n              width: 350,\r\n              sorter: (i, ii, type) => {\r\n                //descend倒叙\r\n                //ascend正序\r\n\r\n                this.queryParam.tableOrder = true\r\n                //置空其他环节\r\n                this.nullOther('orederByTile')\r\n                this.queryParam.orederByTile = type == 'descend' ? -1 : 1;\r\n                return true\r\n              },\r\n              align: \"left\",\r\n              dataIndex: 'title'\r\n            },\r\n            {\r\n              title: '当前环节',\r\n              sorter: (i, ii, type) => {\r\n                this.queryParam.tableOrder = true\r\n                this.nullOther('orederByHuanJie')\r\n\r\n                this.queryParam.orederByHuanJie = type == 'descend' ? -1 : 1\r\n                return true\r\n              },\r\n              align: \"center\",\r\n              dataIndex: 'name'\r\n            },\r\n            {\r\n              title: '拟稿人',\r\n              sorter: (i, ii, type) => {\r\n                this.queryParam.tableOrder = true\r\n                this.nullOther('orederByDrafter')\r\n\r\n                this.queryParam.orederByDrafter = type == 'descend' ? -1 : 1;\r\n                return true\r\n              },\r\n              align: \"center\",\r\n              dataIndex: 'drafter'\r\n            },\r\n            {\r\n              title: '转发时间',\r\n              sorter: (i, ii, type) => {\r\n                this.queryParam.tableOrder = true\r\n                this.nullOther('orederByTime')\r\n\r\n                this.queryParam.orederByTime = type == 'descend' ? -1 : 1;\r\n                return true\r\n              },\r\n              align: \"center\",\r\n              dataIndex: 'createTime'\r\n            },\r\n            {\r\n              title: '操作',\r\n              dataIndex: 'action',\r\n              align: \"center\",\r\n              scopedSlots: {customRender: 'action'},\r\n            });\r\n\r\n          // this.dataSources = res.result.dataList;\r\n\r\n\r\n          this.dataSource = res.result.records;\r\n          for(let i = 0;i < this.dataSource.length;i++){\r\n            this.dataSource[i].key = this.dataSource[i].id;\r\n          }\r\n\r\n          console.log('-------------++++++++++++++++++++++++++++++---------------');\r\n          console.log(this.dataSource);\r\n\r\n        });\r\n      },\r\n      getPgSearchList() {\r\n        this.columns = [];\r\n        this.dataSource = [];\r\n        // this.chooseSearch();\r\n        // let url = \"urgency/degree/queryTask\";\r\n        // getAction(url, {operstatus: 'jump', urgencyDegree: 'null'}).then((res) => {\r\n          // this.searchColumns = JSON.parse(res.message);\r\n          // this.searchList = res.result;\r\n          // this.pagination.current = this.searchList.current;\r\n          // this.pagination.pageSize = this.searchList.size;\r\n          // this.pagination.total = this.searchList.total;\r\n\r\n          // this.dataSource = this.searchList.records;\r\n          // for (let i = 0; i < this.searchColumns.length; i++) {\r\n          //   if (this.searchColumns[i].s_table_column != 'i_id') {\r\n          //     if(this.searchColumns[i].s_table_column =='i_is_state'){\r\n          //       this.columns.push({\r\n          //         title: this.searchColumns[i].s_column_name,\r\n          //         dataIndex: this.searchColumns[i].s_table_column,\r\n          //         align: \"center\",\r\n          //         customRender: (text) => {\r\n          //           if(text == true){\r\n          //             return '已办结'\r\n          //           }else if(text == false){\r\n          //             return '未办结'\r\n          //           }else{\r\n          //             return text\r\n          //           }\r\n          //         }\r\n          //       });\r\n          //     }else{\r\n          //       this.columns.push({\r\n          //         title: this.searchColumns[i].s_column_name,\r\n          //         dataIndex: this.searchColumns[i].s_table_column,\r\n          //         align: \"center\",\r\n          //       });\r\n          //     }\r\n\r\n          //   }\r\n          // }\r\n\r\n          this.columns.push({\r\n              title: '序号',\r\n              dataIndex: '',\r\n              key: 'rowIndex',\r\n              width: 60,\r\n              align: \"center\",\r\n              customRender: function (t, r, index) {\r\n                return parseInt(index) + 1;\r\n              }\r\n            },\r\n            {\r\n              title: '文号',\r\n              width: 100,\r\n              sorter: (i, ii, type) => {\r\n\r\n                this.queryParam.tableOrder = true\r\n                this.nullOther('orederByWenHao')\r\n\r\n                this.queryParam.orederByWenHao = type == 'descend' ? -1 : 1;\r\n                return true\r\n              },\r\n              align: \"center\",\r\n              dataIndex: 'wenHao'\r\n            },\r\n            {\r\n              title: '标题',\r\n              width: 350,\r\n              sorter: (i, ii, type) => {\r\n                //descend倒叙\r\n                //ascend正序\r\n\r\n                this.queryParam.tableOrder = true\r\n                //置空其他环节\r\n                this.nullOther('orederByTile')\r\n                this.queryParam.orederByTile = type == 'descend' ? -1 : 1;\r\n                return true\r\n              },\r\n              align: \"left\",\r\n              dataIndex: 'title'\r\n            },\r\n            {\r\n              title: '当前环节',\r\n              sorter: (i, ii, type) => {\r\n                this.queryParam.tableOrder = true\r\n                this.nullOther('orederByHuanJie')\r\n\r\n                this.queryParam.orederByHuanJie = type == 'descend' ? -1 : 1\r\n                return true\r\n              },\r\n              align: \"center\",\r\n              dataIndex: 'name'\r\n            },\r\n            {\r\n              title: '拟稿人',\r\n              sorter: (i, ii, type) => {\r\n                this.queryParam.tableOrder = true\r\n                this.nullOther('orederByDrafter')\r\n\r\n                this.queryParam.orederByDrafter = type == 'descend' ? -1 : 1;\r\n                return true\r\n              },\r\n              align: \"center\",\r\n              dataIndex: 'drafter'\r\n            },\r\n            {\r\n              title: '转发时间',\r\n              sorter: (i, ii, type) => {\r\n                this.queryParam.tableOrder = true\r\n                this.nullOther('orederByTime')\r\n\r\n                this.queryParam.orederByTime = type == 'descend' ? -1 : 1;\r\n                return true\r\n              },\r\n              align: \"center\",\r\n              dataIndex: 'createTime'\r\n            },\r\n            {\r\n              title: '操作',\r\n              dataIndex: 'action',\r\n              align: \"center\",\r\n              scopedSlots: {customRender: 'action'},\r\n            });\r\n\r\n          // this.dataSource = res.result.records;\r\n\r\n        this.reload();\r\n\r\n\r\n        // });\r\n\r\n      },\r\n      // changeInput(event, obj) {\r\n      //   this.queryParam[obj] = event.currentTarget.value;\r\n        // console.log('----------------------------------------------------------');\r\n        // console.log(\"object: \" + obj + \" value: \" + event);\r\n        // console.log('----------------------------------------------------------');\r\n        // console.log(this.queryParam);\r\n      // },\r\n      // changeSelect(event, obj) {\r\n        // this.queryParam[obj] = event.toString();\r\n        // console.log('----------------------------------------------------------');\r\n        // console.log(\"object: \" + obj + \" value: \" + event);\r\n        // console.log('----------------------------------------------------------');\r\n        // console.log(this.queryParam);\r\n      // },\r\n      // onClick(record, index) {\r\n      //   return {\r\n      //     on: {\r\n      //       click: (event) => {\r\n      //         //查询---业务数据--流程信息\r\n      //         let param = {tableName: this.tableName, busdataId: record.i_id};\r\n      //         this.$refs.detailFile.show(param)\r\n\r\n              // this.$router.push({path:'/mytask/taskList/Test-detailFile',query:param})\r\n      //       }\r\n      //     }\r\n      //   }\r\n      // },\r\n>>>>>>> .r1766\r\n      doTask(record, index) {\r\n\r\n        return {\r\n          on: {\r\n            click: (event) => {\r\n              // let taskDetail = {\r\n              //   tableName: record.table,\r\n              //   busdataId: record.tableId,\r\n              //   haveTask: true,\r\n              //   task: record\r\n              // }\r\n              window.open(window.location.origin + '/mytask/taskList/Test-detailFile?tableName=' + record.table + '&busdataId=' + record.tableId + '&status=todo&navisshow=false&haveTask=true&task=' + JSON.stringify(record))\r\n\r\n              // this.$router.push({path: '/mytask/taskList/Test-detailFile', query: taskDetail})\r\n            }\r\n          }\r\n        }\r\n\r\n\r\n      },\r\n    },\r\n    created() {\r\n      //默认不带部门类型\r\n      this.queryParam.isDept = false\r\n      getAction(\"/sys/user/getLoginInfo\").then(res => {\r\n        this.loginInfo = res\r\n      })\r\n\r\n    }\r\n\r\n  }\r\n</script>\r\n<style scoped>\r\n  /*@import '~@assets/less/common.less'*/\r\n  /deep/ .ant-table-middle .ant-table-tbody > tr:hover {\r\n    cursor: pointer;\r\n  }\r\n</style>"]}]}
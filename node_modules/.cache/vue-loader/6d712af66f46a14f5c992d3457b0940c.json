{"remainingRequest":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xxm\\work\\jd\\fore\\src\\views\\dashboard\\DayAnalysis.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xxm\\work\\jd\\fore\\src\\views\\dashboard\\DayAnalysis.vue","mtime":1579343099587},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js","mtime":1570779245522},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js","mtime":1570779225726}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport { httpAction,getAction,postAction,deleteAction} from '@/api/manage'\nimport oaCalendarCatModal from '../oaBus//modules/oaCalendarCatModal'\nimport oaCalendarModal from '../oaBus/modules/oaCalendarModal'\nimport detailFile from '../mytask/taskList/detailFile'\nimport DetailModel from './DetailModel'\n\nimport Swiper from 'swiper/js/swiper.min.js'\nimport  'swiper/css/swiper.min.css'\nimport moment from 'moment'\n\n\nexport default {\n    name: \"Dayanalysis\",\n    data () {\n      return {\n        iisCalendar:1,\n        visible:false,\n        editvisible:false,\n        mystitltid:'',\n        localTime:'',\n        newTime:'',\n        model1:'',\n        model2:'',\n        path:'',\n        stitleLists:[],//领导日程列表\n        mytitleLists:[],//我的日程列表\n        publictitleLists:[],//共享日程列表\n        findwaitdataLists:[],//待办日程列表\n        LinkList:[],//常用链接\n         userid:'',\n        userinfo:'',\n        model1Lists:[],\n        model2Lists:[],\n        postLists:[],// 公告列表\n          url:{\n            findByLeader:'/oaBus/Calendar/oaCalendar/findByLeader',\n            MostUserLink:'/oaBus/Calendar/oaCalendar/MostUserLink',\n            // findwaiturl:'/oaBus/Calendar/oaCalendar/findwait ',\n            findById:'/oaBus/Calendar/oaCalendar/queryById',\n            findwaiturl:'/wf/task/queryTask',\n            queryPageList:'/oaBus/Calendar/oaCalendar/queryPageList',\n            list:'/oaBus/Calendar/oaCalendar/list',\n            HomeList:'/oaBus/homeAnalysis/HomeList',\n            delete: \"/oaBus/Calendar/oaCalendar/delete\",\n            Posturl:'/oaBus/oaBusdata/queryByModelId',\n            busDataAndColums: 'oaBus/oaBusdata/queryBusdataById',\n          },\n        total:'',//代办数量\n        total1:'',//模块的数量\n        day:'',\n        week:'',\n        nongli:'',//农历\n        ESM:'',\n        willdoindex:0,   //  待办已办高亮\n      }\n    },\n    filters:{\n      filterText(text){\n        if(text.length>18){\n          return text.substring(0,15)+'...'\n        }else{\n          return text\n        }\n\n      },\n      timeStrings(time){\n        let oneTime = new Date(time);\n        let Y = oneTime.getFullYear();\n        let M = oneTime.getMonth()+1;\n        let D = oneTime.getDate();\n        return  Y+'-'+(M<10? \"0\"+M :M)+\"-\"+(D<10? \"0\"+D:D)+\" \"+oneTime.toTimeString().substr(0,8);\n\n      },\n    },\n    components: {\n      oaCalendarModal,\n      detailFile,\n      DetailModel,\n      oaCalendarCatModal\n\n    },\n\n  created () {\n\n      //获取用户基本信息\n      const  userinfo =JSON.parse( localStorage.getItem('userdata')).userInfo;\n      console.log(userinfo);\n      this.userinfo = userinfo;\n      this.userid = userinfo.id;\n\n      this.homeLists(this.userid);\n\n      let currtentTime = new Date();\n      let Y = currtentTime.getFullYear();\n      let M = currtentTime.getMonth()+1;\n      let D = currtentTime.getDate();\n      let W = currtentTime.getDay();\n      // let newTime = Y+'-'+(M<10? \"0\"+M :M)+\"-\"+(D<10? \"0\"+D:D)+\" \"+currtentTime.toTimeString().substr(0,8);\n      let newTime = Y+'-'+(M<10? \"0\"+M :M)+\"-\"+(D<10? \"0\"+D:D);\n      this.localTime = Y+'-'+(M<10? \"0\"+M :M)+\"-\"+(D<10? \"0\"+D:D);\n\n      //---------------------获取农历  英语月份-------------------\n      // this.day = (D<10? \"0\"+D:D);\n      //\n      // this.week = ['日','一','二','三','四','五','六'][W];\n      //           //农历接口\n      // getAction('/oaBus/Calendar/oaCalendar/findLunarDate',{year:Number(Y),month:Number(M),day:Number(D)}).then((res) => {\n      //   console.log(res);\n      //   this.nongli = res.result;\n      //\n      // });\n\n              //英文月份\n      // let EnglisgSimM = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sept','Oct',' Nov','Dec'];\n      // this.ESM = EnglisgSimM[M-1]\n      // console.log('--------------------------------------------------------------------------------------',M);\n\n\n      //----------------------------------------------------------\n\n      this.newTime = newTime;\n\n      //  领导日程\n      this.leaderList(newTime);\n\n      //  我的日程\n      this.myDayLists(newTime);\n\n      //  共享日程\n      this.publicLists(newTime);\n\n    // 代办日程\n  setTimeout(()=>{\n    this.findwaitLists();\n  },500)\n\n    //公告列表lineitem\n      this.getPostLists();\n\n\n    // / 初始化时只获取条目已办条目\n\n    getAction(this.url.findwaiturl,{operstatus:'task_done'}).then((res) => {\n     // this.total1 = res.result.total;\n\n    });\n\n    },\n  mounted(){\n    let height = document.body.clientHeight-145;\n    document.querySelector('.topp').style.height = height/2 +'px'\n    document.querySelector('.bottom').style.height = height/2 +'px'\n    document.querySelector('.ant-fullcalendar-full').style.height = height/2 +'px'\n    document.querySelector('.ant-fullcalendar-full').style.marginTop = '-20px'\n\n    window.onresize = function () {\n      let height = document.body.clientHeight-145;\n      document.querySelector('.topp').style.height = height/2 +'px'\n      document.querySelector('.bottom').style.height = height/2 +'px'\n      document.querySelector('.ant-fullcalendar-full').style.height = height/2 +'px'\n    }\n\n\n\n\n\n\n\n    setTimeout(()=>{\n\n      var mySwiper = new Swiper('.swiper-container',{\n        initialSlide:0,\n        slidesPerView:4,\n        spaceBetween:13,\n        lazyLoading:true,\n        loop:true,\n        obeserver:true,\n        obeserverParents:true,\n        navigation:{\n          nextEl:'.swiper-button-next',\n          prevEl:'.swiper-button-prev',\n        }\n\n      });\n    },1200)\n\n\n\n\n    postAction(this.url.MostUserLink).then((res) => {\n      console.log(res.length);\n      if(res.length==1){\n        this.LinkList.push(JSON.parse(JSON.stringify(res)))\n        this.LinkList.push(JSON.parse(JSON.stringify(res)))\n        this.LinkList.push(JSON.parse(JSON.stringify(res)))\n        this.LinkList.push(JSON.parse(JSON.stringify(res)))\n      }else if(res.length==2){\n        this.LinkList.push(JSON.parse(JSON.stringify(res)))\n        this.LinkList.push(JSON.parse(JSON.stringify(res)))\n        this.LinkList.push(JSON.parse(JSON.stringify(res)))\n      }else if(res.length==3){\n        this.LinkList.push(JSON.parse(JSON.stringify(res)))\n        this.LinkList.push(JSON.parse(JSON.stringify(res)))\n      }else if(res.length==0){\n        this.LinkList.push(\n          {s_title:'mytask/taskToDo',value:0},\n          {s_title:'mytask/taskToDo',value:1},\n          {s_title:'mytask/taskToDo',value:2},\n          {s_title:'mytask/taskToDo',value:3},\n          )\n      }else{\n        this.LinkList = JSON.parse(JSON.stringify(res));\n      }\n\n      console.log( this.LinkList.length);\n    });\n\n\n\n  },\n\n  methods:{\n    postMore(){\n      this.$router.push('/'+'publicMessage/electronicFile');\n    },\n    doWill(e){\n      console.log(e);\n      this.willdoindex = e;\n      if(e==0){\n        // 代办日程\n        // alert(e)\n        this.findwaitLists('task_todo');\n      }else{\n\n        // alert(e)\n        // this.findwaitLists('task_done');\n      this.homeLists(this.userid)\n\n\n\n      }\n    },\n    openmore(url){\n      alert('111')\n      if(url){\n        // alert(url)\n        this.$router.push('/'+url);\n      }else{\n        this.$router.push('/mytask/taskToDo');\n      }\n\n    },\n    openmore1(e){  //待办/模块的跳转\n      if(e){ //是0就跳待办\n        let url = this.path\n        this.$router.push('/'+url);\n\n      }else{ //否则就跳别的模块\n        this.$router.push('/mytask/taskToDo');\n      }\n\n    },\n    //动态模块儿  业务详情\n    openDetialModel(tableName,i_id){\n\n      let taskDetail = {\n        tableName: tableName,\n        busdataId: i_id,\n      }\n\n\n      window.open(window.location.origin+'/mytask/taskList/Test-detailFile?tableName='+tableName+'&busdataId='+i_id+'&navisshow=false')\n\n\n      // this.$refs.detailFile.show(taskDetail)\n    },\n\n    //事件委托 想左切换\n    leftclick(){\n      this.$refs.left.click();\n    },\n    //事件委托 想右切换\n    rightclick(){\n      this.$refs.right.click();\n    },\n      handChange(){\n\n      },\n      //修改日期\n      getdateVal(e){\n        console.log(e);\n        // let timestamp = e.valueOf();\n        let currtentTime = new Date(e);\n        let Y = currtentTime.getFullYear();\n        let M = currtentTime.getMonth()+1;\n        let D = currtentTime.getDate();\n        // let newTime = Y+'-'+(M<10? \"0\"+M :M)+\"-\"+(D<10? \"0\"+D:D)+\" \"+currtentTime.toTimeString().substr(0,8);\n        let newTime = Y+'-'+(M<10? \"0\"+M :M)+\"-\"+(D<10? \"0\"+D:D);\n        console.log(newTime);\n        this.localTime = Y+'-'+(M<10? \"0\"+M :M)+\"-\"+(D<10? \"0\"+D:D);\n\n        //  领导日程\n        this.leaderList(newTime);\n\n        //  我的日程\n        this.myDayLists(newTime);\n\n        //  共享日程\n        this.publicLists(newTime);\n\n      //  收文发文\n        this.homeLists(this.userid,newTime);\n\n\n\n\n      },\n      delstitle(e){\n        this.mystitltid = e;\n        this.visible = true;\n      },\n      //我的日程编辑成功模态框关闭，刷新父级列表\n      myrichenClose(e){\n        console.log(e);\n        if(e){\n          getAction(this.url.list,{username:this.userinfo.username}).then((res) => {\n            console.log(res);\n            this.mytitleLists = res.result.records;\n\n          });\n        }\n      },\n      //查看更多\n      openMore(type){\n       /* this.$refs.moremodel.showTableDetail(type,this.newTime);*/\n          console.log(type);\n          if(type == 1){//我的日程\n            this.$router.push('/ioaBus/oaCalendar');\n          }else if(type ==2){//领导日程 /ioaBus/oaLeaderCalendar\n            this.$router.push('/ioaBus/oaLeaderCalendar');\n          }else{//共享日程\n            this.$router.push('/ioaBus/oaShareCalendar');\n          }\n\n\n\n      },\n      handleOk(){\n        deleteAction(this.url.delete,{id:this.mystitltid,sCreateBy:this.userinfo.username}).then((res) => {\n          console.log(res);\n          if(res.success){\n            this.visible = false;\n            getAction(this.url.list,{username:this.userinfo.username}).then((res) => {\n              console.log(res);\n              this.mytitleLists = res.result.records;\n\n            });\n\n          }\n\n        });\n      },\n      handleCancel(){\n        this.visible = false;\n      },\n      //编辑我的日程\n      editstitle(e,d){\n        console.log(e);\n        this.$refs.modalForm.update(e,d);\n      },\n      //查看日程\n      chakan(iid){\n        getAction(this.url.findById,{id:iid }).then((res) => {\n          this.$refs.modalCatForm.dayAnnalysis1(res.result);\n\n        });\n\n      },\n      //添加我的日程\n      add(){\n        this.$refs.modalForm.add();\n      },\n      handleOkEdit(){\n        // this.editvisible = true;\n\n      },\n      handleCancelEdit(){\n        this.editvisible = false;\n      },\n      //  领导日程 &userId=\"+this.userid;\n      leaderList(timestamp){\n        getAction(this.url.findByLeader,{date:timestamp}).then((res) => {\n          console.log(res);\n          let stitleLists = res.result.records.splice(0,4);\n          this.stitleLists = stitleLists;\n\n        });\n\n      },\n      //  我的日程\n      myDayLists(timestamp){\n        getAction(this.url.list,{username:this.userinfo.username,date:timestamp}).then((res) => {\n          console.log(res);\n          this.mytitleLists = res.result.records.splice(0,5);\n        });\n      },\n      //共享日程\n      publicLists(timestamp){\n        getAction(this.url.queryPageList,{date:timestamp}).then((res) => {\n          console.log(res);\n          // alert( res.result.records.length)\n          this.publictitleLists = res.result.records.splice(0,5);\n\n        });\n      },\n      //待办 已办   日程  .replace(0,3);\n      findwaitLists(operstatus='task_todo'){\n\n        getAction(this.url.findwaiturl,{operstatus:operstatus}).then((res) => {\n          console.log(Array.isArray(res.result.records));\n\n          this.findwaitdataLists =res.result.records.splice(0,3)\n\n          if(operstatus=='task_todo'){\n            this.total = res.result.total;\n          }else{\n           // this.total1 = res.result.total;\n          }\n\n\n        });\n      },\n     //  数据初始化  收文  发文数据\n      homeLists(userid,createtime=''){\n        getAction(this.url.HomeList,{userId:userid,createTime:createtime}).then((res) => {\n          console.log(res);\n          this.model1 = res.model1.sName;\n          this.path = res.model1.url\n          this.model2 = res.model2.sName;\n          this.total1 = res.model1.list.length\n          this.findwaitdataLists = res.model1.list.splice(0,3);\n          this.model2Lists = res.model2.list;\n\n        });\n      },\n    // 公告\n      getPostLists(){\n        postAction(this.url.Posturl,{modelId:49,condition:{function_id:64,selType:1}}).then((res) => {\n          console.log(res.result.records);\n\n          this.postLists = res.result.records.splice(0,3);\n          // alert( JSON.stringify(this.postLists ))\n        });\n      }\n    }\n  }\n",{"version":3,"sources":["DayAnalysis.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwQA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AAQA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"DayAnalysis.vue","sourceRoot":"src/views/dashboard","sourcesContent":["<template>\r\n    <div class=\"wrap\">\r\n        <div class=\"topp\">\r\n            <template>\r\n\r\n              <a-row type=\"flex\" style=\"height: 100%\">\r\n                  <a-col :span=\"6\" style=\"height: 100%;background: #FBF2DC\">\r\n                    <div class=\"part1\">\r\n                        <div >\r\n                            <!--<div style=\"width: 100%;background: #ffffff;display: flex\">-->\r\n                              <!--<div class=\"timeCard\" style=\"width: 88%\">-->\r\n                                <!--<p class=\"month\">{{ESM}}</p>-->\r\n                                <!--<p class=\"day\">{{day}}</p>-->\r\n                                <!--<p class=\"weekday\">-->\r\n                                  <!--<span>星期{{week}}</span>-->\r\n                                  <!--<span>{{nongli}}</span>-->\r\n                                <!--</p>-->\r\n                              <!--</div>-->\r\n                              <!--<div style=\"width: 12%;height: 50px;background: #f4f4f4;display: flex;align-items: center;justify-content: space-between\">-->\r\n                                <!--<i></i>-->\r\n                                <!--<img style=\"width: 20px;\" src=\"../../assets/titlepng.png\" alt=\"\">-->\r\n                              <!--</div>-->\r\n                            <!--</div>-->\r\n\r\n                            <template>\r\n                              <div class=\"rilibox\">\r\n                                <a-calendar style=\"width:100%\" :showToday=\"true\"  :fullscreeb = \"false\" @select=\"getdateVal\" />\r\n                              </div>\r\n                            </template>\r\n                        </div>\r\n                    </div>\r\n                  </a-col>\r\n                  <a-col :span=\"18\" style=\"background: #ffffff;height: 100%\">\r\n                    <a-row type=\"flex\" style=\"height: 100%\">\r\n                      <a-col :span=\"8\">\r\n                        <div class=\"part2\">\r\n                          <div class=\"title\" >\r\n                            <div style=\"width: 95%;margin: 0 auto;  display: flex;align-items: center;justify-content: space-between;\">\r\n                              <div style=\"width: 90%;height:auto;line-height:0px;padding:0px 0px;display: flex;align-items: center;justify-content: space-between;border-bottom: 2px solid  #ffbc90;margin: 0 auto\">\r\n                                <p style=\"margin: 0;padding: 13px 0px;border-bottom: 2px solid  #ff816c;font-size: 14px;font-weight: 600;color: #7d0900\">领导日程</p>\r\n                                <span><a-icon @click=\"openMore(2)\"type=\"right\" style=\"color: #ff816c;font-weight: 600\"/></span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                          <!-- v-if=\"stitleLists!=''\"-->\r\n                          <div class=\"itembox\"  v-if=\"stitleLists!=''\">\r\n                            <div class=\"itemline\"  v-for=\"(item,index) in stitleLists\" :key=\"index\" @click=\"chakan(item.iid)\">\r\n\r\n                              <!--<p class=\"time\">-->\r\n                                <!--<i></i>-->\r\n                                <!--&lt;!&ndash;<span style=\"font-size: 12px;color: #666666\">{{item.dCreateTime}}</span>&ndash;&gt;-->\r\n                              <!--</p>-->\r\n                              <div class=\"contentbox\" >\r\n                                <span class=\"content\" style=\"font-size: 12px;color: #333333\">{{item.stitle|filterText}}</span>\r\n                                <span style=\"visibility: hidden\">\r\n                                    <img style=\"width: 22px;\" src=\"../../assets/check.png\" @click=\"editstitle(publictitleLists[index],1)\">\r\n                                </span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                          <!--暂无日程显示-->\r\n                          <div v-else style=\" width: 98%;   min-height: 200px;margin: 0 auto;  margin-top: 10px; padding: 0 20px;  border-right: 1px solid #9b9b9b; color: #dddddd;display: flex;align-items: center;justify-content: center\">暂无日程</div>\r\n                        </div>\r\n                      </a-col>\r\n                      <a-col :span=\"8\">\r\n                        <div class=\"part2\">\r\n                          <div class=\"title\" style=\"display: flex;align-items: center;justify-content: center\">\r\n                            <div style=\"width:85%;height:auto;line-height:0px;padding:0px 0px;display: flex;align-items: center;justify-content: space-between;border-bottom: 2px solid  #ffbc90;margin: 0 auto\">\r\n                              <p style=\"margin: 0;padding: 13px 0px;border-bottom: 2px solid  #ff816c;font-size: 14px;  font-weight: 600;color: #001843\">我的日程</p>\r\n                              <span><a-icon @click=\"openMore(1)\"type=\"right\" style=\"color: #ff816c;font-weight: 600\"/></span>\r\n                            </div>\r\n                          </div>\r\n                          <!--mytitleLists-->\r\n                          <div class=\"itembox\"  v-if=\"mytitleLists!=''\">\r\n                            <div class=\"itemline\" v-for=\"(myitem,index) in mytitleLists\" :key=\"index\"  @click=\"chakan(myitem.iid)\">\r\n                              <!--<p class=\"time\">-->\r\n                                <!--<i></i>-->\r\n                                <!--<span style=\"font-size: 12px;color: #666666\">{{myitem.dCreateTime}}</span>-->\r\n                              <!--</p>-->\r\n                              <div class=\"contentbox\" >\r\n                                <span class=\"content\" style=\"font-size: 12px;color: #333333\">{{myitem.stitle|filterText}}</span>\r\n                                <span >\r\n                                   <!-- <img style=\"width: 22px;\" src=\"../../assets/check.png\" @click.stop=\"editstitle1(mytitleLists[index],1)\">-->\r\n                                    <img style=\"width: 22px;\" src=\"../../assets/edit.png\" @click.stop=\"editstitle(mytitleLists[index])\">\r\n                                    <img style=\"width: 22px;\" src=\"../../assets/del.png\" @click.stop=\"delstitle(myitem.iid)\">\r\n                                </span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                          <!--暂无日程显示-->\r\n                          <div v-else style=\" width: 98%;   min-height: 200px;margin: 0 auto;  margin-top: 10px; padding: 0 20px;  border-right: 1px solid #9b9b9b; color: #dddddd;display: flex;align-items: center;justify-content: center;\">暂无日程</div>\r\n                        </div>\r\n                      </a-col>\r\n                      <a-col :span=\"8\">\r\n                        <div class=\"part2\">\r\n                          <div class=\"title\">\r\n                            <div style=\"width:90%;height:auto;line-height:0px;padding:0px 0px;display: flex;align-items: center;justify-content: space-between;border-bottom: 2px solid  #ffbc90;margin: 0 auto\">\r\n                              <p style=\"margin: 0;padding: 13px 0px;border-bottom: 2px solid  #ff816c;font-size: 14px;  font-weight: 600;color: #24005f\">共享日程</p>\r\n                              <span><a-icon @click=\"openMore(3)\"type=\"right\" style=\"color: #ff816c;font-weight: 600\"/></span>\r\n                            </div>\r\n                            <!--<span>共享日程<a-icon @click=\"openMore(2)\" type=\"right\"/></span>-->\r\n                          </div>\r\n                          <div class=\"itembox\"   v-if=\"publictitleLists!=''\" style=\"border: none\" >\r\n                            <div class=\"itemline\" v-for=\"(publicitem,index) in publictitleLists\" :key=\"index\" @click=\"chakan(publicitem.iid)\">\r\n                              <div class=\"contentbox\">\r\n                                <span class=\"content\" style=\"font-size: 12px;color: #333333\">{{publicitem.stitle|filterText}}</span>\r\n                               <span style=\"visibility: hidden\">\r\n                                    <img style=\"width: 22px;\" src=\"../../assets/check.png\" @click=\"editstitle(publictitleLists[index],1)\">\r\n                                </span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                          <!--暂无日程显示-->\r\n                          <div v-else style=\" width: 98%;   min-height: 200px;margin: 0 auto;  margin-top: 10px; padding: 0 20px;color: #dddddd;display: flex;align-items: center;justify-content: center;\">暂无日程</div>\r\n                        </div>\r\n                      </a-col>\r\n                    </a-row>\r\n                  </a-col>\r\n              </a-row>\r\n            </template>\r\n        </div>\r\n\r\n        <div class=\"bottom\">\r\n          <template>\r\n            <a-row type=\"flex\" style=\"height: 100%;\" justify=\"space-between\">\r\n              <a-col :span=\"12\" >\r\n                <div class=\"part1\">\r\n                  <div class=\"listsBox\" style=\"position: relative;height: 50%\">\r\n                    <div class=\"title\">\r\n                      <!--<img src=\"\" alt=\"\">-->\r\n                      <div class=\"imgzhanwei\">\r\n                        <img src=\"../../assets/post.png\" alt=\"\">\r\n                      </div>\r\n                      <span>公告</span>\r\n                    </div>\r\n                    <template>\r\n                      <div class=\"lineitem\"  v-for=\"(postitem,index) in postLists\" :key=\"index\" @click=\"openDetialModel('oa_busdata30',postitem.i_id)\">\r\n                        <!--<a-popover>-->\r\n                        <div class=\"left\">\r\n                          <i></i>\r\n                          <p class=\"tongzhi\">[系统通知]</p>\r\n                          <span>{{postitem.s_title}}</span>\r\n                          <i></i>\r\n                        </div>\r\n                        <span class=\"time\">{{postitem.d_create_time|timeStrings}}</span>\r\n                        <!--</a-popover>-->\r\n                      </div>\r\n                    </template>\r\n                    <img style=\"position: absolute;left: 10px;bottom: 0px;width: 50px;\" src=\"../../assets/bottomleft.png\" alt=\"\">\r\n                    <img style=\"position: absolute;top: 42px;right: 10px;width: 100px;\" src=\"../../assets/topright.png\" alt=\"\">\r\n                    <span @click=\"postMore\"  class=\"postMore\" style=\"position: absolute;bottom: 1px;right: -10px;width: 100px; font-size: 14px;color: #009cff \">查看更多  <a-icon style=\"font-size: 12px;color: #009cff \" type=\"double-right\"></a-icon></span>\r\n\r\n                  </div>\r\n                  <div class=\"searchBox\" style=\"height: 50%;\">\r\n                    <div style=\"display: flex;align-items: center\">\r\n                      <img @click=\"leftclick\" style=\"width: 20px;height: 30px;margin-left: 20px;\" src=\"../../assets/left.png\" alt=\"\">\r\n                      <div class=\"swiper-container swiper-no-swiping bottomm\">\r\n                        <div class=\"swiper-wrapper\">\r\n                          <div class=\"swiper-slide\" v-for=\"(item,index) in LinkList\" :key=\"index\" @click=\"openmore1(item.s_title)\">\r\n                            <div>\r\n                              <img src=\"../../assets/1.png\" :title=\"item.s_title\" alt=\"\">\r\n                            </div>\r\n                          </div>\r\n                          <!--<div class=\"swiper-slide\">-->\r\n                            <!--<div>-->\r\n                              <!--<img src=\"../../assets/2.png\" alt=\"\">-->\r\n                            <!--</div>-->\r\n                          <!--</div>-->\r\n                          <!--<div class=\"swiper-slide\">-->\r\n                            <!--<div>-->\r\n                              <!--<img src=\"../../assets/3.png\" alt=\"\">-->\r\n                            <!--</div>-->\r\n                          <!--</div>-->\r\n                          <!--<div class=\"swiper-slide\">-->\r\n                            <!--<div>-->\r\n                              <!--<img src=\"../../assets/4.png\" alt=\"\">-->\r\n                            <!--</div>-->\r\n                          <!--</div>-->\r\n                          <!--<div class=\"swiper-slide\">-->\r\n                            <!--<div>-->\r\n                              <!--<img src=\"../../assets/3.png\" alt=\"\">-->\r\n                            <!--</div>-->\r\n                          <!--</div>-->\r\n                          <!--<div class=\"swiper-slide\">-->\r\n                            <!--<div>-->\r\n                              <!--<img src=\"../../assets/4.png\" alt=\"\">-->\r\n                            <!--</div>-->\r\n                          <!--</div>-->\r\n                        </div>\r\n                        <!--Add Arrows-->\r\n                        <div ref=\"left\" style=\"display: none\" class=\"swiper-button-next\"></div>\r\n                        <div ref=\"right\" style=\"display: none\" class=\"swiper-button-prev\"></div>\r\n                      </div>\r\n                      <img @click=\"rightclick\" style=\"width: 20px;height: 30px;margin-right: 20px;\"  src=\"../../assets/right.png\" alt=\"\">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </a-col>\r\n              <a-col :span=\"12\" >\r\n                <div class=\"daiban\" style=\"height: 100%;\">\r\n                  <p class=\"titlebox\" style=\"display: flex;align-items: center;justify-content: space-between\">\r\n                    <civ style=\"display: flex;align-items: center;justify-content: flex-start\">\r\n                       <span @click=\"doWill(0)\" class=\"firstspan\"  :style=\"willdoindex==0?'background:#009dee;color:#ffffff':'background:#7fbbff; color:#333333 !important'\">\r\n                       <span class=\"shuline\"></span>\r\n                       <span>待办工作</span>\r\n                       <b style=\"color: #ffffff;font-weight: 400\"  v-if=\"total\"> {{total}}</b>\r\n                    </span>\r\n                      <span @click=\"doWill(1)\"  class=\"secondspan\" :style=\"willdoindex==1?'background:#009dee;color:#ffffff':'background:#7fbbff;color: #333333;!important'\" >\r\n                       <span>{{this.model1}}</span>\r\n                       <b style=\"color: #ffffff;font-weight: 400\"  v-if=\"total1\"> {{total1}}</b>\r\n                    </span>\r\n                    </civ>\r\n                    <span class=\"more\" style=\" margin-right: 20px;\" @click=\"openmore1(willdoindex)\">MORE  <a-icon type=\"plus\"></a-icon> </span>\r\n                  </p>\r\n                  <div class=\"itemline\" style=\"height: 62%;\">\r\n                      <div class=\"each\" v-if=\"findwaitdataLists\" v-for=\"(item,index) in findwaitdataLists\" :key=\"index\" @click=\"openDetialModel(item.table,item.iid)\"  :style=\"index%2==0? '':'background: #e2f1f6; border-left: 5px solid  #95d9fd;'\">\r\n                        <p class=\"p\">\r\n                          <span :title=\"item.title+'   '+item.createTime+item.name\">\r\n                            <i></i>\r\n                            {{item.title}}\r\n                            <img src=\"../../assets/zhong.png\" alt=\"\">\r\n                          </span>\r\n                          <span >{{item.dCreateTime}}</span>\r\n                        </p>\r\n                      </div>\r\n                      <div v-else>\r\n                        暂无待办工作\r\n                      </div>\r\n                  </div>\r\n                  <hr>\r\n                  <hr/>\r\n                  <hr>\r\n                  <div class=\"top\" style=\"width: 90%;height: 38%;display: flex;align-items: center; border-top: 1px solid #999999;  margin: 0 auto\">\r\n                    <a-input placeholder=\"请输入公文链接\">\r\n                      <a-icon slot=\"prefix\" type=\"search\"></a-icon>\r\n                    </a-input>\r\n                  </div>\r\n                </div>\r\n              </a-col>\r\n            </a-row>\r\n          </template>\r\n        </div>\r\n\r\n      <!--模态框-->\r\n      <a-modal\r\n        title=\"温馨提示\"\r\n        :visible=\"visible\"\r\n        @ok=\"handleOk\"\r\n        @cancel=\"handleCancel\"\r\n      >\r\n        <p>请确认是否要删除该条数据?</p>\r\n      </a-modal>\r\n      <!--编辑  新增-->\r\n      <!-- 表单区域 -->\r\n      <oaCalendar-modal ref=\"modalForm\" @myrichenClose=\"myrichenClose\" ></oaCalendar-modal>\r\n      <oa-calendar-cat-modal ref=\"modalCatForm\"  @ok=\"modalFormOk\"></oa-calendar-cat-modal>\r\n      <!--详情列表-->\r\n      <detail-file ref=\"detailFile\"></detail-file>\r\n      <detail-model ref=\"moremodel\"></detail-model>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\n  import { httpAction,getAction,postAction,deleteAction} from '@/api/manage'\r\n  import oaCalendarCatModal from '../oaBus//modules/oaCalendarCatModal'\r\n  import oaCalendarModal from '../oaBus/modules/oaCalendarModal'\r\n  import detailFile from '../mytask/taskList/detailFile'\r\n  import DetailModel from './DetailModel'\r\n\r\n  import Swiper from 'swiper/js/swiper.min.js'\r\n  import  'swiper/css/swiper.min.css'\r\n  import moment from 'moment'\r\n\r\n\r\n  export default {\r\n      name: \"Dayanalysis\",\r\n      data () {\r\n        return {\r\n          iisCalendar:1,\r\n          visible:false,\r\n          editvisible:false,\r\n          mystitltid:'',\r\n          localTime:'',\r\n          newTime:'',\r\n          model1:'',\r\n          model2:'',\r\n          path:'',\r\n          stitleLists:[],//领导日程列表\r\n          mytitleLists:[],//我的日程列表\r\n          publictitleLists:[],//共享日程列表\r\n          findwaitdataLists:[],//待办日程列表\r\n          LinkList:[],//常用链接\r\n           userid:'',\r\n          userinfo:'',\r\n          model1Lists:[],\r\n          model2Lists:[],\r\n          postLists:[],// 公告列表\r\n            url:{\r\n              findByLeader:'/oaBus/Calendar/oaCalendar/findByLeader',\r\n              MostUserLink:'/oaBus/Calendar/oaCalendar/MostUserLink',\r\n              // findwaiturl:'/oaBus/Calendar/oaCalendar/findwait ',\r\n              findById:'/oaBus/Calendar/oaCalendar/queryById',\r\n              findwaiturl:'/wf/task/queryTask',\r\n              queryPageList:'/oaBus/Calendar/oaCalendar/queryPageList',\r\n              list:'/oaBus/Calendar/oaCalendar/list',\r\n              HomeList:'/oaBus/homeAnalysis/HomeList',\r\n              delete: \"/oaBus/Calendar/oaCalendar/delete\",\r\n              Posturl:'/oaBus/oaBusdata/queryByModelId',\r\n              busDataAndColums: 'oaBus/oaBusdata/queryBusdataById',\r\n            },\r\n          total:'',//代办数量\r\n          total1:'',//模块的数量\r\n          day:'',\r\n          week:'',\r\n          nongli:'',//农历\r\n          ESM:'',\r\n          willdoindex:0,   //  待办已办高亮\r\n        }\r\n      },\r\n      filters:{\r\n        filterText(text){\r\n          if(text.length>18){\r\n            return text.substring(0,15)+'...'\r\n          }else{\r\n            return text\r\n          }\r\n\r\n        },\r\n        timeStrings(time){\r\n          let oneTime = new Date(time);\r\n          let Y = oneTime.getFullYear();\r\n          let M = oneTime.getMonth()+1;\r\n          let D = oneTime.getDate();\r\n          return  Y+'-'+(M<10? \"0\"+M :M)+\"-\"+(D<10? \"0\"+D:D)+\" \"+oneTime.toTimeString().substr(0,8);\r\n\r\n        },\r\n      },\r\n      components: {\r\n        oaCalendarModal,\r\n        detailFile,\r\n        DetailModel,\r\n        oaCalendarCatModal\r\n\r\n      },\r\n\r\n    created () {\r\n\r\n        //获取用户基本信息\r\n        const  userinfo =JSON.parse( localStorage.getItem('userdata')).userInfo;\r\n        console.log(userinfo);\r\n        this.userinfo = userinfo;\r\n        this.userid = userinfo.id;\r\n\r\n        this.homeLists(this.userid);\r\n\r\n        let currtentTime = new Date();\r\n        let Y = currtentTime.getFullYear();\r\n        let M = currtentTime.getMonth()+1;\r\n        let D = currtentTime.getDate();\r\n        let W = currtentTime.getDay();\r\n        // let newTime = Y+'-'+(M<10? \"0\"+M :M)+\"-\"+(D<10? \"0\"+D:D)+\" \"+currtentTime.toTimeString().substr(0,8);\r\n        let newTime = Y+'-'+(M<10? \"0\"+M :M)+\"-\"+(D<10? \"0\"+D:D);\r\n        this.localTime = Y+'-'+(M<10? \"0\"+M :M)+\"-\"+(D<10? \"0\"+D:D);\r\n\r\n        //---------------------获取农历  英语月份-------------------\r\n        // this.day = (D<10? \"0\"+D:D);\r\n        //\r\n        // this.week = ['日','一','二','三','四','五','六'][W];\r\n        //           //农历接口\r\n        // getAction('/oaBus/Calendar/oaCalendar/findLunarDate',{year:Number(Y),month:Number(M),day:Number(D)}).then((res) => {\r\n        //   console.log(res);\r\n        //   this.nongli = res.result;\r\n        //\r\n        // });\r\n\r\n                //英文月份\r\n        // let EnglisgSimM = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sept','Oct',' Nov','Dec'];\r\n        // this.ESM = EnglisgSimM[M-1]\r\n        // console.log('--------------------------------------------------------------------------------------',M);\r\n\r\n\r\n        //----------------------------------------------------------\r\n\r\n        this.newTime = newTime;\r\n\r\n        //  领导日程\r\n        this.leaderList(newTime);\r\n\r\n        //  我的日程\r\n        this.myDayLists(newTime);\r\n\r\n        //  共享日程\r\n        this.publicLists(newTime);\r\n\r\n      // 代办日程\r\n    setTimeout(()=>{\r\n      this.findwaitLists();\r\n    },500)\r\n\r\n      //公告列表lineitem\r\n        this.getPostLists();\r\n\r\n\r\n      // / 初始化时只获取条目已办条目\r\n\r\n      getAction(this.url.findwaiturl,{operstatus:'task_done'}).then((res) => {\r\n       // this.total1 = res.result.total;\r\n\r\n      });\r\n\r\n      },\r\n    mounted(){\r\n      let height = document.body.clientHeight-145;\r\n      document.querySelector('.topp').style.height = height/2 +'px'\r\n      document.querySelector('.bottom').style.height = height/2 +'px'\r\n      document.querySelector('.ant-fullcalendar-full').style.height = height/2 +'px'\r\n      document.querySelector('.ant-fullcalendar-full').style.marginTop = '-20px'\r\n\r\n      window.onresize = function () {\r\n        let height = document.body.clientHeight-145;\r\n        document.querySelector('.topp').style.height = height/2 +'px'\r\n        document.querySelector('.bottom').style.height = height/2 +'px'\r\n        document.querySelector('.ant-fullcalendar-full').style.height = height/2 +'px'\r\n      }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n      setTimeout(()=>{\r\n\r\n        var mySwiper = new Swiper('.swiper-container',{\r\n          initialSlide:0,\r\n          slidesPerView:4,\r\n          spaceBetween:13,\r\n          lazyLoading:true,\r\n          loop:true,\r\n          obeserver:true,\r\n          obeserverParents:true,\r\n          navigation:{\r\n            nextEl:'.swiper-button-next',\r\n            prevEl:'.swiper-button-prev',\r\n          }\r\n\r\n        });\r\n      },1200)\r\n\r\n\r\n\r\n\r\n      postAction(this.url.MostUserLink).then((res) => {\r\n        console.log(res.length);\r\n        if(res.length==1){\r\n          this.LinkList.push(JSON.parse(JSON.stringify(res)))\r\n          this.LinkList.push(JSON.parse(JSON.stringify(res)))\r\n          this.LinkList.push(JSON.parse(JSON.stringify(res)))\r\n          this.LinkList.push(JSON.parse(JSON.stringify(res)))\r\n        }else if(res.length==2){\r\n          this.LinkList.push(JSON.parse(JSON.stringify(res)))\r\n          this.LinkList.push(JSON.parse(JSON.stringify(res)))\r\n          this.LinkList.push(JSON.parse(JSON.stringify(res)))\r\n        }else if(res.length==3){\r\n          this.LinkList.push(JSON.parse(JSON.stringify(res)))\r\n          this.LinkList.push(JSON.parse(JSON.stringify(res)))\r\n        }else if(res.length==0){\r\n          this.LinkList.push(\r\n            {s_title:'mytask/taskToDo',value:0},\r\n            {s_title:'mytask/taskToDo',value:1},\r\n            {s_title:'mytask/taskToDo',value:2},\r\n            {s_title:'mytask/taskToDo',value:3},\r\n            )\r\n        }else{\r\n          this.LinkList = JSON.parse(JSON.stringify(res));\r\n        }\r\n\r\n        console.log( this.LinkList.length);\r\n      });\r\n\r\n\r\n\r\n    },\r\n\r\n    methods:{\r\n      postMore(){\r\n        this.$router.push('/'+'publicMessage/electronicFile');\r\n      },\r\n      doWill(e){\r\n        console.log(e);\r\n        this.willdoindex = e;\r\n        if(e==0){\r\n          // 代办日程\r\n          // alert(e)\r\n          this.findwaitLists('task_todo');\r\n        }else{\r\n\r\n          // alert(e)\r\n          // this.findwaitLists('task_done');\r\n        this.homeLists(this.userid)\r\n\r\n\r\n\r\n        }\r\n      },\r\n      openmore(url){\r\n        alert('111')\r\n        if(url){\r\n          // alert(url)\r\n          this.$router.push('/'+url);\r\n        }else{\r\n          this.$router.push('/mytask/taskToDo');\r\n        }\r\n\r\n      },\r\n      openmore1(e){  //待办/模块的跳转\r\n        if(e){ //是0就跳待办\r\n          let url = this.path\r\n          this.$router.push('/'+url);\r\n\r\n        }else{ //否则就跳别的模块\r\n          this.$router.push('/mytask/taskToDo');\r\n        }\r\n\r\n      },\r\n      //动态模块儿  业务详情\r\n      openDetialModel(tableName,i_id){\r\n\r\n        let taskDetail = {\r\n          tableName: tableName,\r\n          busdataId: i_id,\r\n        }\r\n\r\n\r\n        window.open(window.location.origin+'/mytask/taskList/Test-detailFile?tableName='+tableName+'&busdataId='+i_id+'&navisshow=false')\r\n\r\n\r\n        // this.$refs.detailFile.show(taskDetail)\r\n      },\r\n\r\n      //事件委托 想左切换\r\n      leftclick(){\r\n        this.$refs.left.click();\r\n      },\r\n      //事件委托 想右切换\r\n      rightclick(){\r\n        this.$refs.right.click();\r\n      },\r\n        handChange(){\r\n\r\n        },\r\n        //修改日期\r\n        getdateVal(e){\r\n          console.log(e);\r\n          // let timestamp = e.valueOf();\r\n          let currtentTime = new Date(e);\r\n          let Y = currtentTime.getFullYear();\r\n          let M = currtentTime.getMonth()+1;\r\n          let D = currtentTime.getDate();\r\n          // let newTime = Y+'-'+(M<10? \"0\"+M :M)+\"-\"+(D<10? \"0\"+D:D)+\" \"+currtentTime.toTimeString().substr(0,8);\r\n          let newTime = Y+'-'+(M<10? \"0\"+M :M)+\"-\"+(D<10? \"0\"+D:D);\r\n          console.log(newTime);\r\n          this.localTime = Y+'-'+(M<10? \"0\"+M :M)+\"-\"+(D<10? \"0\"+D:D);\r\n\r\n          //  领导日程\r\n          this.leaderList(newTime);\r\n\r\n          //  我的日程\r\n          this.myDayLists(newTime);\r\n\r\n          //  共享日程\r\n          this.publicLists(newTime);\r\n\r\n        //  收文发文\r\n          this.homeLists(this.userid,newTime);\r\n\r\n\r\n\r\n\r\n        },\r\n        delstitle(e){\r\n          this.mystitltid = e;\r\n          this.visible = true;\r\n        },\r\n        //我的日程编辑成功模态框关闭，刷新父级列表\r\n        myrichenClose(e){\r\n          console.log(e);\r\n          if(e){\r\n            getAction(this.url.list,{username:this.userinfo.username}).then((res) => {\r\n              console.log(res);\r\n              this.mytitleLists = res.result.records;\r\n\r\n            });\r\n          }\r\n        },\r\n        //查看更多\r\n        openMore(type){\r\n         /* this.$refs.moremodel.showTableDetail(type,this.newTime);*/\r\n            console.log(type);\r\n            if(type == 1){//我的日程\r\n              this.$router.push('/ioaBus/oaCalendar');\r\n            }else if(type ==2){//领导日程 /ioaBus/oaLeaderCalendar\r\n              this.$router.push('/ioaBus/oaLeaderCalendar');\r\n            }else{//共享日程\r\n              this.$router.push('/ioaBus/oaShareCalendar');\r\n            }\r\n\r\n\r\n\r\n        },\r\n        handleOk(){\r\n          deleteAction(this.url.delete,{id:this.mystitltid,sCreateBy:this.userinfo.username}).then((res) => {\r\n            console.log(res);\r\n            if(res.success){\r\n              this.visible = false;\r\n              getAction(this.url.list,{username:this.userinfo.username}).then((res) => {\r\n                console.log(res);\r\n                this.mytitleLists = res.result.records;\r\n\r\n              });\r\n\r\n            }\r\n\r\n          });\r\n        },\r\n        handleCancel(){\r\n          this.visible = false;\r\n        },\r\n        //编辑我的日程\r\n        editstitle(e,d){\r\n          console.log(e);\r\n          this.$refs.modalForm.update(e,d);\r\n        },\r\n        //查看日程\r\n        chakan(iid){\r\n          getAction(this.url.findById,{id:iid }).then((res) => {\r\n            this.$refs.modalCatForm.dayAnnalysis1(res.result);\r\n\r\n          });\r\n\r\n        },\r\n        //添加我的日程\r\n        add(){\r\n          this.$refs.modalForm.add();\r\n        },\r\n        handleOkEdit(){\r\n          // this.editvisible = true;\r\n\r\n        },\r\n        handleCancelEdit(){\r\n          this.editvisible = false;\r\n        },\r\n        //  领导日程 &userId=\"+this.userid;\r\n        leaderList(timestamp){\r\n          getAction(this.url.findByLeader,{date:timestamp}).then((res) => {\r\n            console.log(res);\r\n            let stitleLists = res.result.records.splice(0,4);\r\n            this.stitleLists = stitleLists;\r\n\r\n          });\r\n\r\n        },\r\n        //  我的日程\r\n        myDayLists(timestamp){\r\n          getAction(this.url.list,{username:this.userinfo.username,date:timestamp}).then((res) => {\r\n            console.log(res);\r\n            this.mytitleLists = res.result.records.splice(0,5);\r\n          });\r\n        },\r\n        //共享日程\r\n        publicLists(timestamp){\r\n          getAction(this.url.queryPageList,{date:timestamp}).then((res) => {\r\n            console.log(res);\r\n            // alert( res.result.records.length)\r\n            this.publictitleLists = res.result.records.splice(0,5);\r\n\r\n          });\r\n        },\r\n        //待办 已办   日程  .replace(0,3);\r\n        findwaitLists(operstatus='task_todo'){\r\n\r\n          getAction(this.url.findwaiturl,{operstatus:operstatus}).then((res) => {\r\n            console.log(Array.isArray(res.result.records));\r\n\r\n            this.findwaitdataLists =res.result.records.splice(0,3)\r\n\r\n            if(operstatus=='task_todo'){\r\n              this.total = res.result.total;\r\n            }else{\r\n             // this.total1 = res.result.total;\r\n            }\r\n\r\n\r\n          });\r\n        },\r\n       //  数据初始化  收文  发文数据\r\n        homeLists(userid,createtime=''){\r\n          getAction(this.url.HomeList,{userId:userid,createTime:createtime}).then((res) => {\r\n            console.log(res);\r\n            this.model1 = res.model1.sName;\r\n            this.path = res.model1.url\r\n            this.model2 = res.model2.sName;\r\n            this.total1 = res.model1.list.length\r\n            this.findwaitdataLists = res.model1.list.splice(0,3);\r\n            this.model2Lists = res.model2.list;\r\n\r\n          });\r\n        },\r\n      // 公告\r\n        getPostLists(){\r\n          postAction(this.url.Posturl,{modelId:49,condition:{function_id:64,selType:1}}).then((res) => {\r\n            console.log(res.result.records);\r\n\r\n            this.postLists = res.result.records.splice(0,3);\r\n            // alert( JSON.stringify(this.postLists ))\r\n          });\r\n        }\r\n      }\r\n    }\r\n</script>\r\n\r\n\r\n<style scoped lang=\"less\">\r\n  .anticon:hover{\r\n    cursor: pointer;\r\n    color: #2eabff;\r\n  }\r\n\r\n  .itembox:hover{\r\n    cursor: pointer;\r\n    /*color: #2eabff;*/\r\n  }\r\n  .postMore:hover{\r\n    cursor: pointer;\r\n  }\r\n\r\n\r\n  /deep/ .ant-input{\r\n    border-color: #054c9c !important;\r\n  }\r\n\r\n  /deep/.ant-fullcalendar-full{\r\n    /*height: 900px;*/\r\n  display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: space-around;\r\n  }\r\n\r\n  /*此处style 无效  alt单机class 在GlobalLayout中设置*/\r\n  /deep/.ant-layout-footer{\r\n    background: red;\r\n  }\r\n  .wrap{\r\n      /*日期组件部分隐藏  年月切换   否则页面布局会乱掉*/\r\n      /deep/.ant-fullcalendar-fullscreen .ant-fullcalendar-header .ant-radio-group{\r\n        /*visibility: hidden; rgb(255, 188, 144)*/\r\n        display: none;\r\n      }\r\n\r\n    /*/deep/.ant-fullcalendar-fullscreen .ant-fullcalendar-selected-day .ant-fullcalendar-date{*/\r\n      /*background:  rgb(255, 188, 144);*/\r\n    /*}*/\r\n    /*/deep/ .ant-fullcalendar-fullscreen .ant-fullcalendar-today .ant-fullcalendar-date{*/\r\n      /*border-top-color: rgb(255, 129, 108);*/\r\n    /*}*/\r\n    /deep/.ant-fullcalendar-header{\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n    }\r\n\r\n    /deep/.ant-select-selection{\r\n      /*border: none;*/\r\n      font-weight: bold;\r\n    }\r\n\r\n\r\n\r\n\r\n      .topp{\r\n        width: 100%;\r\n        min-height: 327px;\r\n        background: #ffffff;\r\n        .part1{\r\n          border-top: 2px solid #00c6ff;\r\n          /*width: 300px;*/\r\n          height: 100%;\r\n          width: 100%;\r\n          /*background: red !important ;*/\r\n          .timeCard{\r\n            width: 100%;\r\n            /*height: 80px;*/\r\n\r\n            /*margin:  0 auto;*/\r\n            background-image: url('../../assets/bgTime.png') ;\r\n            background-repeat: no-repeat;\r\n            background-size: 100% 100%;\r\n            padding-top: 1px;\r\n\r\n\r\n            .month{\r\n              width: 100%;\r\n              font-weight: 600;\r\n              color: #ffffff;\r\n              margin-left: 10px;\r\n              margin-top: 5px;\r\n              margin-bottom: 0;\r\n            }\r\n            .day{\r\n              width: 100%;\r\n              display: flex;\r\n              align-items: flex-start;\r\n              justify-content: center;\r\n              font-size: 40px;\r\n              color: #ffffff;\r\n              margin: 0;\r\n              font-weight: 600;\r\n              margin-top: -10px;\r\n            }\r\n            .weekday{\r\n              color: #ffffff;\r\n              width: 100%;\r\n              text-align: center;\r\n            }\r\n          }\r\n          .rilibox{\r\n            /deep/.ant-fullcalendar {\r\n              height: auto !important;\r\n            }\r\n            /deep/.ant-fullcalendar-full{\r\n              height: auto !important;\r\n            }\r\n            /deep/.ant-fullcalendar-fullscreen{\r\n              height: auto !important;\r\n\r\n            }\r\n            /deep/.ant-fullcalendar-header{\r\n              padding: 11px 16px 0 0;\r\n            }\r\n            /deep/ .ant-fullcalendar-calendar-body{\r\n              padding: 12px 12px;\r\n            }\r\n            /deep/.ant-fullcalendar-calendar-body{\r\n              /*padding-bottom: 30px;*/\r\n\r\n\r\n            }\r\n            /*height: 100%;*/\r\n            /*width: auto !important;*/\r\n            /*border: none !important;*/\r\n            margin: 0 auto;\r\n            /*background: #ffffff;*/\r\n            /deep/.ant-fullcalendar-calendar-body{\r\n              /*background: #e4e6ff;*/\r\n              background: #FBF2DC;\r\n              margin-top: 20px;\r\n            }\r\n            /deep/.ant-fullcalendar-date{\r\n              height: auto;\r\n            }\r\n            /deep/.ant-fullcalendar-content{\r\n              height: 0;\r\n            }\r\n\r\n          }\r\n        }\r\n\r\n        .part2{\r\n          border-top: 2px solid #00c6ff;\r\n          .title{\r\n            width: 100%;\r\n            height: 50px;\r\n            line-height: 50px;\r\n            background: #f4f4f4 !important;\r\n            background: transparent !important;\r\n            text-align: left;\r\n            display: flex;\r\n            align-items: center;\r\n            span{\r\n              font-size: 16px;\r\n              font-weight: 600;\r\n              display: flex;\r\n              align-items: center;\r\n              justify-content: space-between;\r\n            }\r\n          }\r\n\r\n          .itembox{\r\n\r\n            width: 98%;\r\n            /*min-height: 350px;*/\r\n            display: flex;\r\n            flex-direction: column;\r\n            margin: 0 auto;\r\n            margin-top: 10px;\r\n            padding: 0 20px;\r\n            border-right: 1px solid #9b9b9b;\r\n\r\n            .itemline{\r\n              width:98%;\r\n              /*height: 52px;*/\r\n              height: 38px;\r\n              /*height: auto;*/\r\n              /*padding: 20px;*/\r\n              background: #FBF2DC;\r\n              border-top-right-radius: 5px;\r\n              border-bottom-right-radius: 5px;\r\n              padding: 5px;\r\n              /*margin: 10px auto;*/\r\n              margin: 6px auto;\r\n              border-left: 3px solid #FFBC90;\r\n              /*padding-bottom: 20px;*/\r\n              .time{\r\n                width: 100%;\r\n                display: flex;\r\n                align-items: center;\r\n                /*margin: 0;*/\r\n                /*margin-bottom: 3px;*/\r\n                i{\r\n                  width: 5px;\r\n                  height: 5px;\r\n                  background: red;\r\n                  -webkit-border-radius: 5px;\r\n                  -moz-border-radius: 5px;\r\n                  border-radius: 5px;\r\n                  margin-left: 5px;\r\n\r\n                }\r\n                span{\r\n                  margin-left: 10px;\r\n                  font-size: 12px;\r\n                }\r\n\r\n              }\r\n\r\n              .contentbox{\r\n                width: 100%;\r\n                display: flex;\r\n                align-items: center;\r\n                justify-content: space-between;\r\n                margin-left: 8px;\r\n                font-size: 12px;\r\n                margin-top: 3px;\r\n                line-height: 8px;\r\n                span:last-child{\r\n                  margin-right: 20px;\r\n                  font-size: 14px;\r\n\r\n                  img{\r\n                    margin-left: 10px;\r\n                  }\r\n                  img:hover{\r\n                    cursor: pointer;\r\n                  }\r\n                }\r\n              }\r\n            }\r\n\r\n          }\r\n        }\r\n\r\n      }\r\n\r\n      .bottom{\r\n\r\n        margin-top: 12px;\r\n        min-height: 327px;\r\n        height: 100%;\r\n        background: 100%;\r\n\r\n        .part1{\r\n          background: #ffffff;\r\n          /*padding-top: 10px;*/\r\n          padding-bottom: 10px;\r\n          /*height: 300px;*/\r\n          height: 100%;\r\n          .listsBox{\r\n            padding-top: 0px !important;\r\n            width: 100%;\r\n            min-height: 180px;\r\n            /*background: darkcyan;*/\r\n            display: flex;\r\n            flex-direction: column;\r\n            align-items: flex-start;\r\n            /*justify-content: space-between;*/\r\n            /*padding: 15px;*/\r\n            background-image: url(\"../../assets/postBg.png\");\r\n            background-repeat: no-repeat;\r\n            background-size: cover;\r\n            background-position: bottom right;\r\n            margin: 0 auto;\r\n\r\n            /*padding-bottom: 8px;*/\r\n            .title{\r\n              width: 120px;\r\n              background: transparent !important;\r\n              margin-left: 10px;\r\n              margin-top: 10px;\r\n              /*margin-bottom: 10px;*/\r\n\r\n              display: flex;\r\n              align-items: center;\r\n              .imgzhanwei{\r\n                width: 40px;\r\n                height: 40px;\r\n                /*background: #2eabff;*/\r\n                margin-right: 10px;\r\n                img{\r\n                  width: 100%;\r\n\r\n                }\r\n\r\n              }\r\n              span{\r\n                font-size: 16px;\r\n                font-weight: 800;\r\n              }\r\n            }\r\n            /*margin-left: 20px;*/\r\n\r\n\r\n            .lineitem{\r\n              width: 90%;\r\n              /*height: 50px;*/\r\n              display: flex;\r\n              align-items: center;\r\n              justify-content: space-between;\r\n              margin: 0 auto;\r\n              margin-top: 8px;\r\n\r\n              /*background: darkcyan;*/\r\n\r\n              .left{\r\n                width: 58%;\r\n                display: flex;\r\n                align-items: center;\r\n                /*justify-content: space-between;*/\r\n                margin: 0;\r\n                .tongzhi{\r\n                  background: #f8ffbb;\r\n                  font-weight: 600;\r\n                  margin: 0;\r\n                  margin-left: 6px;\r\n                }\r\n                span{\r\n                  margin: 0 10px;\r\n                }\r\n                i{\r\n                  width: 5px;\r\n                  height: 5px;\r\n                  background: #da251c;\r\n                  -webkit-border-radius: 5px;\r\n                  -moz-border-radius: 5px;\r\n                  border-radius: 5px;\r\n                }\r\n                i:first-child{\r\n                  background: #2eabff;\r\n                }\r\n              }\r\n\r\n            }\r\n\r\n            .lineitem:hover{\r\n              cursor: pointer;\r\n            }\r\n\r\n          }\r\n          .searchBox{\r\n            /*width: 40%;*/\r\n\r\n            min-height: 147px;\r\n            padding: 10px;\r\n            width: 100%;\r\n            /*display: flex;*/\r\n            /*align-items: center;*/\r\n            /*justify-content: center;*/\r\n            /*margin-top:50px;*/\r\n            /*background: darkcyan;*/\r\n            /deep/img:hover{\r\n              cursor: pointer;\r\n            }\r\n            /*.top{*/\r\n              /*width: 95%;*/\r\n              /*margin: 0 auto;*/\r\n              /*margin-top: 10px;*/\r\n            /*}*/\r\n            .bottomm{\r\n              width: 100%;\r\n              /*height: 145px;*/\r\n              /*height: 80px;*/\r\n              /*background: red;*/\r\n              min-height: 147px;\r\n              margin: 0px auto;\r\n              /*margin-top: 30px;*/\r\n\r\n              display: flex;\r\n              align-items: center;\r\n              /deep/.swiper-wrapper{\r\n\r\n                width: 100%;\r\n                margin: 0 auto;\r\n\r\n                /*margin-left: 20px;*/\r\n                .swiper-slide{\r\n                  /*width: 100px;*/\r\n                  height: 100%;\r\n                  /*background: red;*/\r\n                  display: flex;\r\n                  flex-direction: column;\r\n                  align-items: center;\r\n                  justify-content: space-around;\r\n                  /*margin-right: 0px !important;*/\r\n                  /*margin-left: 5px !important;*/\r\n                  div{\r\n                    width: 90px;\r\n                    height: 90px;\r\n                    border-radius: 50%;\r\n                    /*background: #2eabff;*/\r\n                    img{\r\n                      width: 100%;\r\n                    }\r\n                    img:hover{\r\n                      cursor: pointer;\r\n                    }\r\n                  }\r\n                  span{\r\n                    font-size: 14px;\r\n                    color: #333333;\r\n                  }\r\n                }\r\n              }\r\n\r\n            }\r\n          }\r\n\r\n        }\r\n\r\n\r\n        .daiban{\r\n          /*width: 60%;*/\r\n          /*height: 100%;*/\r\n          /*padding: 10px;*/\r\n          background: #ffffff;\r\n          display: flex;\r\n          flex-direction: column;\r\n          align-items: center;\r\n          justify-content: flex-start;\r\n          margin-left: 12px;\r\n\r\n          .titlebox{\r\n            width: 100%;\r\n            height: 40px;\r\n            height: 55px;\r\n            border-bottom: 2px solid #009dee;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: space-between;\r\n            margin: 0;\r\n\r\n            span:hover{\r\n              cursor: pointer;\r\n            }\r\n            .firstspan{\r\n              min-width: 120px;\r\n              height: 40px;\r\n              padding: 0 8px;\r\n              padding-left: 0;\r\n              background: #009dee;\r\n              font-size: 16px;\r\n              font-weight: bold;\r\n              /*color: #ffffff;*/\r\n              display: flex;\r\n              align-items: center;\r\n\r\n              .shuline{\r\n                width: 5px;\r\n                height: 40px;\r\n                background: #1174b9;\r\n                padding: 0;\r\n                margin-right: 10px;\r\n              }\r\n              b{\r\n                min-width: 15px;\r\n                height: 15px;\r\n                border-radius: 10px;\r\n                background: #f02d13;\r\n                margin-left: 10px;\r\n                margin-bottom: 12px;\r\n                display: flex;\r\n                align-items: center;\r\n                justify-content: center;\r\n                padding-bottom: 3px;\r\n                padding-right: .5px;\r\n                font-size: 12px;\r\n\r\n              }\r\n            }\r\n            .secondspan{\r\n              min-width: 120px;\r\n              height: 40px;\r\n              padding: 0 10px;\r\n              padding-left: 10px;\r\n              background: #7fbbff;\r\n              font-size: 16px;\r\n              font-weight: bold;\r\n              color: #333333;\r\n              display: flex;\r\n              align-items: center;\r\n\r\n              b{\r\n                min-width: 15px;\r\n                height: 15px;\r\n                border-radius: 10px;\r\n                background: #f02d13;\r\n                margin-left: 10px;\r\n                margin-bottom: 12px;\r\n                display: flex;\r\n                align-items: center;\r\n                justify-content: center;\r\n                padding-bottom: 3px;\r\n                padding-right: .5px;\r\n                font-size: 12px;\r\n\r\n              }\r\n            }\r\n\r\n          }\r\n\r\n          .itemline{\r\n            width: 100%;\r\n            /*min-height:230px;*/\r\n            /*background: #999999;*/\r\n            /*padding: 10px;*/\r\n            padding-top: 0;\r\n            display: flex;\r\n            flex-direction: column;\r\n            margin: 0;\r\n\r\n\r\n\r\n            .each{\r\n              width: 100%;\r\n              /*background: red;*/\r\n              display: flex;\r\n              align-items: center;\r\n              justify-content: space-between;\r\n              /*line-height: 40px;*/\r\n              /*padding-bottom: 20px;*/\r\n              /*border-bottom: 1px solid #f0f2f5;*/\r\n              border-left: 5px solid #c7ecff;\r\n              /*margin-left: 10px;*/\r\n              p{\r\n                width:100%;\r\n                height: 46px;\r\n                display: flex;\r\n                align-items: center;\r\n                justify-content: space-between;\r\n                /*line-height: 40px;*/\r\n                margin: 0;\r\n                font-size: 14px;\r\n                margin-left: 20px;\r\n                /*margin-top: 19px;*/\r\n                span:first-child{\r\n                  display: block;\r\n                  /*line-height: 40px;*/\r\n                  width: 60%;\r\n                  /*height: 20px;*/\r\n                  overflow: hidden;\r\n                  text-overflow: ellipsis;\r\n                  white-space: nowrap;\r\n                  display: flex;\r\n                  align-items: center;\r\n                  i{\r\n                    width: 5px;\r\n                    height: 5px;\r\n                    background: #2eabff;\r\n                    margin-right: 10px;\r\n                  }\r\n                  img{\r\n                    width: 40px;\r\n                    margin-bottom: 18px;\r\n                    margin-left: 5px;\r\n                  }\r\n\r\n\r\n                }\r\n                span:last-child{\r\n                  display: block;\r\n                  line-height: 40px;\r\n                  margin-right: 20px;\r\n                }\r\n              }\r\n              a{\r\n\r\n                margin-top: 5px;\r\n\r\n              }\r\n            }\r\n          }\r\n\r\n          .itemline:hover{\r\n            cursor: pointer;\r\n          }\r\n        }\r\n\r\n\r\n      }\r\n    }\r\n</style>"]}]}
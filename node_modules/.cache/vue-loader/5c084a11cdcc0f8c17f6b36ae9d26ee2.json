{"remainingRequest":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xxm\\work\\jd\\fore\\src\\views\\data\\dataGram\\Distribution.vue?vue&type=style&index=0&id=7fe36347&scoped=true&lang=less&","dependencies":[{"path":"C:\\xxm\\work\\jd\\fore\\src\\views\\data\\dataGram\\Distribution.vue","mtime":1577616664489},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\css-loader\\index.js","mtime":1570780111199},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1570779225817},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\postcss-loader\\src\\index.js","mtime":1570780438513},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\less-loader\\dist\\cjs.js","mtime":1570780454546},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js","mtime":1570779225726}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.optionsNav{\n  width: 100%;\n  /*background: darkcyan;*/\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  p{\n   width: 190px;\n    display: flex;\n    /*background: darkcyan;*/\n    justify-content: space-between;\n  }\n  .lineNav{\n    span:hover{\n      color: #2eabff;\n      cursor: pointer;\n    }\n  }\n}\n\n",{"version":3,"sources":["Distribution.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Distribution.vue","sourceRoot":"src/views/data/dataGram","sourcesContent":["<template>\r\n <div>\r\n   <a-card :loading=\"loading\" :bordered=\"false\" :body-style=\"{padding: '0'}\">\r\n     <div class=\"salesCard\">\r\n         <div>\r\n            <div class=\"optionsNav\">\r\n               <p>\r\n                 <a-button  key=\"1\" :type=\"showtype==1?primary:'default'\"   @click=\"getShowType(1)\">按月统计展示</a-button>\r\n                 <a-button style=\"margin-left: 10px;\"  key=\"2\"  :type=\"showtype==2?primary:'default'\" @click=\"getShowType(2)\">按主办部门展示</a-button>\r\n               </p>\r\n              <span class=\"lineNav\">\r\n                <span @click=\"showTypeChart(0)\" :style=\"typeChart==0? 'color:#2eabff':'color:rgba(0, 0, 0, 0.65)'\">柱状图</span >\r\n                  <a-divider type=\"vertical\" />\r\n                <span @click=\"showTypeChart(1)\" :style=\"typeChart==1? 'color:#2eabff':'color:rgba(0, 0, 0, 0.65)'\">饼状图</span>\r\n                   <a-divider type=\"vertical\" />\r\n                <span @click=\"showTypeChart(2)\" :style=\"typeChart==2? 'color:#2eabff':'color:rgba(0, 0, 0, 0.65)'\">折线图</span>\r\n                 <a-divider type=\"vertical\" />\r\n                  <span @click=\"downLoad('日程管理表')\" >生成报表</span>\r\n              </span>\r\n            </div>\r\n            <!--<apexchart width=\"60%\" style=\"margin-top: 20px;\" type=\"bar\" height=\"400\" v-if=\"showtype==1?true:false\" title=\"月份排行\" :options=\"chartOptions\" :series=\"series\" ></apexchart>-->\r\n          <!--按月统计展示-->\r\n           <bar-chart v-show=\"showtype==1&&typeChart==0?true:false\" ref=\"bar\"></bar-chart>\r\n           <pei-chart v-show=\"showtype==1&&typeChart==1?true:false\" ref=\"pie\"> </pei-chart>\r\n           <line-chart v-show=\"showtype==1&&typeChart==2?true:false\" ref=\"line\"> </line-chart>\r\n\r\n           <!--按主办部门展示-->\r\n           <bar-depart-chart v-show=\"showtype==2&&typeChart==0?true:false\" ref=\"departbar\"></bar-depart-chart>\r\n           <pie-depart-chart v-show=\"showtype==2&&typeChart==1?true:false\" ref=\"deparpie\"></pie-depart-chart>\r\n           <line-depart-chart  v-show=\"showtype==2&&typeChart==2?true:false\" ref=\"deparline\"></line-depart-chart>\r\n\r\n\r\n         </div>\r\n        <div>\r\n       </div>\r\n     </div>\r\n   </a-card>\r\n </div>\r\n</template>\r\n\r\n<script>\r\n\r\n  import Bar from '@/components/chart/Bar'\r\n  import PeiChart from './chartComponents/PieChart'\r\n  import BarChart from './chartComponents/BarChart'\r\n  import LineChart from './chartComponents/LineChart'\r\n  import { getLoginfo,getVisitInfo } from '@/api/api'\r\n  import {httpAction,getAction,downFile} from '@/api/manage'\r\n  import BarDepartChart  from './chartComponents/BarDepartChart'\r\n  import LineDepartChart  from './chartComponents/LineDepartChart'\r\n  import PieDepartChart  from './chartComponents/PieDepartChart'\r\n  import { JeecgListMixin } from '@/mixins/JeecgListMixin'\r\n  import { filterObj } from '@/utils/util';\r\n\r\n  export default {\r\n      name: \"Distribution\",\r\n      mixins:[JeecgListMixin],\r\n      components: {\r\n          BarDepartChart,\r\n          LineDepartChart,\r\n          PieDepartChart,\r\n          // Bar,\r\n          BarChart,\r\n          PeiChart,\r\n          LineChart\r\n        },\r\n      data() {\r\n        return {\r\n          queryParam:{\r\n\r\n          },\r\n          code: '',\r\n          primary:'primary',// 按钮高亮处理\r\n          loading:false,\r\n          typeChart:0,//展示图标类型\r\n          typeModelName:'bar',\r\n          showtype:1,// 按月统计 主办部门\r\n          subData:'',\r\n\r\n\r\n          bardata:null,\r\n          basedata:null,  // 按月查询基础数据\r\n          basedata1:null,  // 按部门查询基础数据\r\n\r\n        }\r\n      },\r\n      created() {\r\n      ///data/dataAnalysis/HandlingRate\r\n      },\r\n      methods: {\r\n        // 柱状图 饼图  折线图\r\n        showTypeChart(e= this.typeChart){\r\n            this.typeChart = e;\r\n            if(e==0){\r\n              if(this.showtype==1){\r\n                this.$refs.bar.getData(this.basedata);\r\n              }else{\r\n                this.$refs.departbar.getData(this.basedata1);\r\n              }\r\n\r\n            }else if(e==1){\r\n              if(this.showtype==1){\r\n                this.$refs.pie.getData(this.basedata);\r\n              }else{\r\n                this.$refs.deparpie.getData(this.basedata1);\r\n              }\r\n\r\n            }else{\r\n              if(this.showtype==1){\r\n                this.$refs.line.getData(this.basedata);\r\n              }else{\r\n                this.$refs.deparline.getData(this.basedata1);\r\n              }\r\n\r\n            }\r\n\r\n        },\r\n        downLoad(){\r\n          this.subData.type = this.showtype;\r\n            console.log(this.subData);\r\n          let config = {\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              \"Access-Control-Expose-Headers\": \"Content-Disposition\"\r\n            },\r\n            responseType: 'blob',//必须要写\r\n          };\r\n          getAction('/data/dataAnalysis/exportXls', this.subData,config).then((res)=>{\r\n            let data = res;\r\n            let fileName= \"sdffhgjksh.xls\"\r\n            let url = window.URL.createObjectURL(new Blob([data]));\r\n            console.log(new Blob([data]));\r\n\r\n            let edik = document.createElement('a');\r\n            edik.style.display = 'none';\r\n            edik.href = url;\r\n            edik.setAttribute('download', fileName);\r\n            document.body.appendChild(edik);\r\n            //点击下载\r\n            edik.click();\r\n            // 释放掉blob对象\r\n            window.URL.revokeObjectURL(edik);\r\n            // 下载完成移除元素\r\n            document.body.removeChild(edik);\r\n\r\n\r\n\r\n\r\n\r\n          })\r\n\r\n        },\r\n        // 按月统计  或者 主办部门  切换\r\n       getShowType(e){\r\n         this.showtype = e;\r\n         this.getSubData(this.subData);\r\n\r\n       },\r\n        //图表数据  接收父及页面回传的  subData\r\n        getSubData(data){\r\n\r\n          this.subData = data;\r\n          if(this.showtype==1){\r\n            let url = '/data/dataAnalysis/myAnalysis';  //按月查询图标基本数据\r\n            getAction(url,data).then((res)=>{\r\n              console.log('**************************************',res);\r\n              this.basedata = res;\r\n              //初始化主动调用  默认 初始化为柱状图 即 “0”\r\n              this.showTypeChart()\r\n            })\r\n          }else{\r\n            let url1 = '/data/dataAnalysis/MyDepart';//按部门查询图标基本数据\r\n            getAction(url1,data).then((res)=>{\r\n              this.basedata1 = res;\r\n              //初始化主动调用  默认 初始化为柱状图 即 “0”\r\n              this.showTypeChart()\r\n            })\r\n\r\n          }\r\n\r\n\r\n\r\n\r\n          let url2 = '/data/dataAnalysis/HandlingRate'; //办理率\r\n          getAction(url2,data).then((res)=>{\r\n            console.log(res);\r\n            this.$refs.bar.getData1(res);\r\n            this.$refs.pie.getData1(res);\r\n            this.$refs.line.getData1(res);\r\n\r\n\r\n            this.$refs.departbar.getData1(res);\r\n            this.$refs.deparpie.getData1(res);\r\n            this.$refs.deparline.getData1(res);\r\n\r\n          })\r\n          let url3 = '/data/dataAnalysis/Handling';  //总共办理的公文数量\r\n          getAction(url3,data).then((res)=>{\r\n            console.log(res);\r\n            this.$refs.bar.getData2(res);\r\n            this.$refs.pie.getData2(res);\r\n            this.$refs.line.getData2(res);\r\n\r\n            this.$refs.departbar.getData2(res);\r\n            this.$refs.deparpie.getData2(res);\r\n            this.$refs.deparline.getData2(res);\r\n          })\r\n          let url4 = '/data/dataAnalysis/PeerNum';  //办理的数量占同行办理数量的比例\r\n          getAction(url4,data).then((res)=>{\r\n            console.log(res);\r\n            this.$refs.bar.getData3(res);\r\n            this.$refs.pie.getData3(res);\r\n            this.$refs.line.getData3(res);\r\n\r\n            this.$refs.departbar.getData3(res);\r\n            this.$refs.deparpie.getData3(res);\r\n            this.$refs.deparline.getData3(res);\r\n          })\r\n          let url5 = \"/data/dataAnalysis/Rate\";   // 办结率\r\n          getAction(url5,data).then((res) => {\r\n\r\n            this.$refs.bar.getData4(res);\r\n            this.$refs.pie.getData4(res);\r\n            this.$refs.line.getData4(res);\r\n            console.log('===========================================================',res);\r\n            this.$refs.departbar.getData4(res);\r\n            this.$refs.deparpie.getData4(res);\r\n            this.$refs.deparline.getData4(res);\r\n\r\n\r\n          })\r\n          let url6 = \"/data/dataAnalysis/MonthAverage\";   // 超过平均值月份\r\n          getAction(url6,data).then((res) => {\r\n            console.log(res);\r\n            this.$refs.bar.getData5(res);\r\n            this.$refs.pie.getData5(res);\r\n            this.$refs.line.getData5(res);\r\n\r\n            // this.$refs.departbar.getData5(res);\r\n            // this.$refs.deparpie.getData5(res);\r\n            // this.$refs.deparline.getData5(res);\r\n\r\n          })\r\n\r\n\r\n        },\r\n\r\n        // 按部门查询\r\n        // asDepartCheack(data){\r\n        //   // 按部门显示  查询部门\r\n        //     console.log(data);\r\n        //   let url = '/data/dataAnalysis/MyDepart';\r\n        //   getAction(url,data).then((res)=>{\r\n        //     this.basedata = res;\r\n        //     this.showTypeChart()\r\n        //     // console.log(res);\r\n        //     // this.$refs.departbar.getData(res);\r\n        //     // this.$refs.deparpie.getData(res);\r\n        //     // this.$refs.deparline.getData(res);\r\n        //   })\r\n        //\r\n        // },\r\n\r\n\r\n      }\r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n\r\n  .optionsNav{\r\n    width: 100%;\r\n    /*background: darkcyan;*/\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    p{\r\n     width: 190px;\r\n      display: flex;\r\n      /*background: darkcyan;*/\r\n      justify-content: space-between;\r\n    }\r\n    .lineNav{\r\n      span:hover{\r\n        color: #2eabff;\r\n        cursor: pointer;\r\n      }\r\n    }\r\n  }\r\n\r\n</style>"]}]}
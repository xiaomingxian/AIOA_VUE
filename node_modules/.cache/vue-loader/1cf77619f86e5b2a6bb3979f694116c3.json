{"remainingRequest":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xxm\\work\\jd\\fore\\src\\views\\oaBus\\TestCollapseListOrNot.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\xxm\\work\\jd\\fore\\src\\views\\oaBus\\TestCollapseListOrNot.vue","mtime":1577616664323},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\css-loader\\index.js","mtime":1570780111199},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1570779225817},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\postcss-loader\\src\\index.js","mtime":1570780438513},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js","mtime":1570779225726}],"contextDependencies":[],"result":["\r\n\r\n.input{\r\n  background-color: #f0f5fc;\r\n}\r\n\r\n.ant-select-selection--single{\r\n  background-color: #f0f5fc !important;\r\n}\r\n\r\n.ant-table-thead > tr > th{\r\n  color: #fff;\r\n  background-color: #006db9;\r\n  border: none !important;\r\n}\r\n\r\n.aant-table-tbody > tr:hover{\r\n  cursor: pointer;\r\n}\r\n\r\n.light-row{\r\n  background-color: #fff;\r\n}\r\n\r\n.dark-row{\r\n  /*background:linear-gradient(to bottom,rgb(221,221,255),rgb(167,196,255)) repeat scroll 0% 0%;*/\r\n  background-color: #c2d9f8;\r\n}\r\n\r\n.dark-row:hover{\r\n  background-color: #ffadd2;\r\n}\r\n\r\n/*.ant-tabs-nav-scroll{*/\r\n  /*height:39px;*/\r\n/*}*/\r\n\r\n/*.ant-card-body .ant-tabs-bar{*/\r\n  /*border:none;*/\r\n/*}*/\r\n\r\n/*.ant-card-body .ant-tabs-nav{*/\r\n  /*!*background-color: #ffadd2;*!*/\r\n  /*border:1px solid #909090;*/\r\n  /*border-radius: 25%;*/\r\n  /*height: 27px;*/\r\n  /*top: 5px;*/\r\n/*}*/\r\n\r\n/*.ant-card-body .ant-tabs-bar .ant-tabs-tab{*/\r\n  /*font-size: 14px;*/\r\n  /*padding-top: 2px;*/\r\n  /*margin-right: 0px;*/\r\n  /*bottom: 1px;*/\r\n/*}*/\r\n\r\n/*.ant-card-body .ant-tabs-bar .ant-tabs-tab:hover{*/\r\n  /*color: #0061cb;*/\r\n/*}*/\r\n\r\n/*.ant-card-body .ant-tabs-bar .ant-tabs-tab-active{*/\r\n  /*color: #fff;*/\r\n  /*background-color: #7d70ff;*/\r\n  /*border-radius: 27%;*/\r\n  /*height:27px;*/\r\n/*}*/\r\n/*.ant-card-body .ant-tabs-bar .ant-tabs-ink-bar-animated{*/\r\n  /*display: none !important;*/\r\n/*}*/\r\n\r\n.table-page-search-submitButtons .ant-btn{\r\n  background:linear-gradient(180deg,rgba(115,128,255,1),rgba(47,86,255,1)) repeat scroll 0% 0%;\r\n}\r\n\r\n.table-page-search-submitButtons .ant-btn svg{\r\n  fill:cyan;\r\n}\r\n\r\n",{"version":3,"sources":["TestCollapseListOrNot.vue"],"names":[],"mappings":";;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"TestCollapseListOrNot.vue","sourceRoot":"src/views/oaBus","sourcesContent":["<style>\r\n\r\n.input{\r\n  background-color: #f0f5fc;\r\n}\r\n\r\n.ant-select-selection--single{\r\n  background-color: #f0f5fc !important;\r\n}\r\n\r\n.ant-table-thead > tr > th{\r\n  color: #fff;\r\n  background-color: #006db9;\r\n  border: none !important;\r\n}\r\n\r\n.aant-table-tbody > tr:hover{\r\n  cursor: pointer;\r\n}\r\n\r\n.light-row{\r\n  background-color: #fff;\r\n}\r\n\r\n.dark-row{\r\n  /*background:linear-gradient(to bottom,rgb(221,221,255),rgb(167,196,255)) repeat scroll 0% 0%;*/\r\n  background-color: #c2d9f8;\r\n}\r\n\r\n.dark-row:hover{\r\n  background-color: #ffadd2;\r\n}\r\n\r\n/*.ant-tabs-nav-scroll{*/\r\n  /*height:39px;*/\r\n/*}*/\r\n\r\n/*.ant-card-body .ant-tabs-bar{*/\r\n  /*border:none;*/\r\n/*}*/\r\n\r\n/*.ant-card-body .ant-tabs-nav{*/\r\n  /*!*background-color: #ffadd2;*!*/\r\n  /*border:1px solid #909090;*/\r\n  /*border-radius: 25%;*/\r\n  /*height: 27px;*/\r\n  /*top: 5px;*/\r\n/*}*/\r\n\r\n/*.ant-card-body .ant-tabs-bar .ant-tabs-tab{*/\r\n  /*font-size: 14px;*/\r\n  /*padding-top: 2px;*/\r\n  /*margin-right: 0px;*/\r\n  /*bottom: 1px;*/\r\n/*}*/\r\n\r\n/*.ant-card-body .ant-tabs-bar .ant-tabs-tab:hover{*/\r\n  /*color: #0061cb;*/\r\n/*}*/\r\n\r\n/*.ant-card-body .ant-tabs-bar .ant-tabs-tab-active{*/\r\n  /*color: #fff;*/\r\n  /*background-color: #7d70ff;*/\r\n  /*border-radius: 27%;*/\r\n  /*height:27px;*/\r\n/*}*/\r\n/*.ant-card-body .ant-tabs-bar .ant-tabs-ink-bar-animated{*/\r\n  /*display: none !important;*/\r\n/*}*/\r\n\r\n.table-page-search-submitButtons .ant-btn{\r\n  background:linear-gradient(180deg,rgba(115,128,255,1),rgba(47,86,255,1)) repeat scroll 0% 0%;\r\n}\r\n\r\n.table-page-search-submitButtons .ant-btn svg{\r\n  fill:cyan;\r\n}\r\n\r\n</style>\r\n\r\n<template>\r\n    <div class=\"table-page-search-wrapper\">\r\n      <a-card :bordered=\"ture\">\r\n      <a-tabs @change=\"changFunId\" defaultActiveKey=\"1\">\r\n        <a-tab-pane v-for=\"(item,index) in selectList\" :tab=\"item.sname\" :key=\"index+1\">\r\n          <a-form layout=\"inline\">\r\n            <a-row :gutter=\"48\" style=\"margin:0 -150px 0 24px;\">\r\n              <a-col :md=\"!advanced && 24 || 24\" :sm=\"24\">\r\n            <span class=\"table-page-search-submitButtons\"\r\n                  :style=\"advanced && { float: 'right', overflow: 'hidden' } || {} \">\r\n              <a @click=\"toggleAdvanced\" style=\"position: absolute;bottom: 34%;right: 14%;\">\r\n                {{ advanced ? '隐藏' : '显示' }}\r\n                <a-icon :type=\"advanced ? 'up' : 'down'\"/>\r\n              </a>\r\n            </span>\r\n              </a-col>\r\n              <template v-if=\"advanced\">\r\n                <!--<a-col :md=\"7\" :sm=\"24\" style=\"margin-top:7px;\">-->\r\n                  <!--<a-form-item label=\"业务功能\">-->\r\n                    <!--<a-select @change=\"changFunId\" v-model=\"queryParam.function_id\">-->\r\n                      <!--<a-select-option v-for=\"(item,index) in selectList\" :key=\"index\" :value=\"item.iid\">{{item.sname}}-->\r\n                      <!--</a-select-option>-->\r\n                    <!--</a-select>-->\r\n                  <!--</a-form-item>-->\r\n                <!--</a-col>-->\r\n                <a-col :md=\"7\" :sm=\"24\" style=\"margin-top:7px;\">\r\n                  <a-form-item label=\"公文状态\">\r\n                    <a-select v-model=\"queryParam.i_is_state\">\r\n                      <a-select-option value=\"1\">已办结</a-select-option>\r\n                      <a-select-option value=\"0\">未办结</a-select-option>\r\n                    </a-select>\r\n                  </a-form-item>\r\n                </a-col>\r\n                <a-col :md=\"7\" :sm=\"24\" style=\"margin-top: 7px;\">\r\n                  <a-form-item label=\"申请人\">\r\n                    <a-radio-group v-model=\"queryParam.selType\">\r\n                      <a-radio :value=\"0\">由我创建</a-radio>\r\n                      <a-radio :value=\"1\" style=\"width: 33%;\">\r\n                        全部数据\r\n                        <a-input v-if=\"queryParam.selType === 1\" v-model=\"queryParam.s_create_name\"\r\n                                 style=\"margin-left: 7px\"/>\r\n                      </a-radio>\r\n                    </a-radio-group>\r\n                  </a-form-item>\r\n                </a-col>\r\n                <a-col :md=\"7\" :sm=\"24\" style=\"margin-top:7px;\">\r\n                  <a-form-item label=\"申请年份\">\r\n                    <a-select v-model=\"queryParam.d_create_time\">\r\n                      <a-select-option v-for=\"(item,index) in timeList\" :key=\"index\" :value=\"item\">{{item}}\r\n                      </a-select-option>\r\n                    </a-select>\r\n                  </a-form-item>\r\n                </a-col>\r\n\r\n\r\n                <a-col v-for=\"(atom,index) in conditionList\" :key=\"index\" :value=\"atom.s_table_column\" :md=\"7\" :sm=\"24\" style=\"margin-top:7px;\">\r\n                  <a-form-item :label=\"atom.s_column_name\">\r\n                    <!--<a-select v-if=\"atom.s_table_column=='s_file_num'\" @change=\"changeSelect($event,atom.s_table_column)\" placeholder=\"请选择\">-->\r\n                    <!--<a-select-option v-for=\"(item,index) in selectList\" :key=\"item.i_id\" :value=\"item.i_id\">{{item.s_name}}</a-select-option>-->\r\n                    <!--</a-select>-->\r\n\r\n                    <a-input class=\"input\" ref=\"inputs\" @input=\"changeInput($event,atom.s_table_column)\" placeholder=\"请输入\"/>\r\n                  </a-form-item>\r\n                </a-col>\r\n\r\n\r\n                <a-col :md=\"!advanced && 7 || 24\" :sm=\"24\" style=\"text-align: center;padding-right:172px;\">\r\n            <span class=\"table-page-search-submitButtons\" :style=\"advanced && { overflow: 'hidden' } || {} \">\r\n              <a-button type=\"primary\" icon=\"search\" @click=\"collapseListOrNot\">查询</a-button>\r\n              <a-button type=\"primary\" icon=\"reload\" @click=\"resetPgConditionList\" style=\"margin-left:27px;\">重置</a-button>\r\n            </span>\r\n                </a-col>\r\n\r\n              </template>\r\n            </a-row>\r\n          </a-form>\r\n\r\n          <!-- 操作按钮区域 -->\r\n          <div class=\"table-operator\">\r\n            <a-dropdown v-if=\"selectedRowKeys.length > 0\">\r\n              <a-menu slot=\"overlay\">\r\n                <a-menu-item key=\"1\" @click=\"batchEnd\">\r\n                <a-icon type=\"delete\"/>\r\n                批量办结\r\n                </a-menu-item>\r\n                <a-menu-item v-if=\"(url.list=='/wf/task/queryTask?operstatus=my_chuanyue') \"\r\n                             key=\"1\" @click=\"batchPiYue\">\r\n                  <a-icon type=\"delete\"/>\r\n                  批量批阅\r\n                </a-menu-item>\r\n              </a-menu>\r\n\r\n              <a-button style=\"margin-left: 8px\"> 批量操作\r\n                <a-icon type=\"down\"/>\r\n              </a-button>\r\n            </a-dropdown>\r\n          </div>\r\n\r\n          <!-- table区域-begin -->\r\n          <!--<div>-->\r\n            <!--<div class=\"ant-alert ant-alert-info\" style=\"margin-bottom: 16px;\">-->\r\n              <!--<i class=\"anticon anticon-info-circle ant-alert-icon\"></i> 已选择 <a style=\"font-weight: 600\">{{-->\r\n              <!--selectedRowKeys.length }}</a>项-->\r\n              <!--<a style=\"margin-left: 24px\" @click=\"onClearSelected\">清空</a>-->\r\n            <!--</div>-->\r\n\r\n          <a-table\r\n            v-if=\"iisFold == 0\"\r\n            ref=\"table\"\r\n            size=\"middle\"\r\n            :columns=\"columns\"\r\n            :dataSource=\"dataSource\"\r\n            :pagination=\"pagination\"\r\n            :loading=\"loading\"\r\n            :showAlertInfo=\"false\"\r\n            bordered\r\n            rowKey=\"processInstanceId\"\r\n            :rowSelection=\"{selectedRowKeys: selectedRowKeys, onChange: onSelectChange}\"\r\n            :customRow=\"onClick\"\r\n            @change=\"(page,pageSize) => {\r\n               handleTableChange(page)\r\n          }\"\r\n            :rowClassName=\"(record,index) => {\r\n              let className  = 'light-row';\r\n              if (index % 2 === 1) className = 'dark-row';\r\n              return className;\r\n          }\"\r\n          >\r\n\r\n             <span slot=\"action\" slot-scope=\"text, record\">\r\n\r\n          <a @click.stop=\"jump(record)\">重置</a>\r\n           <a-divider type=\"vertical\"/>\r\n          <a @click.stop=\"unDo(record)\">未办理信息</a>\r\n          <a-divider type=\"vertical\"/>\r\n          <a @click.stop=\"showPic(record)\">查看流程图</a>\r\n\r\n        </span>\r\n\r\n          </a-table>\r\n\r\n          <a-table\r\n            v-if=\"iisFold == 1\"\r\n            :columns=\"columns\"\r\n            :dataSource=\"dataSource\"\r\n            :pagination=\"false\"\r\n            :loading=\"loading\"\r\n            :showAlertInfo=\"false\"\r\n            :showHeader=\"false\"\r\n            :expandIconAsCell=\"false\"\r\n            bordered\r\n            :rowKey=\"record => record.key\"\r\n            @expandedRowsChange=\"(expandedRows) => {\r\n               getPgSecondList(expandedRows);\r\n          }\"\r\n          >\r\n\r\n            <a-table\r\n              slot=\"expandedRowRender\"\r\n              slot-scope=\"record,index,indent,expanded\"\r\n              size=\"middle\"\r\n              :columns=\"columnes\"\r\n              :dataSource=\"dataSources\"\r\n              :pagination=\"false\"\r\n              :loading=\"loading\"\r\n              :showAlertInfo=\"false\"\r\n              rowKey=\"processInstanceId\"\r\n              :rowSelection=\"{selectedRowKeys: selectedRowKeys, onChange: onSelectChange}\"\r\n              :rowClassName=\"(record,index) => {\r\n              let className  = 'light-row';\r\n              if (index % 2 === 1) className = 'dark-row';\r\n              return className;\r\n          }\"\r\n            >\r\n\r\n              <span slot=\"action\" slot-scope=\"text, record\">\r\n\r\n          <a @click.stop=\"jump(record)\">重置</a>\r\n           <a-divider type=\"vertical\"/>\r\n          <a @click.stop=\"unDo(record)\">未办理信息</a>\r\n          <a-divider type=\"vertical\"/>\r\n          <a @click.stop=\"showPic(record)\">查看流程图</a>\r\n\r\n        </span>\r\n\r\n\r\n            </a-table>\r\n\r\n          </a-table>\r\n\r\n      <!--</div>-->\r\n          <!-- table区域-end -->\r\n\r\n          <!-- 表单区域 -->\r\n          <pic2-modal ref=\"pic2Modal\" @ok=\"modalFormOk\"></pic2-modal>\r\n          <new-task-modal ref=\"newTask\"></new-task-modal>\r\n\r\n\r\n          <!--业务页面-->\r\n          <detail-file ref=\"detailFile\"></detail-file>\r\n          <back-modal ref=\"backModal\"></back-modal>\r\n\r\n\r\n        </a-tab-pane>\r\n      </a-tabs>\r\n      </a-card>\r\n      <detail-file ref=\"detailFile\"></detail-file>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n  import STable from '@/components/table/'\r\n  import ATextarea from \"ant-design-vue/es/input/TextArea\"\r\n  import AInput from \"ant-design-vue/es/input/Input\"\r\n  import pic2Modal from '@/views/mytask/modules/pic2Modal'\r\n  import moment from \"moment\"\r\n  import axios from 'axios';\r\n  import {httpAction, getAction, postAction, getRoleList, getUserList, getServiceList} from '@/api/manage'\r\n  import pick from 'lodash.pick'\r\n  import ARadioGroup from \"ant-design-vue/es/radio/Group\"\r\n  import DetailFile from \"@/views/mytask/taskList/detailFile\"\r\n  import backModal from '@/views/mytask/modules/backModal'\r\n\r\n  export default {\r\n    name: \"CollapseListOrNot\",\r\n    components: {\r\n      pic2Modal,\r\n      DetailFile,\r\n      ARadioGroup,\r\n      AInput,\r\n      ATextarea,\r\n      STable,\r\n      backModal\r\n    },\r\n    data() {\r\n      return {\r\n        description: '这是公共查询列表页面',\r\n        visibleCreateModal: false,\r\n        visible: false,\r\n        iisFold:0,\r\n        getPageList: [],\r\n        conditionList: [],\r\n        resetConditionList: {},\r\n        setConditionList:{},\r\n        selectList: [],\r\n        timeList: [],\r\n        modelId: '',\r\n        tableName: '',\r\n        searchColumns: [],\r\n        searchList: [],\r\n        model: {pageDetailList: [{}]},\r\n        labelCol: {\r\n          xs: {span: 24},\r\n          sm: {span: 5},\r\n        },\r\n        wrapperCol: {\r\n          xs: {span: 24},\r\n          sm: {span: 16},\r\n        },\r\n        confirmLoading: false,\r\n        mdl: {\r\n          dataIndex: 'description',\r\n        },\r\n\r\n        // 高级搜索 展开/关闭\r\n        advanced: true,\r\n        // 查询参数\r\n        queryParam: {\r\n          function_id: '',\r\n          i_is_state: '',\r\n          selType: 1,\r\n          s_create_name: '',\r\n          d_create_time: '',\r\n        },\r\n        // 表头\r\n        columns: [],\r\n        columnes: [],\r\n        dataSource: [],\r\n        taskKey:[],\r\n        taskNames:[],\r\n        // rowSelection:{\r\n        //   onSelect:(record,selected,selectedRows)=>{\r\n        //     console.log('-----------------------<><><><><><><><><><><><><>--------------------------');\r\n        //     console.log(record,selected,selectedRows);\r\n        //   }\r\n        // },\r\n        dataSources: [],\r\n        pagination: {\r\n          current: 1,\r\n          pageSize: 10,\r\n          pageSizeOptions: ['5', '10', '15', '20', '25', '30'],\r\n          showTotal: (total, range) => {\r\n            return range[0] + \"-\" + range[1] + \"共\" +  total + \"条\"\r\n          },\r\n          showQuickJumper: true,\r\n          showSizeChanger: true,\r\n          total: 0,\r\n        },\r\n        url: {\r\n          busDataAndColums: 'oaBus/oaBusdata/queryBusdataById',\r\n          getModelIdByUrl: '/oaBus/busModel/getModelIdByUrl',\r\n          getConditionByFunId: '/oaBus/busPageDetail/getConditionByFunId',\r\n        },\r\n        loading: false,\r\n        selectedRowKeys: [],\r\n        selectedRows: [],\r\n        toggleSearchStatus: false,\r\n      }\r\n    },\r\n    created() {\r\n      this.init();\r\n    },\r\n    destroyed() {\r\n      this.dataDestroy();\r\n    },\r\n    methods: {\r\n      // loadData (arg){\r\n      //   if(arg===1){\r\n      //     this.ipagination.current = 1;\r\n      //   }\r\n      //   let params = this.getQueryParams();\r\n      //   getServiceList(params).then((res)=>{\r\n      //     if(res.success){\r\n      //       this.dataSource = res.result.records;\r\n      //       this.ipagination.total = res.result.total;\r\n      //     }\r\n      //   })\r\n      // },\r\n      changFunId(index) {\r\n        index = index - 1 ;\r\n        this.resetPgConditionList();\r\n        getAction(this.url.getConditionByFunId, {functionId: this.selectList[index].iid}).then((res) => {\r\n          this.conditionList = res;\r\n          this.queryParam = Object.assign({}, this.setConditionList);\r\n          for (let i = 0; i < this.conditionList.length; i++) {\r\n            this.queryParam = Object.assign({},this.queryParam,{[this.conditionList[i].s_table_column]: \"\"});\r\n          }\r\n          this.queryParam.function_id = this.selectList[index].iid;\r\n          this.resetConditionList = Object.assign({},this.queryParam);\r\n          this.pagination.current = 1;\r\n          this.collapseListOrNot();\r\n        });\r\n      },\r\n      init() {\r\n        let path = this.$route.path;\r\n        let paths = path.split('/')\r\n        let str = paths[paths.length - 1]\r\n        this.getModelIdByUrl(str);\r\n      },\r\n      clearData() {\r\n        this.conditionList = [];\r\n        this.selectList = [];\r\n        this.pagination = [];\r\n        this.columns = [];\r\n        this.columnes = [];\r\n        this.dataSource = [];\r\n        this.dataSources = [];\r\n      },\r\n      getQueryParams() {\r\n        let param = Object.assign({}, this.queryParam, this.isorter);\r\n        param.field = this.getQueryField();\r\n        param.current = this.ipagination.current;\r\n        param.pageSize = this.ipagination.pageSize;\r\n        return filterObj(param);\r\n      },\r\n      getQueryField() {\r\n        let str = \"id,\";\r\n        for (let i = 0; i < this.columns.length; i++) {\r\n          str += \",\" + this.columns[i].dataIndex;\r\n        }\r\n        return str;\r\n      },\r\n\r\n      handleEdit(record) {\r\n        this.mdl = Object.assign({}, record);\r\n        console.log(this.mdl);\r\n        this.visible = true;\r\n      },\r\n      handleOk() {\r\n\r\n      },\r\n\r\n      //添加逻辑\r\n      handleModalVisible(isVisible) {\r\n        this.visibleCreateModal = isVisible;\r\n      },\r\n\r\n      handleCreateModalCancel() {\r\n        this.visibleCreateModal = false;\r\n      },\r\n\r\n      onChange(row) {\r\n        this.selectedRowKeys = row.selectedRowKeys;\r\n        this.selectedRows = row.selectedRows;\r\n        // console.log(this.$refs.table)\r\n      },\r\n      toggleAdvanced() {\r\n        this.advanced = !this.advanced\r\n      },\r\n\r\n      resetSearchForm() {\r\n        this.queryParam = {\r\n          date: moment(new Date())\r\n        }\r\n      },\r\n      handleTableChange(page) {\r\n        this.pagination.current = page.current;\r\n        this.pagination.pageSize = page.pageSize;\r\n        this.collapseListOrNot();\r\n      },\r\n      getModelIdByUrl(str) {\r\n        //let url = \"/papertitle/docNumSet/busModelList\";\r\n        getAction(this.url.getModelIdByUrl, {str: 'electronicFile'}).then((res) => {\r\n          this.modelId = res;\r\n          this.getPgConditionList();\r\n\r\n          //this.getPgSearchList();\r\n        });\r\n      },\r\n      getPgConditionList() {\r\n        let url = \"/oaBus/oaBusdata/queryFunSelByModelId\";\r\n        postAction(url, {modelId: this.modelId, function_id: this.queryParam.function_id}).then((res) => {\r\n          this.clearData();\r\n          this.conditionList = res.colList;\r\n          this.selectList = res.funList;\r\n          this.tableName = res.tableName;\r\n          this.timeList = res.d_create_time;\r\n          this.queryParam.function_id = this.selectList[0].iid;\r\n          this.setConditionList = Object.assign({},this.queryParam);\r\n          for (let i = 0; i < this.conditionList.length; i++) {\r\n            this.queryParam = Object.assign({}, this.queryParam, {[this.conditionList[i].s_table_column]: \"\"});\r\n          }\r\n          this.resetConditionList = Object.assign({},this.queryParam);\r\n\r\n          // console.log('----------------------------------------------------------');\r\n          // console.log(this.queryParam);\r\n\r\n          this.collapseListOrNot();\r\n        });\r\n      },\r\n      getPgFirstList() {\r\n        this.columns = [];\r\n        this.dataSource = [];\r\n        this.chooseSearch();\r\n\r\n        let url = \"/sys/dict/getDictByKey\";\r\n        getAction(url, {dictKey: 'urgencyDegree'}).then((res) => {\r\n\r\n          this.columns.push({\r\n            dataIndex: 'wenHao',\r\n          });\r\n\r\n          for(let i = 0;i < res.result.length;i++){\r\n            this.taskKey.push(res.result[i].itemValue);\r\n            this.dataSource.push({\r\n              key:i,\r\n              wenHao:res.result[i].itemText,\r\n            });\r\n          }\r\n          // console.log('-----------------------<><><><><><><><><><><><><>--------------------------');\r\n          // console.log(this.taskKey);\r\n          // console.log('------------->>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>---------------');\r\n          // console.log(res);\r\n\r\n\r\n        });\r\n      },\r\n      getCaption(obj,state){\r\n        let index = obj.lastIndexOf(\"\\-\");\r\n        if(state == 0){\r\n          obj = obj.substring(0,index);\r\n        }else{\r\n          obj = obj.substring(index+1,obj.length)\r\n        }\r\n        return obj;\r\n      },\r\n      getPgSecondList(taskNames) {\r\n        this.taskNames = taskNames[taskNames.length-1];\r\n        taskNames.length = 0;\r\n        this.columnes = [];\r\n        this.dataSources = [];\r\n        let url = \"urgency/degree/queryTask\";\r\n        getAction(url, {operstatus: 'jump',urgencyDegree: 'null'}).then((res) => {\r\n\r\n          // this.searchColumns = JSON.parse(res.records);\r\n          //\r\n          // for (let i = 1; i < this.searchColumns.length; i++) {\r\n          //   this.columnes.push({\r\n          //     title: this.searchColumns[i].s_column_name,\r\n          //     dataIndex: this.searchColumns[i].s_table_column,\r\n          //     align: \"center\",\r\n          //   });\r\n          // }\r\n            this.columnes.push( {\r\n                title: '序号',\r\n                dataIndex: '',\r\n                key: 'rowIndex',\r\n                align: \"center\",\r\n                customRender: function (t, r, index) {\r\n                  return parseInt(index) + 1;\r\n                }\r\n              },\r\n              {\r\n                title: '文号',\r\n                align: \"center\",\r\n                dataIndex: 'wenHao'\r\n              },\r\n              {\r\n                title: '标题',\r\n                align: \"center\",\r\n                dataIndex: 'title'\r\n              },\r\n              {\r\n                title: '当前环节',\r\n                align: \"center\",\r\n                dataIndex: 'name'\r\n              },\r\n              {\r\n                title: '拟稿人',\r\n                align: \"center\",\r\n                dataIndex: 'drafter'\r\n              },\r\n              {\r\n                title: '转发时间',\r\n                align: \"center\",\r\n                dataIndex: 'createTime'\r\n              },\r\n              {\r\n                title: '操作',\r\n                dataIndex: 'action',\r\n                align: \"center\",\r\n                scopedSlots: {customRender: 'action'},\r\n              });\r\n\r\n          // this.dataSources = res.result.dataList;\r\n          this.dataSources = res.result.records;\r\n\r\n          // console.log('-------------++++++++++++++++++++++++++++++---------------');\r\n          // console.log(this.dataSources);\r\n\r\n        });\r\n      },\r\n      getPgSearchList() {\r\n        this.columns = [];\r\n        this.dataSource = [];\r\n        this.chooseSearch();\r\n        let url = \"urgency/degree/queryTask\";\r\n        // this.queryParam.function_id = this.queryParam.function_id.toString();\r\n        // this.queryParam.i_is_state = this.queryParam.i_is_state.toString();\r\n        // this.queryParam.s_create_name = this.queryParam.s_create_name.toString();\r\n        // this.queryParam.d_create_time = this.queryParam.d_create_time.toString();\r\n\r\n        getAction(url, {operstatus: 'jump',urgencyDegree: 'null'}).then((res) => {\r\n          // this.searchColumns = JSON.parse(res.message);\r\n          this.searchList = res.result;\r\n          this.pagination.current = this.searchList.current;\r\n          this.pagination.pageSize = this.searchList.size;\r\n          this.pagination.total = this.searchList.total;\r\n\r\n          // this.dataSource = this.searchList.records;\r\n          // for (let i = 0; i < this.searchColumns.length; i++) {\r\n          //   if (this.searchColumns[i].s_table_column != 'i_id') {\r\n          //     if(this.searchColumns[i].s_table_column =='i_is_state'){\r\n          //       this.columns.push({\r\n          //         title: this.searchColumns[i].s_column_name,\r\n          //         dataIndex: this.searchColumns[i].s_table_column,\r\n          //         align: \"center\",\r\n          //         customRender: (text) => {\r\n          //           if(text == true){\r\n          //             return '已办结'\r\n          //           }else if(text == false){\r\n          //             return '未办结'\r\n          //           }else{\r\n          //             return text\r\n          //           }\r\n          //         }\r\n          //       });\r\n          //     }else{\r\n          //       this.columns.push({\r\n          //         title: this.searchColumns[i].s_column_name,\r\n          //         dataIndex: this.searchColumns[i].s_table_column,\r\n          //         align: \"center\",\r\n          //       });\r\n          //     }\r\n\r\n          //   }\r\n          // }\r\n\r\n          this.columns.push( {\r\n              title: '序号',\r\n              dataIndex: '',\r\n              key: 'rowIndex',\r\n              align: \"center\",\r\n              customRender: function (t, r, index) {\r\n                return parseInt(index) + 1;\r\n              }\r\n            },\r\n            {\r\n              title: '文号',\r\n              align: \"center\",\r\n              dataIndex: 'wenHao'\r\n            },\r\n            {\r\n              title: '标题',\r\n              align: \"center\",\r\n              dataIndex: 'title'\r\n            },\r\n            {\r\n              title: '当前环节',\r\n              align: \"center\",\r\n              dataIndex: 'name'\r\n            },\r\n            {\r\n              title: '拟稿人',\r\n              align: \"center\",\r\n              dataIndex: 'drafter'\r\n            },\r\n            {\r\n              title: '转发时间',\r\n              align: \"center\",\r\n              dataIndex: 'createTime'\r\n            },\r\n            {\r\n              title: '操作',\r\n              dataIndex: 'action',\r\n              align: \"center\",\r\n              scopedSlots: {customRender: 'action'},\r\n            });\r\n\r\n          this.dataSource = res.result.records;\r\n\r\n        });\r\n\r\n      },\r\n      changeInput(event, obj) {\r\n        this.queryParam[obj] = event.currentTarget.value;\r\n        // console.log('----------------------------------------------------------');\r\n        // console.log(\"object: \" + obj + \" value: \" + event);\r\n        // console.log('----------------------------------------------------------');\r\n        // console.log(this.queryParam);\r\n      },\r\n      changeSelect(event, obj) {\r\n        // this.queryParam[obj] = event.toString();\r\n        // console.log('----------------------------------------------------------');\r\n        // console.log(\"object: \" + obj + \" value: \" + event);\r\n        // console.log('----------------------------------------------------------');\r\n        // console.log(this.queryParam);\r\n      },\r\n      onClick(record, index) {\r\n        return {\r\n          on: {\r\n            click: (event) => {\r\n              //查询---业务数据--流程信息\r\n              let param = {tableName: this.tableName, busdataId: record.i_id};\r\n              this.$refs.detailFile.show(param)\r\n\r\n              // this.$router.push({path:'/mytask/taskList/Test-detailFile',query:param})\r\n            }\r\n          }\r\n        }\r\n      },\r\n      chooseSearch() {\r\n        if(this.queryParam.selType == 0){\r\n          this.queryParam.s_create_name = '';\r\n        }\r\n        // console.log('222----------------------------------------------------------222');\r\n        // console.log('radio checked', e.target.value)\r\n      },\r\n      dataDestroy() {\r\n        this.searchColumns = [];\r\n        this.searchList = [];\r\n        this.pagination = [];\r\n        this.columns = [];\r\n        this.columnes = [];\r\n        this.dataSource = [];\r\n        this.dataSources = [];\r\n      },\r\n      resetPgConditionList() {\r\n        this.queryParam = Object.assign({},this.resetConditionList);\r\n        for (let i = 0; i < this.$refs.inputs.length; i++) {\r\n          this.$refs.inputs[i].stateValue = '';\r\n        }\r\n      },\r\n      collapseListOrNot(){\r\n        const  userid =JSON.parse( localStorage.getItem('userdata')).userInfo.id;\r\n        getAction('/testt/sysUserSet/queryByUserId', {userId: userid}).then((res) => {\r\n          this.iisFold = res.result.iisFold;\r\n          if(res.result.iisFold == 1){\r\n            this.getPgFirstList();\r\n          }else {\r\n            this.getPgSearchList();\r\n          }\r\n        })\r\n      }\r\n    },\r\n    watch: {\r\n\r\n      '$route.path': {\r\n        handler(newPath, oldPath) {\r\n          //this.init();\r\n          let path = newPath;\r\n          let paths = path.split('/')\r\n          let str = paths[paths.length - 1]\r\n          this.getModelIdByUrl(str);\r\n          // console.log('---------------------------------', newPath);\r\n          // console.log('---------------------------------', oldPath);\r\n        },\r\n        immediate: false,\r\n        deep: true,\r\n      }\r\n\r\n      /* this.$route.path:{\r\n\r\n     }*/\r\n      /*\r\n      'selectedRows': function (selectedRows) {\r\n        this.needTotalList = this.needTotalList.map(item => {\r\n          return {\r\n            ...item,\r\n            total: selectedRows.reduce( (sum, val) => {\r\n              return sum + val[item.dataIndex]\r\n            }, 0)\r\n          }\r\n        })\r\n      }\r\n      */\r\n    }\r\n  }\r\n</script>"]}]}
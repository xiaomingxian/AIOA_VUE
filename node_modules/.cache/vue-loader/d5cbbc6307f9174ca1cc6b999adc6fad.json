{"remainingRequest":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xxm\\work\\jd\\fore\\src\\views\\workflow\\modules\\copyProcModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xxm\\work\\jd\\fore\\src\\views\\workflow\\modules\\copyProcModal.vue","mtime":1579340189827},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\babel-loader\\lib\\index.js","mtime":1570779245522},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js","mtime":1570779225726}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {getAction, httpAction, postAction} from '@/api/manage'\nimport DictItemModal from \"../../system/modules/DictItemModal\";\nimport AFormItem from \"ant-design-vue/es/form/FormItem\";\n\nexport default {\n  name: \"copyProcActinstModal\",\n  components: {AFormItem, DictItemModal},\n  data() {\n    return {\n      title: \"复制流程\",\n      isClick:false,\n      visible: false,\n      confirmLoading: false,\n      name: undefined,\n      key: undefined,\n      proMSg: {},\n      url: {\n        copy: '/workflowSet/copy'\n      },\n    }\n  },\n  created() {\n  },\n  methods: {\n    show() {\n      this.name = undefined\n      this.key = undefined\n      this.visible = true\n      this.isClick=false\n    },\n    close() {\n      this.$emit('close');\n      this.visible = false;\n    },\n    handleOk() {\n      if (this.isClick){\n        this.$message.error(\"请勿重复点击\")\n      }\n      if (this.name == undefined) {\n        this.$message.error('请输入流程名称')\n        return\n      }\n      if (this.key == undefined) {\n        this.$message.error('请输入流程key')\n        return\n      }\n\n\n      //key校验\n      let keyReg = /^([a-zA-Z])([-_a-zA-Z0-9]{4,19})$/\n      if (!keyReg.test(this.key)) {\n        if ((this.key).length > 20) {\n          this.$message.error('您输入的key长度过长')\n          return\n        }\n        if ((this.key).length < 5) {\n          this.$message.error('您输入的key长度过短')\n          return\n        }\n        this.$message.error('您输入的key不合法请检查')\n        return\n      }\n\n      let nameReg = /^([\\u4e00-\\u9fa5]|[a-zA-Z])([-\\u4e00-\\u9fa5_-_a-zA-Z0-9]{4,19})$/\n      if (!nameReg.test(this.name)) {\n\n        if ((this.name).length > 20) {\n          this.$message.error('您输入的名称长度过长')\n          return\n        }\n        if ((this.name).length < 5) {\n          this.$message.error('您输入的名称长度过短')\n          return\n        }\n        this.$message.error('您输入的名称不合法请检查')\n\n        return\n      }\n\n      postAction(this.url.copy + '?copyKey=' + this.key + '&copyName=' + this.name + '&sourceDefId=' + this.proMSg.id).then(res => {\n        if (res.success) {\n          this.isClick=true\n          this.$message.success(res.message)\n          //刷新父页面\n          this.$emit('reload')\n          this.handleCancel()\n\n        } else {\n          this.$message.error(res.message)\n        }\n      })\n\n    },\n    handleCancel() {\n      this.close();\n    },\n  }\n}\n",{"version":3,"sources":["copyProcModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"copyProcModal.vue","sourceRoot":"src/views/workflow/modules","sourcesContent":["<template>\r\n  <a-modal\r\n    :title=\"title\"\r\n    :width=\"800\"\r\n    :visible=\"visible\"\r\n    :confirmLoading=\"confirmLoading\"\r\n    @ok=\"handleOk\"\r\n    destroyOnClose\r\n    @cancel=\"handleCancel\"\r\n    cancelText=\"关闭\">\r\n\r\n    <a-spin :spinning=\"confirmLoading\">\r\n\r\n      <a-form>\r\n        <a-form-item>\r\n          <a-input\r\n            size=\"large\"\r\n            type=\"text\"\r\n            placeholder=\"请输入流程名称(只能以中文或英文开头,只能包含中文/英文/数字/下划线;长度大于等于5小于等于20)\"\r\n            v-model=\"name\"\r\n          ></a-input>\r\n        </a-form-item>\r\n        <a-form-item>\r\n          <a-input\r\n            size=\"large\"\r\n            type=\"text\"\r\n            placeholder=\"请输入流程key(只能以字母开头,只能包含字母,数字,下划线;长度大于等于5小于等于20)\"\r\n            v-model=\"key\"\r\n          ></a-input>\r\n        </a-form-item>\r\n\r\n      </a-form>\r\n\r\n\r\n    </a-spin>\r\n  </a-modal>\r\n</template>\r\n\r\n<script>\r\n  import {getAction, httpAction, postAction} from '@/api/manage'\r\n  import DictItemModal from \"../../system/modules/DictItemModal\";\r\n  import AFormItem from \"ant-design-vue/es/form/FormItem\";\r\n\r\n  export default {\r\n    name: \"copyProcActinstModal\",\r\n    components: {AFormItem, DictItemModal},\r\n    data() {\r\n      return {\r\n        title: \"复制流程\",\r\n        isClick:false,\r\n        visible: false,\r\n        confirmLoading: false,\r\n        name: undefined,\r\n        key: undefined,\r\n        proMSg: {},\r\n        url: {\r\n          copy: '/workflowSet/copy'\r\n        },\r\n      }\r\n    },\r\n    created() {\r\n    },\r\n    methods: {\r\n      show() {\r\n        this.name = undefined\r\n        this.key = undefined\r\n        this.visible = true\r\n        this.isClick=false\r\n      },\r\n      close() {\r\n        this.$emit('close');\r\n        this.visible = false;\r\n      },\r\n      handleOk() {\r\n        if (this.isClick){\r\n          this.$message.error(\"请勿重复点击\")\r\n        }\r\n        if (this.name == undefined) {\r\n          this.$message.error('请输入流程名称')\r\n          return\r\n        }\r\n        if (this.key == undefined) {\r\n          this.$message.error('请输入流程key')\r\n          return\r\n        }\r\n\r\n\r\n        //key校验\r\n        let keyReg = /^([a-zA-Z])([-_a-zA-Z0-9]{4,19})$/\r\n        if (!keyReg.test(this.key)) {\r\n          if ((this.key).length > 20) {\r\n            this.$message.error('您输入的key长度过长')\r\n            return\r\n          }\r\n          if ((this.key).length < 5) {\r\n            this.$message.error('您输入的key长度过短')\r\n            return\r\n          }\r\n          this.$message.error('您输入的key不合法请检查')\r\n          return\r\n        }\r\n\r\n        let nameReg = /^([\\u4e00-\\u9fa5]|[a-zA-Z])([-\\u4e00-\\u9fa5_-_a-zA-Z0-9]{4,19})$/\r\n        if (!nameReg.test(this.name)) {\r\n\r\n          if ((this.name).length > 20) {\r\n            this.$message.error('您输入的名称长度过长')\r\n            return\r\n          }\r\n          if ((this.name).length < 5) {\r\n            this.$message.error('您输入的名称长度过短')\r\n            return\r\n          }\r\n          this.$message.error('您输入的名称不合法请检查')\r\n\r\n          return\r\n        }\r\n\r\n        postAction(this.url.copy + '?copyKey=' + this.key + '&copyName=' + this.name + '&sourceDefId=' + this.proMSg.id).then(res => {\r\n          if (res.success) {\r\n            this.isClick=true\r\n            this.$message.success(res.message)\r\n            //刷新父页面\r\n            this.$emit('reload')\r\n            this.handleCancel()\r\n\r\n          } else {\r\n            this.$message.error(res.message)\r\n          }\r\n        })\r\n\r\n      },\r\n      handleCancel() {\r\n        this.close();\r\n      },\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\r\n</style>"]}]}
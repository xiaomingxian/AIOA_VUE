{"remainingRequest":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xxm\\work\\jd\\fore\\src\\views\\oaBus\\BusPageDetailDef.vue?vue&type=style&index=0&id=1c0ddc40&scoped=true&lang=css&","dependencies":[{"path":"C:\\xxm\\work\\jd\\fore\\src\\views\\oaBus\\BusPageDetailDef.vue","mtime":1577616664241},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\css-loader\\index.js","mtime":1570780111199},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1570779225817},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\postcss-loader\\src\\index.js","mtime":1570780438513},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js","mtime":1570779225726}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import '~@assets/less/common.less'\n",{"version":3,"sources":["BusPageDetailDef.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiXA","file":"BusPageDetailDef.vue","sourceRoot":"src/views/oaBus","sourcesContent":["<template>\r\n  <a-modal :visible=\"visible\" :title=\"title\" :width=\"1200\" @ok=\"handleOk\" @cancel=\"handleCancel\">\r\n\r\n    <!--<div style=\"padding:20px;\"  v-show=\"showFlag\" class=\"table-operator\">\r\n      <a-button type=\"primary\" @click=\"handleSaveAll\" >生成含义</a-button>\r\n    </div>  -->\r\n    <div style=\"height: 550px;overflow: auto\">\r\n      <div style=\"width: 95%\">\r\n\r\n\r\n        <div class=\"table-page-search-wrapper\">\r\n          <a-form layout=\"inline\">\r\n            <a-row :gutter=\"24\">\r\n              <a-col :md=\"6\" :sm=\"8\">\r\n                <a-form-item label=\"列名\">\r\n                  <a-input placeholder=\"请输入列名\" v-model=\"queryParam.sTableColumn\"></a-input>\r\n                </a-form-item>\r\n              </a-col>\r\n              <a-col :md=\"6\" :sm=\"8\">\r\n                <a-form-item label=\"列的含义\">\r\n                  <a-input placeholder=\"请输入列的含义\" v-model=\"queryParam.sColumnName\"></a-input>\r\n                </a-form-item>\r\n              </a-col>\r\n              <a-col :md=\"6\" :sm=\"8\">\r\n            <span style=\"float: left;overflow: hidden;\" class=\"table-page-search-submitButtons\">\r\n              <a-button type=\"primary\" @click=\"searchTable1\" icon=\"search\">查询</a-button>\r\n              <a-button type=\"primary\" @click=\"refesh\" icon=\"reload\" style=\"margin-left: 8px\">重置</a-button>\r\n            </span>\r\n              </a-col>\r\n\r\n            </a-row>\r\n          </a-form>\r\n        </div>\r\n        <div style=\"padding-left:20px;\" class=\"table-operator\">\r\n          <h3>自定义列名</h3>\r\n        </div>\r\n        <a-table\r\n          ref=\"table\"\r\n          size=\"middle\"\r\n          bordered\r\n\r\n          rowKey=\"index\"\r\n          :columns=\"columns1\"\r\n          :dataSource=\"dataSource1\"\r\n          :pagination=\"ipagination1\"\r\n          :loading=\"loading\"\r\n          @change=\"handleTableChange\">\r\n        <span slot=\"action\" slot-scope=\"text, record\">\r\n          <a @click=\"handleEdit(record)\">编辑</a>\r\n          <a-divider type=\"vertical\"/>\r\n          <a @click=\"handleDelect(record.iid)\">删除</a>\r\n        </span>\r\n        </a-table>\r\n        <a-table\r\n          rowKey=\"index\"\r\n          :columns=\"columns00\"\r\n          :dataSource=\"dataSource00\"\r\n          :pagination=\"false\"\r\n          :loading=\"loading\"\r\n          :showAlertInfo=\"false\"\r\n          :showHeader=\"false\"\r\n          :expandIconAsCell=\"false\"\r\n        >\r\n          <a-table\r\n            slot=\"expandedRowRender\"\r\n            ref=\"table\"\r\n            size=\"middle\"\r\n            bordered\r\n            rowKey=\"index\"\r\n            :columns=\"columns\"\r\n            :dataSource=\"dataSource2\"\r\n            :pagination=\"ipagination2\"\r\n            :loading=\"loading\">\r\n        <span slot=\"action\" slot-scope=\"text, record\">\r\n          <a @click=\"handleEdit(record)\">编辑</a>\r\n        </span>\r\n\r\n          </a-table>\r\n        </a-table>\r\n      </div>\r\n\r\n      <bus-page-detail-def-modal ref=\"busPageDetailDefModel\" @loading=\"refesh\" @ok=\"refesh\"/>\r\n    </div>\r\n  </a-modal>\r\n</template>\r\n\r\n<script>\r\n  import {httpAction, getAction, deleteAction, postAction} from '@/api/manage'\r\n  import pick from 'lodash.pick'\r\n  import {JeecgListMixin} from '@/mixins/JeecgListMixin'\r\n  import BusPageDetailDefModal from \"./modules/BusPageDetailDefModal\";\r\n\r\n  export default {\r\n    name: \"BusPageDetailDef\",\r\n    mixins: [JeecgListMixin],\r\n    components: {\r\n      BusPageDetailDefModal\r\n    },\r\n    data() {\r\n      return {\r\n        title: \"配置含义\",\r\n        visible: false,\r\n        iBMId: '',\r\n        modelWidth: '100%',\r\n        showFlag: false,\r\n        queryParam: {},\r\n        columns00: [\r\n          {\r\n            dataIndex: 'stableColumn'\r\n          }\r\n        ],\r\n        columns1: [\r\n          {\r\n            title: '列名',\r\n            align: \"center\",\r\n            dataIndex: 'stableColumn'\r\n          },\r\n          {\r\n            title: '列的含义',\r\n            align: \"center\",\r\n            dataIndex: 'scolumnName'\r\n          },\r\n          {\r\n            title: '数据列',\r\n            align: \"center\",\r\n            dataIndex: 'iisListtitle',\r\n            customRender: (text) => {\r\n              if (text == '1' || text == 1) {\r\n                return \"是\"\r\n              } else {\r\n                return '否'\r\n              }\r\n            }\r\n          },\r\n          {\r\n            title: '排序',\r\n            align: \"center\",\r\n            dataIndex: 'iorder',\r\n            customRender: (text) => {\r\n              if (text == null) {\r\n                return \"--\"\r\n              } else {\r\n                return text\r\n              }\r\n            }\r\n          },\r\n          {\r\n            title: '操作',\r\n            dataIndex: 'action',\r\n            align: \"center\",\r\n            scopedSlots: {customRender: 'action'},\r\n          }\r\n        ],\r\n        columns: [\r\n          {\r\n            title: '列名',\r\n            align: \"center\",\r\n            dataIndex: 'stableColumn'\r\n          },\r\n          {\r\n            title: '列的含义',\r\n            align: \"center\",\r\n            dataIndex: 'scolumnName'\r\n          },\r\n          {\r\n            title: '操作',\r\n            dataIndex: 'action',\r\n            align: \"center\",\r\n            scopedSlots: {customRender: 'action'},\r\n          }\r\n        ],\r\n        dataSource00: [\r\n          {\r\n            stableColumn: '固定列名',\r\n          }\r\n        ],\r\n        dataSource2: [],\r\n        dataSource1: [],\r\n        ipagination1: {\r\n          current: 1,\r\n          pageSize: 100,\r\n          showTotal: (total, range) => {\r\n            return range[0] + \"-\" + range[1] + \" 共\" + total + \"条\"\r\n          },\r\n          showQuickJumper: true,\r\n          showSizeChanger: true,\r\n          total: 0\r\n        },\r\n        ipagination2: {\r\n          current: 1,\r\n          pageSize: 100,\r\n          showTotal: (total, range) => {\r\n            return range[0] + \"-\" + range[1] + \" 共\" + total + \"条\"\r\n          },\r\n          showQuickJumper: true,\r\n          showSizeChanger: true,\r\n          total: 0\r\n        },\r\n        procDefKv: '',\r\n        model: {busPageDetailList: [{}]},\r\n        labelCol: {\r\n          xs: {span: 24},\r\n          sm: {span: 5},\r\n        },\r\n        wrapperCol: {\r\n          xs: {span: 24},\r\n          sm: {span: 16},\r\n        },\r\n        confirmLoading: false,\r\n        form: this.$form.createForm(this),\r\n        validatorRules: {},\r\n        functionId: '',\r\n        pageId: '',\r\n        modelId: '',\r\n        url: {\r\n          add: \"/oaBus/busFunction/add\",\r\n          delete: \"/oaBus/busPageDetail/delete\",\r\n          edit: \"/oaBus/busFunction/edit\",\r\n          getbusPageDetailList: \"/oaBus/oaBusdata/getPageDataForm\",\r\n          orderTicketList: \"/test/jeecgOrderMain/queryOrderTicketListByMainId\",\r\n          initDetail: \"/oaBus/busPageDetail/initDetail\",\r\n          queryCount: \"/oaBus/busPageDetail/queryCount\",\r\n          list: \"/oaBus/busPageDetail/queryListByFunctionId\",\r\n          queryListByName: \"/oaBus/busPageDetail/queryListByName\",\r\n        },\r\n      }\r\n    },\r\n    created() {\r\n      this.getSelection();\r\n    },\r\n\r\n    destroyed() {\r\n      this.close();\r\n    },\r\n    methods: {\r\n      searchTable1() {\r\n        let par = {iBusFunctionId: this.functionId, iBusPageId: this.pageId};\r\n        let param = Object.assign(par, this.queryParam)\r\n        getAction(this.url.queryListByName, param).then((res) => {\r\n          //console.log(res);\r\n          this.dataSource1 = res.result;\r\n          this.ipagination1.total = res.result.length;\r\n          this.$forceUpdate()\r\n        })\r\n        //this.getSelection();\r\n      },\r\n      //删除数据\r\n      handleDelect(id) {\r\n\r\n        deleteAction(this.url.delete, {id: id}).then(res => {\r\n          this.refesh()\r\n        })\r\n      },\r\n      refesh() {\r\n        this.initTabel1();\r\n        this.initTabel2();\r\n      },\r\n      /*每次进来后初始化含义*/\r\n      initDetail() {\r\n        getAction(this.url.initDetail, {\r\n          functionId: this.functionId,\r\n          pageId: this.pageId,\r\n          modelId: this.modelId\r\n        }).then((res) => {\r\n          //console.log(res);\r\n          this.initTabel1();\r\n          this.initTabel2();\r\n        })\r\n      },\r\n      busFunProcButOpin(procButtonOpinion) {\r\n        this.procButtonOpinion = {};\r\n        this.procButtonOpinion = procButtonOpinion;\r\n      },\r\n      handleEdit(records) {\r\n        this.$refs.busPageDetailDefModel.edit(records, this.pageId, this.functionId, this.modelId);\r\n      },\r\n      initTabel1() {\r\n\r\n        getAction(this.url.list, {ibusFunctionId: this.functionId, ibusPageId: this.pageId}).then((res) => {\r\n          //console.log(res);\r\n          this.dataSource1 = res.result;\r\n          this.ipagination1.total = res.result.length;\r\n          this.$forceUpdate()\r\n        })\r\n      },\r\n      initTabel2() {\r\n        getAction(this.url.getbusPageDetailList,\r\n          {pageId: this.pageId, modelId: this.modelId, functionId: this.functionId}).then((res) => {\r\n          //console.log(res);\r\n          this.dataSource2 = res.result.records;\r\n          this.ipagination2.total = res.result.records.length;\r\n          this.$forceUpdate()\r\n        })\r\n      },\r\n      show(rec) {\r\n        this.visible = true;\r\n        this.title = \"含义配置：\" + rec.sname;\r\n        console.log(\"****\" + JSON.stringify(rec))\r\n        this.pageId = rec.ipageId;\r\n        this.functionId = rec.iid;\r\n        this.modelId = rec.ibusModelId;\r\n\r\n        if (this.pageId == null || this.pageId == '') {\r\n          this.$message.error(\"页面数据未定义，请确认数据完整！！！\")\r\n          this.close()\r\n          return;\r\n        }\r\n        if (this.functionId == null || this.functionId == '') {\r\n          this.$message.error(\"业务数据未定义，请确认数据完整！！！\")\r\n          this.close();\r\n          return;\r\n        }\r\n        if (this.functionId == null || this.modelId == '') {\r\n          this.$message.error(\"模板数据未定义，请确认数据完整！！！\")\r\n          this.close();\r\n          return;\r\n        }\r\n        this.initDetail();\r\n      },\r\n\r\n      add() {\r\n        this.edit({});\r\n      },\r\n      edit(record) {\r\n        this.form.resetFields();\r\n        this.model = Object.assign({}, record);\r\n        this.visible = true;\r\n        this.$nextTick(() => {\r\n          this.form.setFieldsValue(pick(this.model, 'ibusModelId', 'sname', 'ipageId', 'sbusLeftParameter', 'iisUnit', 'iisDept', 'sbusRightParameter', 'iisEditor', 'iisLimits', 'iisEs', 'iisProc', 'iprocSetId', 'screateBy', 'supdateBy'))\r\n        });\r\n\r\n      },\r\n      close() {\r\n        //this.$emit('close');\r\n        this.ipagination1.total = '';\r\n        this.ipagination2.total = '';\r\n        this.dataSource2 = [];\r\n        this.dataSource1 = [];\r\n        this.visible = false;\r\n      },\r\n      //选择页面\r\n      selectPageOk(data) {\r\n        this.model.ipageId = data[0];\r\n        this.$nextTick(() => {\r\n          this.form.setFieldsValue(pick(this.model, 'ipageId'))\r\n        });\r\n\r\n      },\r\n      handleOk() {\r\n        this.close();\r\n      },\r\n\r\n      handleCancel() {\r\n        this.close()\r\n      },\r\n      getSelection() {\r\n        let url = \"/oaBus/busModel/modelList\";\r\n        getAction(url).then((res) => {\r\n          /*alert(res.result.iid);\r\n          console.log('----------------------------------------------------------');\r\n          console.log(res.result);*/\r\n          this.selectModelData = res.result;\r\n        })\r\n      }\r\n\r\n    }\r\n  }\r\n</script>\r\n<style scoped>\r\n  @import '~@assets/less/common.less'\r\n</style>\r\n<!--\r\n<style lang=\"less\" scoped>\r\n  .ant-card-body .table-operator{\r\n    margin-bottom: 18px;\r\n  }\r\n  .ant-table-tbody .ant-table-row td{\r\n    padding-top:15px;\r\n    padding-bottom:15px;\r\n  }\r\n  .anty-row-operator button{margin: 0 5px}\r\n  .ant-btn-danger{background-color: #ffffff}\r\n\r\n  .ant-modal-cust-warp{height: 100%}\r\n  .ant-modal-cust-warp .ant-modal-body{height:calc(100% - 110px) !important;overflow-y: auto}\r\n  .ant-modal-cust-warp .ant-modal-content{height:90% !important;overflow-y: hidden}\r\n</style>\r\n-->\r\n"]}]}
{"remainingRequest":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xxm\\work\\jd\\fore\\src\\views\\oaTeamwork\\modules\\CollaborativePreviewModal.vue?vue&type=style&index=0&id=113b92fd&lang=less&scoped=true&","dependencies":[{"path":"C:\\xxm\\work\\jd\\fore\\src\\views\\oaTeamwork\\modules\\CollaborativePreviewModal.vue","mtime":1579417279505},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\css-loader\\index.js","mtime":1570780111199},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1570779225817},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\postcss-loader\\src\\index.js","mtime":1570780438513},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\less-loader\\dist\\cjs.js","mtime":1570780454546},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js","mtime":1570779225726}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.boxLists{\r\n  /*background: red;*/\r\n  display: flex;\r\n  align-items: center;\r\n  flex-wrap:wrap;\r\n  /*flex-direction: row-reverse;*/\r\n  .itemBox{\r\n    display: flex;\r\n    align-items: center;\r\n    margin-top: 20px;\r\n  }\r\n}\r\n\r\n  .step:hover{\r\n    cursor: pointer;\r\n  }\r\n",{"version":3,"sources":["CollaborativePreviewModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"CollaborativePreviewModal.vue","sourceRoot":"src/views/oaTeamwork/modules","sourcesContent":["<template>\r\n  <a-modal\r\n    :title=\"title\"\r\n    :width=\"500\"\r\n    :visible=\"visible\"\r\n    :confirmLoading=\"confirmLoading\"\r\n    @ok=\"handleOk\"\r\n    @cancel=\"handleCancel\"\r\n    cancelText=\"关闭\">\r\n    \r\n    <a-spin :spinning=\"confirmLoading\">\r\n   <!--  <div style=\"margin-bottom: 10px; \"><img  style=\"height: 15px; width: 20px\" src=\"../../../assets/矢量智能对象@2x.png\" alt=\"\"> <span style=\"margin-left: 10px\">协同办公</span>\r\n     </div>-->\r\n     <!-- <span style=\"margin-bottom: 10px; \">协同办公</span>-->\r\n      <br>\r\n      <!--<div class=\"boxLists\">-->\r\n        <!--<div class=\"itemBox\" v-for=\"(item,index) in listqq\" >-->\r\n\r\n          <!--<div  :key=\"index\"  style=\"width: 130px; height: 100px;border: 1px solid ;background-color: #b4d7ff\">-->\r\n            <!--{{item.iid}}-->\r\n          <!--</div>-->\r\n          <!--<img   style=\"height: 20px; width: 50px\" src=\"../../../assets/箭头@2x.png\" alt=\"\"/>-->\r\n\r\n        <!--</div>-->\r\n      <!--</div> direction=\"vertical\"-->\r\n      <a-steps  direction=\"vertical\"  :current=\"total\"  style=\"margin-left: 50px\">\r\n        <a-step class=\"step\" v-for=\"(item,index) in listqq\" @dblclick=\"openXieTong(item.tableName,item.busDataId,index)\"  :title=\"item.busFunctionName\" :description=\"item.dCreateTime\"></a-step>\r\n      </a-steps>\r\n\r\n    </a-spin>\r\n  </a-modal>\r\n</template>\r\n\r\n<script>\r\n  import { httpAction,getAction,postAction } from '@/api/manage'\r\n  import pick from 'lodash.pick'\r\n  import moment from \"moment\"\r\n\r\n  export default {\r\n    name: \"CollaborativePreviewModal\",\r\n    data () {\r\n      return {\r\n        title:\"操作\",\r\n        visible: false,\r\n        modelList: [],\r\n        selectList: [],\r\n        busModelId:'',\r\n        listqq:[],\r\n        modelId:'',\r\n        findMax:'',\r\n        tableName:[],\r\n        total:'',\r\n        functionId:'',\r\n        num:'',\r\n        model: {\r\n          iteamworkId:'',\r\n          steamworkName:'',\r\n          iversion:'',\r\n        },\r\n        labelCol: {\r\n          xs: { span: 24 },\r\n          sm: { span: 5 },\r\n        },\r\n        wrapperCol: {\r\n          xs: { span: 24 },\r\n          sm: { span: 16 },\r\n        },\r\n\r\n        confirmLoading: false,\r\n        form: this.$form.createForm(this),\r\n        validatorRules:{\r\n        iId:{rules: [{ required: true, message: '请输入主键id!' }]},\r\n        },\r\n        url: {\r\n          add: \"/oateamwork/oaTeamworkSet/add\",\r\n          Setlist: \"/oaTea/oaTeamworkInst/querylist\",\r\n          edit: \"/oateamwork/oaTeamworkSet/edit\",\r\n          queryListL:\"/oateamwork/oaTeamworkSet/list\",\r\n          findMax: \"/oateamwork/oaTeamworkSet/findMax\",\r\n          selectTaskType: '/oaBus/newTask/findModelPermit1',\r\n          selectTaskDetail: '/oaBus/newTask/findFunctionPermit',\r\n\r\n        },\r\n\r\n      }\r\n    },\r\n    created() {\r\n    },\r\n    methods: {\r\n      openXieTong(e,d,i){\r\n\r\n         if(this.IntsList[i] == undefined){\r\n           this.$message.warning(\"没有业务数据\");\r\n\r\n         }\r\n         else if(this.listqq[i].tableName != null &&  this.IntsList[i].busDataId != undefined){\r\n           window.open(window.location.origin+'/mytask/taskList/Test-detailFile?tableName='+this.listqq[i].tableName+'&busdataId='+this.IntsList[i].busDataId+'&navisshow=false')\r\n         }\r\n      },\r\n      open(e){\r\n        this.visible = true;\r\n        this.model.iteamworkId = e.iid\r\n        this.model.steamworkName = e.steamworkName\r\n        this.model.iversion = e.iversion;\r\n        //查询实例表里面的东西，为了确定走到那个步骤\r\n        getAction(this.url.Setlist, {iVersion: e.iversion}).then((res) => {\r\n          this.total  = res.result.length\r\n          this.IntsList =  res.result\r\n\r\n        })\r\n        //查出该所有的协同办公\r\n        getAction(this.url.queryListL, {iTeamworkId: e.iteamworkId}).then((res) => {\r\n          this.listqq = res.result.records;\r\n\r\n        })\r\n      },\r\n      close () {\r\n        this.$emit('close');\r\n        this.visible = false;\r\n      },\r\n      handleOk () {\r\n        const that = this;\r\n        if(this.$refs.indexStep.value<this.num){\r\n          this.$message.warning(this.findMax);\r\n          return ;\r\n        }\r\n        // 触发表单验证\r\n        this.form.validateFields((err, values) => {\r\n          if (!err) {\r\n            that.confirmLoading = true;\r\n            console.log(this.isadd)\r\n            let httpurl = '';\r\n            let method = '';\r\n            if (this.isadd) {\r\n              httpurl+=this.url.add;\r\n              method = 'post';\r\n            }else{\r\n              httpurl+=this.url.edit;\r\n               method = 'put';\r\n            }\r\n            let formData = Object.assign(this.model, values);\r\n            //时间格式化\r\n            /*formData.dCreateTime = formData.dCreateTime?formData.dCreateTime.format('YYYY-MM-DD HH:mm:ss'):null;\r\n            formData.dUpdateTime = formData.dUpdateTime?formData.dUpdateTime.format('YYYY-MM-DD HH:mm:ss'):null;\r\n            */\r\n\r\n    console.log(formData)\r\n    httpAction(httpurl,formData,method).then((res)=>{\r\n      if(res.success){\r\n        that.$message.success(res.message);\r\n        //告诉父级组件我已关闭  关闭后刷新父级列表\r\n        that.$emit('submit',true);\r\n      }else{\r\n        that.$message.warning(res.message);\r\n      }\r\n    }).finally(() => {\r\n      that.confirmLoading = false;\r\n      that.close();\r\n    })\r\n\r\n\r\n\r\n  }\r\n})\r\n},\r\nhandleCancel () {\r\nthis.close()\r\n},\r\n\r\n\r\n}\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.boxLists{\r\n  /*background: red;*/\r\n  display: flex;\r\n  align-items: center;\r\n  flex-wrap:wrap;\r\n  /*flex-direction: row-reverse;*/\r\n  .itemBox{\r\n    display: flex;\r\n    align-items: center;\r\n    margin-top: 20px;\r\n  }\r\n}\r\n\r\n  .step:hover{\r\n    cursor: pointer;\r\n  }\r\n</style>"]}]}
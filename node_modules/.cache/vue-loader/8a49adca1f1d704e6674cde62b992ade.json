{"remainingRequest":"D:\\project\\workspaceideaIU\\jeecg-boot\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\workspaceideaIU\\jeecg-boot\\ant-design-vue-jeecg\\src\\views\\system\\modules\\DataLogModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\workspaceideaIU\\jeecg-boot\\ant-design-vue-jeecg\\src\\views\\system\\modules\\DataLogModal.vue","mtime":1568535262000},{"path":"D:\\project\\workspaceideaIU\\jeecg-boot\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1568345883000},{"path":"D:\\project\\workspaceideaIU\\jeecg-boot\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js","mtime":1568345858000},{"path":"D:\\project\\workspaceideaIU\\jeecg-boot\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1568345883000},{"path":"D:\\project\\workspaceideaIU\\jeecg-boot\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js","mtime":1568345696000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { getAction } from '@/api/manage'\nimport DataLogCompareModal from './DataLogCompareModal'\nexport default {\n  name: 'DataLogModal',\n  components: { DataLogCompareModal },\n  dataId1:'',\n  dataId2: '',\n  dataTable1:'',\n  dataID3:'',\n\n  data () {\n    return {\n      modalWidth:700,\n      modaltoggleFlag:true,\n      confirmDirty: false,\n      title:\"操作\",\n      visible: false,\n      model: {},\n      confirmLoading: false,\n      headers:{},\n      form:this.$form.createForm(this),\n      url: {\n        queryDataVerListUrl:\"/sys/dataLog/queryDataVerList\",\n      },\n      DataVersionList:[],\n    }\n  },\n  created () {\n  },\n  methods: {\n    addModal(records){\n      const dataTable = records[0].dataTable\n      const dataId = records[0].dataId;\n      const dataVersion1 = records[0].dataVersion;\n      const dataVersion2 = records[1].dataVersion;\n      this.dataId1 = records[0].id;\n      this.dataId2 = records[1].id;\n      this.dataTable1 = records[0].dataTable\n      this.dataID3 =  records[0].dataId\n      this.initDataVersionList();\n      this.form.resetFields();\n      this.visible = true;\n      this.$nextTick(() => {\n        this.form.setFieldsValue({dataTale:dataTable,dataId:dataId,dataVersion1:dataVersion1,dataVersion2:dataVersion2});\n      });\n    },\n    handleOk () {\n      this.close();\n      this.$refs.modal.compareModal(this.dataId1  ,this.dataId2);\n      this.$refs.modal.title=\"数据比较\";\n    },\n    handleCancel(){\n      this.close()\n    },\n    handleSubmit(){\n    },\n    close () {\n      this.$emit('close');\n      this.visible = false;\n      this.disableSubmit = false;\n    },\n    modalFormOk () {\n    },\n    initDataVersionList(){\n      let that = this;\n      getAction(that.url.queryDataVerListUrl,{dataTable:this.dataTable1,dataId:this.dataID3}).then((res)=>{\n        if(res.success){\n          this.DataVersionList = res.result;\n        }else{\n          this.DataVersionList=[];\n          this.dataId1 = '',\n          this.dataId2='',\n          console.log(res.message);\n\n        }\n      });\n    },\n    handleChange1(value) {\n      this.dataId1 = value;\n    },\n    handleChange2(value) {\n      this.dataId2 = value;\n    },\n    handleTableBlur(e){\n      this.dataTable1 = e.target.value;\n      this.initDataVersionList();\n    },\n    handleIdBlur(e){\n      this.dataID3 = e.target.value;\n      this.initDataVersionList();\n    }\n  }\n}\n",{"version":3,"sources":["DataLogModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DataLogModal.vue","sourceRoot":"src/views/system/modules","sourcesContent":["<template>\r\n  <div>\r\n    <a-modal\r\n      :width=\"modalWidth\"\r\n      :visible=\"visible\"\r\n      title=\"数据对比窗口\"\r\n      :confirmLoading=\"confirmLoading\"\r\n      @ok=\"handleOk\"\r\n      @cancel=\"handleCancel\"\r\n      cancelText=\"取消\">\r\n\r\n      <a-spin :spinning=\"confirmLoading\">\r\n        <a-form @submit=\"handleSubmit\" :form=\"form\" class=\"form\">\r\n          <a-row class=\"form-row\" :gutter=\"24\">\r\n            <a-col :md=\"12\" :sm=\"8\">\r\n              <a-form-item label=\"数据库表名\"  :label-col=\"{ span: 6 }\" :wrapper-col=\"{ span: 15 }\">\r\n                <a-input placeholder=\"请输入数据库表名\" v-decorator=\"[ 'dataTale', {}]\" @blur=\"handleTableBlur\" disabled/>\r\n              </a-form-item>\r\n            </a-col>\r\n\r\n            <a-col :md=\"12\" :sm=\"8\">\r\n              <a-form-item label=\"数据ID\"  :label-col=\"{ span: 5 }\" :wrapper-col=\"{ span: 15 }\">\r\n                <a-input placeholder=\"请输入数据ID\" v-decorator=\"[ 'dataId', {}]\" @blur=\"handleIdBlur\" disabled/>\r\n              </a-form-item>\r\n            </a-col>\r\n          </a-row>\r\n\r\n          <a-row class=\"form-row\" :gutter=\"24\">\r\n            <a-col :md=\"12\" :sm=\"8\">\r\n              <a-form-item label=\"版本号1\"  :label-col=\"{ span: 6 }\" :wrapper-col=\"{ span: 15 }\">\r\n                <a-select placeholder=\"请选择版本号\" v-decorator=\"[ 'dataVersion1', {}]\" @change=\"handleChange1\">\r\n                  <a-select-option v-for=\"(log,logindex) in DataVersionList\" :key=\"logindex.toString()\" :value=\"log.id\">\r\n                    {{ log.dataVersion }}\r\n                  </a-select-option>\r\n                </a-select>\r\n              </a-form-item>\r\n            </a-col>\r\n            <a-col :md=\"12\" :sm=\"8\">\r\n              <a-form-item label=\"版本号2\"  :label-col=\"{ span: 5 }\" :wrapper-col=\"{ span: 15 }\">\r\n                <a-select placeholder=\"请选择版本号\" v-decorator=\"[ 'dataVersion2', {}]\" @change=\"handleChange2\">\r\n                  <a-select-option v-for=\"(log,logindex) in DataVersionList\" :key=\"logindex.toString()\" :value=\"log.id\">\r\n                    {{ log.dataVersion }}\r\n                  </a-select-option>\r\n                </a-select>\r\n              </a-form-item>\r\n            </a-col>\r\n          </a-row>\r\n        </a-form>\r\n      </a-spin>\r\n      <data-log-compare-modal ref=\"modal\" @ok=\"modalFormOk\" ></data-log-compare-modal>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import { getAction } from '@/api/manage'\r\n  import DataLogCompareModal from './DataLogCompareModal'\r\n  export default {\r\n    name: 'DataLogModal',\r\n    components: { DataLogCompareModal },\r\n    dataId1:'',\r\n    dataId2: '',\r\n    dataTable1:'',\r\n    dataID3:'',\r\n\r\n    data () {\r\n      return {\r\n        modalWidth:700,\r\n        modaltoggleFlag:true,\r\n        confirmDirty: false,\r\n        title:\"操作\",\r\n        visible: false,\r\n        model: {},\r\n        confirmLoading: false,\r\n        headers:{},\r\n        form:this.$form.createForm(this),\r\n        url: {\r\n          queryDataVerListUrl:\"/sys/dataLog/queryDataVerList\",\r\n        },\r\n        DataVersionList:[],\r\n      }\r\n    },\r\n    created () {\r\n    },\r\n    methods: {\r\n      addModal(records){\r\n        const dataTable = records[0].dataTable\r\n        const dataId = records[0].dataId;\r\n        const dataVersion1 = records[0].dataVersion;\r\n        const dataVersion2 = records[1].dataVersion;\r\n        this.dataId1 = records[0].id;\r\n        this.dataId2 = records[1].id;\r\n        this.dataTable1 = records[0].dataTable\r\n        this.dataID3 =  records[0].dataId\r\n        this.initDataVersionList();\r\n        this.form.resetFields();\r\n        this.visible = true;\r\n        this.$nextTick(() => {\r\n          this.form.setFieldsValue({dataTale:dataTable,dataId:dataId,dataVersion1:dataVersion1,dataVersion2:dataVersion2});\r\n        });\r\n      },\r\n      handleOk () {\r\n        this.close();\r\n        this.$refs.modal.compareModal(this.dataId1  ,this.dataId2);\r\n        this.$refs.modal.title=\"数据比较\";\r\n      },\r\n      handleCancel(){\r\n        this.close()\r\n      },\r\n      handleSubmit(){\r\n      },\r\n      close () {\r\n        this.$emit('close');\r\n        this.visible = false;\r\n        this.disableSubmit = false;\r\n      },\r\n      modalFormOk () {\r\n      },\r\n      initDataVersionList(){\r\n        let that = this;\r\n        getAction(that.url.queryDataVerListUrl,{dataTable:this.dataTable1,dataId:this.dataID3}).then((res)=>{\r\n          if(res.success){\r\n            this.DataVersionList = res.result;\r\n          }else{\r\n            this.DataVersionList=[];\r\n            this.dataId1 = '',\r\n            this.dataId2='',\r\n            console.log(res.message);\r\n\r\n          }\r\n        });\r\n      },\r\n      handleChange1(value) {\r\n        this.dataId1 = value;\r\n      },\r\n      handleChange2(value) {\r\n        this.dataId2 = value;\r\n      },\r\n      handleTableBlur(e){\r\n        this.dataTable1 = e.target.value;\r\n        this.initDataVersionList();\r\n      },\r\n      handleIdBlur(e){\r\n        this.dataID3 = e.target.value;\r\n        this.initDataVersionList();\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}
{"remainingRequest":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xxm\\work\\jd\\fore\\src\\views\\oaBus\\TestStandardList.vue?vue&type=style&index=0&id=e51a19f0&lang=scss&scoped=true&","dependencies":[{"path":"C:\\xxm\\work\\jd\\fore\\src\\views\\oaBus\\TestStandardList.vue","mtime":1577014638754},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\css-loader\\index.js","mtime":1570780111199},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1570779225817},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\postcss-loader\\src\\index.js","mtime":1570780438513},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\sass-loader\\lib\\loader.js","mtime":1570780529612},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js","mtime":1570779225726}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.ant-avatar-lg {\n  width: 48px;\n  height: 48px;\n  line-height: 48px;\n}\n\n.list-content-item {\n  color: rgba(0, 0, 0, .45);\n  display: inline-block;\n  vertical-align: middle;\n  font-size: 14px;\n  margin-left: 40px;\n  span {\n    line-height: 20px;\n  }\n  p {\n    margin-top: 4px;\n    margin-bottom: 0;\n    line-height: 22px;\n  }\n}\n",{"version":3,"sources":["TestStandardList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiMA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TestStandardList.vue","sourceRoot":"src/views/oaBus","sourcesContent":["<template>\r\n  <div class=\"table-page-search-wrapper\">\r\n    <a-card bordered=\"false\">\r\n      <a-form layout=\"inline\" style=\"text-align: center; margin-top: 20px\">\r\n        <a-row :gutter=\"24\">\r\n          <a-col :md=\"8\" :sm=\"24\" style=\"margin-left:385px;\">\r\n              <a-select\r\n                mode=\"combobox\"\r\n                labelInValue\r\n                placeholder=\"公文检索\"\r\n                style=\"width: 100%\"\r\n                @search=\"fetchUser\"\r\n                @change=\"handleChange\"\r\n                :showArrow=\"false\"\r\n                :allowClear=\"true\"\r\n                :defaultActiveFirstOption=\"false\"\r\n                :notFoundContent=\"fetching ? undefined : null\"\r\n              >\r\n                <a-spin v-if=\"fetching\" slot=\"notFoundContent\" size=\"small\" />\r\n                <a-select-option v-for=\"d in data\" :key=\"d.text\">{{d.text}}</a-select-option>\r\n            </a-select>\r\n          </a-col>\r\n\r\n          <a-col :md=\"1\" :sm=\"24\" >\r\n            <span class=\"table-page-search-submitButtons\" :style=\"advanced && { overflow: 'hidden' } || {} \">\r\n              <a-button type=\"primary\" icon=\"search\" @click=\"getPgSearchList\">查询</a-button>\r\n            </span>\r\n          </a-col>\r\n        </a-row>\r\n        <!--<a-row :gutter=\"48\">-->\r\n        <!--<a-col :md=\"24\" :sm=\"24\" >-->\r\n        <!--<span class=\"table-page-search-submitButtons\" :style=\"advanced && { overflow: 'hidden' } || {} \">-->\r\n        <!--<a-button type=\"primary\" @click=\"getPgSearchList\">查询</a-button>-->\r\n        <!--</span>-->\r\n        <!--</a-col>-->\r\n        <!--</a-row>-->\r\n      </a-form>\r\n\r\n\r\n\r\n      <a-tabs defaultActiveKey=\"0\">\r\n        <a-tab-pane :tab=\"item.sname\" v-for=\"(item,index) in getPageList\" :key=\"index\">\r\n\r\n\r\n          <a-list size=\"large\" :pagination=\"pagination\">\r\n            <a-list-item :key=\"index\" v-for=\"(item, index) in dataSource[index]\">\r\n              <a-list-item-meta>\r\n                <a slot=\"title\" v-html=\"item.title\"></a>\r\n                <p slot=\"description\" v-html=\"item.description\"></p>\r\n              </a-list-item-meta>\r\n            </a-list-item>\r\n          </a-list>\r\n\r\n\r\n        </a-tab-pane>\r\n      </a-tabs>\r\n\r\n\r\n    </a-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import HeadInfo from '@/components/tools/HeadInfo'\r\n  import { getAction, postAction } from '@/api/manage'\r\n  // import jsonp from 'fetch-jsonp';\r\n  import querystring from 'querystring';\r\n  import debounce from 'lodash/debounce';\r\n\r\n  export default {\r\n    name: \"TestStandardList\",\r\n    components: {\r\n      HeadInfo\r\n    },\r\n    data() {\r\n      this.lastFetchId = 0;\r\n      this.fetchUser = debounce(this.fetchUser, 800);\r\n      return {\r\n        data: [],\r\n        fetching: false,\r\n        getPageList: [\r\n          {\r\n            sname:'全文检索'\r\n          },\r\n          {\r\n            sname:'附件检索'\r\n          }\r\n        ],\r\n        search: '',\r\n        textData:[],\r\n        attachmentData:[],\r\n        dataSource: [],\r\n        pagination: {\r\n          current: 1,\r\n          pageSize: 10,\r\n          pageSizeOptions: ['5', '10', '15', '20', '25', '30'],\r\n          showTotal: (total, range) => {\r\n            return range[0] + \"/\" + range[1] + \"共\" + total + \"条\"\r\n          },\r\n          showQuickJumper: true,\r\n          showSizeChanger: true,\r\n          total: 0,\r\n        },\r\n      }\r\n    },\r\n    created() {\r\n\r\n    },\r\n    destroyed(){\r\n      this.dataDestroy();\r\n    },\r\n    methods: {\r\n      fetchUser(value) {\r\n        // console.log('fetching user', value);\r\n        this.lastFetchId += 1;\r\n        const fetchId = this.lastFetchId;\r\n        this.data = [];\r\n        this.fetching = true;\r\n        let url = \"/oaEs/oaelasticsearch/getsearch\";\r\n        postAction(url, {keyWord: value}).then((res) => {\r\n            if (fetchId !== this.lastFetchId) {\r\n              // for fetch callback order\r\n              return;\r\n            }\r\n\r\n          for(let i = 0;i<res.result.length;i++){\r\n            this.data.push({\r\n              text: res.result[i].keyWord,\r\n              value: res.result[i].id\r\n            });\r\n          }\r\n            this.fetching = false;\r\n          });\r\n      },\r\n      handleChange(value) {\r\n        this.search = value.key;\r\n        Object.assign(this, {\r\n          value,\r\n          data: [],\r\n          fetching: false,\r\n        });\r\n      },\r\n      getTextSearch(iBMId) {\r\n        console.log(this.search)\r\n        this.iBMId = iBMId;\r\n        let url = \"/oaEs/oaelasticsearch/list\";\r\n        postAction(url, {keyWord:this.search}).then((res) => {\r\n\r\n          for (let i = 0; i < res.result.records.length; i++) {\r\n            this.textData.push({\r\n              title: res.result.records[i].s_cur_proc_name,\r\n              description: res.result.records[i].s_title,\r\n            });\r\n          }\r\n        });\r\n      },\r\n      getAttachmentSearch(iBMId) {\r\n        this.iBMId = iBMId;\r\n        let url = \"/oaEs/oaelasticsearch/oafile\";\r\n        postAction(url, {keyWord:this.search}).then((res) => {\r\n\r\n          for (let i = 0; i < res.result.records.length; i++) {\r\n            this.attachmentData.push({\r\n              title: res.result.records[i].s_file_name,\r\n              description: res.result.records[i].s_title,\r\n            });\r\n          }\r\n        });\r\n      },\r\n      getPgSearchList(iBMId) {\r\n\r\n        for(let i=0;i<this.dataSource.length;i++){\r\n          this.dataSource[i].length=0;\r\n        }\r\n\r\n        this.getTextSearch(iBMId);\r\n\r\n        this.getAttachmentSearch(iBMId);\r\n\r\n        this.dataSource.push(this.textData,this.attachmentData);\r\n\r\n      },\r\n     dataDestroy(){\r\n        this.pagination = [];\r\n        this.textData = [],\r\n        this.attachmentData = [],\r\n        this.dataSource = [];\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .ant-avatar-lg {\r\n    width: 48px;\r\n    height: 48px;\r\n    line-height: 48px;\r\n  }\r\n\r\n  .list-content-item {\r\n    color: rgba(0, 0, 0, .45);\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n    font-size: 14px;\r\n    margin-left: 40px;\r\n    span {\r\n      line-height: 20px;\r\n    }\r\n    p {\r\n      margin-top: 4px;\r\n      margin-bottom: 0;\r\n      line-height: 22px;\r\n    }\r\n  }\r\n</style>"]}]}
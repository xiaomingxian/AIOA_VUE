{"remainingRequest":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xxm\\work\\jd\\fore\\src\\views\\buttons\\SuggesttionModal.vue?vue&type=style&index=0&id=013fb27d&lang=less&scoped=true&","dependencies":[{"path":"C:\\xxm\\work\\jd\\fore\\src\\views\\buttons\\SuggesttionModal.vue","mtime":1578292730214},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\css-loader\\index.js","mtime":1570780111199},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1570779225817},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\postcss-loader\\src\\index.js","mtime":1570780438513},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\less-loader\\dist\\cjs.js","mtime":1570780454546},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1570779194464},{"path":"C:\\xxm\\work\\jd\\fore\\node_modules\\vue-loader\\lib\\index.js","mtime":1570779225726}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.box {\n  width: 100%;\n  height: auto;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: -20px;\n\n  .isreplace {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n  }\n}\n\n",{"version":3,"sources":["SuggesttionModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwLA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"SuggesttionModal.vue","sourceRoot":"src/views/buttons","sourcesContent":["<template>\r\n  <a-modal\r\n    :title=\"title\"\r\n    :width=\"800\"\r\n    :visible=\"visible\"\r\n    :confirmLoading=\"confirmLoading\"\r\n    okText=\"提交意见\"\r\n    @ok=\"handleOk\"\r\n    @cancel=\"handleCancel\"\r\n    cancelText=\"关闭\">\r\n\r\n    <div class=\"box\">\r\n      <div class=\"isreplace\">\r\n        <span style=\"font-weight: bolder\">是否替换：</span>\r\n        <a>\r\n          <a-switch checkedChildren=\"追加\" @change=\"getchangeval\" unCheckedChildren=\"替换\" defaultChecked v-model=\"routeSwitch\"/>\r\n        </a>\r\n        <span style=\"margin-left: 50px;font-weight: bolder\" >快捷意见</span>\r\n        <a-select v-model=\"selectedModel\" style=\"width: 260px;margin-bottom:7px; margin-left: 15px\" @change=\"selectval\"\r\n                  v-decorator=\"[ 'ibusModelId', {}]\">\r\n          <!--<a-select-option v-for=\"(item,index) in modelData\" :key=\"index\" :value=\"item.iid\">{{item.sname}}</a-select-option>-->\r\n          <a-select-option :value=\"item.id\" v-for=\"(item,index) in suggesttionLists\" :key=\"index\">{{item.scontent}}\r\n          </a-select-option>\r\n        </a-select>\r\n      </div>\r\n      <!--<a-button @click=\"toModal\" type=\"primary\" icon=\"plus\">定制个人意见</a-button>-->\r\n    </div>\r\n\r\n    <div style=\"margin-top: 30px\">\r\n    <a-textarea style=\"font-weight: bolder\" :rows=\"3\" placeholder=\"请填选意见\" v-model=\"areatext\"></a-textarea>\r\n    </div>\r\n    <create-user-opinion-modal ref=\"userOpinionForm\"></create-user-opinion-modal>\r\n\r\n  </a-modal>\r\n</template>\r\n\r\n<script>\r\n  import {httpAction,postAction} from '@/api/manage'\r\n  import pick from 'lodash.pick'\r\n  import {getAction} from '@/api/manage'\r\n  import CreateUserOpinionModal from '../buttons/CreateUserOpinionModal'\r\n\r\n  export default {\r\n    name: \"SuggesttionModal\",\r\n    components: {\r\n      CreateUserOpinionModal\r\n    },\r\n    data() {\r\n      return {\r\n        selectedModel: '',\r\n        title: \"操作\",\r\n        areatext: '',\r\n        visible: false,\r\n        model: {},\r\n        labelCol: {\r\n          xs: {span: 24},\r\n          sm: {span: 5},\r\n        },\r\n        wrapperCol: {\r\n          xs: {span: 24},\r\n          sm: {span: 16},\r\n        },\r\n        backData: {},\r\n        confirmLoading: false,\r\n        routeSwitch: true,\r\n        opinionlist: [],\r\n        suggesttionLists: [\r\n          {id: '0', scontent: '请批示'},\r\n          {id: '1', scontent: '请审签'},\r\n          {id: '2', scontent: '不同意'},\r\n          {id: '3', scontent: '阅'},\r\n          {id: '4', scontent: '同意'},\r\n        ],\r\n        sUserId: 0,\r\n        form: this.$form.createForm(this),\r\n        validatorRules: {\r\n          // iId:{rules: [{ required: true, message: '请输入主键id!' }]},\r\n        },\r\n        url: {\r\n          add: \"/button/button/putOpinion\",\r\n          list: '/sys_user_opinion/sysUserOpinion/getUserOpinion'\r\n        },\r\n      }\r\n    },\r\n    created() {\r\n      // this.opinionList();\r\n      // const suggesttionLists = [\r\n      //   {id: '0', scontent: '请批示'},\r\n      //   {id: '1', scontent: '请审签'},\r\n      //   {id: '2', scontent: '不同意'},\r\n      //   {id: '3', scontent: '阅'},\r\n      //   {id: '4', scontent: '同意'},\r\n      // ];\r\n\r\n      // let url = this.url.list;\r\n      // getAction(url, {sUserId: 'e9ca23d68d884d4ebb19d07889727dae'}).then((res) => {\r\n      //   // this.opinionlist = res.result;\r\n      //   // console.log(res.result);\r\n      //   res.result.map((item, index) => {\r\n      //     // console.log(item.scontent);\r\n      //     // console.log(item.scontent);\r\n      //     // console.log(index);\r\n      //     suggesttionLists.push({id: suggesttionLists.length, scontent: item.scontent})\r\n      //   });\r\n      //   this.suggesttionLists = suggesttionLists;\r\n      //   console.log(this.suggesttionLists)\r\n      // });\r\n    },\r\n\r\n    methods: {\r\n      suggest(record) {\r\n        this.backData = record;\r\n        this.sUserId = this.backData.i_user_id;\r\n        this.visible = true;\r\n        this.opinionList();\r\n        this.getUserWriteOpinion();\r\n      },\r\n      getUserWriteOpinion() {\r\n        let param = {};\r\n        param.i_opinion_set_id = this.backData.i_opinion_set_id;\r\n        param.i_bus_function_id = this.backData.i_bus_function_id;\r\n        param.i_busdata_id = this.backData.i_busdata_id;\r\n        param.i_user_id = this.backData.i_user_id;\r\n        param.s_task_id = this.backData.s_task_id;\r\n        param.s_taskdef_key = this.backData.s_taskdef_key;\r\n        param.table = this.backData.table;\r\n        postAction('oaBus/dynamic/queryById',param).then(res=>{\r\n          if (res.success && res.result !=null){\r\n            this.areatext = res.result.s_opinion;\r\n          }\r\n        })\r\n      },\r\n      opinionList() {\r\n        let url = this.url.list;\r\n        getAction(url, {sUserId: this.sUserId}).then((res) => {\r\n          res.result.map((item, index) => {\r\n            // console.log(item.scontent);\r\n            // console.log(item.scontent);\r\n            // console.log(index);\r\n            this.suggesttionLists.push({id: this.suggesttionLists.length, scontent: item.scontent})\r\n          });\r\n          // this.suggesttionLists = suggesttionLists;\r\n          // console.log(this.suggesttionLists)\r\n          // this.opinionlist = res.result;\r\n        })\r\n      },\r\n      close() {\r\n        this.$emit('close');\r\n        this.visible = false;\r\n        this.routeSwitch = true;\r\n      },\r\n      handleOk() {\r\n\r\n        this.$emit('saveOption', this.areatext)\r\n        this.close()\r\n\r\n      },\r\n      handleCancel() {\r\n        this.close()\r\n      },\r\n      //获取是否追加\r\n      getchangeval(e) {\r\n        console.log(e);\r\n        this.routeSwitch = e;\r\n      },\r\n      selectval(e) {\r\n        if (this.routeSwitch) {\r\n          this.areatext += this.suggesttionLists[e].scontent + ' ';\r\n        } else {\r\n          this.areatext = '';\r\n          this.areatext = this.suggesttionLists[e].scontent;\r\n        }\r\n      },\r\n      toModal: function () {\r\n        this.$refs.userOpinionForm.show();\r\n        this.$refs.userOpinionForm.title = \"定制个人意见\";\r\n        this.$refs.userOpinionForm.disableSubmit = false;\r\n      },\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .box {\r\n    width: 100%;\r\n    height: auto;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    margin-bottom: -20px;\r\n\r\n    .isreplace {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: space-between;\r\n    }\r\n  }\r\n\r\n</style>"]}]}